import M from"./ServerMessage.EFQMOwoZ.js";import{u as P,e as w,b as $,P as S,v as A,g as o,h as m,i as a,t as n,l as r,w as B,Q as C,K as N,m as h,p as V,j as u}from"./index.sP6fhsqN.js";import{F as x}from"./vee-validate.esm.2kXgdFia.js";import{c as D,a as j,e as q}from"./index.esm.DHYHwGJ4.js";import{_ as E}from"./VTextInput.EPCajChY.js";import{C as F}from"./ClipLoader._89zL49D.js";import"./VTooltip.kcvohVRA.js";/* empty css                                                   */const I={class:"modal modal-lg hide",id:"addPaymentMethodModal",tabindex:"-1","aria-labelledby":"Add Payment Method","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},O={class:"modal-dialog modal-dialog-centered"},U={class:"modal-content"},z={class:"modal-header"},J={key:0,class:"modal-title"},K={key:1,class:"modal-title"},L={class:"modal-body"},Q={class:"row"},R={class:"col-6"},G={class:"col-md-6"},H={class:"form-field mt-4 pt-3"},T={class:"form-check form-switch"},W={class:"form-check-label",for:"status"},X={key:0,class:"py-3"},Y={class:"mt-2 text-end"},Z=["disabled"],ee={key:1,class:"pt-0"},se={key:2,class:"pt-0"},re={__name:"AddPaymentMethod",props:{show_add_payment_method_modal:Boolean,edit_data:{type:[Array,Object]}},emits:["closeAddPaymentMethodModal"],setup(y,{emit:v}){const{t:i}=P(),c={server_messages:{type:"",messages:""},is_saving:!1,is_listing:!1,slack:"",payment_method_name:"",status:!0},e=w({...c});$();const g=D({payment_method_name:j().required(i("name is required",{name:i("Payment Method Name")})).min(3,i("name must be at least n characters",{name:i("Payment Method Name"),number:3})),status:q().label("Status")}),f=v,_=y;S(_,"edit_data");function p(){document.getElementById("frmPaymentMethod").reset(),k(),document.getElementById("close_btn").click(),f("closeAddPaymentMethodModal")}A(()=>_.edit_data,s=>{s&&(e.slack=s.slack,e.payment_method_name=s.name,e.status=s.status==1)});async function b(){e.is_saving=!0;var s=new FormData;s.append("payment_method_name",e.payment_method_name),s.append("status",e.status),s.append("slack",e.slack);var d=e.slack!=""&&e.slack!=null?"/api/payment_method/update":"/api/payment_method/save";await axios.post(d,s).then(t=>{if(t.data.status_code==200)toast.success(t.data.msg),e.server_messages.type="",e.server_messages.messages="",e.is_saving=!1,p();else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(t.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=t.data.msg}e.is_saving=!1}}).catch(t=>{e.server_messages.type="error",e.server_messages.messages=t,e.is_saving=!1,console.log(t)})}function k(){Object.assign(e,c)}return(s,d)=>{const t=M;return o(),m("div",I,[a("div",O,[a("div",U,[a("div",z,[e.slack==""||e.slack==null?(o(),m("h5",J,n(s.$t("Add Payment Method")),1)):(o(),m("h5",K,n(s.$t("Update Payment Method")),1)),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:p,id:"close_btn"})]),a("div",L,[r(u(x),{"validation-schema":u(g),onSubmit:b,enctype:"multipart/form-data","initial-values":e,id:"frmPaymentMethod"},{default:B(()=>[a("div",Q,[a("div",R,[r(E,{type:"text",name:"payment_method_name",modelValue:e.payment_method_name,"onUpdate:modelValue":d[0]||(d[0]=l=>e.payment_method_name=l),label:"Payment Method Name",required:!0},null,8,["modelValue"])]),a("div",G,[a("div",H,[a("div",T,[N(a("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status",checked:"","onUpdate:modelValue":d[1]||(d[1]=l=>e.status=l)},null,512),[[C,e.status]]),a("label",W,n(s.$t("Active")),1)])])])]),e.server_messages.messages!=""?(o(),m("div",X,[r(t,{server_messages:e.server_messages},null,8,["server_messages"])])):h("",!0),a("div",Y,[a("button",{type:"submit",class:"btn btn-primary",disabled:e.is_saving},[e.is_saving?(o(),V(F,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):h("",!0),e.is_saving?(o(),m("span",ee,n(s.$t("Saving...")),1)):(o(),m("span",se,n(s.$t("Save")),1))],8,Z)])]),_:1},8,["validation-schema","initial-values"])])])])])}}};export{re as default};
