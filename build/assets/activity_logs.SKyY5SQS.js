import{u as W,r as n,e as A,o as X,v as D,g as d,p as U,w as L,f as q,i as e,l as c,k as Y,t as a,j as l,K as Z,N as ee,h as u,F as te,x as oe,m as h,O as se,q as E,_ as N}from"./index.sP6fhsqN.js";import{D as ae}from"./DefaultLayout.K5Bh9Jz_.js";import{_ as le}from"./ListingSkeleton.0g9v9IYA.js";import{_ as ne}from"./VMultiSelect.pXBL2AV1.js";import{_ as ie}from"./PaginateLimit.T5jDCI_N.js";import{u as de}from"./global.AEIEVpKW.js";import"./ClipLoader._89zL49D.js";/* empty css                                                   */import"./vee-validate.esm.2kXgdFia.js";const ce={class:"header-nav-wrap"},_e={class:"row align-items-center"},re={class:"col-auto"},ue={class:"header-back-link"},me={class:"col-auto"},ge={class:"fw-bold"},ve={class:"content"},pe={class:"page-heading"},he={class:"row align-items-end justify-content-between"},ye={class:"col-md order-2 order-md-1"},fe={class:"row g-3"},be={class:"col-6 col-md-4 col-lg-3"},we={class:"col-6 col-md-4 col-lg-3"},ke={class:"col-6 col-md-4 col-lg-3"},Ae={class:"col-md-auto order-1 order-md-2 mb-3 mb-md-0"},Le={class:"row"},Ve={class:"col-lg-4"},Ce={class:"form-field page-heading-search-field mb-0"},Me={class:"field-icon"},$e=["placeholder"],Se={class:"icon"},De={class:"col text-end"},Ue={key:1,class:"table-responsive"},qe={class:"table table-list-data table-hover"},Ee={class:"bg-light"},Ne={scope:"col",width:"60%"},Pe={scope:"col",width:"10%"},Ie={scope:"col",width:"15%"},je={scope:"col",width:"15%"},xe=["onClick"],Be=["onClick"],Te={key:0,class:"badge badge-success"},Fe={key:1,class:"badge badge-danger"},Oe={key:2,class:"badge badge-warning"},Re={key:3,class:"badge badge-primary"},Ge=["onClick"],Ke=["onClick"],ze={key:1},He={class:"text-center py-3",colspan:"7"},Je={class:"data-footer"},Qe={class:"row align-items-center justify-content-md-between justify-content-center g-3"},We={class:"col-auto"},Xe={class:"col-auto"},dt={__name:"activity_logs",setup(Ye){const{action_types:P,section_types:I}=de(),{t:m}=W(),j=E(()=>N(()=>import("./AddActivityLog.uum8SQie.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),x=E(()=>N(()=>import("./ViewActivityLog.by8gtC9O.js"),__vite__mapDeps([10,2,3]))),V=n(!1),B={server_messages:{type:"",messages:""},is_listing:!1,search_query:n("")},T=m("Search by name, type.."),i=A({...B});X(()=>{g(),O()}),D(()=>i.search_query,_.debounce(()=>{g()},500));const F=A({user:n(""),action_type:n(""),section:n("")}),r=A({...F});D(r,()=>{g()},{deep:!0});const y=n([]),f=n([]);async function g(s=1){i.is_listing=!0,await axios.get("/api/v2/activity_logs",{params:{page:s,paginate_limit:M.value,search_query:i.search_query,filters:r}}).then(o=>{y.value=o.data.data.data,f.value=o.data.data.pagination,i.is_listing=!1}).catch(o=>{i.server_messages.type="error",i.server_messages.messages=o,i.is_listing=!1,console.log(o)})}const C=n([]);async function O(){let s=await axios.get("api/v2/users/dropdown");s=s.data.data,_.forEach(s,o=>{let p={key:o.id,value:o==null?void 0:o.name};C.value.push(p)})}const M=n();async function R(s){M.value=s,await g()}const b=n(!1),$=n([]);function G(){V.value=!1,g()}function v(s){b.value=!0,$.value=s}function K(){b.value=!1}return(s,o)=>{const p=q("Icon"),z=q("router-link"),w=ne,H=le,J=ae;return d(),U(J,null,{subheader:L(()=>[e("div",ce,[e("div",_e,[e("div",re,[e("div",ue,[c(z,{class:"text-primary",to:"/settings"},{default:L(()=>[c(p,{icon:"fa6-solid:chevron-left"}),Y(" "+a(s.$t("Settings")),1)]),_:1})])]),e("div",me,[e("h5",ge,a(s.$t("Activity Logs")),1)])])])]),default:L(()=>[e("div",ve,[e("div",pe,[e("div",he,[e("div",ye,[e("div",fe,[e("div",be,[c(w,{name:"user",label:l(m)("Users"),placeholder:l(m)("Select User"),text:"value",value:"key",options:C.value,modelValue:r.user,"onUpdate:modelValue":o[0]||(o[0]=t=>r.user=t),mode:"single",no_class:!1,height_sm:!0},null,8,["label","placeholder","options","modelValue"])]),e("div",we,[c(w,{modelValue:r.action_type,"onUpdate:modelValue":o[1]||(o[1]=t=>r.action_type=t),name:"action_types",text:"value",value:"key",mode:"single",options:l(P),no_class:!1,height_sm:!0,label:l(m)("Action"),placeholder:l(m)("Select Action")},null,8,["modelValue","options","label","placeholder"])]),e("div",ke,[c(w,{modelValue:r.section,"onUpdate:modelValue":o[2]||(o[2]=t=>r.section=t),name:"action_types",text:"key",value:"value",mode:"single",options:l(I),no_class:!1,height_sm:!0,label:l(m)("Section"),placeholder:l(m)("Select Section")},null,8,["modelValue","options","label","placeholder"])])])]),e("div",Ae,[e("div",Le,[e("div",Ve,[e("div",Ce,[e("div",Me,[Z(e("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:l(T),"onUpdate:modelValue":o[3]||(o[3]=t=>i.search_query=t)},null,8,$e),[[ee,i.search_query]]),e("div",Se,[c(p,{icon:"fa6-solid:magnifying-glass"})])])])]),e("div",De,[e("a",{href:"#",class:"btn btn-sm btn-light-primary2","data-bs-toggle":"modal",onClick:o[4]||(o[4]=(...t)=>s.openAddActivityLogModal&&s.openAddActivityLogModal(...t)),"data-bs-target":"#addActivityLogModal"}," + "+a(s.$t("New Activity Log")),1)])])])])]),i.is_listing?(d(),U(H,{key:0})):(d(),u("div",Ue,[e("table",qe,[e("thead",Ee,[e("tr",null,[e("th",Ne,a(s.$t("Description")),1),e("th",Pe,a(s.$t("Event")),1),e("th",Ie,a(s.$t("User")),1),e("th",je,a(s.$t("Created At")),1)])]),e("tbody",null,[y.value!=""?(d(!0),u(te,{key:0},oe(y.value,(t,Q)=>{var S;return d(),u("tr",{key:Q},[e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewActivityLogModal",onClick:k=>v(t)},a(t.description),9,xe),e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewActivityLogModal",onClick:k=>v(t)},[t.event=="created"?(d(),u("span",Te,a(t.event),1)):h("",!0),t.event=="deleted"?(d(),u("span",Fe,a(t.event),1)):h("",!0),t.event=="updated"?(d(),u("span",Oe,a(t.event),1)):h("",!0),t.event=="custom"?(d(),u("span",Re,a(t.event),1)):h("",!0)],8,Be),e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewActivityLogModal",onClick:k=>v(t)},a((S=t.user)==null?void 0:S.name),9,Ge),e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewActivityLogModal",onClick:k=>v(t)},a(t.time_ago),9,Ke)])}),128)):(d(),u("tr",ze,[e("td",He,a(s.$t("No Data Found")),1)]))])])])),e("div",Je,[e("div",Qe,[e("div",We,[c(ie,{onPaginate_limit_update:R,pagination:f.value},null,8,["pagination"])]),e("div",Xe,[c(l(se),{data:f.value,limit:5,onPaginationChangePage:g},null,8,["data"])])])])]),c(l(j),{show_add_activity_log_modal:V.value,onCloseAddActivityLogModal:G},null,8,["show_add_activity_log_modal"]),c(l(x),{show_view_activity_log_modal:b.value,activity_log:$.value,onCloseViewActivityLogModal:K},null,8,["show_view_activity_log_modal","activity_log"])]),_:1})}}};export{dt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AddActivityLog.uum8SQie.js","assets/ServerMessage.EFQMOwoZ.js","assets/index.sP6fhsqN.js","assets/index.KTHCd6a8.css","assets/VTextArea.-gdNAAwm.js","assets/VTooltip.kcvohVRA.js","assets/vee-validate.esm.2kXgdFia.js","assets/index.esm.DHYHwGJ4.js","assets/ClipLoader._89zL49D.js","assets/ClipLoader.7xz7y6gZ.css","assets/ViewActivityLog.by8gtC9O.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
