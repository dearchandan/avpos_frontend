import{b as W,bR as X,e as J,d as r,r as C,v as M,g as d,p as S,i as t,t as a,h as i,x as N,y as P,j as e,n as Y,F as U,K as p,N as k,m as h,Q as tt,L as R,l as c,k as et,ac as st,I as F,q as ot,_ as at}from"./index.ri7Y_V5F.js";import{C as lt}from"./ClipLoader.4-rIzqtH.js";/* empty css                                                   */const nt="/assets/cash.xvfenXaQ.svg",dt="data:image/svg+xml,%3csvg%20width='37'%20height='31'%20viewBox='0%200%2037%2031'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.43848%200.945702C6.67969%201.14804%206.04375%201.67558%205.6752%202.40547C5.45117%202.85351%205.45117%202.85351%205.1332%205.8164L4.87305%208.2373L3.53613%208.28066C2.06191%208.32402%201.81621%208.38183%201.1875%208.81543C0.74668%209.11894%200.479297%209.44414%200.226367%209.99336L0.03125%2010.4053V19.2289V28.0453L0.305859%2028.5945C0.623828%2029.2377%200.970703%2029.5773%201.65723%2029.9098L2.12695%2030.1338H15.7852C26.6105%2030.1338%2029.5084%2030.1121%2029.7469%2030.0398C30.4695%2029.823%2031.2211%2029.1148%2031.5174%2028.3633C31.6619%2028.0092%2031.6764%2027.7996%2031.7053%2026.3687L31.7342%2024.7717L32.6086%2024.7789C33.3746%2024.7861%2033.5408%2024.7645%2033.9021%2024.6199C34.6682%2024.3092%2035.3547%2023.5215%2035.5426%2022.7266C35.6727%2022.1918%2037.0096%205.90312%2036.959%205.45508C36.8723%204.60957%2036.2508%203.71347%2035.492%203.33047C35.2969%203.2293%2034.9283%203.11367%2034.6754%203.07031C34.2201%202.99082%208.39238%200.822849%208.02383%200.837303C7.92266%200.837303%207.65527%200.887888%207.43848%200.945702ZM21.1689%203.35937C28.3811%203.95918%2034.4152%204.47949%2034.5742%204.52285C34.95%204.63125%2035.4486%205.12265%2035.5137%205.45508C35.5354%205.59961%2035.2463%209.46582%2034.8633%2014.0475C34.1262%2022.8783%2034.1479%2022.6832%2033.7648%2023.0301C33.4541%2023.3119%2033.1%2023.3914%2032.3918%2023.3408L31.727%2023.2902L31.7053%2016.8875L31.6836%2010.4775L31.5102%2010.0439C31.2717%209.44414%2030.549%208.72148%2029.9492%208.48301L29.5156%208.30957L17.9387%208.28789L6.35449%208.27344V8.10723C6.35449%207.79648%206.85312%203.31601%206.90371%203.17871C7.04824%202.77402%207.63359%202.28984%207.98047%202.27539C8.02383%202.27539%2013.9568%202.75957%2021.1689%203.35937ZM29.2988%209.79824C29.6674%209.89941%2030.0937%2010.3258%2030.1949%2010.6943C30.2383%2010.8533%2030.2744%2011.3303%2030.2744%2011.7566V12.5371H15.8574H1.44043V11.7205C1.44043%2010.7449%201.50547%2010.4703%201.83066%2010.1596C2.30762%209.69707%201.36816%209.72598%2015.8213%209.71875C25.2303%209.71875%2029.0893%209.74043%2029.2988%209.79824ZM30.26%2015.5145L30.2744%2017.0176H15.8574H1.44043V15.5V13.9824L15.843%2013.9969L30.2383%2014.0186L30.26%2015.5145ZM30.2744%2022.9578C30.2744%2025.8773%2030.2455%2027.5539%2030.1949%2027.7346C30.1588%2027.8863%2030.0215%2028.1176%2029.9059%2028.2549C29.4578%2028.768%2030.5562%2028.7318%2015.7057%2028.7102L2.33652%2028.6885L2.07637%2028.515C1.93906%2028.4211%201.74395%2028.226%201.65%2028.0887L1.47656%2027.8285L1.45488%2023.1457L1.44043%2018.4629H15.8574H30.2744V22.9578Z'%20fill='%231E3EA3'/%3e%3cpath%20d='M19.7732%2020.8332L19.5781%2021.0355V23.5865V26.1375L19.7877%2026.3471L19.9973%2026.5566H23.7334C26.1543%2026.5566%2027.5129%2026.5277%2027.6068%2026.4844C27.9393%2026.3037%2027.9609%2026.1375%2027.9609%2023.5938C27.9609%2021.05%2027.9393%2020.8838%2027.6068%2020.7031C27.5129%2020.6598%2026.1471%2020.6309%2023.7189%2020.6309H19.9684L19.7732%2020.8332ZM26.5156%2023.5938V25.1113H23.7695H21.0234V23.5938V22.0762H23.7695H26.5156V23.5938Z'%20fill='%231E3EA3'/%3e%3c/svg%3e",it={class:"modal hide cashier-layout-modal",id:"paymentModal",tabindex:"5","aria-hidden":"true","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},ct={class:"modal-dialog modal-lg modal-dialog-centered"},rt={class:"modal-content"},ut={class:"modal-header modal-title"},_t={class:"mb-0"},mt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),pt={class:"modal-body bg-light"},ht={class:"row"},vt={class:"col-md-4 paymentmathed-tab-wrap"},bt={class:"nav nav-tabs paymentmathed-tabs",id:"myTab3",role:"tablist"},gt=["onClick"],yt={class:"icon"},ft={key:0,src:nt,alt:""},Ct={key:1,src:dt,alt:""},kt={class:"col-md-8"},Tt={class:"tab-content paymentmathed-tab-content"},Lt={class:"tab-pane fade show active",role:"tabpanel"},wt={key:0,class:"row mb-4"},$t={class:"col-12"},Vt={class:"form-field mb-md-0"},At={class:"label"},Dt={key:1,class:"row mb-4"},xt={class:"col-8"},Et={class:"form-field mb-md-0"},Ot={class:"label"},Ht={class:"col-4"},Mt={class:"form-field mb-md-0"},St={class:"label"},Nt={class:"row mb-4"},Pt={class:"col-12"},Ut={class:"form-field mb-md-0"},Rt={class:"label"},Ft={class:"apply-discount mt-0 mb-2"},It={class:"checkbox-wrap"},Zt={"data-bs-toggle":"collapse","data-bs-target":"#discountfeilds"},Bt=["checked"],qt={key:0,class:"expand",id:"discountfeilds"},zt={class:"discount-feilds"},Kt={class:"row gx-3"},jt={class:"col-5 col-md-5 m-0"},Qt={class:"form-field mb-0"},Gt={class:"label"},Wt={value:""},Xt=["value"],Jt={class:"col-7 col-md-7 m-0"},Yt={class:"form-field position-relative mb-0 input-select"},te={class:"label"},ee={class:"position-relative"},se=["disabled"],oe={class:"input-select-wrap p-0 m-0"},ae=["disabled"],le=t("option",{value:"1"},"%",-1),ne={value:"2"},de={class:"checkout-data-table"},ie={class:"w-100"},ce={align:"right"},re={key:0},ue={class:"text-success"},_e={align:"right",class:"text-success"},me={key:1},pe={align:"right"},he={key:2},ve={class:"text-success"},be={align:"right",class:"text-success"},ge={key:3},ye={align:"right"},fe={key:4},Ce={align:"right"},ke={key:5},Te={align:"right"},Le={key:6},we={align:"right"},$e={class:"total-tr"},Ve={align:"right"},Ae={class:"mt-4"},De={key:0,class:"alert alert-warning fw-bold text-center mb-0"},xe=["disabled"],Ee={key:1,class:"pt-0"},Oe={key:2},He={key:0},Me={key:1},Fe={__name:"SelectPayment",setup(Se){const{isAuthorized:I}=F(),D=W(),o=X();J({type:"",messages:""});const x=r(()=>D.user.currency.symbol),v=r({get:()=>o.cash_amount,set:s=>o.setCashAmount(s)}),T=r({get:()=>o.card_amount,set:s=>o.setCardAmount(s)}),Z=r(()=>parseFloat(v.value)+parseFloat(T.value)),L=r(()=>_.round(o.change_amount,2)),V=r({get:()=>o.order_note,set:s=>o.setOrderNote(s)}),E=r(()=>o.action_type);function B(s){o.setPaymentMethod(s),s==3&&(g.value=!1)}const A=r(()=>o.payment_method);function q(s){return isNaN(s)}const u=C(""),b=C(""),m=C(1),g=r({get:()=>o.is_discount_applied,set:s=>o.setIsDiscountApplied(s)});M(()=>g.value,s=>{s&&z(),w()}),M(()=>u.value,s=>{s?(b.value=u.value.value,m.value=u.value.type,m.slack=u.value.slack):(b.value="",m.value=1,m.slack="")});function w(){b.value!=""?o.setDiscount(b.value,parseInt(m.value),m.slack):o.clearDiscount()}const O=C([]);async function z(){let s=new FormData;s.append("order_amount",o.grandTotal.grand_product_amount);var n=await axios.post("api/cashier/discounts",s);O.value=n.data.data.order_discounts}const f=C(!1),{placeOrder:K}=F(),H=C(0);async function j(){f.value=!0;let s=await K();if(s.data.status_code==200)if(toast.success(s.data.msg),$("#paymentModal").modal("hide"),L.value>0&&(H.value=L.value,$("#ChangeAmountModal").modal("show")),o.clearCart(),f.value=!1,D.user.login_branch.enable_silent_printing){const n=await axios.get(`/api/order-receipt/${s.data.data.order.slack}`,{responseType:"blob"}),l=URL.createObjectURL(new Blob([n.data],{type:"application/pdf"})),y=document.createElement("iframe");y.style.display="none",y.src=l,document.body.appendChild(y),y.onload=()=>{y.contentWindow.print(),setTimeout(()=>document.body.removeChild(y),1e3)}}else window.open(s.data.data.receipt_link,"_blank");else toast.error(s.data.msg),f.value=!1}r(()=>parseFloat(o.grandTotal.grand_product_amount)>=0);const Q=ot(()=>at(()=>import("./ChangeAmountModal.O-MvIRJd.js"),__vite__mapDeps([0,1,2]))),G=r(()=>o.payment_methods);return(s,n)=>(d(),S(st,{to:"body"},[t("div",it,[t("div",ct,[t("div",rt,[t("div",ut,[t("h2",_t,a(s.$t("Payment Options")),1),mt]),t("div",pt,[t("div",ht,[t("div",vt,[t("ul",bt,[(d(!0),i(U,null,N(e(G),(l,y)=>(d(),i("li",{class:"nav-item",role:"",onClick:Ne=>B(l.id)},[t("button",{class:P(["nav-link",{active:l.id==e(A)}]),type:"button",role:"tab","aria-selected":"true",tabindex:"-1"},[t("span",yt,[l.constant=="CASH"?(d(),i("img",ft)):(d(),i("img",Ct))]),Y(" "+a(l.name),1)],2)],8,gt))),256))])]),t("div",kt,[t("div",Tt,[t("div",Lt,[e(A)==1?(d(),i("div",wt,[t("div",$t,[t("div",Vt,[t("label",At,a(s.$t("Cash Amount")),1),p(t("input",{type:"text",placeholder:"",class:"form-control form-control-lg",required:"","onUpdate:modelValue":n[0]||(n[0]=l=>h(v)?v.value=l:null)},null,512),[[k,e(v)]])])])])):(d(),i("div",Dt,[t("div",xt,[t("div",Et,[t("label",Ot,a(s.$t("Card Amount")),1),p(t("input",{type:"text",placeholder:"",class:"form-control form-control-lg",required:"","onUpdate:modelValue":n[1]||(n[1]=l=>h(T)?T.value=l:null)},null,512),[[k,e(T)]])])]),t("div",Ht,[t("div",Mt,[t("label",St,a(s.$t("Cash Amount")),1),p(t("input",{type:"text",placeholder:"",class:"form-control form-control-lg",required:"","onUpdate:modelValue":n[2]||(n[2]=l=>h(v)?v.value=l:null)},null,512),[[k,e(v)]])])])])),t("div",Nt,[t("div",Pt,[t("div",Ut,[t("label",Rt,a(s.$t("Order Note")),1),p(t("textarea",{type:"text",placeholder:"",class:"form-control form-control-lg",required:"","onUpdate:modelValue":n[3]||(n[3]=l=>h(V)?V.value=l:null)},null,512),[[k,e(V)]])])])]),t("div",Ft,[t("div",It,[t("label",Zt,[p(t("input",{type:"checkbox",name:"Apply_Discount","onUpdate:modelValue":n[4]||(n[4]=l=>h(g)?g.value=l:null),checked:e(g),class:"me-1"},null,8,Bt),[[tt,e(g)]])]),t("span",null,a(s.$t("Apply Discount")),1)]),e(g)?(d(),i("div",qt,[t("div",zt,[t("div",Kt,[t("div",jt,[t("div",Qt,[t("label",Gt,a(s.$t("Discount")),1),p(t("select",{class:"form-control",tabindex:"-1","onUpdate:modelValue":n[5]||(n[5]=l=>h(u)?u.value=l:null),onChange:n[6]||(n[6]=l=>w())},[t("option",Wt,a(s.$t("Custom Discount")),1),(d(!0),i(U,null,N(e(O),l=>(d(),i("option",{value:l},a(l.name),9,Xt))),256))],544),[[R,e(u)]])])]),t("div",Jt,[t("div",Yt,[t("label",te,a(s.$t("Amount/Percentage")),1),t("div",ee,[p(t("input",{type:"text",placeholder:"00",class:"form-control",disabled:e(u)!="","onUpdate:modelValue":n[7]||(n[7]=l=>h(b)?b.value=l:null),onInput:n[8]||(n[8]=l=>w())},null,40,se),[[k,e(b)]]),t("div",oe,[p(t("select",{class:"form-control w-100",tabindex:"-1",disabled:e(u)!="","onUpdate:modelValue":n[9]||(n[9]=l=>h(m)?m.value=l:null),onChange:n[10]||(n[10]=l=>w())},[le,t("option",ne,a(e(x)),1)],40,ae),[[R,e(m)]])])])])])])])])):c("",!0)]),t("div",de,[t("table",ie,[t("tbody",null,[t("tr",null,[t("td",null,a(s.$t("Subtotal")),1),t("td",ce,a(e(o).grandTotal.subtotal),1)]),e(o).grandTotal.product_discount>0?(d(),i("tr",re,[t("td",ue,a(s.$t("Product Discount")),1),t("td",_e,a(e(o).grandTotal.product_discount),1)])):c("",!0),e(o).grandTotal.product_discount>0?(d(),i("tr",me,[t("td",null,a(s.$t("Subtotal After Product Discount")),1),t("td",pe,a(e(o).grandTotal.subtotal_after_product_discount),1)])):c("",!0),e(o).grandTotal.order_discount>0?(d(),i("tr",he,[t("td",ve,a(s.$t("Order Discount")),1),t("td",be,a(e(o).grandTotal.order_discount),1)])):c("",!0),e(o).grandTotal.order_discount>0?(d(),i("tr",ge,[t("td",null,a(s.$t("Subtotal After Order Discount")),1),t("td",ye,a(e(o).grandTotal.subtotal_after_order_discount),1)])):c("",!0),e(o).grandTotal.additional_fee>0?(d(),i("tr",fe,[t("td",null,a(s.$t("Additional Fee")),1),t("td",Ce,a(e(o).grandTotal.additional_fee),1)])):c("",!0),e(o).grandTotal.tobacco_tax>0?(d(),i("tr",ke,[t("td",null,a(s.$t("Tobacco Tax")),1),t("td",Te,a(e(o).grandTotal.tobacco_tax),1)])):c("",!0),e(o).grandTotal.tax>0?(d(),i("tr",Le,[t("td",null,a(s.$t("Tax")),1),t("td",we,a(e(o).grandTotal.tax),1)])):c("",!0)]),t("tfoot",null,[t("tr",$e,[t("td",null,[t("h5",null,a(s.$t("Total")),1)]),t("td",Ve,[t("h5",null,a(e(o).grandTotal.total)+" "+a(e(x)),1)])])])])]),t("div",Ae,[e(o).grandTotal.total<0||e(o).cash_amount<0||e(o).card_amount<0?(d(),i("div",De,a(s.$t("Order must not contain negative values")),1)):c("",!0),e(o).grandTotal.total>0&&e(o).cash_amount>=0||e(o).card_amount>=0&&e(I)("A_CLOSE_ORDER")?(d(),i("button",{key:1,type:"button",class:P(["btn btn-primary btn-rounded btn-lg w-100",{disabled:e(L)<0||q(e(L))||e(o).grandTotal.total<0||e(A)==2&&e(Z)<e(o).grandTotal.total}]),disabled:e(f),onClick:n[11]||(n[11]=l=>j())},[e(f)?(d(),S(lt,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):c("",!0),e(f)?(d(),i("span",Ee,a(s.$t("Placing Order...")),1)):(d(),i("span",Oe,[e(E)=="CLOSE"?(d(),i("span",He,[t("span",null,a(s.$t("CLOSE ORDER")),1)])):c("",!0),e(E)=="SEND_TO_KITCHEN"?(d(),i("span",Me,a(s.$t("SEND TO KITCHEN")),1)):c("",!0)]))],10,xe)):c("",!0)])])])])])])])])]),et(e(Q),{change:e(H)},null,8,["change"])]))}};export{Fe as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ChangeAmountModal.O-MvIRJd.js","assets/index.ri7Y_V5F.js","assets/index.1t-AB2n6.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
