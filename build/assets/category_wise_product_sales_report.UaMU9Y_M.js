import{u as K,b as W,d as w,e as k,r as v,g as l,p as D,w as b,f as $,i as e,k as m,n as h,t as o,j as t,l as U,A as V,B as M,h as c,F as x,x as S,I as G,bV as C,q as Q,_ as z}from"./index.ri7Y_V5F.js";import{_ as J}from"./DefaultLayout.EMHfdzn0.js";import{_ as X}from"./ListingSkeleton.PW5leU6x.js";import{_ as Z}from"./VMultiSelect.3zUL7lik.js";import{s as Y,a as ee,e as te,j as se}from"./vue-datepicker.gRWbN_6J.js";import{s as P,e as A}from"./index.DsgwUBM9.js";import"./ClipLoader.4-rIzqtH.js";/* empty css                                                   */import"./vee-validate.esm.0La7AMjT.js";const oe={class:"header-nav-wrap"},ae={class:"row align-items-center"},ne={class:"col-auto"},le={class:"header-back-link"},de={class:"col-auto"},ce={class:"fw-bold"},ie={class:"content"},re={class:"row"},_e={class:"col-md-12"},he={class:"card"},ue={class:"row field-m-0 align-items-end g-3"},me={class:"col-md-4 col-lg-3"},pe={class:"form-field"},ve={for:"",class:"form-label"},be=e("span",{class:"text-danger"},"*",-1),ye=["onClick","onKeyup"],ge={class:"col-md-4 col-lg-3"},fe={class:"col-auto text-end"},we={class:"row align-items-center"},ke={class:"col-auto"},De=["disabled"],$e={class:"col-auto"},Ve=["disabled"],Me={key:0,class:"col-md-12"},xe={class:"card"},Se={class:"row justify-content-center"},Ce={class:"col-md-8 col-lg-8"},Ye={class:"card",id:"print_div"},Pe={class:"row"},Ae={key:0},Be={key:1},Oe={class:"card-head mb-4"},Te={class:"text-center"},Le=e("div",{class:"head-title"},[e("h4",null,"Category Wise Product Sales Report")],-1),Re={class:"head-data"},Ie=e("b",null,"Printed On:",-1),Ne={class:"head-data"},Ee=e("b",null,"Date:",-1),Fe={class:"head-data"},je=e("b",null,"Branch:",-1),He={class:"card-data"},qe={class:"text-center"},Ke={class:"head-title"},We={class:"table-responsive mb-3"},Ue={class:"table table-list-data table-hover"},Ge={width:"100%",class:"text-center"},Qe={class:"table table-list-data table-hover"},ze={width:"60%",class:"text-start"},Je={width:"20%",class:"text-center"},Xe={width:"20%",class:"text-end"},Ze={width:"60%",class:"text-start"},et={width:"20%",class:"text-center"},tt={width:"20%",class:"text-end"},st={key:1},ot={class:"text-center py-3"},at={key:1,class:"col-md-12"},nt={class:"card"},lt={class:"text-center py-3"},bt={__name:"category_wise_product_sales_report",setup(dt){const{getRoundedValue:B}=G(),{t:g}=K(),f=W();w(()=>f.user.currency.symbol);const O=k({server_messages:{type:"",messages:""},is_submitting:!1,is_listing:!1,dates:v([new Date,new Date]),selected_branch:v(),is_exporting:!1}),s=k({...O}),T=g("Select Branch"),L=g("All Branches"),R=v([{label:"Today",value:[new Date,new Date]},{label:"This month",value:[P(new Date),A(new Date)]},{label:"Last month",value:[P(Y(new Date,1)),A(Y(new Date,1))]},{label:"This year",value:[ee(new Date),te(new Date)]}]),I=w(()=>f.user.branches),i=v([]);async function N(n=1){s.is_listing=!0,s.dates[0]=C(s.dates[0]).format("YYYY-MM-DD"),s.dates[1]=C(s.dates[1]).format("YYYY-MM-DD"),await axios.get("/api/category_wise_product_sales_report",{params:{filter:s}}).then(a=>{i.value=a.data.data,console.log("report_data.value =",i.value),s.is_listing=!1}).catch(a=>{s.server_messages.type="error",s.server_messages.messages=a,s.is_listing=!1,console.log(a)})}async function E(){const n=document.getElementById("print_div").innerHTML;let a="";for(const y of[...document.querySelectorAll('link[rel="stylesheet"], style')])a+=y.outerHTML;const _=window.open("AvPOS","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");_.document.write(`<!DOCTYPE html>
<html>
  <head>
    ${a}
  </head>
  <body>
    ${n}
  </body>
</html>`),_.document.close(),_.focus(),_.print()}const F=Q(()=>z(()=>import("./ServerMessage.qNo4NwTp.js"),__vite__mapDeps([0,1,2])));return(n,a)=>{const _=$("Icon"),y=$("router-link"),j=Z,H=X,q=J;return l(),D(q,null,{subheader:b(()=>[e("div",oe,[e("div",ae,[e("div",ne,[e("div",le,[m(y,{class:"text-primary",to:"/reports"},{default:b(()=>[m(_,{icon:"fa6-solid:chevron-left"}),h(" "+o(n.$t("Reports")),1)]),_:1})])]),e("div",de,[e("h5",ce,o(n.$t("Category Wise Product Sales Report")),1)])])])]),default:b(()=>[e("div",ie,[t(s).server_messages.messages!=""?(l(),D(t(F),{key:0,class:"py-3",server_messages:t(s).server_messages},null,8,["server_messages"])):U("",!0),e("div",re,[e("div",_e,[e("div",he,[e("div",ue,[e("div",me,[e("div",pe,[e("label",ve,[h(o(n.$t("Select Dates"))+" ",1),be]),m(t(se),{range:"","preset-dates":t(R),modelValue:t(s).dates,"onUpdate:modelValue":a[0]||(a[0]=d=>t(s).dates=d),format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid"},{"preset-date-range-button":b(({label:d,value:u,presetDate:r})=>[e("span",{role:"button",tabindex:0,onClick:p=>r(u),onKeyup:[V(M(p=>r(u),["prevent"]),["enter"]),V(M(p=>r(u),["prevent"]),["space"])]},o(d),41,ye)]),_:1},8,["preset-dates","modelValue"])])]),e("div",ge,[m(j,{name:"branches",label:t(T),placeholder:t(L),text:"name",value:"id",options:t(I),modelValue:t(s).selected_branch,"onUpdate:modelValue":a[1]||(a[1]=d=>t(s).selected_branch=d),mode:"single"},null,8,["label","placeholder","options","modelValue"])]),e("div",fe,[e("div",we,[e("div",ke,[e("button",{class:"btn btn-primary",onClick:N,disabled:t(s).dates==null},o(n.$t("View")),9,De)]),e("div",$e,[e("button",{class:"btn btn-success",onClick:a[2]||(a[2]=d=>E()),disabled:t(s).dates==null},o(n.$t("Print")),9,Ve)])])])])])]),t(i).category_wise_data!=null?(l(),c("div",Me,[e("div",xe,[e("div",Se,[e("div",Ce,[e("div",Ye,[e("div",Pe,[t(s).is_listing?(l(),c("div",Ae,[m(H)])):(l(),c("div",Be,[e("div",Oe,[e("div",Te,[Le,e("div",Re,[e("span",null,[e("label",null,[Ie,h(" "+o(t(i).printed_on),1)])])]),e("div",Ne,[e("span",null,[e("label",null,[Ee,h(" "+o(t(i).date),1)])])]),e("div",Fe,[e("span",null,[e("label",null,[je,h(" "+o(t(i).branch),1)])])])])]),e("div",He,[e("div",qe,[e("div",Ke,[e("div",We,[e("table",Ue,[e("tbody",null,[t(i).category_wise_data!=""?(l(!0),c(x,{key:0},S(t(i).category_wise_data,(d,u)=>(l(),c("tr",{key:u},[e("td",Ge,[h(o(d.title)+" ",1),e("table",Qe,[e("thead",null,[e("tr",null,[e("td",ze,o(n.$t("Product")),1),e("td",Je,o(n.$t("Quantity")),1),e("td",Xe,o(n.$t("Amount")),1)])]),e("tbody",null,[(l(!0),c(x,null,S(d.items,(r,p)=>(l(),c("tr",{key:p},[e("td",Ze,o(r.product_name),1),e("td",et,o(r.quantity),1),e("td",tt,o(t(B)(r.amount)),1)]))),128))])])])]))),128)):(l(),c("tr",st,[e("td",ot,o(n.$t("No Data Found")),1)]))])])])])])])]))])])])])])])):(l(),c("div",at,[e("div",nt,[e("div",lt,o(n.$t("No Data Found")),1)])]))])])]),_:1})}}};export{bt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ServerMessage.qNo4NwTp.js","assets/index.ri7Y_V5F.js","assets/index.1t-AB2n6.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
