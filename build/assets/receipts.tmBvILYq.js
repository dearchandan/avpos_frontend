import{_ as T}from"./ActionButtonGroup.UoCDvTnh.js";import{_ as G}from"./ListingSkeleton.PW5leU6x.js";import{_ as K}from"./RentReceiptMenu.wYqwDZVz.js";import{u as z,b as H,r as c,e as $,o as Q,v as W,g as n,p as M,w,f as S,k as h,i as t,t as s,j as r,h as a,n as X,l as d,K as j,L as Y,N as Z,F as x,x as tt,O as et}from"./index.ri7Y_V5F.js";import{_ as st}from"./DefaultLayout.EMHfdzn0.js";import{_ as ot}from"./PaginateLimit.Qyl6CO-f.js";import{j as nt}from"./vue-datepicker.gRWbN_6J.js";import"./ClipLoader.4-rIzqtH.js";/* empty css                                                   */const at={class:"content"},it={class:"page-heading"},lt={class:"row align-items-center justify-content-between mb-3"},ct={class:"col-auto"},dt={class:"mb-0"},rt={key:0,class:"col-auto"},_t={class:"row align-items-end justify-content-between mb-3"},ut={class:"col-md-auto"},ht={class:"row align-items-end justify-content-between g-3"},mt={class:"col-12 col-md-auto"},pt={class:"form-field"},ft={class:"col col-md-auto"},vt={class:"form-field"},gt={value:""},yt={value:"0"},bt={value:"1"},kt={value:"2"},$t={class:"col-auto col-md-auto"},wt={class:"col-auto"},Rt={class:"form-field page-heading-search-field mb-0"},Ct={class:"field-icon"},Mt=["placeholder"],St={class:"icon"},jt={key:0},Nt={key:1,class:"table-responsive"},Vt={class:"table table-list-data table-hover"},At={class:"bg-light"},Pt={scope:"col",width:"10%"},qt={scope:"col",width:"10%"},Bt={key:0,scope:"col",width:"20%"},Dt={scope:"col",width:"20%"},Ft={scope:"col",width:"10%"},Lt={scope:"col",width:"10%"},Ot={key:1,scope:"col",class:"text-end",width:"5%"},Ut=["onClick"],It=["onClick"],Et=["onClick"],Jt=["onClick"],Tt=["onClick"],Gt=["onClick"],Kt={key:0,class:"badge badge-primary"},zt={key:1,class:"badge badge-success"},Ht={key:2,class:"badge badge-danger"},Qt={key:1,class:"text-end"},Wt={key:1},Xt={key:1},Yt={class:"text-center py-3",colspan:"11"},Zt={class:"data-footer"},xt={class:"row align-items-center justify-content-between"},te={class:"col-auto"},ee={class:"col-auto"},ue={__name:"receipts",setup(se){const{t:N}=z(),f=H(),V={server_messages:{type:"",messages:""},is_listing:!1,search_query:c("")},A=N("Search by number, amount"),l=$({...V});Q(()=>{m()}),W(()=>l.search_query,_.debounce(()=>{m()},500));const g=c([]),y=c([]);async function m(e=1){l.is_listing=!0,await axios.get("/api/vouchers",{params:{page:e,paginate_limit:R.value,search_query:l.search_query,filter:u,type:2}}).then(i=>{g.value=i.data.data,y.value=i.data.pagination,l.is_listing=!1}).catch(i=>{l.server_messages.type="error",l.server_messages.messages=i,l.is_listing=!1,console.log(i)})}const R=c();async function P(e){R.value=e,await m()}const q=c(!1),b=$({dates:c(),status:c("")}),u=$({...b}),k=c(!1);async function C(){JSON.stringify(u)!=JSON.stringify(b)&&(k.value=!0),q.value=!1,await m()}function B(){Object.assign(u,b),k.value=!1,m()}function p(e){router.push("/rent_receipt/"+e)}function D(e){router.push("/rent_receipt/edit/"+e)}const F=c({write:!0,delete:!1});return(e,i)=>{const L=K,O=S("router-link"),U=S("Icon"),I=G,E=T;return n(),M(st,null,{subheader:w(()=>[h(L)]),default:w(()=>[t("div",at,[t("div",it,[t("div",lt,[t("div",ct,[t("h2",dt,s(e.$t("Rent Receipts")),1)]),r(f).isMerchant?d("",!0):(n(),a("div",rt,[h(O,{class:"btn btn-sm btn-light-primary2",to:"/rent_receipt/add"},{default:w(()=>[X("+ "+s(e.$t("New Rent Receipt")),1)]),_:1})]))]),t("div",_t,[t("div",ut,[t("div",ht,[t("div",mt,[t("div",pt,[t("label",null,s(e.$t("Rent Receipt Date")),1),h(r(nt),{range:"",modelValue:u.dates,"onUpdate:modelValue":[i[0]||(i[0]=o=>u.dates=o),i[1]||(i[1]=o=>C())],format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid form-control-sm"},null,8,["modelValue"])])]),t("div",ft,[t("div",vt,[t("label",null,s(e.$t("Payment Status")),1),j(t("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":i[2]||(i[2]=o=>u.status=o),onChange:C},[t("option",gt,s(e.$t("All")),1),t("option",yt,s(e.$t("Pending")),1),t("option",bt,s(e.$t("Approved")),1),t("option",kt,s(e.$t("Reject")),1)],544),[[Y,u.status]])])]),t("div",$t,[k.value?(n(),a("button",{key:0,class:"btn btn-sm btn-light-danger",onClick:B},s(e.$t("Clear")),1)):d("",!0)])])]),t("div",wt,[t("div",Rt,[t("div",Ct,[j(t("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:r(A),"onUpdate:modelValue":i[3]||(i[3]=o=>l.search_query=o)},null,8,Mt),[[Z,l.search_query]]),t("div",St,[h(U,{icon:"fa6-solid:magnifying-glass"})])])])])])]),l.is_listing?(n(),a("div",jt,[h(I)])):(n(),a("div",Nt,[t("table",Vt,[t("thead",At,[t("tr",null,[t("th",Pt,s(e.$t("Rent Receipt No.")),1),t("th",qt,s(e.$t("Amount")),1),r(f).isMerchant?(n(),a("th",Bt,s(e.$t("Branch")),1)):d("",!0),t("th",Dt,s(e.$t("User")),1),t("th",Ft,s(e.$t("Rent Receipt Date")),1),t("th",Lt,s(e.$t("Payment Status")),1),r(f).isMerchant?d("",!0):(n(),a("th",Ot,s(e.$t("Action")),1))])]),t("tbody",null,[g.value!=""?(n(!0),a(x,{key:0},tt(g.value,(o,J)=>(n(),a("tr",{key:J},[t("td",{onClick:v=>p(o.slack),role:"button"},s(o.voucher_number),9,Ut),t("td",{onClick:v=>p(o.slack),role:"button"},s(o.withdrawal_amount),9,It),r(f).isMerchant?(n(),a("td",{key:0,onClick:v=>p(o.slack),role:"button"},s(o.branch.name),9,Et)):d("",!0),t("td",{onClick:v=>p(o.slack),role:"button"},s(o.voucher_user.name),9,Jt),t("td",{onClick:v=>p(o.slack),role:"button"},s(o.voucher_date_label),9,Tt),t("td",{onClick:v=>p(o.slack),role:"button"},[o.status==0?(n(),a("span",Kt,s(e.$t("Pending")),1)):d("",!0),o.status==1?(n(),a("span",zt,s(e.$t("Approved")),1)):d("",!0),o.status==2?(n(),a("span",Ht,s(e.$t("Rejected")),1)):d("",!0)],8,Gt),r(f).isMerchant?d("",!0):(n(),a("td",Qt,[o.status==0?(n(),M(E,{key:0,permissions:F.value,onEdit:D,slack:o.slack},null,8,["permissions","slack"])):(n(),a("span",Wt,"--"))]))]))),128)):(n(),a("tr",Xt,[t("td",Yt,s(e.$t("No Data Found")),1)]))])])])),t("div",Zt,[t("div",xt,[t("div",te,[h(ot,{onPaginate_limit_update:P,pagination:y.value},null,8,["pagination"])]),t("div",ee,[h(r(et),{data:y.value,limit:5,onPaginationChangePage:m},null,8,["data"])])])])])]),_:1})}}};export{ue as default};
