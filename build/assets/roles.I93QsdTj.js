import{u as K,b as U,r as i,e as w,o as W,v as Y,g as c,p as H,w as k,I as Q,f as E,i as e,k as d,n as X,t as l,K as Z,N as ee,j as b,h as r,l as g,F as te,x as se,O as ae,q as oe,_ as ne}from"./index.GdMxdeuf.js";import{_ as ie}from"./DefaultLayout.qd3nRBiq.js";import{_ as le}from"./PaginateLimit.H-orl6zP.js";import{_ as ce}from"./ActionButtonGroup.qGH_Fqs8.js";import{_ as re}from"./ListingSkeleton.upY030ro.js";import"./vue-datepicker.iEAbZR0K.js";import"./ClipLoader.UcGuNCxH.js";/* empty css                                                   */const de={class:"header-nav-wrap"},_e={class:"row align-items-center"},ue={class:"col-auto"},me={class:"header-back-link"},he={class:"col-auto"},ge={class:"fw-bold"},pe={class:"content"},ve={class:"page-heading"},fe={class:"row align-items-center justify-content-end"},ye={class:"col-auto"},we={class:"form-field page-heading-search-field mb-0"},ke={class:"field-icon"},be=["placeholder"],Ce={class:"icon"},Re={key:0,class:"col-auto"},$e={class:"row"},Ae={class:"col-12 text-end"},Se={key:0},De={key:1,class:"table-responsive"},Ee={class:"table table-list-data table-hover"},Me={class:"bg-light"},Be={scope:"col",width:"60%"},Ne={scope:"col",width:"20%"},Fe={scope:"col",width:"10%"},Le={key:0,scope:"col",class:"text-end",width:"10%"},Te=["onClick"],qe=["onClick"],xe={class:"form-feild"},Ie={class:"form-check form-switch form-switch-2"},Pe=["onChange","checked"],Oe={key:0,class:"text-end"},Ve={key:1},je={class:"text-center py-3",colspan:"8"},Ge={class:"data-footer"},Je={class:"row align-items-center justify-content-between"},ze={class:"col-auto"},Ke={class:"col-auto"},st={__name:"roles",setup(Ue){const{t:h}=K(),{isAuthorized:C}=Q(),M=oe(()=>ne(()=>import("./AddRole._kr5VAQu.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])));U();const p=i(!1),R=i([]);function $(t=""){R.value=t,p.value=!0}function B(){p.value=!1,m()}const N={server_messages:{type:"",messages:""},is_listing:!1,search_query:i("")},F=h("Search by name..."),s=w({...N});W(()=>{O(),m()}),Y(()=>s.search_query,_.debounce(()=>{m()},500));const v=i([]),f=i([]);i(!1);async function m(t=1){s.is_listing=!0,await axios.get("/api/v2/roles",{params:{page:t,paginate_limit:A.value,search_query:s.search_query,filter:x}}).then(o=>{v.value=o.data.data,f.value=o.data.pagination,s.is_listing=!1}).catch(o=>{s.server_messages.type="error",s.server_messages.messages=o,s.is_listing=!1,console.log(o)})}const A=i();async function L(t){A.value=t,await m()}async function T(t){var o=new FormData;o.append("slack",t),await axios.post("/api/role/update_status",o).then(a=>{if(a.data.status_code==200)toast.success(a.data.msg);else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(a.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=a.data.msg}}).catch(a=>{s.server_messages.type="error",s.server_messages.messages=a,console.log(a)})}const q=w({dates:i(),role_type:i(""),status:i(""),created_by:i("")}),x=w({...q}),I=i(!1);function S(t){router.push("/role/"+t)}async function P(t){var o=!1;await Swal.fire({title:h("Do you want to delete this role, It withdraw the permission from all users with this role?"),showCancelButton:!0,confirmButtonText:h("Yes, Delete"),confirmButtonColor:"#d33",cancelButtonText:h("Cancel")}).then(a=>{a.isConfirmed&&(o=!0)}),o&&await axios.post("/api/role/delete",{slack:t}).then(a=>{if(a.data.status_code==200)toast.success(a.data.msg),m();else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(a.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=a.data.msg}}).catch(a=>{s.server_messages.type="error",s.server_messages.messages=a,console.log(a)})}const u=i({write:!1,delete:!1});function O(){u.value={write:C("A_WRITE_ROLE"),delete:C("A_DELETE_ROLE")}}return(t,o)=>{const a=E("Icon"),y=E("router-link"),V=re,j=ce,G=le,J=ie;return c(),H(J,null,{subheader:k(()=>[e("div",de,[e("div",_e,[e("div",ue,[e("div",me,[d(y,{class:"text-primary",to:"/settings"},{default:k(()=>[d(a,{icon:"fa6-solid:chevron-left"}),X(" "+l(t.$t("Settings")),1)]),_:1})])]),e("div",he,[e("h5",ge,l(t.$t("Roles")),1)])])])]),default:k(()=>[e("div",pe,[e("div",ve,[e("div",fe,[e("div",ye,[e("div",we,[e("div",ke,[Z(e("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:b(F),"onUpdate:modelValue":o[0]||(o[0]=n=>s.search_query=n)},null,8,be),[[ee,s.search_query]]),e("div",Ce,[d(a,{icon:"fa6-solid:magnifying-glass"})])])])]),u.value.write?(c(),r("div",Re,[e("a",{href:"#",class:"btn btn-sm btn-light-primary2","data-bs-toggle":"modal",onClick:o[1]||(o[1]=n=>$()),"data-bs-target":"#addRoleModal"},"+ "+l(t.$t("New Role")),1)])):g("",!0)]),e("div",$e,[e("div",Ae,[I.value?(c(),r("button",{key:0,class:"badge badge-danger btn-sm",onClick:o[2]||(o[2]=(...n)=>t.clearFilter&&t.clearFilter(...n))},l(t.$t("Clear Filters")),1)):g("",!0)])])]),s.is_listing?(c(),r("div",Se,[d(V)])):(c(),r("div",De,[e("table",Ee,[e("thead",Me,[e("tr",null,[e("th",Be,l(t.$t("Role")),1),e("th",Ne,l(t.$t("Role Type")),1),e("th",Fe,l(t.$t("Active")),1),u.value.write&&u.value.delete?(c(),r("th",Le,l(t.$t("Action")),1)):g("",!0)])]),e("tbody",null,[v.value!=""?(c(!0),r(te,{key:0},se(v.value,(n,z)=>(c(),r("tr",{key:z},[e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewRoleModal",onClick:D=>S(n.slack)},[e("h6",null,l(n.name),1)],8,Te),e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewRoleModal",onClick:D=>S(n.slack)},l(n.role_type_text),9,qe),e("td",null,[e("div",xe,[e("div",Ie,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"Status_id",onChange:D=>T(n.slack),checked:n.status==1},null,40,Pe)])])]),u.value.write&&u.value.delete?(c(),r("td",Oe,[d(j,{permissions:u.value,onDelete:P,slack:n.slack,onEditModal:$,edit_modal_data:n,edit_modal_target:"#addRoleModal"},null,8,["permissions","slack","edit_modal_data"])])):g("",!0)]))),128)):(c(),r("tr",Ve,[e("td",je,l(t.$t("No Data Found")),1)]))])])])),e("div",Ge,[e("div",Je,[e("div",ze,[d(G,{onPaginate_limit_update:L,pagination:f.value},null,8,["pagination"])]),e("div",Ke,[d(b(ae),{data:f.value,limit:5,onPaginationChangePage:m},null,8,["data"])])])])]),d(b(M),{show_add_role_modal:p.value,onCloseAddRoleModal:B,edit_data:R.value},null,8,["show_add_role_modal","edit_data"])]),_:1})}}};export{st as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AddRole._kr5VAQu.js","assets/ServerMessage.Wf7puwQc.js","assets/index.GdMxdeuf.js","assets/index.1t-AB2n6.css","assets/VSelect.c4Loo_XL.js","assets/vee-validate.esm.9aElOHQY.js","assets/VSelect.6khW9yoi.css","assets/index.esm.0vhAmrVd.js","assets/VTextInput.ZgtOiOMJ.js","assets/VTooltip.Ewb958d6.js","assets/ClipLoader.UcGuNCxH.js","assets/ClipLoader.7xz7y6gZ.css","assets/global.8gHgB6cY.js","assets/BeatLoader.5j6ku4bW.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
