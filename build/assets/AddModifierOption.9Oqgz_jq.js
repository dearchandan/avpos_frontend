import A from"./ServerMessage.qNo4NwTp.js";import{_ as q}from"./VSelectInput.ncg8IJ_w.js";import{F as N}from"./vee-validate.esm.0La7AMjT.js";import{c as C,a as f,d as B}from"./index.esm.wERziE-M.js";import{_ as v}from"./VTextInput.o2P1IcEE.js";/* empty css                                                   */import{u as F,r as P,e as x,b as I,v as U,g as n,h as d,i as t,t as l,k as m,w as D,l as p,p as E,j as b}from"./index.ri7Y_V5F.js";import{C as j}from"./ClipLoader.4-rIzqtH.js";import"./VTooltip.a7qKl6DY.js";/* empty css                                                   */const z={class:"modal hide",id:"addModifierOptionModal",tabindex:"-1","aria-labelledby":"Add Option","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},J={class:"modal-dialog modal-dialog-centered"},L={class:"modal-content"},T={class:"modal-header"},G={key:0,class:"modal-title"},H={key:1,class:"modal-title"},K=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Q={class:"modal-body"},R={class:"row"},W={class:"col-md-12"},X={class:"col-12 mb-4"},Y={key:0,class:"col-md-12"},Z={key:0,class:"py-3"},ee={class:"mt-2 text-end"},ae=["disabled"],se={key:1,class:"pt-0"},oe={key:2,class:"pt-0"},ue={__name:"AddModifierOption",props:["show_add_option_modal","edit_data","modifier_slack"],emits:["closeAddModifierOptionModal"],setup(k,{emit:y}){const{t:s}=F(),_=P({option_name:s("Option Name"),option_name_ar:s("Option Name (Arabic)"),pricing_method:s("Pricing Method"),sale_price:s("Sale Price")}),c={server_messages:{type:"",messages:""},is_saving:!1,option_slack:"",option_name:"",option_name_ar:"",pricing_method:1,sale_price:""},e=x({...c});I();const O=C({option_name:f().required(s("name is required",{name:s("Option Name")})).min(3,s("name must be at least n characters",{name:s("Option Name"),number:3})),pricing_method:f().required(s("name is required",{name:s("Pricing Method")})),sale_price:B().typeError(s("must be a number",{name:s("Amount")})).min(0,s("Amount must be more than 0")).nullable().when("pricing_method",{is:a=>a==1,then:a=>a.required(s("name is required",{name:s("Sale Price")})),otherwise:a=>a.nullable()})}),M=[{id:"1",name:s("Custom Pricing")},{id:"2",name:s("Based On Total Cost of Items Added")}],V=y,u=k;function g(a=""){w(),$("#addModifierOptionModal").modal("hide"),V("closeAddModifierOptionModal",a)}U(()=>u.edit_data,a=>{a&&(e.option_slack=a.slack,e.option_name=a.option_name,e.option_name_ar=a.option_name_ar,e.pricing_method=a.pricing_method,e.sale_price=a.sale_price)});async function S(){var a=new FormData;a.append("modifier_slack",u.modifier_slack),a.append("option_name",e.option_name),a.append("option_name_ar",e.option_name_ar==null?"":e.option_name_ar),a.append("pricing_method",e.pricing_method),a.append("sale_price",e.sale_price),a.append("option_slack",e.option_slack);var i=e.option_slack!=""&&e.option_slack!=null?"/api/modifier/option/update":"/api/modifier/option/save";await axios.post(i,a).then(o=>{if(e.is_saving=!0,o.data.status_code==200)toast.success(o.data.msg),e.is_saving=!1,document.getElementById("addOptionForm").reset(),o.data.data.modifier_option.pricing_method==2?g(o.data.data.modifier_option.slack):g();else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(o.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=o.data.msg}e.is_saving=!1}}).catch(o=>{e.server_messages.type="error",e.server_messages.messages=o,e.is_saving=!1,console.log(o)})}function w(){Object.assign(e,c)}return(a,i)=>{const o=q,h=A;return n(),d("div",z,[t("div",J,[t("div",L,[t("div",T,[e.option_slack!=""&&e.option_slack!=null?(n(),d("h5",G,l(a.$t("Update Option")),1)):(n(),d("h5",H,l(a.$t("Add Option")),1)),K]),t("div",Q,[m(b(N),{"validation-schema":b(O),onSubmit:S,enctype:"multipart/form-data","initial-values":e,id:"addOptionForm"},{default:D(()=>[t("div",R,[t("div",W,[m(v,{type:"text",name:"option_name",modelValue:e.option_name,"onUpdate:modelValue":i[0]||(i[0]=r=>e.option_name=r),label:_.value.option_name,required:!0},null,8,["modelValue","label"])]),t("div",X,[m(o,{name:"pricing_method",label:_.value.pricing_method,required:"",options:M,modelValue:e.pricing_method,"onUpdate:modelValue":i[1]||(i[1]=r=>e.pricing_method=r),size:"normal"},null,8,["label","modelValue"])]),e.pricing_method==1?(n(),d("div",Y,[m(v,{type:"number",name:"sale_price",modelValue:e.sale_price,"onUpdate:modelValue":i[2]||(i[2]=r=>e.sale_price=r),label:_.value.sale_price,required:!0},null,8,["modelValue","label"])])):p("",!0)]),e.server_messages.messages!=""?(n(),d("div",Z,[m(h,{server_messages:e.server_messages},null,8,["server_messages"])])):p("",!0),t("div",ee,[t("button",{type:"submit",class:"btn btn-primary",disabled:e.is_saving},[e.is_saving?(n(),E(j,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):p("",!0),e.is_saving?(n(),d("span",se,l(a.$t("Saving...")),1)):(n(),d("span",oe,l(a.$t("Save")),1))],8,ae)])]),_:1},8,["validation-schema","initial-values"])])])])])}}};export{ue as default};
