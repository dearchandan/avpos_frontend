import{_ as J}from"./ActionButtonGroup.AvqLZ7Zu.js";import{_ as E}from"./ListingSkeleton.0g9v9IYA.js";import{u as z,b as G,r as l,e as w,o as K,v as Y,g as c,p as N,w as k,f as D,i as t,t as s,h as m,l as u,k as H,m as x,K as B,N as Q,j as C,y as R,L as W,F as X,x as Z,O as tt}from"./index.sP6fhsqN.js";import{D as et}from"./DefaultLayout.K5Bh9Jz_.js";import{_ as st}from"./PaginateLimit.T5jDCI_N.js";import{j as ot}from"./vue-datepicker.S8gODTVm.js";import"./ClipLoader._89zL49D.js";/* empty css                                                   */const at={class:"header-nav-wrap"},it={class:"row align-items-center"},nt={class:"col-auto"},lt={class:"fw-bold"},ct={class:"content"},rt={class:"page-heading"},dt={class:"row align-items-center justify-content-between"},_t={class:"col-auto"},ut={class:"row align-items-center"},mt={key:0,class:"col-auto"},ht={class:"col-auto"},pt={class:"row align-items-center"},ft={class:"col-auto"},vt={class:"form-field page-heading-search-field mb-0"},gt={class:"field-icon"},bt=["placeholder"],yt={class:"icon"},wt={class:"col-auto"},kt={class:"dropdown filter-dropdown"},Ct={class:"row gx-3"},$t={class:"col-12"},St={class:"form-field"},At={class:"form-label"},Nt={class:"row gx-3"},Dt={class:"col-6"},xt={class:"form-field"},Bt={class:"form-label"},Vt={value:""},Ft={value:"1"},jt={value:"0"},qt={class:"row py-3"},Lt={class:"col-12 text-end"},Mt={key:1,class:"table-responsive"},Ot={class:"table table-list-data table-hover"},Ut={class:"bg-light"},It={scope:"col",width:"15%"},Pt={scope:"col",width:"10%"},Tt={scope:"col",width:"10%"},Jt={scope:"col",class:"text-end",width:"5%"},Et=["onClick"],zt={class:"fw-bold highlighted-list-item"},Gt=["onClick"],Kt=["onClick"],Yt={class:"text-end"},Ht={key:1},Qt={class:"text-center py-3",colspan:"11"},Rt={class:"data-footer"},Wt={class:"row align-items-center justify-content-between"},Xt={class:"col-auto"},Zt={class:"col-auto"},de={__name:"sub_admin_users",setup(te){const{t:h}=z();G(),l(!1);const V={server_messages:{type:"",messages:""},is_listing:!1,search_query:l("")},F=h("Search by name, email, phone.."),o=w({...V});K(()=>{r()}),Y(()=>o.search_query,_.debounce(()=>{r()},500));const f=l([]),v=l([]);async function r(e=1){o.is_listing=!0,await axios.get("/api/sub_admins",{params:{page:e,paginate_limit:$.value,search_query:o.search_query,filter:d}}).then(a=>{f.value=a.data.data,v.value=a.data.pagination,o.is_listing=!1}).catch(a=>{o.server_messages.type="error",o.server_messages.messages=a,o.is_listing=!1,console.log(a)})}const $=l();async function j(e){$.value=e,await r()}const p=l(!1),g=w({created_date:l(),status:l(""),type:l("")}),d=w({...g}),b=l(!1);async function q(){JSON.stringify(d)!=JSON.stringify(g)&&(b.value=!0),p.value=!1,await r()}async function L(){p.value=!p.value}function M(){Object.assign(d,g),b.value=!1,r()}function ee(e){}function O(e){router.push("/admin/user/edit/"+e)}async function U(e){var a=!1;await Swal.fire({title:h("Do you want to delete this Sub Admin?"),showCancelButton:!0,confirmButtonText:h("Yes, Delete"),confirmButtonColor:"#d33",cancelButtonText:h("Cancel")}).then(n=>{n.isConfirmed&&(a=!0)}),a&&await axios.post("/api/sub_admin/delete",{slack:e}).then(n=>{if(n.data.status_code==200)Swal.fire(n.data.msg),r();else try{o.server_messages.type="error",o.server_messages.messages=JSON.parse(n.data.msg)}catch{o.server_messages.type="error",o.server_messages.messages=n.data.msg}}).catch(n=>{o.server_messages.type="error",o.server_messages.messages=n,console.log(n)})}const S=l({write:!0,delete:!0});return(e,a)=>{const n=D("router-link"),y=D("Icon"),I=E,P=J;return c(),N(et,null,{subheader:k(()=>[t("div",at,[t("div",it,[t("div",nt,[t("h5",lt,s(e.$t("Sub Admins")),1)])])])]),default:k(()=>[t("div",ct,[t("div",rt,[t("div",dt,[t("div",_t,[t("div",ut,[S.value.write?(c(),m("div",mt,[u(n,{class:"btn btn-sm btn-light-primary",to:"/admin/user/add"},{default:k(()=>[H("+ "+s(e.$t("New Sub Admin")),1)]),_:1})])):x("",!0)])]),t("div",ht,[t("div",pt,[t("div",ft,[t("div",vt,[t("div",gt,[B(t("input",{type:"search",class:"form-control form-control-sm form-control-shadow",placeholder:C(F),"onUpdate:modelValue":a[0]||(a[0]=i=>o.search_query=i)},null,8,bt),[[Q,o.search_query]]),t("div",yt,[u(y,{icon:"fa6-solid:magnifying-glass"})])])])]),t("div",wt,[t("div",kt,[t("button",{type:"button",class:"btn btn-sm btn-icon btn-light-primary","data-bs-auto-close":"outside",onClick:L},[u(y,{icon:"fa6-solid:filter"})]),t("div",{class:R([p.value?"show":"","dropdown-menu p-3 w-365"]),id:"filter_box",style:{position:"absolute",inset:"0px auto auto 0px",margin:"0px",transform:"translate3d(-310px, 36px, 0px)"}},[t("form",null,[t("div",Ct,[t("div",$t,[t("div",St,[t("label",At,s(e.$t("Created Date")),1),u(C(ot),{range:"",modelValue:d.created_date,"onUpdate:modelValue":a[1]||(a[1]=i=>d.created_date=i),format:"dd-MM-yyyy","enable-time-picker":!1},null,8,["modelValue"])])])]),t("div",Nt,[t("div",Dt,[t("div",xt,[t("label",Bt,s(e.$t("Status")),1),B(t("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":a[2]||(a[2]=i=>d.status=i)},[t("option",Vt,s(e.$t("All")),1),t("option",Ft,s(e.$t("Active")),1),t("option",jt,s(e.$t("Inactive")),1)],512),[[W,d.status]])])])]),t("button",{type:"button",onClick:q,class:"btn btn-sm btn-primary w-100"},s(e.$t("Filter")),1)])],2)])])])])]),t("div",qt,[t("div",Lt,[b.value?(c(),m("button",{key:0,class:"badge badge-danger btn-sm",onClick:M},s(e.$t("Clear Filters")),1)):x("",!0)])])]),o.is_listing?(c(),N(I,{key:0})):(c(),m("div",Mt,[t("table",Ot,[t("thead",Ut,[t("tr",null,[t("th",It,s(e.$t("Sub Admin Name")),1),t("th",Pt,s(e.$t("Phone")),1),t("th",Tt,s(e.$t("Created At")),1),t("th",Jt,s(e.$t("Action")),1)])]),t("tbody",null,[f.value!=""?(c(!0),m(X,{key:0},Z(f.value,(i,T)=>(c(),m("tr",{key:T},[t("td",{onClick:A=>(i.slack,void 0),role:"button"},[t("span",zt,s(i.name),1)],8,Et),t("td",{onClick:A=>(i.slack,void 0),role:"button"},s(i.phone),9,Gt),t("td",{onClick:A=>(i.slack,void 0),role:"button"},s(i.created_at_label),9,Kt),t("td",Yt,[u(P,{permissions:S.value,onEdit:O,onDelete:U,slack:i.slack},null,8,["permissions","slack"])])]))),128)):(c(),m("tr",Ht,[t("td",Qt,s(e.$t("No Data Found")),1)]))])])])),t("div",Rt,[t("div",Wt,[t("div",Xt,[u(st,{onPaginate_limit_update:j,pagination:v.value},null,8,["pagination"])]),t("div",Zt,[u(C(tt),{data:v.value,limit:5,onPaginationChangePage:r},null,8,["data"])])])])])]),_:1})}}};export{de as default};
