import{u as I,b as O,r as l,e as j,o as J,v as K,g as r,p as P,w as y,f as $,i as e,l as c,k as R,t as n,K as U,N as Y,j as w,h as u,F as z,x as G,O as H,q as Q,_ as W}from"./index.sP6fhsqN.js";import{D as X}from"./DefaultLayout.K5Bh9Jz_.js";import{_ as Z}from"./ListingSkeleton.0g9v9IYA.js";import{_ as ee}from"./PaginateLimit.T5jDCI_N.js";import"./vue-datepicker.S8gODTVm.js";/* empty css                                                   */import"./ClipLoader._89zL49D.js";/* empty css                                                   */const te={class:"header-nav-wrap"},se={class:"row align-items-center"},ae={class:"col-auto"},oe={class:"header-back-link"},ne={class:"col-auto"},ie={class:"fw-bold"},le={class:"content"},de={class:"page-heading"},ce={class:"row align-items-center justify-content-end"},re={class:"col-auto"},_e={class:"form-field page-heading-search-field mb-0"},me={class:"field-icon"},he=["placeholder"],ue={class:"icon"},ge={class:"col-auto"},pe={key:1,class:"table-responsive"},ve={class:"table table-list-data table-hover"},fe={class:"bg-light"},ye={scope:"col"},we={scope:"col"},be={scope:"col",width:"10%"},ke={scope:"col",width:"10%",class:"text-end"},Me=["onClick"],Ce={class:"fw-bold highlighted-list-item"},Pe=["onClick"],$e={class:"form-field"},Se={class:"form-check form-switch form-switch-2"},Ae=["onChange","checked"],De={class:"text-end"},Ne={class:"dropdown"},Be={class:"btn btn-icon btn-sm btn-light dropdown-toggle arrow-none",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},qe={class:"dropdown-menu"},xe=["onClick"],Ve=["onClick"],Le={key:1},Te={class:"text-center py-3",colspan:"7"},Ee={class:"data-footer"},Fe={class:"row align-items-center justify-content-between"},Ie={class:"col-auto"},Oe={class:"col-auto"},Qe={__name:"payment_modes",setup(je){const{t:m}=I(),S=Q(()=>W(()=>import("./AddPaymentMode.ZrRqMgIb.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])));O();const g=l(!1);l(!1);const b=l([]);function k(s=""){b.value=s,g.value=!0}function A(){g.value=!1,d()}l("");const D={server_messages:{type:"",messages:""},is_listing:!1,search_query:l("")},N=m("Search by name, arabic name .."),t=j({...D});J(()=>{d()}),K(()=>t.search_query,_.debounce(()=>{d()},500));const p=l([]),v=l([]);async function d(s=1){t.is_listing=!0,await axios.get("/api/payment_modes",{params:{page:s,paginate_limit:M.value,search_query:t.search_query}}).then(o=>{p.value=o.data.data,v.value=o.data.pagination,t.is_listing=!1}).catch(o=>{t.server_messages.type="error",t.server_messages.messages=o,t.is_listing=!1,console.log(o)})}const M=l();async function B(s){M.value=s,await d()}async function q(s){var o=new FormData;o.append("slack",s),await axios.post("/api/payment_mode/update_status",o).then(a=>{if(a.data.status_code==200)toast.success(a.data.msg),d();else try{t.server_messages.type="error",t.server_messages.messages=JSON.parse(a.data.msg)}catch{t.server_messages.type="error",t.server_messages.messages=a.data.msg}}).catch(a=>{t.server_messages.type="error",t.server_messages.messages=a,console.log(a)})}const x=l(!1),V=l([]);function C(s){x.value=!0,V.value=s}async function L(s){var o=!1;await Swal.fire({title:m("Do you want to delete this Payment Mode?"),showCancelButton:!0,confirmButtonText:m("Yes, Delete"),confirmButtonColor:"#d33",cancelButtonText:m("Cancel")}).then(a=>{a.isConfirmed&&(o=!0)}),o&&await axios.post("/api/payment_mode/delete",{slack:s}).then(a=>{if(a.data.status_code==200)Swal.fire(a.data.msg),d();else try{t.server_messages.type="error",t.server_messages.messages=JSON.parse(a.data.msg)}catch{t.server_messages.type="error",t.server_messages.messages=a.data.msg}}).catch(a=>{t.server_messages.type="error",t.server_messages.messages=a,console.log(a)})}return(s,o)=>{const a=$("Icon"),f=$("router-link"),T=Z,E=X;return r(),P(E,null,{subheader:y(()=>[e("div",te,[e("div",se,[e("div",ae,[e("div",oe,[c(f,{class:"text-primary",to:"/settings"},{default:y(()=>[c(a,{icon:"fa6-solid:chevron-left"}),R(" "+n(s.$t("Settings")),1)]),_:1})])]),e("div",ne,[e("h5",ie,n(s.$t("Payment Modes")),1)])])])]),default:y(()=>[e("div",le,[e("div",de,[e("div",ce,[e("div",re,[e("div",_e,[e("div",me,[U(e("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:w(N),"onUpdate:modelValue":o[0]||(o[0]=i=>t.search_query=i)},null,8,he),[[Y,t.search_query]]),e("div",ue,[c(a,{icon:"fa6-solid:magnifying-glass"})])])])]),e("div",ge,[e("a",{href:"#",class:"btn btn-sm btn-light-primary2","data-bs-toggle":"modal",onClick:k,"data-bs-target":"#addPaymentModeModal"}," + "+n(s.$t("New Payment Mode")),1)])])]),t.is_listing?(r(),P(T,{key:0})):(r(),u("div",pe,[e("table",ve,[e("thead",fe,[e("tr",null,[e("th",ye,n(s.$t("Name")),1),e("th",we,n(s.$t("Name Ar")),1),e("th",be,n(s.$t("Active")),1),e("th",ke,n(s.$t("Action")),1)])]),e("tbody",null,[p.value!=""?(r(!0),u(z,{key:0},G(p.value,(i,F)=>(r(),u("tr",{key:F},[e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewPaymentModeModal",onClick:h=>C(i)},[e("div",null,[e("span",Ce,n(i.name),1)])],8,Me),e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewPaymentModeModal",onClick:h=>C(i)},[e("div",null,n(i.name_ar),1)],8,Pe),e("td",null,[e("div",$e,[e("div",Se,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"Status_id",onChange:h=>q(i.slack),checked:i.status==1},null,40,Ae)])])]),e("td",De,[e("div",Ne,[e("button",Be,[c(a,{icon:"fa6-solid:ellipsis-vertical"})]),e("ul",qe,[e("li",null,[e("a",{class:"dropdown-item",href:"#","data-bs-toggle":"modal",onClick:h=>k(i),"data-bs-target":"#addPaymentModeModal"},n(s.$t("Edit")),9,xe)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:h=>L(i.slack)},n(s.$t("Delete")),9,Ve)])])])])]))),128)):(r(),u("tr",Le,[e("td",Te,n(s.$t("No Data Found")),1)]))])])])),e("div",Ee,[e("div",Fe,[e("div",Ie,[c(ee,{onPaginate_limit_update:B,pagination:v.value},null,8,["pagination"])]),e("div",Oe,[c(w(H),{data:v.value,limit:5,onPaginationChangePage:d},null,8,["data"])])])])]),c(w(S),{show_add_payment_mode_modal:g.value,onCloseAddPaymentModeModal:A,edit_data:b.value},null,8,["show_add_payment_mode_modal","edit_data"])]),_:1})}}};export{Qe as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AddPaymentMode.ZrRqMgIb.js","assets/ServerMessage.EFQMOwoZ.js","assets/index.sP6fhsqN.js","assets/index.KTHCd6a8.css","assets/vee-validate.esm.2kXgdFia.js","assets/index.esm.DHYHwGJ4.js","assets/VTextInput.EPCajChY.js","assets/VTooltip.kcvohVRA.js","assets/ClipLoader._89zL49D.js","assets/ClipLoader.7xz7y6gZ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
