import S from"./ServerMessage.EFQMOwoZ.js";import{D as V}from"./DefaultLayout.K5Bh9Jz_.js";import"./index.esm.DHYHwGJ4.js";import{B as y}from"./BeatLoader.GLQikMEo.js";import{C as A}from"./ClipLoader._89zL49D.js";import{a as N,r as h,e as M,b as L,o as x,g as o,p as k,w as m,f,i as s,l as _,k as i,t as e,j as p,h as l,m as c}from"./index.sP6fhsqN.js";/* empty css                                                   *//* empty css                                                   */const z={class:"header-nav-wrap"},R={class:"row align-items-center"},j={class:"col-auto"},I={class:"header-back-link"},E={class:"col-auto"},F={class:"fw-bold"},P={class:"col-auto ms-auto"},T={key:0,class:"me-2"},U=["disabled"],q={key:1},G={key:2},H=["href"],J={class:"content"},K={class:"page-heading"},O={key:0,class:"py-3"},Q={key:0,class:"row"},W={class:"col-md-12"},X={class:"card"},Y={key:0},Z={key:1},ss={class:"row"},es={class:"col-md-12 mb-3"},ts={class:"col-md-3"},as={class:"data-view-box mb-3"},os={class:"item"},ls={class:"col-md-3"},cs={class:"data-view-box mb-3"},is={class:"item"},ns={key:0,class:"col-md-3"},ds={class:"data-view-box mb-3"},rs={class:"item"},_s={class:"col-md-3"},us={class:"data-view-box mb-3"},vs={class:"item"},hs={class:"col-md-3"},ms={class:"data-view-box mb-3"},ps={class:"item"},bs={class:"col-md-3"},gs={class:"data-view-box mb-3"},ys={class:"item"},ks={key:0,class:"badge badge-primary"},fs={key:1,class:"badge badge-success"},ws={key:2,class:"badge badge-danger"},$s={class:"col-md-3"},Bs={class:"data-view-box mb-3"},Cs={class:"item"},Ds={class:"col-md-3"},Ss={class:"data-view-box mb-3"},Vs={class:"item"},As={key:1,class:"row"},Ns={class:"col-md-12"},Ms={class:"card"},Ls={key:0},xs={key:1},zs={class:"row"},Rs={class:"col-md-12 mb-3"},js={class:"col-md-12"},Is={class:"data-view-box mb-3"},Qs={__name:"view_voucher",setup(Es){const b=N().params.slack,n=h(!1),a=h([]),g=h(!1),d=M({...{server_messages:{type:"",messages:""},is_submitting:!1}}),u=L();x(()=>{w()});async function w(){n.value=!0,await axios.get("/api/voucher",{params:{slack:b,type:1}}).then(t=>{a.value=t.data.data,n.value=!1,g.value=!0}).catch(t=>{d.server_messages.type="error",d.server_messages.messages=t,n.value=!1,console.log(t)})}async function $(){n.value=!0;var t=new FormData;t.append("slack",b),t.append("type",1),await axios.post("/api/voucher/approve",t).then(r=>{a.value=r.data.data,n.value=!1,g.value=!0}).catch(r=>{d.server_messages.type="error",d.server_messages.messages=r,n.value=!1,console.log(r)})}return(t,r)=>{const B=f("Icon"),C=f("router-link"),D=S;return o(),k(V,null,{subheader:m(()=>[s("div",z,[s("div",R,[s("div",j,[s("div",I,[_(C,{class:"text-primary",to:"/vouchers"},{default:m(()=>[_(B,{icon:"fa6-solid:chevron-left"}),i(" "+e(t.$t("Vouchers")),1)]),_:1})])]),s("div",E,[s("h5",F,"#"+e(a.value.voucher_number),1)]),s("div",P,[a.value.status==0&&p(u).isMerchant?(o(),l("span",T,[i(e(t.$t("Balance"))+": ",1),s("b",null,e(a.value.balance_amount),1)])):c("",!0),a.value.status==0&&p(u).isMerchant?(o(),l("button",{key:1,class:"btn btn-success btn-text-success ms-2 btn-sm",disabled:n.value,onClick:r[0]||(r[0]=v=>$())},[d.is_submitting?(o(),k(A,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):c("",!0),n.value?(o(),l("span",q,e(t.$t("Approving...")),1)):(o(),l("span",G,e(t.$t("Approve")),1))],8,U)):c("",!0),a.value.status==1?(o(),l("a",{key:2,href:a.value.receipt_link,target:"_blank",class:"btn btn-light btn-text-primary ms-2 btn-sm"},e(t.$t("Receipt")),9,H)):c("",!0)])])])]),default:m(()=>{var v;return[s("div",J,[s("div",K,[d.server_messages.messages!=""?(o(),l("div",O,[_(D,{server_messages:d.server_messages},null,8,["server_messages"])])):c("",!0)]),a.value!=null?(o(),l("div",Q,[s("div",W,[s("div",X,[a.value==""?(o(),l("div",Y,[_(y,{color:"gray",size:"15px",class:"pt-2 pe-2"})])):(o(),l("div",Z,[s("div",ss,[s("div",es,[s("h5",null,e(t.$t("Basic Detail")),1)]),s("div",ts,[s("div",as,[s("div",os,[s("b",null,e(t.$t("Voucher No."))+":",1),i(" "+e(a.value.voucher_number),1)])])]),s("div",ls,[s("div",cs,[s("div",is,[s("b",null,e(t.$t("Amount"))+":",1),i(" "+e(a.value.withdrawal_amount),1)])])]),p(u).isMerchant?(o(),l("div",ns,[s("div",ds,[s("div",rs,[s("b",null,e(t.$t("Branch"))+":",1),i(" "+e(a.value.branch.name),1)])])])):c("",!0),s("div",_s,[s("div",us,[s("div",vs,[s("b",null,e(t.$t("User"))+":",1),i(" "+e(a.value.voucher_user.name),1)])])]),s("div",hs,[s("div",ms,[s("div",ps,[s("b",null,e(t.$t("Date"))+":",1),i(" "+e(a.value.voucher_date_label),1)])])]),s("div",bs,[s("div",gs,[s("div",ys,[s("b",null,e(t.$t("Status"))+":",1),a.value.status==0?(o(),l("span",ks,e(t.$t("Pending")),1)):c("",!0),a.value.status==1?(o(),l("span",fs,e(t.$t("Approved")),1)):c("",!0),a.value.status==2?(o(),l("span",ws,e(t.$t("Rejected")),1)):c("",!0)])])]),s("div",$s,[s("div",Bs,[s("div",Cs,[s("b",null,e(t.$t("Created By"))+":",1),i(" "+e((v=a.value.created_by)==null?void 0:v.name),1)])])]),s("div",Ds,[s("div",Ss,[s("div",Vs,[s("b",null,e(t.$t("Created At"))+":",1),i(" "+e(a.value.created_at_label),1)])])])])]))])])])):c("",!0),a.value!=null&&a.value.note!=null?(o(),l("div",As,[s("div",Ns,[s("div",Ms,[a.value==""?(o(),l("div",Ls,[_(y,{color:"gray",size:"15px",class:"pt-2 pe-2"})])):(o(),l("div",xs,[s("div",zs,[s("div",Rs,[s("h5",null,e(t.$t("Note")),1)]),s("div",js,[s("div",Is,[s("div",null,[s("p",null,e(a.value.note!=null?a.value.note:""),1)])])])])]))])])])):c("",!0)])]}),_:1})}}};export{Qs as default};
