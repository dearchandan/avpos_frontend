import{u as vt,o as gt,r as c,b as yt,d as N,e as k,v as Ct,g as l,p as bt,w as I,I as kt,f as U,J as wt,k as m,i as t,t as o,j as n,h as r,n as L,l as y,y as j,K as f,M as z,N as $t,L as A,x as J,F as R,O as St,q as Lt,_ as At}from"./index.7OFNPsHl.js";import{_ as Dt}from"./DefaultLayout.nvkZ4UhM.js";import{_ as Pt}from"./PaginateLimit.Xv-qfeqj.js";import{_ as Mt}from"./ActionButtonGroup.ogbCWQxi.js";import{_ as Tt}from"./VTooltip.n3SV8A0p.js";import{_ as Bt}from"./ListingSkeleton.iExoV4hO.js";import{_ as Et}from"./InventoryMenu.y7XvlyAV.js";import{j as Vt}from"./vue-datepicker.sD5zgpde.js";import"./ClipLoader.1qNfpKDH.js";/* empty css                                                   */const It={class:"content"},Ot={class:"page-heading"},qt={class:"row align-items-center justify-content-between mb-3"},Ht={class:"col-auto"},Zt={class:"mb-0"},Ft={class:"col-auto"},Nt={key:0},Ut={class:"row align-items-center justify-content-between g-3"},jt={class:"col col-lg-auto order-2 order-md-1"},zt={class:"row g-3"},Jt={class:"col col-md-auto label-none"},Rt={class:"col-6 col-md-auto d-none d-md-block"},xt={class:"dropdown filter-dropdown"},Gt=t("svg",{width:"20",height:"12",viewBox:"0 0 20 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M4.61109 11.3889C4.82588 11.6037 5.17412 11.6037 5.38891 11.3889L8.88909 7.88873C9.10388 7.67394 9.10388 7.3257 8.88909 7.11091C8.6743 6.89612 8.32606 6.89612 8.11127 7.11091L5 10.2222L1.88873 7.11091C1.67394 6.89612 1.3257 6.89612 1.11091 7.11091C0.896124 7.3257 0.896124 7.67394 1.11091 7.88873L4.61109 11.3889ZM4.45 1L4.45 11L5.55 11L5.55 1L4.45 1Z",fill:"currentColor"}),t("path",{d:"M14.6111 0.611092C14.8259 0.396303 15.1741 0.396303 15.3889 0.611092L18.8891 4.11127C19.1039 4.32606 19.1039 4.6743 18.8891 4.88909C18.6743 5.10388 18.3261 5.10388 18.1113 4.88909L15 1.77782L11.8887 4.88909C11.6739 5.10388 11.3257 5.10388 11.1109 4.88909C10.8961 4.6743 10.8961 4.32606 11.1109 4.11127L14.6111 0.611092ZM14.45 11L14.45 1L15.55 1L15.55 11L14.45 11Z",fill:"currentColor"})],-1),Kt=t("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M1 1L5 5L9 1",stroke:"currentColor","stroke-width":"1.3","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Qt={class:"btn btn-sm btn-light-primary font-weight-normal",type:"button","data-bs-toggle":"collapse","data-bs-target":"#subFilter","aria-expanded":"false","aria-controls":"collapseExample"},Wt=t("svg",{width:"13",height:"14",viewBox:"0 0 13 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M0.464286 2.33333H7.03022C7.23775 3.136 7.95879 3.73333 8.82143 3.73333C9.68407 3.73333 10.4051 3.136 10.6126 2.33333H12.5357C12.792 2.33333 13 2.12427 13 1.86667C13 1.60907 12.792 1.4 12.5357 1.4H10.6126C10.4051 0.597333 9.68407 0 8.82143 0C7.95879 0 7.23775 0.597333 7.03022 1.4H0.464286C0.208 1.4 0 1.60907 0 1.86667C0 2.12427 0.208 2.33333 0.464286 2.33333ZM8.82143 0.933333C9.33354 0.933333 9.75 1.35193 9.75 1.86667C9.75 2.3814 9.33354 2.8 8.82143 2.8C8.30932 2.8 7.89286 2.3814 7.89286 1.86667C7.89286 1.35193 8.30932 0.933333 8.82143 0.933333ZM12.5357 11.6667H10.6126C10.4051 10.864 9.68407 10.2667 8.82143 10.2667C7.95879 10.2667 7.23775 10.864 7.03022 11.6667H0.464286C0.208 11.6667 0 11.8757 0 12.1333C0 12.3909 0.208 12.6 0.464286 12.6H7.03022C7.23775 13.4027 7.95879 14 8.82143 14C9.68407 14 10.4051 13.4027 10.6126 12.6H12.5357C12.792 12.6 13 12.3909 13 12.1333C13 11.8757 12.792 11.6667 12.5357 11.6667ZM8.82143 13.0667C8.30932 13.0667 7.89286 12.6481 7.89286 12.1333C7.89286 11.6186 8.30932 11.2 8.82143 11.2C9.33354 11.2 9.75 11.6186 9.75 12.1333C9.75 12.6481 9.33354 13.0667 8.82143 13.0667ZM12.5357 6.53333H5.5055C5.29797 5.73067 4.57693 5.13333 3.71429 5.13333C2.85164 5.13333 2.13061 5.73067 1.92307 6.53333H0.464286C0.208 6.53333 0 6.7424 0 7C0 7.2576 0.208 7.46667 0.464286 7.46667H1.92307C2.13061 8.26933 2.85164 8.86667 3.71429 8.86667C4.57693 8.86667 5.29797 8.26933 5.5055 7.46667H12.5357C12.792 7.46667 13 7.2576 13 7C13 6.7424 12.792 6.53333 12.5357 6.53333ZM3.71429 7.93333C3.20218 7.93333 2.78571 7.51473 2.78571 7C2.78571 6.48527 3.20218 6.06667 3.71429 6.06667C4.22639 6.06667 4.64286 6.48527 4.64286 7C4.64286 7.51473 4.22639 7.93333 3.71429 7.93333Z",fill:"currentColor"})],-1),Yt={class:"col-auto col-md-auto"},Xt={class:"col-12 col-md-4 col-lg-3 order-1 order-md-2"},te={class:"form-field mb-0"},ee={class:"field-icon"},se=["placeholder"],oe={class:"icon"},ae={class:"collapse",id:"subFilter"},ne={class:"sub-filter"},ie={class:"row align-items-end g-3"},le={class:"col-6 col-md-auto"},ce={class:"form-field"},re={for:"",class:"form-label"},de={class:"col-6 col-md-auto"},_e={class:"form-field"},ue={for:"",class:"form-label"},me={value:""},he={value:"1"},fe={value:"2"},pe={class:"col-6 col-md-auto"},ve={class:"form-field"},ge={for:"",class:"form-label"},ye={value:""},Ce={value:"1"},be={value:"2"},ke={class:"col-6 col-md-auto"},we={class:"form-field"},$e={for:"",class:"form-label"},Se={value:""},Le={value:"1"},Ae={value:"0"},De={class:"col-6 col-md-auto d-none d-md-block"},Pe={class:"form-field"},Me={for:"",class:"form-label"},Te={value:""},Be=["value"],Ee={key:0},Ve={key:1,class:"table-responsive"},Ie={class:"table table-list-data table-hover"},Oe={class:"bg-light"},qe={scope:"col",width:"5%"},He={scope:"col",width:"15%"},Ze={scope:"col",width:"10%"},Fe={scope:"col",width:"10%"},Ne={scope:"col",width:"10%"},Ue={scope:"col",width:"10%"},je={scope:"col",width:"10%"},ze={scope:"col",width:"5%"},Je={key:0,scope:"col",class:"text-end",width:"5%"},Re=["onClick"],xe={alt:"",class:"listing-image img img-thumbnail rounded-circle"},Ge=["onClick"],Ke={class:"row align-items-center"},Qe={class:"col-auto"},We={class:"fw-bold highlighted-list-item"},Ye=t("div",{class:"col-auto"},[t("div",{class:"row gx-2"})],-1),Xe={class:"text-muted"},ts=["onClick"],es={key:0,class:"badge badge-primary"},ss={key:1,class:"badge badge-secondary"},os={key:2,class:"badge badge-info"},as=["onClick"],ns=["onClick"],is={key:0},ls={key:1,class:"badge badge-secondary"},cs={key:1},rs=["onClick"],ds={key:0},_s={key:1},us=["onClick"],ms={key:0},hs={key:1,class:"text-muted"},fs={class:"form-feild"},ps={class:"form-check form-switch form-switch-2"},vs=["onChange","checked"],gs={key:0,class:"text-end"},ys={key:1},Cs={class:"text-center py-3",colspan:"11"},bs={class:"data-footer"},ks={class:"row align-items-center justify-content-between"},ws={class:"col-auto"},$s={class:"col-auto"},Os={__name:"products",setup(Ss){const{t:w}=vt(),{isAuthorized:O}=kt();gt(()=>{G(),h()});const p=c({write:!1,delete:!1}),x=Lt(()=>At(()=>import("./CategorySearch.5E4jW8iY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])));function G(){p.value={write:O("A_WRITE_PRODUCT"),delete:O("A_DELETE_PRODUCT")}}const q=yt(),K=N(()=>q.user.currency.symbol),Q=N(()=>q.IsOtherTaxesAndFeeEnabled),W={server_messages:{type:"",messages:""},is_listing:!1,search_query:c(""),filter_count:0},Y=w("Search by name"),i=k({...W});Ct(()=>i.search_query,_.debounce(()=>{h()},500));const D=c([]),P=c([]);async function h(e=1){i.is_listing=!0,await axios.get("/api/v2/products",{params:{page:e,paginate_limit:H.value,search_query:i.search_query,filter:u,sort:M}}).then(a=>{D.value=a.data.data.data,P.value=a.data.data.pagination,i.is_listing=!1}).catch(a=>{i.server_messages.type="error",i.server_messages.messages=a,i.is_listing=!1,console.log(a)})}const H=c();async function X(e){H.value=e,await h()}async function tt(e){var a=new FormData;a.append("slack",e),await axios.post("/api/product/update_status",a).then(d=>{if(d.data.status_code==200)toast.success(d.data.msg);else try{i.server_messages.type="error",i.server_messages.messages=JSON.parse(d.data.msg)}catch{i.server_messages.type="error",i.server_messages.messages=d.data.msg}}).catch(d=>{i.server_messages.type="error",i.server_messages.messages=d,console.log(d)})}function v(e){router.push("/product/"+e)}function et(e){router.push("/product/add/"+e)}function st(e){router.push("/product/clone/"+e)}const $=c(!1),Z=k({is_all_products:c(""),dates:c(),status:c(""),type:c(""),price_type:c(""),stock_type:c(""),category:c(""),created_by:c("")}),u=k({...Z}),ot=k({sort_by:c(""),sort_type:c("")}),M=k({...ot}),T=c(!1),at=c(!1);async function C(){i.filter_count=0,JSON.stringify(u)!=JSON.stringify()&&(T.value=!0),_.forEach(u,(e,a)=>{e!=""&&e!=null&&a!="category"&&(i.filter_count=i.filter_count+1)}),$.value=!1,await h()}const S=c(!1);function nt(){S.value=!S.value}const F=c([]),B=c(!1);function b(e,a){M.sort_by=e,M.sort_type=a,S.value=!1,at.value=!0,h()}async function it(){$.value=!$.value,$.value&&(B.value=!0,await axios.get("/api/product/created_by_users").then(e=>{F.value=e.data.data,B.value=!1}).catch(e=>{i.server_messages.type="error",i.server_messages.messages=e,B.value=!1,console.log(e)}))}function lt(){Object.assign(u,Z),T.value=!1,i.filter_count=0,h()}async function ct(e){var a=!1;await Swal.fire({title:w("Do you want to delete this item?"),showCancelButton:!0,confirmButtonText:w("Yes, Delete"),confirmButtonColor:"#d33",cancelButtonText:w("Cancel")}).then(d=>{d.isConfirmed&&(a=!0)}),a&&await axios.post("/api/product/delete",{slack:e}).then(d=>{if(d.data.status_code==200)toast.success(d.data.msg),h();else try{i.server_messages.type="error",i.server_messages.messages=JSON.parse(d.data.msg)}catch{i.server_messages.type="error",i.server_messages.messages=d.data.msg}}).catch(d=>{i.server_messages.type="error",i.server_messages.messages=d,console.log(d)})}c([]);function rt(e){u.category=e.id,C()}return(e,a)=>{const d=Et,E=U("router-link"),dt=U("Icon"),_t=Bt,ut=Tt,mt=Mt,ht=Pt,ft=Dt,pt=wt("lazy");return l(),bt(ft,null,{subheader:I(()=>[m(d)]),default:I(()=>[t("div",It,[t("div",Ot,[t("div",qt,[t("div",Ht,[t("h2",Zt,o(e.$t("Products")),1)]),t("div",Ft,[n(p).write?(l(),r("div",Nt,[m(E,{class:"btn btn-sm btn-light-primary2",to:"/product/add",id:"step2"},{default:I(()=>[L("+ "+o(e.$t("New Product")),1)]),_:1})])):y("",!0)])]),t("div",Ut,[t("div",jt,[t("div",zt,[t("div",Jt,[m(n(x),{onSelectCategory:rt,height_sm:!0,limit:5})]),t("div",Rt,[t("div",xt,[t("button",{type:"button",class:"btn btn-sm btn-light-primary font-weight-normal",onClick:nt},[Gt,L(" Sort By "),Kt]),t("div",{class:j([n(S)?"show":"","dropdown-menu p-0"]),style:{"min-width":"150px"}},[t("li",{class:"dropdown-item",onClick:a[0]||(a[0]=s=>b("name","ASC"))},o(e.$t("Sort by"))+" (A-Z)",1),t("li",{class:"dropdown-item",onClick:a[1]||(a[1]=s=>b("name","DESC"))},o(e.$t("Sort by"))+" (Z-A)",1),t("li",{class:"dropdown-item",onClick:a[2]||(a[2]=s=>b("created_at","DESC"))},o(e.$t("Sort by Added Date")),1),t("li",{class:"dropdown-item",onClick:a[3]||(a[3]=s=>b("updated_at","DESC"))},o(e.$t("Sort By Last Modified Date")),1),t("li",{class:"dropdown-item",onClick:a[4]||(a[4]=s=>b("quantity","DESC"))},o(e.$t("Sort By Inventory Size (Max)")),1)],2)])]),t("div",{class:"col-auto col-md-auto",onClick:it},[t("button",Qt,[Wt,L(" "+o(e.$t("Filters"))+" ",1),f(t("span",{class:"badge",id:"filter_count_badge"},o(n(i).filter_count),513),[[z,n(i).filter_count>0]])])]),t("div",Yt,[n(T)?(l(),r("button",{key:0,class:"btn btn-sm btn-light-danger",onClick:lt},o(e.$t("Clear")),1)):y("",!0)])])]),t("div",Xt,[t("div",te,[t("div",ee,[f(t("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:n(Y),"onUpdate:modelValue":a[5]||(a[5]=s=>n(i).search_query=s)},null,8,se),[[$t,n(i).search_query]]),t("div",oe,[m(dt,{icon:"fa6-solid:magnifying-glass"})])])])])]),t("div",ae,[t("div",ne,[t("div",ie,[t("div",le,[t("div",ce,[t("label",re,o(e.$t("Date")),1),m(n(Vt),{range:"",modelValue:n(u).dates,"onUpdate:modelValue":[a[6]||(a[6]=s=>n(u).dates=s),a[7]||(a[7]=s=>C())],format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid form-control-sm"},null,8,["modelValue"])])]),t("div",de,[t("div",_e,[t("label",ue,o(e.$t("Type")),1),f(t("select",{class:"form-select form-select-sm form-select-solid","onUpdate:modelValue":a[8]||(a[8]=s=>n(u).type=s),onChange:C},[t("option",me,o(e.$t("All")),1),t("option",he,o(e.$t("Product")),1),t("option",fe,o(e.$t("Recipe")),1)],544),[[A,n(u).type]])])]),t("div",pe,[t("div",ve,[t("label",ge,o(e.$t("Stock Type")),1),f(t("select",{class:"form-select form-select-sm form-select-solid","onUpdate:modelValue":a[9]||(a[9]=s=>n(u).stock_type=s),onChange:C},[t("option",ye,o(e.$t("All")),1),t("option",Ce,o(e.$t("Below Alert Limit")),1),t("option",be,o(e.$t("Out Of Stock")),1)],544),[[A,n(u).stock_type]])])]),t("div",ke,[t("div",we,[t("label",$e,o(e.$t("Status")),1),f(t("select",{class:"form-select form-select-sm form-select-solid","onUpdate:modelValue":a[10]||(a[10]=s=>n(u).status=s),onChange:C},[t("option",Se,o(e.$t("All")),1),t("option",Le,o(e.$t("Active")),1),t("option",Ae,o(e.$t("Inactive")),1)],544),[[A,n(u).status]])])]),t("div",De,[t("div",Pe,[t("label",Me,o(e.$t("Created By")),1),f(t("select",{class:"form-select form-select-sm form-select-solid","onUpdate:modelValue":a[11]||(a[11]=s=>n(u).created_by=s),onChange:C},[t("option",Te,o(e.$t("All")),1),(l(!0),r(R,null,J(n(F),(s,V)=>(l(),r("option",{key:V,value:s.slack},o(s.name),9,Be))),128))],544),[[A,n(u).created_by]])])])])])])]),n(i).is_listing?(l(),r("div",Ee,[m(_t)])):(l(),r("div",Ve,[t("table",Ie,[t("thead",Oe,[t("tr",null,[t("th",qe,o(e.$t("Image")),1),t("th",He,o(e.$t("Product")),1),t("th",Ze,o(e.$t("Type")),1),t("th",Fe,o(e.$t("Price Type")),1),t("th",Ne,o(e.$t("Qty.")),1),t("th",Ue,[L(o(e.$t("Sale Price"))+" ",1),f(m(ut,{message:"The Sale Price Is Inclusive Of Other Taxes and Product Taxes (VAT) "},null,512),[[z,n(Q)]])]),t("th",je,o(e.$t("Taxes")),1),t("th",ze,o(e.$t("Active")),1),n(p).write&&n(p).delete?(l(),r("th",Je,o(e.$t("Action")),1)):y("",!0)])]),t("tbody",null,[n(D)!=""?(l(!0),r(R,{key:0},J(n(D),(s,V)=>(l(),r("tr",{key:V},[t("td",{onClick:g=>v(s.slack),role:"button"},[f(t("img",xe,null,512),[[pt,s.image_path]])],8,Re),t("td",{onClick:g=>v(s.slack),role:"button"},[t("div",Ke,[t("div",Qe,[t("div",null,[t("span",We,o(s.name),1)])]),Ye]),t("div",null,[t("small",Xe,o(s.name_ar),1)])],8,Ge),t("td",{onClick:g=>v(s.slack),role:"button"},[s.type==1?(l(),r("span",es,o(e.$t(s.type_text)),1)):y("",!0),s.type==2?(l(),r("span",ss,o(e.$t(s.type_text)),1)):y("",!0),s.type==4?(l(),r("span",os,o(e.$t(s.type_text)),1)):y("",!0)],8,ts),t("td",{onClick:g=>v(s.slack),role:"button"},o(e.$t(s.price_type_text)),9,as),t("td",{onClick:g=>v(s.slack),role:"button"},[s.this_branch_inventory?(l(),r("span",is,[s.is_stockable?(l(),r("span",{key:0,class:j({"text-danger":s.this_branch_inventory.quantity==0},{"text-warning":s.this_branch_inventory.quantity<=s.this_branch_inventory.alert_quantity})},o(s.this_branch_inventory.quantity),3)):(l(),r("span",ls,o(e.$t("Unstockable")),1))])):(l(),r("span",cs,"-"))],8,ns),t("td",{onClick:g=>v(s.slack),role:"button"},[s.this_branch_inventory?(l(),r("span",ds,o(s.this_branch_inventory.sale_price+" "+n(K)),1)):(l(),r("span",_s,"-"))],8,rs),t("td",{onClick:g=>v(s.slack),role:"button"},[s.tax?(l(),r("span",ms,o(s.tax.name),1)):(l(),r("span",hs," - "))],8,us),t("td",null,[t("div",fs,[t("div",ps,[t("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"Status_id",onChange:g=>tt(s.slack),checked:s.status==1},null,40,vs)])])]),n(p).write||n(p).delete?(l(),r("td",gs,[m(mt,{permissions:n(p),onClone:st,onDelete:ct,onEdit:et,slack:s.slack},null,8,["permissions","slack"])])):y("",!0)]))),128)):(l(),r("tr",ys,[t("td",Cs,o(e.$t("No Data Found")),1)]))])])])),t("div",bs,[t("div",ks,[t("div",ws,[m(ht,{onPaginate_limit_update:X,pagination:n(P)},null,8,["pagination"])]),t("div",$s,[m(n(St),{data:n(P),limit:5,onPaginationChangePage:h},null,8,["data"])])])])])]),_:1})}}};export{Os as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/CategorySearch.5E4jW8iY.js","assets/index.7OFNPsHl.js","assets/index.1t-AB2n6.css","assets/vee-validate.esm.N3uz7Rsk.js","assets/index.esm.cd1bITNA.js","assets/BeatLoader.cb9i48GG.js","assets/BeatLoader.5j6ku4bW.css","assets/ClipLoader.7xz7y6gZ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
