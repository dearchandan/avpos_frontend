import{u as G,b as z,r as n,e as w,o as W,v as H,g as l,p as Q,w as j,I as X,f as Y,l as u,i as t,t as s,h as c,m,j as p,K as D,L as Z,N as x,F as tt,x as et,O as st,q as ot,_ as at}from"./index.li3fCRRM.js";import{D as nt}from"./DefaultLayout.saUWsTkY.js";import{_ as lt}from"./PaginateLimit.SmYeFgfo.js";import{_ as it}from"./ListingSkeleton.6NzqF9S5.js";import{_ as ct}from"./InventoryMenu.8CswL5DF.js";import{j as dt}from"./vue-datepicker.a6BsTEHj.js";import"./ClipLoader.gDBpDd3b.js";/* empty css                                                   */const rt={class:"content"},_t={class:"page-heading"},ut={class:"row align-items-center justify-content-between mb-3"},mt={class:"col-auto"},ht={class:"mb-0"},pt={key:0,class:"col-auto"},ft={class:"row align-items-end justify-content-between mb-3"},vt={class:"col-auto col-md-auto"},gt={class:"row align-items-end justify-content-between"},bt={class:"col-auto col-md-auto"},yt={class:"form-field"},kt={class:"col-auto"},wt={class:"form-field"},At={for:"",class:"form-label"},$t={value:""},St={value:"1"},Ct={value:"2"},jt={value:"3"},Dt={class:"col-auto col-md-auto ml-0 me-auto"},Mt={class:"col-auto"},Nt={class:"form-field page-heading-search-field mb-0"},Pt={class:"field-icon"},Tt=["placeholder"],Et={class:"icon"},Lt={key:0},Vt={key:1,class:"table-responsive"},qt={class:"table table-list-data table-hover"},It={class:"bg-light"},Ot={scope:"col",width:"15%"},Rt={scope:"col",width:"30%"},Bt={scope:"col",width:"15%"},Ft={scope:"col",width:"15%"},Ut={scope:"col",width:"20%"},Jt=["onClick"],Kt=["onClick"],Gt=["onClick"],zt=["onClick"],Wt={key:0,class:"badge badge-warning",role:"button"},Ht={key:1,class:"badge badge-success",role:"button"},Qt={key:2,class:"badge badge-danger",role:"button"},Xt={key:1},Yt=t("td",{class:"text-center py-3",colspan:"8"},"No Data Found",-1),Zt=[Yt],xt={class:"data-footer"},te={class:"row align-items-center justify-content-between"},ee={class:"col-auto"},se={class:"col-auto"},ue={__name:"stock_adjustments",setup(oe){const{t:M}=G(),{isAuthorized:A}=X(),N=ot(()=>at(()=>import("./AddStockAdjustment.rDRs0z9E.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])));z();const f=n(!1);function P(){f.value=!0}function T(){f.value=!1}const E={server_messages:{type:"",messages:""},is_listing:!1,search_query:n("")},L=M("Search by reference no..."),i=w({...E});W(()=>{O(),d()}),H(()=>i.search_query,_.debounce(()=>{d()},500));const v=n([]),g=n([]);n([{key:"1",value:"Pending"},{key:"2",value:"Approved"},{key:"3",value:"Rejected"}]);async function d(e=1){i.is_listing=!0,await axios.get("/api/stock_adjustments",{params:{page:e,paginate_limit:$.value,search_query:i.search_query,filter:r}}).then(a=>{v.value=a.data.data,g.value=a.data.pagination,i.is_listing=!1}).catch(a=>{i.server_messages.type="error",i.server_messages.messages=a,i.is_listing=!1,console.log(a)})}const $=n();async function V(e){$.value=e,await d()}const q=n(!1),b=w({dates:n(),status:n("")}),r=w({...b}),y=n(!1);async function S(){JSON.stringify(r)!=JSON.stringify(b)&&(y.value=!0),q.value=!1,await d()}function I(){Object.assign(r,b),y.value=!1,d()}function h(e){router.push("/stock_adjustment/"+e)}const C=n({write:!1,delete:!1});function O(){C.value={write:A("A_WRITE_STOCK_ADJUSTMENT"),delete:A("A_DELETE_STOCK_ADJUSTMENT")}}return(e,a)=>{const R=ct,B=Y("Icon"),F=it,U=lt,J=nt;return l(),Q(J,null,{subheader:j(()=>[u(R)]),default:j(()=>[t("div",rt,[t("div",_t,[t("div",ut,[t("div",mt,[t("h2",ht,s(e.$t("Stock Adjustment")),1)]),C.value.write?(l(),c("div",pt,[t("a",{href:"#",class:"btn btn-sm btn-light-primary2","data-bs-toggle":"modal",onClick:a[0]||(a[0]=o=>P()),"data-bs-target":"#addStockAdjustmentModal"},"+ "+s(e.$t("New Stock Adjustment")),1)])):m("",!0)]),t("div",ft,[t("div",vt,[t("div",gt,[t("div",bt,[t("div",yt,[t("label",null,s(e.$t("Approved Date")),1),u(p(dt),{range:"",modelValue:r.dates,"onUpdate:modelValue":[a[1]||(a[1]=o=>r.dates=o),a[2]||(a[2]=o=>S())],format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid form-control-sm"},null,8,["modelValue"])])]),t("div",kt,[t("div",wt,[t("label",At,s(e.$t("Status")),1),D(t("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":a[3]||(a[3]=o=>r.status=o),onChange:S},[t("option",$t,s(e.$t("All")),1),t("option",St,s(e.$t("Pending")),1),t("option",Ct,s(e.$t("Approved")),1),t("option",jt,s(e.$t("Rejected")),1)],544),[[Z,r.status]])])])])]),t("div",Dt,[y.value?(l(),c("button",{key:0,class:"btn btn-sm btn-light-danger",onClick:I},s(e.$t("Clear")),1)):m("",!0)]),t("div",Mt,[t("div",Nt,[t("div",Pt,[D(t("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:p(L),"onUpdate:modelValue":a[4]||(a[4]=o=>i.search_query=o)},null,8,Tt),[[x,i.search_query]]),t("div",Et,[u(B,{icon:"fa6-solid:magnifying-glass"})])])])])])]),i.is_listing?(l(),c("div",Lt,[u(F)])):(l(),c("div",Vt,[t("table",qt,[t("thead",It,[t("tr",null,[t("th",Ot,s(e.$t("Reference Number")),1),t("th",Rt,s(e.$t("Branch")),1),t("th",Bt,s(e.$t("Created Date")),1),t("th",Ft,s(e.$t("Approved Date")),1),t("th",Ut,s(e.$t("Status")),1)])]),t("tbody",null,[v.value!=""?(l(!0),c(tt,{key:0},et(v.value,(o,K)=>(l(),c("tr",{key:K},[t("td",{onClick:k=>h(o.slack),role:"button"},s(o.reference_no),9,Jt),t("td",{onClick:k=>h(o.slack),role:"button"},s(o.branch.name),9,Kt),t("td",{onClick:k=>h(o.slack),role:"button"},s(o.created_at_label),9,Gt),t("td",{onClick:k=>h(o.slack),role:"button"},s(o.approved_at_label),9,zt),t("td",null,[o.status==1?(l(),c("span",Wt,s(e.$t("Pending")),1)):m("",!0),o.status==2?(l(),c("span",Ht,s(e.$t("Approved")),1)):m("",!0),o.status==3?(l(),c("span",Qt,s(e.$t("Rejected")),1)):m("",!0)])]))),128)):(l(),c("tr",Xt,Zt))])])])),t("div",xt,[t("div",te,[t("div",ee,[u(U,{onPaginate_limit_update:V,pagination:g.value},null,8,["pagination"])]),t("div",se,[u(p(st),{data:g.value,limit:5,onPaginationChangePage:d},null,8,["data"])])])])]),u(p(N),{show_add_stock_adjustment_modal:f.value,onCloseAddStockAdjustmentModal:T,onGetStockAdjustments:d},null,8,["show_add_stock_adjustment_modal"])]),_:1})}}};export{ue as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AddStockAdjustment.rDRs0z9E.js","assets/ServerMessage.Re9KOdbP.js","assets/index.li3fCRRM.js","assets/index.KTHCd6a8.css","assets/VTextInput.pcaNaUkX.js","assets/VTooltip.pHzwBjkF.js","assets/vee-validate.esm.reM-LHjC.js","assets/index.esm.e6McCFlz.js","assets/ClipLoader.gDBpDd3b.js","assets/ClipLoader.7xz7y6gZ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
