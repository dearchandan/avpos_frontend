import{u as K,b as q,d as D,e as V,r as g,g as l,p as M,w as m,f as S,i as t,k as h,n as u,t as n,j as e,l as $,A as Y,B as A,h as d,F as w,x as y,I as U,bV as B,q as z,_ as W}from"./index.GdMxdeuf.js";import{_ as J}from"./DefaultLayout.qd3nRBiq.js";import{_ as Q}from"./ListingSkeleton.upY030ro.js";import{_ as X}from"./VMultiSelect.aFZl8ywf.js";import{s as C,a as Z,e as tt,j as et}from"./vue-datepicker.iEAbZR0K.js";import{s as O,e as T}from"./index.Fegs7wUo.js";import"./ClipLoader.UcGuNCxH.js";/* empty css                                                   */import"./vee-validate.esm.9aElOHQY.js";const st={class:"header-nav-wrap"},ot={class:"row align-items-center"},nt={class:"col-auto"},at={class:"header-back-link"},lt={class:"col-auto"},dt={class:"fw-bold"},it={class:"content"},ct={class:"row"},rt={class:"col-md-12"},_t={class:"card"},ht={class:"row field-m-0 align-items-end g-3"},ut={class:"col-md-4 col-lg-3"},mt={class:"form-field"},pt={for:"",class:"form-label"},bt=t("span",{class:"text-danger"},"*",-1),vt=["onClick","onKeyup"],ft={class:"col-md-4 col-lg-3"},gt={class:"col-auto text-end"},wt={class:"row align-items-center"},yt={class:"col-auto"},xt=["disabled"],kt={class:"col-auto"},Dt=["disabled"],Vt={key:0,class:"col-md-12"},Mt={class:"row justify-content-center"},St={class:"col-md-8 col-lg-8"},$t={class:"card",id:"print_div"},Yt={class:"row"},At={key:0},Bt={key:1},Ct={class:"card-head mb-4"},Ot={class:"text-center"},Tt=t("div",{class:"head-title"},[t("h4",null,"General Sales Report")],-1),Pt={class:"head-data"},Lt=t("b",null,"Printed On:",-1),Rt={class:"head-data"},It=t("b",null,"Date:",-1),Et={class:"head-data"},jt=t("b",null,"Branch:",-1),Gt={class:"card-data"},Ht={class:"text-center"},Nt={class:"head-title"},Ft={class:"table-responsive mb-3"},Kt={class:"table table-list-data table-hover"},qt=t("thead",null,[t("tr",null,[t("th",{colspan:"3"},"General")])],-1),Ut={width:"60%",class:"text-start"},zt={width:"20%",class:"text-center"},Wt={width:"20%",class:"text-end"},Jt={class:"table-responsive mb-3"},Qt={class:"table table-list-data table-hover"},Xt=t("thead",null,[t("tr",null,[t("th",{colspan:"3"},"Order Types")])],-1),Zt={width:"60%",class:"text-start"},te={width:"20%",class:"text-center"},ee={width:"20%",class:"text-end"},se={class:"table-responsive"},oe={class:"table table-list-data table-hover"},ne=t("thead",null,[t("tr",null,[t("th",{colspan:"3"},"Payments")])],-1),ae={width:"60%",class:"text-start"},le={width:"20%",class:"text-center"},de={width:"20%",class:"text-end"},ge={__name:"general_sales_report",setup(ie){const{t:x}=K(),{isAuthorized:ce,getRoundedValue:p}=U(),b=q();D(()=>b.user.currency.symbol);const P=V({server_messages:{type:"",messages:""},is_submitting:!1,is_listing:!1,dates:g([new Date,new Date]),selected_branch:b.user.branch_id,is_exporting:!1}),s=V({...P}),L=x("Select Branch");x("All Branches");const R=g([{label:"Today",value:[new Date,new Date]},{label:"This month",value:[O(new Date),T(new Date)]},{label:"Last month",value:[O(C(new Date,1)),T(C(new Date,1))]},{label:"This year",value:[Z(new Date),tt(new Date)]}]),I=D(()=>b.user.branches),i=g([]);async function E(c=1){s.is_listing=!0,s.dates[0]=B(s.dates[0]).format("YYYY-MM-DD"),s.dates[1]=B(s.dates[1]).format("YYYY-MM-DD"),await axios.get("/api/general_sales_report",{params:{filter:s}}).then(a=>{i.value=a.data.data,s.is_listing=!1}).catch(a=>{s.server_messages.type="error",s.server_messages.messages=a,s.is_listing=!1,console.log(a)})}async function j(){const c=document.getElementById("print_div").innerHTML;let a="";for(const v of[...document.querySelectorAll('link[rel="stylesheet"], style')])a+=v.outerHTML;const r=window.open("AvPOS","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");r.document.write(`<!DOCTYPE html>
<html>
  <head>
    ${a}
  </head>
  <body>
    ${c}
  </body>
</html>`),r.document.close(),r.focus(),r.print()}const G=z(()=>W(()=>import("./ServerMessage.Wf7puwQc.js"),__vite__mapDeps([0,1,2])));return(c,a)=>{const r=S("Icon"),v=S("router-link"),H=X,N=Q,F=J;return l(),M(F,null,{subheader:m(()=>[t("div",st,[t("div",ot,[t("div",nt,[t("div",at,[h(v,{class:"text-primary",to:"/reports"},{default:m(()=>[h(r,{icon:"fa6-solid:chevron-left"}),u(" "+n(c.$t("Reports")),1)]),_:1})])]),t("div",lt,[t("h5",dt,n(c.$t("General Sales Report")),1)])])])]),default:m(()=>[t("div",it,[e(s).server_messages.messages!=""?(l(),M(e(G),{key:0,class:"py-3",server_messages:e(s).server_messages},null,8,["server_messages"])):$("",!0),t("div",ct,[t("div",rt,[t("div",_t,[t("div",ht,[t("div",ut,[t("div",mt,[t("label",pt,[u(n(c.$t("Select Dates"))+" ",1),bt]),h(e(et),{range:"","preset-dates":e(R),modelValue:e(s).dates,"onUpdate:modelValue":a[0]||(a[0]=o=>e(s).dates=o),format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid"},{"preset-date-range-button":m(({label:o,value:_,presetDate:f})=>[t("span",{role:"button",tabindex:0,onClick:k=>f(_),onKeyup:[Y(A(k=>f(_),["prevent"]),["enter"]),Y(A(k=>f(_),["prevent"]),["space"])]},n(o),41,vt)]),_:1},8,["preset-dates","modelValue"])])]),t("div",ft,[h(H,{name:"branches",label:e(L),text:"name",value:"id",options:e(I),modelValue:e(s).selected_branch,"onUpdate:modelValue":a[1]||(a[1]=o=>e(s).selected_branch=o),selected:e(s).selected_branch,mode:"single"},null,8,["label","options","modelValue","selected"])]),t("div",gt,[t("div",wt,[t("div",yt,[t("button",{class:"btn btn-primary",onClick:E,disabled:e(s).dates==null},n(c.$t("View")),9,xt)]),t("div",kt,[t("button",{class:"btn btn-success",onClick:a[2]||(a[2]=o=>j()),disabled:e(s).dates==null},n(c.$t("Print")),9,Dt)])])])])])]),e(i).general_data!=null?(l(),d("div",Vt,[t("div",Mt,[t("div",St,[t("div",$t,[t("div",Yt,[e(s).is_listing?(l(),d("div",At,[h(N)])):(l(),d("div",Bt,[t("div",Ct,[t("div",Ot,[Tt,t("div",Pt,[t("span",null,[t("label",null,[Lt,u(" "+n(e(i).printed_on),1)])])]),t("div",Rt,[t("span",null,[t("label",null,[It,u(" "+n(e(i).date),1)])])]),t("div",Et,[t("span",null,[t("label",null,[jt,u(" "+n(e(i).branch),1)])])])])]),t("div",Gt,[t("div",Ht,[t("div",Nt,[t("div",Ft,[t("table",Kt,[qt,t("tbody",null,[(l(!0),d(w,null,y(e(i).general_data,(o,_)=>(l(),d("tr",null,[t("td",Ut,n(o.title),1),t("td",zt,n(o.count),1),t("td",Wt,n(e(p)(o.amount)),1)]))),256))])])]),t("div",Jt,[t("table",Qt,[Xt,t("tbody",null,[(l(!0),d(w,null,y(e(i).order_types,(o,_)=>(l(),d("tr",null,[t("td",Zt,n(o.title),1),t("td",te,n(o.count),1),t("td",ee,n(e(p)(o.amount)),1)]))),256))])])]),t("div",se,[t("table",oe,[ne,t("tbody",null,[(l(!0),d(w,null,y(e(i).payment_wise_count,(o,_)=>(l(),d("tr",null,[t("td",ae,n(o.title),1),t("td",le,n(o.count),1),t("td",de,n(e(p)(o.amount)),1)]))),256))])])])])])])]))])])])])])):$("",!0)])])]),_:1})}}};export{ge as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ServerMessage.Wf7puwQc.js","assets/index.GdMxdeuf.js","assets/index.1t-AB2n6.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
