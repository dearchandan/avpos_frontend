import{_ as Y}from"./DefaultLayout.nvkZ4UhM.js";import{_ as x}from"./PaginateLimit.Xv-qfeqj.js";import{_ as tt}from"./ListingSkeleton.iExoV4hO.js";import{_ as et}from"./VSelect.UFegTIpk.js";import{_ as ot}from"./BusinessMenu.k1dYbaCV.js";import{u as st,b as nt,d as lt,r as a,e as T,o as at,v as M,g as c,p as it,w as N,I as ct,f as B,k as u,i as t,t as o,h as d,n as y,l as v,j as E,K as g,M as dt,N as _t,L as O,F as rt,x as ut,O as mt}from"./index.7OFNPsHl.js";import{j as ht}from"./vue-datepicker.sD5zgpde.js";import"./ClipLoader.1qNfpKDH.js";/* empty css                                                   */import"./vee-validate.esm.N3uz7Rsk.js";/* empty css                                                                */const pt={class:"content"},ft={class:"page-heading"},vt={class:"row align-items-center justify-content-between mb-3"},yt={class:"col-auto"},gt={class:"mb-0"},Ct={key:0,class:"col-auto"},bt={class:"row align-items-end justify-content-between g-3"},kt={class:"col col-lg-auto order-2 order-md-1"},wt={class:"row g-3 align-items-end"},$t={class:"col col-md-auto"},Tt={class:"form-field"},Mt={class:"col-auto col-md-auto"},Nt={class:"btn btn-sm btn-light-primary font-weight-normal",type:"button","data-bs-toggle":"collapse","data-bs-target":"#subFilter","aria-expanded":"false","aria-controls":"collapseExample"},Et=t("svg",{width:"13",height:"14",viewBox:"0 0 13 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M0.464286 2.33333H7.03022C7.23775 3.136 7.95879 3.73333 8.82143 3.73333C9.68407 3.73333 10.4051 3.136 10.6126 2.33333H12.5357C12.792 2.33333 13 2.12427 13 1.86667C13 1.60907 12.792 1.4 12.5357 1.4H10.6126C10.4051 0.597333 9.68407 0 8.82143 0C7.95879 0 7.23775 0.597333 7.03022 1.4H0.464286C0.208 1.4 0 1.60907 0 1.86667C0 2.12427 0.208 2.33333 0.464286 2.33333ZM8.82143 0.933333C9.33354 0.933333 9.75 1.35193 9.75 1.86667C9.75 2.3814 9.33354 2.8 8.82143 2.8C8.30932 2.8 7.89286 2.3814 7.89286 1.86667C7.89286 1.35193 8.30932 0.933333 8.82143 0.933333ZM12.5357 11.6667H10.6126C10.4051 10.864 9.68407 10.2667 8.82143 10.2667C7.95879 10.2667 7.23775 10.864 7.03022 11.6667H0.464286C0.208 11.6667 0 11.8757 0 12.1333C0 12.3909 0.208 12.6 0.464286 12.6H7.03022C7.23775 13.4027 7.95879 14 8.82143 14C9.68407 14 10.4051 13.4027 10.6126 12.6H12.5357C12.792 12.6 13 12.3909 13 12.1333C13 11.8757 12.792 11.6667 12.5357 11.6667ZM8.82143 13.0667C8.30932 13.0667 7.89286 12.6481 7.89286 12.1333C7.89286 11.6186 8.30932 11.2 8.82143 11.2C9.33354 11.2 9.75 11.6186 9.75 12.1333C9.75 12.6481 9.33354 13.0667 8.82143 13.0667ZM12.5357 6.53333H5.5055C5.29797 5.73067 4.57693 5.13333 3.71429 5.13333C2.85164 5.13333 2.13061 5.73067 1.92307 6.53333H0.464286C0.208 6.53333 0 6.7424 0 7C0 7.2576 0.208 7.46667 0.464286 7.46667H1.92307C2.13061 8.26933 2.85164 8.86667 3.71429 8.86667C4.57693 8.86667 5.29797 8.26933 5.5055 7.46667H12.5357C12.792 7.46667 13 7.2576 13 7C13 6.7424 12.792 6.53333 12.5357 6.53333ZM3.71429 7.93333C3.20218 7.93333 2.78571 7.51473 2.78571 7C2.78571 6.48527 3.20218 6.06667 3.71429 6.06667C4.22639 6.06667 4.64286 6.48527 4.64286 7C4.64286 7.51473 4.22639 7.93333 3.71429 7.93333Z",fill:"currentColor"})],-1),St={class:"col-auto col-md-auto"},At={class:"col-12 col-md-4 col-lg-3 order-1 order-md-2"},Vt={class:"form-field mb-0"},Ht={class:"field-icon"},Pt=["placeholder"],It={class:"icon"},Bt={class:"collapse",id:"subFilter"},Ot={class:"sub-filter"},Dt={class:"row align-items-center g-3"},Ft={class:"col-6 col-md-auto"},jt={class:"col-6 col-md-auto d-md-block"},Lt={class:"form-field"},qt={value:""},Zt={value:"INCOME"},Ut={value:"EXPENSE"},Rt={class:"col-6 col-md-auto d-md-block"},Jt={class:"form-field"},Xt={value:""},zt={value:"1"},Gt={value:"2"},Kt={value:"3"},Wt={key:0},Qt={key:1,class:"table-responsive"},Yt={class:"table table-list-data table-hover"},xt={class:"bg-light"},te={scope:"col",width:"20%"},ee={scope:"col",width:"15%"},oe={scope:"col",width:"15%"},se={scope:"col",width:"10%"},ne={scope:"col",width:"10%"},le={scope:"col",width:"15%"},ae={scope:"col",width:"10%"},ie=["onClick"],ce=["onClick"],de={key:0,class:"text-success"},_e={key:1,class:"text-danger"},re=["onClick"],ue={key:0,class:"text-muted"},me=t("br",null,null,-1),he=["onClick"],pe=["onClick"],fe=["onClick"],ve=["onClick"],ye={key:1},ge={class:"text-center py-3",colspan:"11"},Ce={class:"data-footer"},be={class:"row align-items-center justify-content-between"},ke={class:"col-auto"},we={class:"col-auto"},Oe={__name:"transactions",setup($e){const{isAuthorized:S}=ct(),{t:r}=st(),D=nt(),A=lt(()=>D.user.currency.symbol);a(!1);const V=a({type:r("Type"),account:r("Account"),select_account:r("Select Account"),payment_method:r("Payment Method"),select_payment_method:r("Select Payment Method"),amount:r("Amount"),transaction_date:r("Transaction Date")}),F={server_messages:{type:"",messages:""},is_listing:!1,search_query:a(""),filter_count:0},j=r("Search by amount"),l=T({...F});at(()=>{R(),h(),q()}),M(()=>l.search_query,_.debounce(()=>{h()},500));const C=a([]),b=a([]);a([]);const H=a([]);async function h(e=1){l.is_listing=!0,await axios.get("/api/v2/transactions",{params:{page:e,paginate_limit:P.value,search_query:l.search_query,filter:i}}).then(n=>{C.value=n.data.data,b.value=n.data.pagination,l.is_listing=!1}).catch(n=>{l.server_messages.type="error",l.server_messages.messages=n,l.is_listing=!1,console.log(n)})}const P=a();async function L(e){P.value=e,await h()}async function q(){let e=await axios.get("api/payment_methods/all");e=e.data.data,_.forEach(e,n=>{let $={key:n.slack,value:n.name};H.value.push($)})}const Z=a(!1),k=T({transaction_dates:a(),payment_method:a(),transaction_type:a(""),account:a(""),bill_type:a("")}),i=T({...k});M(()=>i.account,e=>{f()}),M(()=>i.payment_method,e=>{f()});const w=a(!1);async function f(){l.filter_count=0,JSON.stringify(i)!=JSON.stringify(k)&&(w.value=!0),_.forEach(i,(e,n)=>{e!=""&&e!=null&&n!="transaction_dates"&&(l.filter_count=l.filter_count+1)}),Z.value=!1,await h()}function U(){Object.assign(i,k),w.value=!1,l.filter_count=0,h()}function m(e){router.push("/transaction/"+e)}const I=a({write:!1,delete:!1});function R(){I.value={write:S("A_WRITE_TRANSACTION"),delete:S("A_DELETE_TRANSACTION")}}return(e,n)=>{const $=ot,J=B("router-link"),X=B("Icon"),z=et,G=tt,K=x,W=Y;return c(),it(W,null,{subheader:N(()=>[u($)]),default:N(()=>[t("div",pt,[t("div",ft,[t("div",vt,[t("div",yt,[t("h2",gt,o(e.$t("Transactions")),1)]),I.value.write?(c(),d("div",Ct,[u(J,{class:"btn btn-sm btn-light-primary2",to:"/transaction/add"},{default:N(()=>[y("+ "+o(e.$t("New Transaction")),1)]),_:1})])):v("",!0)]),t("div",bt,[t("div",kt,[t("div",wt,[t("div",$t,[t("div",Tt,[t("label",null,o(e.$t("Date")),1),u(E(ht),{range:"",modelValue:i.transaction_dates,"onUpdate:modelValue":[n[0]||(n[0]=s=>i.transaction_dates=s),n[1]||(n[1]=s=>f())],format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid form-control-sm"},null,8,["modelValue"])])]),t("div",Mt,[t("button",Nt,[Et,y(" "+o(e.$t("Filters"))+" ",1),g(t("span",{class:"badge",id:"filter_count_badge"},o(l.filter_count),513),[[dt,l.filter_count>0]])])]),t("div",St,[w.value?(c(),d("button",{key:0,class:"btn btn-sm btn-light-danger",onClick:U},o(e.$t("Clear")),1)):v("",!0)])])]),t("div",At,[t("div",Vt,[t("div",Ht,[g(t("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:E(j),"onUpdate:modelValue":n[2]||(n[2]=s=>l.search_query=s)},null,8,Pt),[[_t,l.search_query]]),t("div",It,[u(X,{icon:"fa6-solid:magnifying-glass"})])])])])]),t("div",Bt,[t("div",Ot,[t("div",Dt,[t("div",Ft,[u(z,{name:"payment_method",label:V.value.payment_method,modelValue:i.payment_method,"onUpdate:modelValue":n[3]||(n[3]=s=>i.payment_method=s),placeholder:V.value.select_payment_method,options:H.value,height_sm:!0},null,8,["label","modelValue","placeholder","options"])]),t("div",jt,[t("div",Lt,[t("label",null,o(e.$t("Transaction Type")),1),g(t("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":n[4]||(n[4]=s=>i.transaction_type=s),onChange:f},[t("option",qt,o(e.$t("All")),1),t("option",Zt,o(e.$t("Income")),1),t("option",Ut,o(e.$t("Expense")),1)],544),[[O,i.transaction_type]])])]),t("div",Rt,[t("div",Jt,[t("label",null,o(e.$t("Bill Type")),1),g(t("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":n[5]||(n[5]=s=>i.bill_type=s),onChange:f},[t("option",Xt,o(e.$t("All")),1),t("option",zt,o(e.$t("Order")),1),t("option",Gt,o(e.$t("Invoice")),1),t("option",Kt,o(e.$t("Purchase")),1)],544),[[O,i.bill_type]])])])])])])]),l.is_listing?(c(),d("div",Wt,[u(G)])):(c(),d("div",Qt,[t("table",Yt,[t("thead",xt,[t("tr",null,[t("th",te,o(e.$t("Type")),1),t("th",ee,o(e.$t("Amount")),1),t("th",oe,o(e.$t("Account")),1),t("th",se,o(e.$t("Payment Method")),1),t("th",ne,o(e.$t("Bill Type")),1),t("th",le,o(e.$t("Bill To Name")),1),t("th",ae,o(e.$t("Transaction Date")),1)])]),t("tbody",null,[C.value!=""?(c(!0),d(rt,{key:0},ut(C.value,(s,Q)=>(c(),d("tr",{key:Q},[t("td",{onClick:p=>m(s.slack),role:"button"},o(s.type),9,ie),t("td",{onClick:p=>m(s.slack),role:"button"},[s.type=="INCOME"?(c(),d("span",de,"+"+o(s.amount)+" "+o(A.value),1)):v("",!0),s.type=="EXPENSE"?(c(),d("span",_e,"-"+o(s.amount)+" "+o(A.value),1)):v("",!0)],8,ce),t("td",{onClick:p=>m(s.slack),role:"button"},[y(o(s.account.name)+" ",1),s.notes!=null&&s.notes!=""?(c(),d("small",ue,[me,y("Note: "+o(s.notes),1)])):v("",!0)],8,re),t("td",{onClick:p=>m(s.slack),role:"button"},o(s.payment_method_name),9,he),t("td",{onClick:p=>m(s.slack),role:"button"},o(s.bill_type_text),9,pe),t("td",{onClick:p=>m(s.slack),role:"button"},o(s.bill_to_name),9,fe),t("td",{onClick:p=>m(s.slack),role:"button"},o(s.transaction_date),9,ve)]))),128)):(c(),d("tr",ye,[t("td",ge,o(e.$t("No Data Found")),1)]))])])])),t("div",Ce,[t("div",be,[t("div",ke,[u(K,{onPaginate_limit_update:L,pagination:b.value},null,8,["pagination"])]),t("div",we,[u(E(mt),{data:b.value,limit:5,onPaginationChangePage:h},null,8,["data"])])])])])]),_:1})}}};export{Oe as default};
