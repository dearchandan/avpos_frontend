import{_ as L}from"./PaginateLimit.Qyl6CO-f.js";import{_ as O}from"./ListingSkeleton.PW5leU6x.js";import{u as E,P as j,r as c,e as p,o as M,v as R,f as F,J,g as a,h as i,i as t,t as e,K as v,L as z,N as H,j as w,k as h,F as K,x as U,l as d,O as G}from"./index.ri7Y_V5F.js";const W={class:"content"},Y={class:"page-heading"},Q={class:"page-heading position-relative"},X={class:"row align-items-center justify-content-between mb-3"},Z={class:"col-auto"},x={class:"mb-0"},tt={class:"col col-md-auto"},et={class:"row align-items-center justify-content-between"},st={class:"col col-md-auto"},ot={class:"form-field mb-0"},at={value:""},it={value:"1"},nt={value:"0"},lt={class:"col col-md-auto d-none d-md-block"},ct={class:"form-field page-heading-search-field mb-0"},dt={class:"field-icon"},_t=["placeholder"],rt={class:"icon"},ut={key:0},ht={key:1,class:"table-responsive"},mt={class:"table table-list-data table-hover"},gt={class:"bg-light"},pt={scope:"col",width:"10%"},vt={scope:"col",width:"20%"},ft={scope:"col",width:"15%"},yt={scope:"col",width:"10%"},wt={scope:"col",width:"10%"},kt={scope:"col",width:"10%"},$t={scope:"col",width:"10%"},Nt={scope:"col",width:"10%"},St={scope:"col",width:"10%"},bt=["onClick"],Vt={alt:"",class:"listing-image img img-thumbnail rounded-circle"},Bt={class:"fw-bold highlighted-list-item"},Ct=t("br",null,null,-1),At={class:"text-muted"},Dt={key:0},It={key:1},Pt={key:0,class:"badge badge-success fs-11"},Tt={key:1,class:"badge badge-warning fs-11"},qt={key:0,class:"text-success"},Lt={key:1,class:"text-danger"},Ot={key:1},Et={class:"text-center py-3",colspan:"11"},jt={class:"data-footer"},Mt={class:"row align-items-center justify-content-between"},Rt={class:"col-auto"},Ft={class:"col-auto"},Gt={__name:"MerchantBranches",props:["merchant"],setup(k){const{t:$}=E(),N=j(k,"merchant"),S={server_messages:{type:"",messages:""},is_listing:!1,search_query:c("")},b=$("Search by name, email, phone.."),n=p({...S});M(()=>{r()}),R(()=>n.search_query,_.debounce(()=>{r()},500));const m=c([]),g=c([]);async function r(o=1){n.is_listing=!0,await axios.post("/api/merchant/branches",{page:o,paginate_limit:f.value,search_query:n.search_query,merchant_id:N.value.id,filter:u}).then(l=>{m.value=l.data.data,g.value=l.data.pagination,n.is_listing=!1}).catch(l=>{n.server_messages.type="error",n.server_messages.messages=l,n.is_listing=!1,console.log(l)})}const f=c();async function V(o){f.value=o,await r()}const B=c(!1),y=p({status:c("")}),u=p({...y}),C=c(!1);async function A(){JSON.stringify(u)!=JSON.stringify(y)&&(C.value=!0),B.value=!1,await r()}return(o,l)=>{const D=F("Icon"),I=O,P=L,T=J("lazy");return a(),i("div",W,[t("div",Y,[t("div",Q,[t("div",X,[t("div",Z,[t("h2",x,e(o.$t("Branches")),1)]),t("div",tt,[t("div",et,[t("div",st,[t("div",ot,[v(t("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":l[0]||(l[0]=s=>u.status=s),onChange:A},[t("option",at,e(o.$t("Status")),1),t("option",it,e(o.$t("Active")),1),t("option",nt,e(o.$t("Inactive")),1)],544),[[z,u.status]])])]),t("div",lt,[t("div",ct,[t("div",dt,[v(t("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:w(b),"onUpdate:modelValue":l[1]||(l[1]=s=>n.search_query=s)},null,8,_t),[[H,n.search_query]]),t("div",rt,[h(D,{icon:"fa6-solid:magnifying-glass"})])])])])])])])])]),n.is_listing?(a(),i("div",ut,[h(I)])):(a(),i("div",ht,[t("table",mt,[t("thead",gt,[t("tr",null,[t("th",pt,e(o.$t("Logo")),1),t("th",vt,e(o.$t("Branch Name")),1),t("th",ft,e(o.$t("Email")),1),t("th",yt,e(o.$t("Phone")),1),t("th",wt,e(o.$t("VAT")),1),t("th",kt,e(o.$t("GST Number")),1),t("th",$t,e(o.$t("Default View")),1),t("th",Nt,e(o.$t("Created At")),1),t("th",St,e(o.$t("Status")),1)])]),t("tbody",null,[m.value!=""?(a(!0),i(K,{key:0},U(m.value,(s,q)=>(a(),i("tr",{key:q},[t("td",{onClick:zt=>o.viewBranch(s.slack),role:"button"},[v(t("img",Vt,null,512),[[T,s.logo]])],8,bt),t("td",null,[t("div",null,[t("span",Bt,e(s.name),1),Ct,t("small",At,e(o.$t("Code"))+": "+e(s.code),1)])]),t("td",null,e(s.email),1),t("td",null,e(s.phone),1),t("td",null,[s.tax_registration_name!=null?(a(),i("span",Dt,e(o.$t("Vat Name"))+": "+e(s.tax_registration_name),1)):d("",!0),s.tax_registration_number!=null?(a(),i("span",It,e(o.$t("VAT Number"))+": "+e(s.tax_registration_number),1)):d("",!0)]),t("td",null,e(s.gst_number),1),t("td",null,[s.default_view=="POS"||s.default_view=="INVENTORY"||s.default_view=="DASHBOARD"?(a(),i("span",Pt,e(s.default_view),1)):d("",!0),s.default_view=="KITCHEN"||s.default_view=="WAITER"?(a(),i("span",Tt,e(s.default_view),1)):d("",!0)]),t("td",null,e(s.created_at_label),1),t("td",null,[s.status==1?(a(),i("span",qt,e(s.status_text),1)):d("",!0),s.status==0?(a(),i("span",Lt,e(s.status_text),1)):d("",!0)])]))),128)):(a(),i("tr",Ot,[t("td",Et,e(o.$t("No Data Found")),1)]))])])])),t("div",jt,[t("div",Mt,[t("div",Rt,[h(P,{onPaginate_limit_update:V,pagination:g.value},null,8,["pagination"])]),t("div",Ft,[h(w(G),{data:g.value,limit:5,onPaginationChangePage:r},null,8,["data"])])])])])}}};export{Gt as default};
