import y from"./ServerMessage.qNo4NwTp.js";import{_ as S}from"./VTextInput.o2P1IcEE.js";import{u as A,r as j,e as w,b as N,v as V,g as n,h as d,i as s,t as i,k as c,w as $,j as t,N as x,K as C,l as b,p as M}from"./index.ri7Y_V5F.js";import{F as B}from"./vee-validate.esm.0La7AMjT.js";import{c as D,a as q}from"./index.esm.wERziE-M.js";import{C as F}from"./ClipLoader.4-rIzqtH.js";import"./VTooltip.a7qKl6DY.js";/* empty css                                                   */const I={class:"modal hide",id:"addStockAdjustmentModal",tabindex:"-1","aria-labelledby":"Add Stock Adjustment","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},E={class:"modal-dialog modal-lg modal-dialog-centered"},O={class:"modal-content"},R={class:"modal-header"},T={class:"modal-title"},U={class:"modal-body"},z={class:"row"},J={class:"col-md-6"},K={class:"col-md-12"},L=["label"],G={key:0,class:"py-3"},H={class:"mt-4 text-end"},P=["disabled"],Q={key:1,class:"pt-0"},W={key:2,class:"pt-0"},re={__name:"AddStockAdjustment",props:["show_add_stock_adjustment_modal","edit_data"],emits:["closeAddStockAdjustmentModal","getStockAdjustments"],setup(X,{emit:g}){const{t:r}=A();j(!1);const m={server_messages:{type:"",messages:""},is_submitting:!1,is_listing:!1,branch_name:"",branch:"",reference_no:"",adjustment_date:"",note:""},e=w({...m});N();const f=D({reference_no:q().required(r("name is required",{name:r("Reference Number")}))}),_=g;function u(){h(),_("closeAddStockAdjustmentModal"),document.getElementById("close_btn").click()}V();async function v(){e.is_submitting=!0;var o=new FormData;o.append("reference_no",e.reference_no),o.append("note",e.note!=null?e.note:""),await axios.post("/api/stock_adjustment/save",o).then(a=>{if(a.data.status_code==200)toast.success(a.data.msg),e.is_submitting=!1,_("getStockAdjustments"),u();else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(a.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=a.data.msg}e.is_submitting=!1}}).catch(a=>{e.server_messages.type="error",e.server_messages.messages=a,e.is_submitting=!1,console.log(a)})}function h(){Object.assign(e,m)}return(o,a)=>{const p=S,k=y;return n(),d("div",I,[s("div",E,[s("div",O,[s("div",R,[s("h5",T,i(o.$t("Add Stock Adjustment")),1),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:u,id:"close_btn"})]),s("div",U,[c(t(B),{"validation-schema":t(f),onSubmit:v},{default:$(()=>[s("div",z,[s("div",J,[c(p,{type:"number",name:"reference_no",modelValue:t(e).reference_no,"onUpdate:modelValue":a[0]||(a[0]=l=>t(e).reference_no=l),label:t(r)("Reference Number"),required:""},null,8,["modelValue","label"])]),s("div",K,[s("label",null,i(o.$t("Description")),1),C(s("textarea",{class:"form-control form-control-solid p-3",name:"note","onUpdate:modelValue":a[1]||(a[1]=l=>t(e).note=l),label:t(r)("Note"),cols:"3",rows:"3"},null,8,L),[[x,t(e).note]])])]),t(e).server_messages.messages!=""?(n(),d("div",G,[c(k,{server_messages:t(e).server_messages},null,8,["server_messages"])])):b("",!0),s("div",H,[s("button",{type:"submit",class:"btn btn-primary",disabled:t(e).is_submitting},[t(e).is_submitting?(n(),M(F,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):b("",!0),t(e).is_submitting?(n(),d("span",Q,i(o.$t("Saving...")),1)):(n(),d("span",W,i(o.$t("Save")),1))],8,P)])]),_:1},8,["validation-schema"])])])])])}}};export{re as default};
