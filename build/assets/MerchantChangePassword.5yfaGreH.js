import k from"./ServerMessage.EFQMOwoZ.js";import{C as V}from"./ClipLoader._89zL49D.js";import{u as C,a as P,P as S,r as $,e as q,g as i,h as n,l as d,w as x,m as _,i as e,p as B,t as u,j as v}from"./index.sP6fhsqN.js";import"./DefaultLayout.K5Bh9Jz_.js";import{F as N}from"./vee-validate.esm.2kXgdFia.js";import{c as D,a as w,d as F}from"./index.esm.DHYHwGJ4.js";import{_ as f}from"./VTextInput.EPCajChY.js";/* empty css                                                   */import"./VTooltip.kcvohVRA.js";const O={class:"row card-strash"},j={key:0,class:"py-3"},M={class:"col-md-12"},R={class:"row"},U={class:"col-md-12 mb-4"},z={class:"card"},E={class:"row"},I={class:"col-md-3"},J={class:"col-md-3"},L={class:"text-end"},A=["disabled"],G={key:1,class:"pt-0"},H={key:2,class:"pt-0"},rs={__name:"MerchantChangePassword",props:["merchant"],setup(g){const{t:a}=C();P().params.slack;const c=S(g,"merchant");console.log(c.value.slack);const l=$({password:a("Password"),confirm_password:a("Confirm Password")}),p={server_messages:{type:"",messages:""},is_submitting:!1,password:"",confirm_password:""},s=q({...p}),h=D({password:w().required(a("name is required",{name:a("Password")})).min(8,a("name must be at least n characters",{name:a("password"),number:8})),confirm_password:w().required(a("name is required",{name:a("Confirm Password")})).oneOf([F("password"),null],a("Confirm Password must be same"))});async function b(){s.is_submitting=!0;var r=new FormData;r.append("password",s.password),r.append("slack",c.value.slack);var o="/api/merchant/update_password";await axios.post(o,r).then(t=>{if(t.data.status_code==200)toast.success(t.data.msg),s.is_submitting=!1,y();else{try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(t.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=t.data.msg}s.is_submitting=!1}}).catch(t=>{s.server_messages.type="error",s.server_messages.messages=t,s.is_submitting=!1,console.log(t)})}function y(){Object.assign(s,p)}return(r,o)=>{const t=k;return i(),n("div",null,[d(v(N),{"validation-schema":v(h),"initial-values":s,onSubmit:b,enctype:"multipart/form-data"},{default:x(()=>[e("div",O,[s.server_messages.messages!=""?(i(),n("div",j,[d(t,{server_messages:s.server_messages},null,8,["server_messages"])])):_("",!0),e("div",M,[e("div",R,[e("div",U,[e("div",z,[e("div",E,[e("div",I,[d(f,{type:"password",name:"password",modelValue:s.password,"onUpdate:modelValue":o[0]||(o[0]=m=>s.password=m),label:l.value.password,required:!0},null,8,["modelValue","label"])]),e("div",J,[d(f,{type:"password",name:"confirm_password",modelValue:s.confirm_password,"onUpdate:modelValue":o[1]||(o[1]=m=>s.confirm_password=m),label:l.value.confirm_password,required:""},null,8,["modelValue","label"])])])])])])])]),e("div",L,[e("button",{type:"submit",class:"btn btn-primary",disabled:s.is_submitting},[s.is_submitting?(i(),B(V,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):_("",!0),s.is_submitting?(i(),n("span",G,u(r.$t("Saving...")),1)):(i(),n("span",H,u(r.$t("Save")),1))],8,A)])]),_:1},8,["validation-schema","initial-values"])])}}};export{rs as default};
