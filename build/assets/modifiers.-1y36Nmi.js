import{u as S,r as d,e as V,o as j,v as R,g as i,p as G,w as A,I as z,f as J,k as r,i as e,t as m,K,N as U,j as y,h as l,l as f,F as W,x as Y,O as H,q as Q,_ as X}from"./index.GdMxdeuf.js";import{_ as Z}from"./DefaultLayout.qd3nRBiq.js";import{_ as ee}from"./PaginateLimit.H-orl6zP.js";import{_ as te}from"./ActionButtonGroup.qGH_Fqs8.js";import{_ as se}from"./ListingSkeleton.upY030ro.js";import{_ as oe}from"./InventoryMenu.8t9QU9er.js";import"./ClipLoader.UcGuNCxH.js";/* empty css                                                   */const ae={class:"content"},ie={class:"page-heading"},ne={class:"row align-items-center justify-content-between mb-3"},le={class:"col-auto"},ce={class:"mb-md-0"},de={class:"col-md-auto"},re={class:"row align-items-center justify-content-between"},_e={class:"col col-md-auto"},me={class:"form-field mb-0"},ue={class:"field-icon"},he=["placeholder"],fe={class:"icon"},pe={key:0,class:"col-auto"},ge={key:0},ve={key:1,class:"table-responsive"},ye={class:"table table-list-data table-hover"},we={class:"bg-light"},be={scope:"col",width:"90%"},ke={key:0,scope:"col",class:"text-end",width:"10%"},Me=["onClick"],Ce={class:"fw-bold highlighted-list-item"},Ae={key:0},De={key:0,class:"text-end"},Ie={key:1},Ee={class:"text-center py-3",colspan:"8"},$e={class:"data-footer"},Be={class:"row align-items-center justify-content-between"},Ne={class:"col-auto"},qe={class:"col-auto"},Ge={__name:"modifiers",setup(xe){const{t:h}=S(),{isAuthorized:w}=z(),p=d(!1),b=d([]);function k(s=""){b.value=s,p.value=!0}function D(){p.value=!1,u()}const I={server_messages:{type:"",messages:""},is_listing:!1,search_query:d("")},E=h("search by name"),t=V({...I});j(()=>{q(),u()}),R(()=>t.search_query,_.debounce(()=>{u()},300));const g=d([]),v=d([]);async function u(s=1){t.is_listing=!0,await axios.get("/api/modifiers",{params:{page:s,paginate_limit:M.value,search_query:t.search_query}}).then(o=>{g.value=o.data.data,v.value=o.data.pagination,t.is_listing=!1}).catch(o=>{t.server_messages.type="error",t.server_messages.messages=o,t.is_listing=!1,console.log(o)})}const M=d();async function $(s){M.value=s,await u()}async function B(s){var o=!1;await Swal.fire({title:h("Do you want to delete this item?"),showCancelButton:!0,confirmButtonText:h("Yes, Delete"),cancelButtonText:h("Cancel"),confirmButtonColor:"#d33"}).then(a=>{a.isConfirmed&&(o=!0)}),o&&await axios.post("/api/modifier/delete",{slack:s}).then(a=>{if(a.data.status_code==200)toast.success(a.data.msg),u();else try{t.server_messages.type="error",t.server_messages.messages=JSON.parse(a.data.msg)}catch{t.server_messages.type="error",t.server_messages.messages=a.data.msg}}).catch(a=>{t.server_messages.type="error",t.server_messages.messages=a,console.log(a)})}function N(s){router.push("/modifier/"+s)}const c=d({write:!1,delete:!1});function q(){c.value={write:w("A_WRITE_MODIFIER"),delete:w("A_DELETE_MODIFIER")}}const x=Q(()=>X(()=>import("./AddModifier.aTAdkKR8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])));return(s,o)=>{const a=oe,C=J("Icon"),P=se,F=te,L=ee,T=Z;return i(),G(T,null,{subheader:A(()=>[r(a)]),default:A(()=>[e("div",ae,[e("div",ie,[e("div",ne,[e("div",le,[e("h2",ce,m(s.$t("Modifiers")),1)]),e("div",de,[e("div",re,[e("div",_e,[e("div",me,[e("div",ue,[K(e("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:y(E),"onUpdate:modelValue":o[0]||(o[0]=n=>t.search_query=n)},null,8,he),[[U,t.search_query]]),e("div",fe,[r(C,{icon:"fa6-solid:magnifying-glass"})])])])]),c.value.write?(i(),l("div",pe,[e("a",{href:"#",class:"btn btn-sm btn-light-primary2","data-bs-toggle":"modal",onClick:o[1]||(o[1]=n=>k()),"data-bs-target":"#addModifierModal"},"+ "+m(s.$t("New Modifier")),1)])):f("",!0)])])])]),t.is_listing?(i(),l("div",ge,[r(P)])):(i(),l("div",ve,[e("table",ye,[e("thead",we,[e("tr",null,[e("th",be,m(s.$t("Name")),1),c.value.write||c.value.delete?(i(),l("th",ke,m(s.$t("Action")),1)):f("",!0)])]),e("tbody",null,[g.value!=""?(i(!0),l(W,{key:0},Y(g.value,(n,O)=>(i(),l("tr",{key:O},[e("td",{role:"button",onClick:Pe=>N(n.slack)},[e("div",null,[e("span",Ce,m(n.name),1)]),n.name_ar!=null?(i(),l("div",Ae,m(n.name_ar),1)):f("",!0)],8,Me),c.value.write||c.value.delete?(i(),l("td",De,[r(F,{permissions:c.value,onDelete:B,onEditModal:k,slack:n.slack,edit_modal_data:n,edit_modal_target:"#addModifierModal"},null,8,["permissions","slack","edit_modal_data"])])):f("",!0)]))),128)):(i(),l("tr",Ie,[e("td",Ee,m(s.$t("No Data Found")),1)]))])])])),e("div",$e,[e("div",Be,[e("div",Ne,[r(L,{onPaginate_limit_update:$,pagination:v.value},null,8,["pagination"])]),e("div",qe,[r(y(H),{data:v.value,limit:5,onPaginationChangePage:u},null,8,["data"])])])])]),r(y(x),{show_add_modifier_modal:p.value,onCloseAddModifierModal:D,edit_data:b.value},null,8,["show_add_modifier_modal","edit_data"])]),_:1})}}};export{Ge as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AddModifier.aTAdkKR8.js","assets/ServerMessage.Wf7puwQc.js","assets/index.GdMxdeuf.js","assets/index.1t-AB2n6.css","assets/vee-validate.esm.9aElOHQY.js","assets/index.esm.0vhAmrVd.js","assets/VTextInput.ZgtOiOMJ.js","assets/VTooltip.Ewb958d6.js","assets/ClipLoader.UcGuNCxH.js","assets/ClipLoader.7xz7y6gZ.css","assets/BeatLoader.5j6ku4bW.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
