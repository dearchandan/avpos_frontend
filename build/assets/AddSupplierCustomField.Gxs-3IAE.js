import S from"./ServerMessage.EFQMOwoZ.js";import{u as F,r as x,e as $,b as A,v as N,g as d,h as m,i as a,t as c,l as n,w as M,Q as q,K as B,m as f,p as D,j as v}from"./index.sP6fhsqN.js";import{F as E}from"./vee-validate.esm.2kXgdFia.js";import{c as U,a as h,e as j}from"./index.esm.DHYHwGJ4.js";import{_ as b}from"./VTextInput.EPCajChY.js";/* empty css                                                   */import{C as O}from"./ClipLoader._89zL49D.js";import"./VTooltip.kcvohVRA.js";/* empty css                                                   */const z={class:"modal hide",id:"addSupplierCustomFieldModal",tabindex:"-1","aria-labelledby":"Add Custom Field","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},I={class:"modal-dialog modal-md modal-dialog-centered"},J={class:"modal-content"},K={class:"modal-header"},L={class:"modal-title"},Q={class:"modal-body"},G={class:"row"},H={class:"col-md-12"},P={class:"col-md-12"},R={class:"col-12"},T={class:"form-field"},W={class:"form-check form-switch pt-3"},X={class:"form-check-label",for:"status"},Y={key:0,class:"py-3"},Z={class:"mt-2 text-end"},ee=["disabled"],se={key:1,class:"pt-0"},ae={key:2,class:"pt-0"},_e={__name:"AddSupplierCustomField",props:["show_add_supplier_custom_field_modal","supplier_slack","edit_data"],emits:["closeAddCustomFieldModal"],setup(g,{emit:k}){const{t}=F(),r=x({name:t("Name"),value:t("Value"),merchant_name:t("Ex. Merchant Name"),merchant_value:t("Ex. Apple")}),_={server_messages:{type:"",messages:""},is_saving:!1,custom_field_slack:"",field_value:"",field_name:"",status:!0},e=$({..._});A();const y=U({field_name:h().required(t("name is required",{name:t("Name")})).min(3,t("name must be at least n characters",{name:t("Name"),number:3})),field_value:h().required(t("name is required",{name:t("Value")})).min(3,t("name must be at least n characters",{name:t("Value"),number:3})),status:j().label("Status")}),C=k,u=g;function p(){w(),C("closeAddCustomFieldModal")}N(()=>u.edit_data,s=>{s&&(e.custom_field_slack=s.slack,e.field_name=s.field_name,e.field_value=s.field_value,e.status=s.status==1)});async function V(){var s=new FormData;s.append("supplier_slack",u.supplier_slack),s.append("field_name",e.field_name),s.append("field_value",e.field_value),s.append("status",e.status),s.append("custom_field_slack",e.custom_field_slack);var i=e.custom_field_slack!=""?"/api/supplier/custom_field/update":"/api/supplier/custom_field/save";await axios.post(i,s).then(l=>{if(e.is_saving=!0,l.data.status_code==200)toast.success(l.data.msg),location.reload(),e.is_saving=!1,p();else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(l.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=l.data.msg}e.is_saving=!1}}).catch(l=>{e.server_messages.type="error",e.server_messages.messages=l,e.is_saving=!1,console.log(l)})}function w(){Object.assign(e,_)}return(s,i)=>{const l=S;return d(),m("div",z,[a("div",I,[a("div",J,[a("div",K,[a("h5",L,c(s.$t("Add Custom Field")),1),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:p})]),a("div",Q,[n(v(E),{"validation-schema":v(y),onSubmit:V,enctype:"multipart/form-data","initial-values":e,id:"add_custom_field_form"},{default:M(()=>[a("div",G,[a("div",H,[n(b,{type:"text",name:"field_name",modelValue:e.field_name,"onUpdate:modelValue":i[0]||(i[0]=o=>e.field_name=o),label:r.value.name,required:!0,placeholder:r.value.merchant_name},null,8,["modelValue","label","placeholder"])]),a("div",P,[n(b,{type:"text",name:"field_value",modelValue:e.field_value,"onUpdate:modelValue":i[1]||(i[1]=o=>e.field_value=o),label:r.value.value,required:!0,placeholder:r.value.merchant_value},null,8,["modelValue","label","placeholder"])]),a("div",R,[a("div",T,[a("div",W,[B(a("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status",checked:"","onUpdate:modelValue":i[2]||(i[2]=o=>e.status=o)},null,512),[[q,e.status]]),a("label",X,c(s.$t("Active")),1)])])])]),e.server_messages.messages!=""?(d(),m("div",Y,[n(l,{server_messages:e.server_messages},null,8,["server_messages"])])):f("",!0),a("div",Z,[a("button",{type:"submit",class:"btn btn-primary",disabled:e.is_saving},[e.is_saving?(d(),D(O,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):f("",!0),e.is_saving?(d(),m("span",se,c(s.$t("Saving...")),1)):(d(),m("span",ae,c(s.$t("Save")),1))],8,ee)])]),_:1},8,["validation-schema","initial-values"])])])])])}}};export{_e as default};
