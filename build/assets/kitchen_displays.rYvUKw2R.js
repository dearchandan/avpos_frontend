import{_ as V}from"./ActionButtonGroup.ogbCWQxi.js";import{_ as j}from"./ListingSkeleton.iExoV4hO.js";import{_ as M}from"./RestaurantMenu.zwVhKTo3.js";import{bR as O,u as R,b as Y,r as d,e as G,o as H,v as J,g as i,p as b,w as f,I as z,f as S,k as m,i as e,t as n,K as U,N as W,j as D,h as r,n as Q,l as y,F as X,x as Z,O as ee}from"./index.7OFNPsHl.js";import{_ as se}from"./DefaultLayout.nvkZ4UhM.js";import{_ as te}from"./PaginateLimit.Xv-qfeqj.js";import"./ClipLoader.1qNfpKDH.js";/* empty css                                                   */const ae={class:"content"},oe={class:"page-heading"},ie={class:"row align-items-center justify-content-between"},ne={class:"col-auto"},ce={class:"mb-0"},le={class:"col-auto"},re={class:"row align-items-center"},de={class:"col-auto"},_e={class:"row align-items-center"},me=e("div",{class:"col-auto"},[e("div",{class:"dropdown filter-dropdown"},[e("div",{class:"dropdown-menu p-0",style:{"min-width":"150px"}},[e("div",{class:"dropdown-item"},"An item"),e("div",{class:"dropdown-item"},"A second item"),e("div",{class:"dropdown-item"},"A third item"),e("div",{class:"dropdown-item"},"A fourth item"),e("div",{class:"dropdown-item"},"And a fifth one")])])],-1),ue={class:"col-auto"},he={class:"form-field page-heading-search-field mb-0"},pe={class:"field-icon"},ge=["placeholder"],ve={class:"icon"},fe={key:0,class:"col-auto"},ye={key:1,class:"table-responsive"},we={class:"table table-list-data table-hover"},ke={class:"bg-light"},be={scope:"col"},Se={scope:"col"},De={scope:"col",width:"10%"},Ce={key:0,scope:"col",class:"text-end",width:"5%"},Ae=["onClick"],Ke={class:"fw-bold highlighted-list-item"},Ne={class:"fs-5 ls-wider text-primary"},$e={class:"form-feild"},xe={class:"form-check form-switch form-switch-2"},Be=["onChange","checked"],Ie={key:0,class:"text-end"},Ee={key:1},Te={class:"text-center py-3",colspan:"11"},qe={class:"data-footer"},Pe={class:"row align-items-center justify-content-between"},Fe={class:"col-auto"},Le={class:"col-auto"},ze={__name:"kitchen_displays",setup(Ve){const C=O(),{isAuthorized:w}=z(),{t:h}=R();Y(),d(!1);const A={server_messages:{type:"",messages:""},is_listing:!1,search_query:d("")},K=h("Search by KDS name.."),s=G({...A});H(()=>{E(),u()}),J(()=>s.search_query,_.debounce(()=>{u()},500));const p=d([]),g=d([]);async function u(t=1){s.is_listing=!0,await axios.get("/api/v2/kitchen_displays",{params:{page:t,paginate_limit:k.value,search_query:s.search_query}}).then(o=>{p.value=o.data.data,g.value=o.data.pagination,s.is_listing=!1}).catch(o=>{s.server_messages.type="error",s.server_messages.messages=o,s.is_listing=!1,console.log(o)})}const k=d();async function N(t){k.value=t,await u()}async function $(t){var o=new FormData;o.append("slack",t),await axios.post("/api/kitchen_display/update_status",o).then(a=>{if(a.data.status_code==200)toast.success(a.data.msg),C.getSettings();else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(a.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=a.data.msg}}).catch(a=>{s.server_messages.type="error",s.server_messages.messages=a,console.log(a)})}function x(t){router.push("/kitchen_display/"+t)}function B(t){router.push("/kitchen_display/edit/"+t)}async function I(t){var o=!1;await Swal.fire({title:h("Do you want to delete this KDS?"),showCancelButton:!0,confirmButtonText:h("Yes, Delete"),cancelButtonText:h("Cancel"),confirmButtonColor:"#d33"}).then(a=>{a.isConfirmed&&(o=!0)}),o&&await axios.post("/api/kitchen_display/delete",{slack:t}).then(a=>{if(a.data.status_code==200)Swal.fire(a.data.msg),u();else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(a.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=a.data.msg}}).catch(a=>{s.server_messages.type="error",s.server_messages.messages=a,console.log(a)})}const l=d({write:!1,delete:!1});function E(){l.value={write:w("A_WRITE_KITCHEN_DISPLAY"),delete:w("A_DELETE_KITCHEN_DISPLAY")}}return(t,o)=>{const a=M,v=S("Icon"),T=S("router-link"),q=j,P=V;return i(),b(se,null,{subheader:f(()=>[m(a)]),default:f(()=>[e("div",ae,[e("div",oe,[e("div",ie,[e("div",ne,[e("h2",ce,n(t.$t("KDS")),1)]),e("div",le,[e("div",re,[e("div",de,[e("div",_e,[me,e("div",ue,[e("div",he,[e("div",pe,[U(e("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:D(K),"onUpdate:modelValue":o[0]||(o[0]=c=>s.search_query=c)},null,8,ge),[[W,s.search_query]]),e("div",ve,[m(v,{icon:"fa6-solid:magnifying-glass"})])])])])])]),l.value.write?(i(),r("div",fe,[m(T,{class:"btn btn-sm btn-light-primary2",to:"/kitchen_display/add"},{default:f(()=>[Q("+ "+n(t.$t("New KDS")),1)]),_:1})])):y("",!0)])])])]),s.is_listing?(i(),b(q,{key:0})):(i(),r("div",ye,[e("table",we,[e("thead",ke,[e("tr",null,[e("th",be,n(t.$t("KDS Name")),1),e("th",Se,n(t.$t("Activation Code")),1),e("th",De,n(t.$t("Active")),1),l.value.write||l.value.delete?(i(),r("th",Ce,n(t.$t("Action")),1)):y("",!0)])]),e("tbody",null,[p.value!=""?(i(!0),r(X,{key:0},Z(p.value,(c,F)=>(i(),r("tr",{key:F},[e("td",{onClick:L=>x(c.slack),role:"button"},[e("div",null,[e("span",Ke,n(c.name),1)])],8,Ae),e("td",Ne,n(c.activation_code),1),e("td",null,[e("div",$e,[e("div",xe,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"Status_id",onChange:L=>$(c.slack),checked:c.status==1},null,40,Be)])])]),l.value.write||l.value.delete?(i(),r("td",Ie,[m(P,{permissions:l.value,slack:c.slack,onDelete:I,onEdit:B},null,8,["permissions","slack"])])):y("",!0)]))),128)):(i(),r("tr",Ee,[e("td",Te,n(t.$t("No Data Found")),1)]))])])])),e("div",qe,[e("div",Pe,[e("div",Fe,[m(te,{onPaginate_limit_update:N,pagination:g.value},null,8,["pagination"])]),e("div",Le,[m(D(ee),{data:g.value,limit:5,onPaginationChangePage:u},null,8,["data"])])])])])]),_:1})}}};export{ze as default};
