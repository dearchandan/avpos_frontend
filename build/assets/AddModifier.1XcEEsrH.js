import S from"./ServerMessage.qNo4NwTp.js";import{u as A,r as $,b as x,d as V,e as B,P as C,v as D,g as d,h as l,i as a,t as m,k as n,w as U,Q as j,K as p,N as q,l as u,p as E,j as v}from"./index.ri7Y_V5F.js";import{F}from"./vee-validate.esm.0La7AMjT.js";import{c as I,a as O,e as z}from"./index.esm.wERziE-M.js";import{_ as J}from"./VTextInput.o2P1IcEE.js";/* empty css                                                   */import{C as K}from"./ClipLoader.4-rIzqtH.js";import"./VTooltip.a7qKl6DY.js";/* empty css                                                   */const L={class:"modal hide",id:"addModifierModal",tabindex:"-1","aria-labelledby":"Add Modifier","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},P={class:"modal-dialog modal-dialog-centered modal-lg"},Q={class:"modal-content"},R={class:"modal-header"},T={key:0,class:"modal-title"},G={key:1,class:"modal-title"},H={class:"modal-body"},W={class:"row"},X={class:"col-md-6"},Y={class:"col pt-4"},Z={class:"form-field"},ee={class:"form-check form-switch"},se={class:"form-check-label",for:"status"},ae={key:0,class:"py-3"},ie={class:"mt-2 text-end"},te=["disabled"],oe={key:1,class:"pt-0"},de={key:2,class:"pt-0"},ve={__name:"AddModifier",props:{show_add_modifier_modal:Boolean,edit_data:{type:[Array,Object]}},emits:["closeAddModifierModal"],setup(h,{emit:b}){const{t}=A(),g=$({modifier_name:t("Modifier Name"),modifier_name_ar:t("Modifier Name (Arabic)")}),y=x();V(()=>y.user.currency.symbol);const _={server_messages:{type:"",messages:""},is_saving:!1,modifier_id:"",modifier_name:"",modifier_name_ar:"",allow_multiple_selections:!1},e=B({..._}),M=I({modifier_name:O().required(t("name is required",{name:t("Modifier Name")})).min(3,t("name must be at least n characters",{name:t("Modifier Name"),number:3})).max(20,t("Must be less than 20 characters",{name:t("Modifier Name"),number:20})),allow_multiple_selections:z().label("Status")}),w=b,c=h;C(c,"edit_data"),D(()=>c.edit_data,s=>{s&&(e.modifier_name=s.name,e.modifier_name_ar=s.name_ar!=null?s.name_ar:"",e.allow_multiple_selections=s.allow_multiple_selections==1,e.modifier_id=s.id)});function f(){document.getElementById("add_modifier_form").reset(),N(),document.getElementById("close_btn").click(),w("closeAddModifierModal")}async function k(){var s=new FormData;s.append("modifier_id",e.modifier_id),s.append("modifier_name",e.modifier_name),s.append("modifier_name_ar",e.modifier_name_ar),s.append("allow_multiple_selections",e.allow_multiple_selections);var o=e.modifier_id!=""?"/api/modifier/update":"/api/modifier/save";await axios.post(o,s).then(i=>{if(e.is_saving=!0,i.data.status_code==200)toast.success(i.data.msg),e.is_saving=!1,f();else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(i.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=i.data.msg}e.is_saving=!1}}).catch(i=>{e.server_messages.type="error",e.server_messages.messages=i,e.is_saving=!1,console.log(i)})}function N(){Object.assign(e,_)}return(s,o)=>{const i=S;return d(),l("div",L,[a("div",P,[a("div",Q,[a("div",R,[e.modifier_id==""?(d(),l("h5",T,m(s.$t("Add Modifier")),1)):(d(),l("h5",G,"Update Modifier")),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:f,id:"close_btn"})]),a("div",H,[n(v(F),{"validation-schema":v(M),onSubmit:k,enctype:"multipart/form-data","initial-values":e,id:"add_modifier_form"},{default:U(()=>[a("div",W,[a("div",X,[n(J,{type:"text",name:"modifier_name",modelValue:e.modifier_name,"onUpdate:modelValue":o[0]||(o[0]=r=>e.modifier_name=r),label:g.value.modifier_name,required:!0},null,8,["modelValue","label"])]),a("div",Y,[a("div",Z,[a("div",ee,[p(a("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status","onUpdate:modelValue":o[1]||(o[1]=r=>e.allow_multiple_selections=r)},null,512),[[j,e.allow_multiple_selections]]),a("label",se,m(s.$t("Allow Multiple Selections")),1)])])]),p(a("input",{type:"hidden","onUpdate:modelValue":o[2]||(o[2]=r=>e.modifier_id=r)},null,512),[[q,e.modifier_id]])]),e.server_messages.messages!=""?(d(),l("div",ae,[n(i,{server_messages:e.server_messages},null,8,["server_messages"])])):u("",!0),a("div",ie,[a("button",{type:"submit",class:"btn btn-primary",disabled:e.is_saving},[e.is_saving?(d(),E(K,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):u("",!0),e.is_saving?(d(),l("span",oe,m(s.$t("Saving...")),1)):(d(),l("span",de,m(s.$t("Save")),1))],8,te)])]),_:1},8,["validation-schema","initial-values"])])])])])}}};export{ve as default};
