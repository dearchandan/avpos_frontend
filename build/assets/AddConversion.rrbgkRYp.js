import C from"./ServerMessage.Wf7puwQc.js";import{F as w}from"./vee-validate.esm.9aElOHQY.js";import"./index.esm.0vhAmrVd.js";import{_ as S}from"./VTextInput.ZgtOiOMJ.js";/* empty css                                                   */import{r as $,e as V,b as A,v as M,g as n,h as r,i as e,t as o,k as l,w as F,F as x,x as N,l as u,p as B,j as E}from"./index.GdMxdeuf.js";import{C as U}from"./ClipLoader.UcGuNCxH.js";import"./VTooltip.Ewb958d6.js";/* empty css                                                   */const D={class:"modal hide modal-lg",id:"addConversionModal",tabindex:"-1","aria-labelledby":"Add Conversion","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},O={class:"modal-dialog modal-dialog-centered"},j={class:"modal-content"},J={class:"modal-header"},L={class:"modal-title"},q={class:"modal-body"},z={class:"row pt-3"},T={class:"table table-bordered"},G={key:1},H={colspan:"4",class:"text-center"},I=e("tfoot",null,null,-1),K={key:0,class:"py-3"},P={class:"mt-2 text-end"},Q=["disabled"],R={key:1,class:"pt-0"},W={key:2,class:"pt-0"},rs={__name:"AddConversion",props:["show_add_conversion_modal","measurement_slack"],emits:["closeAddConversionModal"],setup(v,{emit:p}){$(!1);const d={server_messages:{type:"",messages:""},is_saving:!1,is_listing:!1,conversions:[{slack:"",from_unit_name:"",to_unit_name:"",conversion_value:""}]},s=V({...d});A();const g=p,c=v;function m(){b(),g("closeAddConversionModal")}M(()=>c.measurement_slack,a=>{a&&h()});async function h(){s.conversions=[],await axios.post("/api/measurement/conversions",{slack:c.measurement_slack}).then(a=>{a.data.data.conversions.forEach(t=>{s.conversions.push({slack:t.slack,from_unit_name:t.from_unit_name,to_unit_name:t.to_unit_name,conversion_value:t.conversion_value})})}).catch(a=>{s.server_messages.type="error",s.server_messages.messages=a,s.is_listing=!1,console.log(a)})}async function f(){var a=new FormData;a.append("conversions",JSON.stringify(s.conversions)),await axios.post("/api/measurement/conversion/save",a).then(t=>{if(s.is_saving=!0,t.data.status_code==200)toast.success(t.data.msg),s.is_saving=!1,m();else{try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(t.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=t.data.msg}s.is_saving=!1}}).catch(t=>{s.server_messages.type="error",s.server_messages.messages=t,s.is_saving=!1,console.log(t)})}function b(){Object.assign(s,d)}return(a,t)=>{const _=C;return n(),r("div",D,[e("div",O,[e("div",j,[e("div",J,[e("h5",L,o(a.$t("Add/Edit Conversion")),1),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:m})]),e("div",q,[l(E(w),{onSubmit:f,enctype:"multipart/form-data"},{default:F(()=>[e("div",z,[e("table",T,[e("thead",null,[e("tr",null,[e("th",null,o(a.$t("From Measurement Unit")),1),e("th",null,o(a.$t("To Measurement Unit")),1),e("th",null,o(a.$t("Value")),1)])]),e("tbody",null,[s.conversions.length>1?(n(!0),r(x,{key:0},N(s.conversions,(i,y)=>(n(),r("tr",{key:y},[e("td",null,o(i.from_unit_name),1),e("td",null,o(i.to_unit_name),1),e("td",null,[l(S,{type:"text",name:"unit_name",modelValue:i.conversion_value,"onUpdate:modelValue":k=>i.conversion_value=k,label:"",placeholder:"Ex. kg"},null,8,["modelValue","onUpdate:modelValue"])])]))),128)):(n(),r("tr",G,[e("td",H,[e("strong",null,o(a.$t("Atleast 2 measurement units are required for conversion")),1)])]))]),I])]),s.server_messages.messages!=""?(n(),r("div",K,[l(_,{server_messages:s.server_messages},null,8,["server_messages"])])):u("",!0),e("div",P,[e("button",{type:"submit",class:"btn btn-primary",disabled:s.is_saving},[s.is_saving?(n(),B(U,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):u("",!0),s.is_saving?(n(),r("span",R,o(a.$t("Saving...")),1)):(n(),r("span",W,o(a.$t("Save")),1))],8,Q)])]),_:1})])])])])}}};export{rs as default};
