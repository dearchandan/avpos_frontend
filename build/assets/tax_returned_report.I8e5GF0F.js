import{u as F,b as H,d as y,e as x,r as n,o as Q,g as k,p as w,w as m,f as V,i as o,k as c,n as D,t as i,j as t,l as W,A as M,B as C,bV as S,q as X,_ as Z}from"./index.7OFNPsHl.js";import{_ as ee}from"./DefaultLayout.nvkZ4UhM.js";import{_ as se}from"./VSelect.UFegTIpk.js";import{_ as te}from"./VMultiSelect.XXz7TsgF.js";import{u as ae}from"./global.wK1y07-b.js";import{s as Y,a as oe,e as le,j as ne}from"./vue-datepicker.sD5zgpde.js";import{s as T,e as $}from"./index.PeC7PMAQ.js";import"./ClipLoader.1qNfpKDH.js";/* empty css                                                   */import"./vee-validate.esm.N3uz7Rsk.js";/* empty css                                                                */const re={class:"header-nav-wrap"},ce={class:"row align-items-center"},de={class:"col-auto"},ie={class:"header-back-link"},_e={class:"col-auto"},me={class:"fw-bold"},pe={class:"content"},ue={class:"card"},ge={class:"row field-m-0 align-items-end g-3"},he={class:"col-md-4 col-lg-3"},fe={class:"form-field"},ve={class:"form-label"},be=o("span",{class:"text-danger"},"*",-1),ye=["onClick","onKeyup"],xe={class:"col-md-4 col-lg-3"},ke={class:"col-md-4 col-lg-3"},we={class:"col-md-4 col-lg-3"},Ve={class:"row mt-3"},De={class:"col-12 text-end"},Me=["disabled"],Ue={__name:"tax_returned_report",setup(Ce){const{t:r}=F();ae();const g=H();y(()=>g.user.currency.symbol);const A=x({server_messages:{type:"",messages:""},is_submitting:!1,is_listing:!1,dates:n([new Date,new Date]),selected_branch:n(),selected_category:n([]),selected_tax:n([]),is_exporting:!1}),e=x({...A}),E=r("Select Branch"),B=r("All Branches"),O=r("Select Category"),N=r("All Categories"),I=r("Select Tax"),R=r("All Taxes"),U=n([{label:"Today",value:[new Date,new Date]},{label:"This month",value:[T(new Date),$(new Date)]},{label:"Last month",value:[T(Y(new Date,1)),$(Y(new Date,1))]},{label:"This year",value:[oe(new Date),le(new Date)]}]);Q(()=>{K(),L()});const j=y(()=>g.user.branches),h=n([]);async function K(){let a=await axios.get("api/v2/categories/all");a=a.data.data,_.forEach(a,s=>{let d={key:s.slack,value:s.name,id:s.slack};h.value.push(d)})}const f=n([]);async function L(){let a=await axios.get("api/v2/taxes/all");a=a.data.data,_.forEach(a,s=>{let d={key:s.slack,value:s.name,id:s.slack};f.value.push(d)})}async function P(){e.is_exporting=!0,e.dates[0]=S(e.dates[0]).format("YYYY-MM-DD"),e.dates[1]=S(e.dates[1]).format("YYYY-MM-DD"),await axios.get("/api/tax_returned_report/export_excel",{params:{filter:e}}).then(a=>{if(a.data.status_code==200){e.is_exporting=!1;const s=document.createElement("a");s.target="_blank",s.href=a.data.data.file,document.body.appendChild(s),s.click()}else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(a.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=a.data.msg}e.is_exporting=!1}}).catch(a=>{e.server_messages.type="error",e.server_messages.messages=a,e.is_exporting=!1,console.log(a)})}const q=X(()=>Z(()=>import("./ServerMessage.I5ol-gtz.js"),__vite__mapDeps([0,1,2])));return(a,s)=>{const d=V("Icon"),G=V("router-link"),J=te,v=se,z=ee;return k(),w(z,null,{subheader:m(()=>[o("div",re,[o("div",ce,[o("div",de,[o("div",ie,[c(G,{class:"text-primary",to:"/reports"},{default:m(()=>[c(d,{icon:"fa6-solid:chevron-left"}),D(" "+i(a.$t("Reports")),1)]),_:1})])]),o("div",_e,[o("h5",me,i(a.$t("Tax Returned Report")),1)])])])]),default:m(()=>[o("div",pe,[t(e).server_messages.messages!=""?(k(),w(t(q),{key:0,class:"py-3",server_messages:t(e).server_messages},null,8,["server_messages"])):W("",!0),o("div",ue,[o("div",ge,[o("div",he,[o("div",fe,[o("label",ve,[D(i(a.$t("Select Dates"))+" ",1),be]),c(t(ne),{range:"","preset-dates":t(U),modelValue:t(e).dates,"onUpdate:modelValue":s[0]||(s[0]=l=>t(e).dates=l),format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid"},{"preset-date-range-button":m(({label:l,value:p,presetDate:u})=>[o("span",{role:"button",tabindex:0,onClick:b=>u(p),onKeyup:[M(C(b=>u(p),["prevent"]),["enter"]),M(C(b=>u(p),["prevent"]),["space"])]},i(l),41,ye)]),_:1},8,["preset-dates","modelValue"])])]),o("div",xe,[c(J,{name:"branches",label:t(E),placeholder:t(B),text:"name",value:"id",options:t(j),modelValue:t(e).selected_branch,"onUpdate:modelValue":s[1]||(s[1]=l=>t(e).selected_branch=l),mode:"single"},null,8,["label","placeholder","options","modelValue"])]),o("div",ke,[c(v,{name:"categories",label:t(O),placeholder:t(N),text:"name",value:"id",options:t(h),modelValue:t(e).selected_category,"onUpdate:modelValue":s[2]||(s[2]=l=>t(e).selected_category=l)},null,8,["label","placeholder","options","modelValue"])]),o("div",we,[c(v,{name:"taxes",label:t(I),placeholder:t(R),text:"name",value:"id",options:t(f),modelValue:t(e).selected_tax,"onUpdate:modelValue":s[3]||(s[3]=l=>t(e).selected_tax=l)},null,8,["label","placeholder","options","modelValue"])])]),o("div",Ve,[o("div",De,[o("button",{class:"btn btn-success",onClick:s[4]||(s[4]=l=>P()),disabled:t(e).dates==null},i(a.$t("Export Excel")),9,Me)])])])])]),_:1})}}};export{Ue as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ServerMessage.I5ol-gtz.js","assets/index.7OFNPsHl.js","assets/index.1t-AB2n6.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
