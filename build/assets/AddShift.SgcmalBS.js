import M from"./ServerMessage.I5ol-gtz.js";import{a as h,E as v,F as q}from"./vee-validate.esm.N3uz7Rsk.js";import{c as B,a as f}from"./index.esm.cd1bITNA.js";import{u as E,e as x,b as A,g as r,h as l,i as a,t as m,k as o,w as F,j as n,l as b,p as N}from"./index.7OFNPsHl.js";/* empty css                                                   */import{C as O}from"./ClipLoader.1qNfpKDH.js";/* empty css                                                   */const T={class:"modal hide",id:"ShiftModal",tabindex:"-1","aria-labelledby":"Add Bank","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},D={class:"modal-dialog modal-md modal-dialog-centered"},j={class:"modal-content"},U={class:"modal-header"},z={class:"modal-title"},I={class:"modal-body"},J={class:"row"},L={class:"col-6"},G={class:"col-6"},H={key:0,class:"py-3"},K={class:"mt-1 text-end"},P=["disabled"],Q={key:1,class:"pt-0"},R={key:2,class:"pt-0"},te={__name:"AddShift",props:["show_shift_modal","edit_data","branch_slack","weekday"],emits:["closeShiftModal"],setup(y,{emit:k}){const{t:i}=E(),c={server_messages:{type:"",messages:""},is_saving:!1,opening_time:[],closing_time:[]},e=x({...c}),S=A(),w=B({opening_time:f().typeError(i("name is required",{name:i("Opening Time")})).required(i("name is required",{name:i("Opening Time")})),closing_time:f().typeError(i("name is required",{name:i("Closing Time")})).required(i("name is required",{name:i("Closing Time")}))}),_=k,p=y;function V(){g(),_("closeShiftModal")}async function C(){var t=new FormData;t.append("branch_slack",p.branch_slack),t.append("weekday",p.weekday),t.append("opening_time",e.opening_time),t.append("closing_time",e.closing_time),await axios.post("/api/branch/shift/save",t).then(s=>{if(e.is_saving=!0,s.data.status_code==200)toast.success(s.data.msg),e.is_saving=!1,$("#ShiftModal").modal("hide"),_("closeShiftModal"),S.refresh(),g();else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(s.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=s.data.msg}e.is_saving=!1}}).catch(s=>{e.server_messages.type="error",e.server_messages.messages=s,e.is_saving=!1,console.log(s)})}function g(){Object.assign(e,c)}return(t,s)=>{const u=M;return r(),l("div",T,[a("div",D,[a("div",j,[a("div",U,[a("h5",z,m(t.$t("Add Shift")),1),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:V})]),a("div",I,[o(n(q),{"validation-schema":n(w),"initial-values":e,onSubmit:C,enctype:"multipart/form-data"},{default:F(()=>[a("div",J,[a("div",L,[o(n(h),{type:"time",class:"form-control",name:"opening_time",modelValue:e.opening_time,"onUpdate:modelValue":s[0]||(s[0]=d=>e.opening_time=d)},null,8,["modelValue"]),o(n(v),{name:"opening_time",as:"div",class:"error"})]),a("div",G,[o(n(h),{type:"time",class:"form-control",name:"closing_time",modelValue:e.closing_time,"onUpdate:modelValue":s[1]||(s[1]=d=>e.closing_time=d)},null,8,["modelValue"]),o(n(v),{name:"closing_time",as:"div",class:"error"})])]),e.server_messages.messages!=""?(r(),l("div",H,[o(u,{server_messages:e.server_messages,class:"mb-0"},null,8,["server_messages"])])):b("",!0),a("div",K,[a("button",{type:"submit",class:"btn btn-primary",disabled:e.is_saving},[e.is_saving?(r(),N(O,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):b("",!0),e.is_saving?(r(),l("span",Q,m(t.$t("Saving...")),1)):(r(),l("span",R,m(t.$t("Save")),1))],8,P)])]),_:1},8,["validation-schema","initial-values"])])])])])}}};export{te as default};
