import{u as $,a as E,r as g,e as B,o as C,g as i,p as v,w as _,f,i as a,k as m,n as b,t as d,j as t,h as u,l as k,R as I,q as A,_ as D}from"./index.7OFNPsHl.js";import{_ as F}from"./DefaultLayout.nvkZ4UhM.js";import{_ as P}from"./VTextInput.VtSvZjuc.js";import{a as U,E as L,F as R}from"./vee-validate.esm.N3uz7Rsk.js";import{c as j,a as w}from"./index.esm.cd1bITNA.js";/* empty css                                                   */import{C as z}from"./ClipLoader.1qNfpKDH.js";import{E as O}from"./Editor._g1B5yMm.js";import"./VTooltip.n3SV8A0p.js";/* empty css                                                   */const J={class:"header-nav-wrap"},G={class:"row align-items-center"},H={class:"col-auto"},K={class:"header-back-link"},Q={class:"col-auto"},W={key:0,class:"fw-bold"},X={key:1,class:"fw-bold"},Y={class:"content"},Z={class:"row card-strash"},ee={class:"col-md-12"},te={class:"row"},ae={class:"col-md-12 mb-4"},se={class:"card"},oe={class:"row"},le={class:"col-md-3"},ie={class:"col-md-9"},me={class:"form-field"},ne={class:"label"},de=a("span",{class:"text-danger"},"*",-1),re=a("div",{class:"text-primary"},[a("b",null,"Note :"),b(" Please don't remove value within square brackets ([]).")],-1),_e={class:"text-end"},pe=["disabled"],ce={key:1,class:"pt-0"},ue={key:2,class:"pt-0"},$e={__name:"add_mail_template",setup(ve){const V=A(()=>D(()=>import("./ServerMessage.I5ol-gtz.js"),__vite__mapDeps([0,1,2]))),{t:n}=$(),p=E().params.id,c=g([]),h=g({template_name:n("Template Name"),template_body:n("Template Body")}),e=B({...{server_messages:{type:"",messages:""},is_submitting:!1,id:"",template_name:"",template_body:""}}),T=j().shape({template_name:w().required(n("name is required",{name:n("Template Name")})),template_body:w().required(n("name is required",{name:n("Template Body")}))});C(()=>{p!=null&&x()});async function x(){await axios.get("/api/mail_template",{params:{id:p}}).then(s=>{c.value=s.data.data,e.id=c.value.id,e.template_name=c.value.template_name,e.template_body=c.value.template_body})}async function q(){e.is_submitting=!0;var s=new FormData;s.append("template_name",e.template_name),s.append("template_body",e.template_body),s.append("id",e.id);var o=e.id!=""&&e.id!=null?"/api/mail_template/update":"/api/mail_template/save";await axios.post(o,s).then(l=>{if(l.data.status_code==200)toast.success(l.data.msg),e.is_submitting=!1,router.push("/mail_templates");else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(l.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=l.data.msg}e.is_submitting=!1}}).catch(l=>{e.server_messages.type="error",e.server_messages.messages=l,e.is_submitting=!1})}return(s,o)=>{const l=f("Icon"),y=f("router-link"),M=P,N=F;return i(),v(N,null,{subheader:_(()=>[a("div",J,[a("div",G,[a("div",H,[a("div",K,[m(y,{class:"text-primary",to:"/mail_templates"},{default:_(()=>[m(l,{icon:"fa6-solid:chevron-left"}),b(" "+d(s.$t("Mail Templates")),1)]),_:1})])]),a("div",Q,[t(p)!=""&&t(p)!=null?(i(),u("h5",W,d(s.$t("Update Mail Template")),1)):(i(),u("h5",X,d(s.$t("Add Mail Template")),1))])])])]),default:_(()=>[a("div",Y,[m(t(R),{"validation-schema":t(T),onSubmit:q,"initial-values":t(e),enctype:"multipart/form-data"},{default:_(()=>[a("div",Z,[t(e).server_messages.messages!=""?(i(),v(t(V),{key:0,class:"py-3",server_messages:t(e).server_messages},null,8,["server_messages"])):k("",!0),a("div",ee,[a("div",te,[a("div",ae,[a("div",se,[a("div",oe,[a("div",le,[m(M,{type:"text",name:"template_name",modelValue:t(e).template_name,"onUpdate:modelValue":o[0]||(o[0]=r=>t(e).template_name=r),label:t(h).template_name,required:!0},null,8,["modelValue","label"])]),a("div",ie,[m(t(U),{name:"template_body",label:"label",modelValue:t(e).template_body,"onUpdate:modelValue":o[2]||(o[2]=r=>t(e).template_body=r)},{default:_(({field:r,meta:ye,errors:ge})=>[a("div",me,[a("label",ne,[b(d(t(h).template_body)+" ",1),de]),m(t(O),I({"api-key":"xm7yrkmhbefzhqie9ehn7yickrbrgkjs1bwfamuoxmm0m4dt",init:{plugins:"lists image table code help wordcount codesample advcode "},modelValue:t(e).template_body,"onUpdate:modelValue":o[1]||(o[1]=S=>t(e).template_body=S)},r),null,16,["modelValue"])])]),_:1},8,["modelValue"]),m(t(L),{name:"template_body",as:"div",class:"error"}),re])])])])])])]),a("div",_e,[a("button",{type:"submit",class:"btn btn-primary",disabled:t(e).is_submitting},[t(e).is_submitting?(i(),v(z,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):k("",!0),t(e).is_submitting?(i(),u("span",ce,d(s.$t("Saving...")),1)):(i(),u("span",ue,d(s.$t("Save")),1))],8,pe)])]),_:1},8,["validation-schema","initial-values"])])]),_:1})}}};export{$e as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ServerMessage.I5ol-gtz.js","assets/index.7OFNPsHl.js","assets/index.1t-AB2n6.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
