import{_ as L}from"./EditFormSkeleton.rDEkHHXB.js";import{_ as D}from"./VMultiSelect.2M-H_LD-.js";import M from"./ServerMessage.Re9KOdbP.js";import{u as q,a as F,r as y,e as H,o as x,g as l,p as f,w as g,f as U,i as a,l as o,k as A,t as d,j as v,h as u,m as p,K as B,Q as K,I as j}from"./index.li3fCRRM.js";import{D as Y}from"./DefaultLayout.saUWsTkY.js";import{F as W}from"./vee-validate.esm.reM-LHjC.js";import{c as G,a as h}from"./index.esm.e6McCFlz.js";import{_ as c}from"./VTextInput.pcaNaUkX.js";import{C as J}from"./ClipLoader.gDBpDd3b.js";import"./VTooltip.pHzwBjkF.js";/* empty css                                                   */var z={VITE_API_BASE_URL:"https://api.avinyadev.com",VITE_DEFAULT_LOCALE:"en",VITE_FALLBACK_LOCALE:"ar",VITE_RECAPTCHA_SITE_KEY:"6LcFHaYpAAAAAOHc3ISL-cu1Ldyg4MHCKbMKYA40",VITE_PUSHER_APP_KEY:"any-key",VITE_PUSHER_APP_CLUSTER:"mt1",VITE_PUSHER_WS_HOST:"api.avinyadev.com",VITE_PUSHER_WS_PORT:"6001",VITE_PUSHER_WSS_PORT:"6001",VITE_PUSHER_FORCE_TLS:"true",VITE_PUSHER_ENCRYPTED:"true",VITE_PUSHER_AUTH_ENDPOINT:"https://api.avinyadev.com/broadcasting/auth",VITE_USER_NODE_ENV:"production",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Q={class:"header-nav-wrap"},Z={class:"row align-items-center"},X={class:"col-auto"},ee={class:"header-back-link"},se={class:"col-auto"},te={key:0,class:"fw-bold"},ae={key:1,class:"fw-bold"},ie={key:0,class:"content"},ne={class:"row card-strash"},oe={key:0,class:"py-3"},le={class:"col-md-12"},re={class:"row"},de={class:"col-md-12 mb-4"},ue={class:"card"},_e={class:"row"},ce={class:"col-md-3"},me={class:"col-md-3"},pe={class:"col-md-3"},be={class:"col-md-3"},ve={class:"col-md-3"},ye={class:"col-md-3"},he={class:"col-md-3 pt-2"},ge={class:"form-field pt-2"},fe={class:"form-check form-switch pt-4"},Ve={class:"form-check-label",for:"status"},Ee={class:"col-md-12 mb-4"},ke={key:0,class:"card"},Se={class:"pb-3"},Te={key:0,class:"badge badge-primary"},Ue={key:1,class:"badge badge-success"},Ae={key:2,class:"badge badge-warning"},Re={key:3,class:"badge badge-gray"},Ie={key:4,class:"badge badge-danger"},Oe={class:"row"},Pe={class:"col-md-3"},we={class:"col-md-3"},$e={class:"col-md-3"},Ce={class:"col-md-3"},Ne={class:"col-md-3"},Le={class:"col-md-3"},De={class:"text-end"},Me=["disabled"],qe={key:1,class:"pt-0"},Fe={key:2,class:"pt-0"},ss={__name:"add_merchant",setup(He){const{t}=q(),m=F().params.slack,{generatePassword:R}=j(),r=y({name:t("Merchant Name"),email:t("Merchant Email"),phone:t("Merchant Phone"),vat_registration_number:t("VAT Registration Number"),gst_number:t("GST Number"),business_type:t("Business Type"),date_of_birth:t("Date Of Birth"),date_of_anniversary:t("Date Of Anniversary"),joining_date:t("Date Of Joining"),address:t("Address"),second_address_line:t("Address Line 2"),city:t("City"),pincode:t("Pincode/Zipcode"),state:t("State"),user_subscription_name:t("Subscription Name"),user_subscription_start_date:t("Start Date"),user_subscription_end_date:t("End Date"),user_subscription_active_subscriptions_at:t("Subscription Ends In"),user_subscription_payable_amount:t("Subscription Amount"),user_subscription_status:t("Subscription Status"),country:t("Country")}),e=H({...{server_messages:{type:"",messages:""},is_submitting:!1,name:"",email:"",phone:"",merchant_type:"",vat_registration_number:"",gst_number:"",business_type:"",date_of_birth:"",date_of_anniversary:"",joining_date:"",status:!0,address:"",first_address_line:"",second_address_line:"",city:"",pincode:"",state:"",country:"",merchant_slack:"",user_subscription:{name:"",status_text:""}}}),I=G({name:h().required(t("name is required",{name:t("Merchant Name")})).min(3,t("name must be at least n characters",{name:t("Merchant Name"),number:3})).default(""),country:h().required(t("Country is required",{name:t("Country")})),business_type:h().required(t("business type is required",{name:t("Business Type")})),email:h().required(t("name is required",{name:t("Email")})).email(t("must be a valid email",{name:t("Email")})),phone:h().matches(/^[0-9]{9,10}$/,t("Phone must be 9 or 10 digits")).typeError(t("must be a number",{name:t("Phone")})).required(t("phone is required",{name:t("Phone")})).min(9).max(10)});x(()=>{P(),m!=""&&m!=null&&w(),O()});const V=y([]);async function O(){let s=await axios.get("api/business_types");V.value=s.data}const E=y([]),b=y([]);async function P(){await axios.get("/api/countries/serving").then(s=>{if(s.data.status_code==200)E.value=s.data.data;else try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(s.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=s.data.msg}}).catch(s=>{e.server_messages.type="error",e.server_messages.messages=s,console.log(s)})}const k=y(!1);async function w(){await axios.post("/api/merchant",{slack:m}).then(s=>{b.value=s.data.data,s.data.data&&(e.merchant_slack=s.data.data.slack,e.name=s.data.data.name,e.email=s.data.data.email,e.city=s.data.data.city,e.state=s.data.data.state,e.gst_number=s.data.data.gst_number,e.vat_registration_number=s.data.data.vat_number,e.business_type=s.data.data.business_type,e.phone=s.data.data.phone,e.address=s.data.data.address,e.second_address_line=s.data.data.second_address_line,e.pincode=s.data.data.postal_code,e.country=s.data.data.country_slack,e.date_of_anniversary=s.data.data.date_of_anniversary,e.date_of_birth=s.data.data.date_of_birth,e.joining_date=s.data.data.joining_date,e.merchant_type=s.data.data.type,e.status=s.data.data.status==1,e.user_subscription=s.data.data.user_subscription),k.value=!0}).catch(s=>{e.server_messages.type="error",e.server_messages.messages=s,console.log(s)})}async function $(){e.is_submitting=!0;var s=new FormData;s.append("s_token",z.VITE_WOSUL_INTEGRATION_TOKEN),s.append("merchant_name",e.name),s.append("business_type",e.business_type),s.append("merchant_email",e.email),s.append("phone",e.phone),s.append("status",e.status),s.append("country",e.country),s.append("password",R(8)),s.append("merchant_slack",e.merchant_slack),s.append("is_register_mail_send",!0);var i=e.merchant_slack!=""&&e.merchant_slack!=null?"/api/merchant/update":"/api/web_register";await axios.post(i,s).then(_=>{if(_.data.status_code==200)toast.success(_.data.msg),e.is_submitting=!1,!e.merchant_slack||e.merchant_slack==null?router.push("/merchant/"+_.data.data.user.slack):router.push("/merchants");else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(_.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=_.data.msg}e.is_submitting=!1}}).catch(_=>{e.server_messages.type="error",e.server_messages.messages=_,e.is_submitting=!1,console.log(_)})}return(s,i)=>{const _=U("Icon"),S=U("router-link"),C=M,T=D,N=L;return l(),f(Y,null,{subheader:g(()=>[a("div",Q,[a("div",Z,[a("div",X,[a("div",ee,[o(S,{class:"text-primary",to:"/merchants"},{default:g(()=>[o(_,{icon:"fa6-solid:chevron-left"}),A(" "+d(s.$t("Merchants")),1)]),_:1})])]),a("div",se,[v(m)==""||v(m)==null?(l(),u("h5",te,d(s.$t("Add Merchant")),1)):(l(),u("h5",ae,d(s.$t("Edit Merchant")),1))])])])]),default:g(()=>[v(m)==""||v(m)==null||v(m)!=""&&k.value?(l(),u("div",ie,[o(v(W),{"validation-schema":v(I),"initial-values":e,onSubmit:$,enctype:"multipart/form-data"},{default:g(()=>[a("div",ne,[e.server_messages.messages!=""?(l(),u("div",oe,[o(C,{server_messages:e.server_messages},null,8,["server_messages"])])):p("",!0),a("div",le,[a("div",re,[a("div",de,[a("div",ue,[a("div",_e,[a("div",ce,[o(c,{type:"text",name:"name",modelValue:e.name,"onUpdate:modelValue":i[0]||(i[0]=n=>e.name=n),label:r.value.name,required:!0},null,8,["modelValue","label"])]),a("div",me,[o(c,{type:"email",name:"email",modelValue:e.email,"onUpdate:modelValue":i[1]||(i[1]=n=>e.email=n),label:r.value.email,required:""},null,8,["modelValue","label"])]),a("div",pe,[o(c,{type:"number",name:"phone",modelValue:e.phone,"onUpdate:modelValue":i[2]||(i[2]=n=>e.phone=n),label:r.value.phone,required:""},null,8,["modelValue","label"])]),a("div",be,[o(T,{name:"business_type",label:r.value.business_type,placeholder:r.value.business_type,text:"value",value:"key",options:V.value,modelValue:e.business_type,"onUpdate:modelValue":i[3]||(i[3]=n=>e.business_type=n),mode:"single",required:"",selected:e.business_type},null,8,["label","placeholder","options","modelValue","selected"])]),a("div",ve,[o(T,{name:"country",label:r.value.country,placeholder:r.value.country,text:"name",value:"slack",options:E.value,modelValue:e.country,"onUpdate:modelValue":i[4]||(i[4]=n=>e.country=n),mode:"single",required:"",selected:e.country},null,8,["label","placeholder","options","modelValue","selected"])]),a("div",ye,[o(c,{type:"text",name:"address",modelValue:e.address,"onUpdate:modelValue":i[5]||(i[5]=n=>e.address=n),label:r.value.address},null,8,["modelValue","label"])]),a("div",he,[a("div",ge,[a("div",fe,[B(a("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status",checked:"","onUpdate:modelValue":i[6]||(i[6]=n=>e.status=n)},null,512),[[K,e.status]]),a("label",Ve,d(s.$t("Active")),1)])])])])])]),a("div",Ee,[b.value.user_subscription?(l(),u("div",ke,[a("h5",Se,[A(d(s.$t("Subscription"))+" ",1),b.value.user_subscription.status==0?(l(),u("span",Te,d(s.$t("Inactive")),1)):p("",!0),b.value.user_subscription.status==1?(l(),u("span",Ue,d(s.$t("Active")),1)):p("",!0),b.value.user_subscription.status==2?(l(),u("span",Ae,d(s.$t("On Hold")),1)):p("",!0),b.value.user_subscription.status==3?(l(),u("span",Re,d(s.$t("Upgraded")),1)):p("",!0),b.value.user_subscription.status==4?(l(),u("span",Ie,d(s.$t("Expired")),1)):p("",!0)]),a("div",Oe,[a("div",Pe,[o(c,{type:"text",name:"user_subscription.name",modelValue:e.user_subscription.name,"onUpdate:modelValue":i[7]||(i[7]=n=>e.user_subscription.name=n),label:r.value.user_subscription_name,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),a("div",we,[o(c,{type:"text",name:"user_subscription.start_date_label",modelValue:e.user_subscription.start_date_label,"onUpdate:modelValue":i[8]||(i[8]=n=>e.user_subscription.start_date_label=n),label:r.value.user_subscription_start_date,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),a("div",$e,[o(c,{type:"text",name:"user_subscription.end_date_label",modelValue:e.user_subscription.end_date_label,"onUpdate:modelValue":i[9]||(i[9]=n=>e.user_subscription.end_date_label=n),label:r.value.user_subscription_end_date,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),a("div",Ce,[o(c,{type:"text",name:"user_subscription.active_subscriptions_at",modelValue:e.user_subscription.active_subscriptions_at,"onUpdate:modelValue":i[10]||(i[10]=n=>e.user_subscription.active_subscriptions_at=n),label:r.value.user_subscription_active_subscriptions_at,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),a("div",Ne,[o(c,{type:"text",name:"user_subscription.payable_amount",modelValue:e.user_subscription.payable_amount,"onUpdate:modelValue":i[11]||(i[11]=n=>e.user_subscription.payable_amount=n),label:r.value.user_subscription_payable_amount,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),a("div",Le,[o(c,{type:"text",name:"user_subscription.status_text",modelValue:e.user_subscription.status_text,"onUpdate:modelValue":i[12]||(i[12]=n=>e.user_subscription.status_text=n),label:r.value.user_subscription_status,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])])])])):p("",!0)])])])]),a("div",De,[a("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(l(),f(J,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):p("",!0),e.is_submitting?(l(),u("span",qe,d(s.$t("Saving...")),1)):(l(),u("span",Fe,d(s.$t("Save")),1))],8,Me)])]),_:1},8,["validation-schema","initial-values"])])):(l(),f(N,{key:1}))]),_:1})}}};export{ss as default};
