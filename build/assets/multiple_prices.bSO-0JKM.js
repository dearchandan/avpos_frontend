import{_ as S}from"./ActionButtonGroup.UoCDvTnh.js";import{_ as A}from"./InventoryMenu.rcnIHVl3.js";import{_ as I}from"./DefaultLayout.EMHfdzn0.js";import{u as D,b as L,r as d,e as T,o as F,v as q,g as i,p as V,w as f,I as j,f as O,k as u,i as e,t as n,h as c,n as R,l as y,F as z,x as G,j as J,O as U}from"./index.ri7Y_V5F.js";import{_ as W}from"./PaginateLimit.Qyl6CO-f.js";import"./vue-datepicker.gRWbN_6J.js";import{B as Y}from"./BeatLoader.8E6aB4W4.js";import"./ClipLoader.4-rIzqtH.js";/* empty css                                                   *//* empty css                                                   */const H={class:"content"},K={class:"page-heading"},Q={class:"row align-items-center justify-content-between mb-3"},X={class:"col-auto"},Z={class:"mb-0"},ee={key:0,class:"col-auto"},se={key:0},te={key:1,class:"table-responsive"},ae={class:"table table-list-data table-hover"},oe={class:"bg-light"},ie={scope:"col",width:"80%"},ne={scope:"col",width:"10%"},ce={key:0,scope:"col",class:"text-end",width:"5%"},le=["onClick"],re={class:"fw-bold highlighted-list-item"},_e=e("br",null,null,-1),de={class:"text-muted"},ue={class:"form-feild"},me={class:"form-check form-switch form-switch-2"},he=["onChange","checked"],pe={key:0,class:"text-end"},ge={key:1},ve={class:"text-center py-3",colspan:"11"},fe={class:"data-footer"},ye={class:"row align-items-center justify-content-between"},we={class:"col-auto"},ke={class:"col-auto"},Ie={__name:"multiple_prices",setup(be){const{t:h}=D(),{isAuthorized:w}=j();L(),d(!1);const C={server_messages:{type:"",messages:""},is_listing:!1,search_query:d("")};h("Search by name, name ar..");const s=T({...C});F(()=>{x(),m()}),q(()=>s.search_query,_.debounce(()=>{m()},500));const p=d([]),g=d([]);async function m(a=1){s.is_listing=!0,await axios.get("/api/v2/multiple_prices/list",{params:{page:a,paginate_limit:k.value,search_query:s.search_query}}).then(o=>{p.value=o.data.data,g.value=o.data.pagination,s.is_listing=!1}).catch(o=>{s.server_messages.type="error",s.server_messages.messages=o,s.is_listing=!1,console.log(o)})}const k=d();async function P(a){k.value=a,await m()}async function B(a){var o=new FormData;o.append("slack",a),await axios.post("/api/multiple_price/update_status",o).then(t=>{if(t.data.status_code==200)toast.success(t.data.msg);else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(t.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=t.data.msg}}).catch(t=>{s.server_messages.type="error",s.server_messages.messages=t,console.log(t)})}function b(a){router.push("/multiple_price/edit/"+a)}async function $(a){var o=!1;await Swal.fire({title:h("Do you want to delete this Multiple Price?"),showCancelButton:!0,confirmButtonText:h("Yes, Delete"),cancelButtonText:h("Cancel"),confirmButtonColor:"#d33"}).then(t=>{t.isConfirmed&&(o=!0)}),o&&await axios.post("/api/multiple_price/delete",{slack:a}).then(t=>{if(t.data.status_code==200)Swal.fire(t.data.msg),m();else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(t.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=t.data.msg}}).catch(t=>{s.server_messages.type="error",s.server_messages.messages=t,console.log(t)})}const l=d({write:!1,delete:!1});function x(){l.value={write:w("A_WRITE_MULTIPLE_PRICE"),delete:w("A_DELETE_MULTIPLE_PRICE")}}return(a,o)=>{const t=A,v=O("router-link"),E=S;return i(),V(I,null,{subheader:f(()=>[u(t)]),default:f(()=>[e("div",H,[e("div",K,[e("div",Q,[e("div",X,[e("h2",Z,n(a.$t("Multiple Prices")),1)]),l.value.write?(i(),c("div",ee,[u(v,{class:"btn btn-sm btn-light-primary",to:"/multiple_price/add"},{default:f(()=>[R("+ "+n(a.$t("New Multiple Price")),1)]),_:1})])):y("",!0)])]),s.is_listing?(i(),c("div",se,[u(Y,{color:"gray",size:"15px",class:"pt-2 pe-2"})])):(i(),c("div",te,[e("table",ae,[e("thead",oe,[e("tr",null,[e("th",ie,n(a.$t("Name")),1),e("th",ne,n(a.$t("Active")),1),l.value.write||l.value.delete?(i(),c("th",ce,n(a.$t("Action")),1)):y("",!0)])]),e("tbody",null,[p.value!=""?(i(!0),c(z,{key:0},G(p.value,(r,M)=>(i(),c("tr",{key:M},[e("td",{onClick:N=>b(r.slack),role:"button"},[e("div",null,[e("span",re,n(r.name),1),_e,e("small",de,"Name(Ar): "+n(r.name_ar),1)])],8,le),e("td",null,[e("div",ue,[e("div",me,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"Status_id",onChange:N=>B(r.slack),checked:r.status==1},null,40,he)])])]),l.value.write||l.value.delete?(i(),c("td",pe,[u(E,{permissions:l.value,onEdit:b,onDelete:$,slack:r.slack},null,8,["permissions","slack"])])):y("",!0)]))),128)):(i(),c("tr",ge,[e("td",ve,n(a.$t("No Data Found")),1)]))])])])),e("div",fe,[e("div",ye,[e("div",we,[u(W,{onPaginate_limit_update:P,pagination:g.value},null,8,["pagination"])]),e("div",ke,[u(J(U),{data:g.value,limit:5,onPaginationChangePage:m},null,8,["data"])])])])])]),_:1})}}};export{Ie as default};
