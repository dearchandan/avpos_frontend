import{D as K}from"./DefaultLayout.saUWsTkY.js";import{_ as R}from"./PaginateLimit.SmYeFgfo.js";import{_ as W}from"./InventoryMenu.8CswL5DF.js";import{u as Y,r as d,e as D,o as H,v as Q,g as l,p as X,w as N,I as Z,f as O,l as u,i as t,h as c,k as tt,t as o,m as p,K as A,N as et,j as F,y as st,L as ot,F as at,x as it,O as nt}from"./index.li3fCRRM.js";import{B as lt}from"./BeatLoader.GtqPXmja.js";import"./ClipLoader.gDBpDd3b.js";/* empty css                                                   *//* empty css                                                   */const ct={class:"content"},rt={class:"page-heading"},dt={class:"row align-items-center justify-content-between"},_t={class:"col-auto"},ut={class:"row align-items-center"},ht={key:0,class:"col-auto"},mt={class:"col-auto"},pt={class:"row align-items-center"},vt={class:"col-auto"},gt={class:"form-field page-heading-search-field mb-0"},ft={class:"field-icon"},yt=["placeholder"],wt={class:"icon"},bt={class:"col-auto"},kt={class:"dropdown filter-dropdown"},Ct={class:"row gx-3"},$t={class:"col-12"},Bt={class:"form-field"},Dt={for:"",class:"form-label"},Nt={value:""},St={value:"1"},xt={value:"0"},Ot={class:"row py-3"},At={class:"col-12 text-end"},Ft={key:0},It={key:1,class:"table-responsive"},Lt={class:"table table-list-data table-hover"},Tt={class:"bg-light"},qt={scope:"col",width:"5%"},Et={scope:"col",width:"15%"},Mt={scope:"col",width:"10%"},Pt={scope:"col",width:"10%"},Vt={scope:"col",width:"10%"},jt={scope:"col",width:"5%"},Jt={key:0,scope:"col",class:"text-end",width:"5%"},zt=["onClick"],Ut=["src"],Gt=["onClick"],Kt={class:"fw-bold highlighted-list-item"},Rt=["onClick"],Wt=["onClick"],Yt=["onClick"],Ht={class:"form-feild"},Qt={class:"form-check form-switch form-switch-2"},Xt=["onChange","checked"],Zt={key:0,class:"text-end"},te={class:"dropdown"},ee={class:"btn btn-icon btn-sm btn-light dropdown-toggle arrow-none",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},se={class:"dropdown-menu"},oe={key:0},ae=["onClick"],ie={key:1},ne=["onClick"],le={key:1},ce={class:"text-center py-3",colspan:"11"},re={class:"data-footer"},de={class:"row align-items-center justify-content-between"},_e={class:"col-auto"},ue={class:"col-auto"},ke={__name:"combos",setup(he){const{t:f}=Y(),{isAuthorized:S}=Z(),I={server_messages:{type:"",messages:""},is_listing:!1,search_query:d("")},L=f("Search by name, price, total amount.."),s=D({...I});H(()=>{J(),h()}),Q(()=>s.search_query,_.debounce(()=>{h()},500));const w=d([]),b=d([]);async function h(e=1){s.is_listing=!0,await axios.get("/api/combos",{params:{page:e,paginate_limit:x.value,search_query:s.search_query,filter:g}}).then(n=>{w.value=n.data.data,b.value=n.data.pagination,s.is_listing=!1}).catch(n=>{s.server_messages.type="error",s.server_messages.messages=n,s.is_listing=!1,console.log(n)})}const x=d();async function T(e){x.value=e,await h()}async function q(e){var n=new FormData;n.append("slack",e),await axios.post("/api/combo/update_status",n).then(a=>{if(a.data.status_code==200)toast.success(a.data.msg);else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(a.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=a.data.msg}}).catch(a=>{s.server_messages.type="error",s.server_messages.messages=a,console.log(a)})}async function E(e){var n=!1;await Swal.fire({title:f("Do you want to delete this combo?"),showCancelButton:!0,confirmButtonText:f("Yes, Delete"),confirmButtonColor:"#d33",cancelButtonText:f("Cancel")}).then(a=>{a.isConfirmed&&(n=!0)}),n&&await axios.post("/api/combo/delete",{slack:e}).then(a=>{if(a.data.status_code==200)toast.success(a.data.msg),h();else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(a.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=a.data.msg}}).catch(a=>{s.server_messages.type="error",s.server_messages.messages=a,console.log(a)})}function v(e){router.push("/combo/"+e)}function M(e){router.push("/combos/edit/"+e)}const y=d(!1),k=D({status:d("")}),g=D({...k}),C=d(!1);async function P(){y.value=!y.value}async function V(){JSON.stringify(g)!=JSON.stringify(k)&&(C.value=!0),y.value=!1,await h()}function j(){Object.assign(g,k),C.value=!1,h()}const r=d({write:!1,delete:!1});function J(){r.value={write:S("A_WRITE_COMBO"),delete:S("A_DELETE_COMBO")}}return(e,n)=>{const a=W,$=O("router-link"),B=O("Icon"),z=R,U=K;return l(),X(U,null,{subheader:N(()=>[u(a)]),default:N(()=>[t("div",ct,[t("div",rt,[t("div",dt,[t("div",_t,[t("div",ut,[r.value.write?(l(),c("div",ht,[u($,{class:"btn btn-sm btn-light-primary",to:"/combos/add"},{default:N(()=>[tt("+ "+o(e.$t("New Combo")),1)]),_:1})])):p("",!0)])]),t("div",mt,[t("div",pt,[t("div",vt,[t("div",gt,[t("div",ft,[A(t("input",{type:"search",class:"form-control form-control-sm form-control-shadow",placeholder:F(L),"onUpdate:modelValue":n[0]||(n[0]=i=>s.search_query=i)},null,8,yt),[[et,s.search_query]]),t("div",wt,[u(B,{icon:"fa6-solid:magnifying-glass"})])])])]),t("div",bt,[t("div",kt,[t("button",{type:"button",class:"btn btn-sm btn-icon btn-light-primary","data-bs-auto-close":"outside",onClick:P},[u(B,{icon:"fa6-solid:filter"})]),t("div",{class:st([y.value?"show":"","dropdown-menu p-3 w-365"]),id:"filter_box",style:{position:"absolute",inset:"0px auto auto 0px",margin:"0px",transform:"translate3d(-310px, 36px, 0px)"}},[t("form",null,[t("div",Ct,[t("div",$t,[t("div",Bt,[t("label",Dt,o(e.$t("Status")),1),A(t("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":n[1]||(n[1]=i=>g.status=i)},[t("option",Nt,o(e.$t("All")),1),t("option",St,o(e.$t("Active")),1),t("option",xt,o(e.$t("Inactive")),1)],512),[[ot,g.status]])])])]),t("button",{type:"button",onClick:V,class:"btn btn-sm btn-primary w-100"},o(e.$t("Filter")),1)])],2)])])])])]),t("div",Ot,[t("div",At,[C.value?(l(),c("button",{key:0,class:"badge badge-danger btn-sm",onClick:j},o(e.$t("Clear Filters")),1)):p("",!0)])])]),s.is_listing?(l(),c("div",Ft,[u(lt,{color:"gray",size:"15px",class:"pt-2 pe-2"})])):(l(),c("div",It,[t("table",Lt,[t("thead",Tt,[t("tr",null,[t("th",qt,o(e.$t("Image")),1),t("th",Et,o(e.$t("Name")),1),t("th",Mt,o(e.$t("Price")),1),t("th",Pt,o(e.$t("Tax Amount")),1),t("th",Vt,o(e.$t("Total Amount")),1),t("th",jt,o(e.$t("Active")),1),r.value.write&&r.value.delete?(l(),c("th",Jt,o(e.$t("Action")),1)):p("",!0)])]),t("tbody",null,[w.value!=""?(l(!0),c(at,{key:0},it(w.value,(i,G)=>(l(),c("tr",{key:G},[t("td",{onClick:m=>v(i.slack),role:"button"},[t("img",{src:i.image,alt:"",class:"listing-image img img-thumbnail rounded-circle"},null,8,Ut)],8,zt),t("td",{onClick:m=>v(i.slack),role:"button"},[t("div",null,[t("span",Kt,o(i.name),1)])],8,Gt),t("td",{onClick:m=>v(i.slack),role:"button"},o(i.price),9,Rt),t("td",{onClick:m=>v(i.slack),role:"button"},o(i.tax_amount),9,Wt),t("td",{onClick:m=>v(i.slack),role:"button"},o(i.amount),9,Yt),t("td",null,[t("div",Ht,[t("div",Qt,[t("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"Status_id",onChange:m=>q(i.slack),checked:i.status==1},null,40,Xt)])])]),r.value.write&&r.value.delete?(l(),c("td",Zt,[t("div",te,[t("button",ee,[u(B,{icon:"fa6-solid:ellipsis-vertical"})]),t("ul",se,[r.value.write?(l(),c("li",oe,[t("a",{class:"dropdown-item",href:"#",onClick:m=>M(i.slack)},o(e.$t("Edit")),9,ae)])):p("",!0),r.value.delete?(l(),c("li",ie,[t("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:m=>E(i.slack)},o(e.$t("Delete")),9,ne)])):p("",!0)])])])):p("",!0)]))),128)):(l(),c("tr",le,[t("td",ce,o(e.$t("No Data Found")),1)]))])])])),t("div",re,[t("div",de,[t("div",_e,[u(z,{onPaginate_limit_update:T,pagination:b.value},null,8,["pagination"])]),t("div",ue,[u(F(nt),{data:b.value,limit:5,onPaginationChangePage:h},null,8,["data"])])])])])]),_:1})}}};export{ke as default};
