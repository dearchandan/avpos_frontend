import{_ as B}from"./SimpleLayout.0q5SBnd8.js";import M from"./ServerMessage.Re9KOdbP.js";import{z as x,u as T,e as N,r as V,g as i,p as g,w as c,f as w,i as t,l as _,k as F,t as s,j as o,h as d,m as u,K as b,N as y,y as $,C as z,D as P}from"./index.li3fCRRM.js";import{F as Y}from"./vee-validate.esm.reM-LHjC.js";import{C as S}from"./ClipLoader.gDBpDd3b.js";import{_ as E}from"./logo.HjYCcV9L.js";/* empty css                                                   */const v=m=>(z("data-v-99ded866"),m=m(),P(),m),L={class:"header-nav-wrap"},U={class:"row align-items-center"},O={class:"col-auto"},R={class:"header-back-link"},j={class:"col-auto"},q={class:"fw-bold"},A={class:"content py-5"},G={key:0,class:"py-3"},K={class:"row"},H=v(()=>t("div",{class:"col-2"},null,-1)),J={class:"col-6"},Q={class:"fw-bold text-dark"},W={class:"fw-bold text-muted"},X={class:"col-2 text-end pb-3"},Z=["src"],tt=v(()=>t("hr",null,null,-1)),st={class:"row pt-5"},et=v(()=>t("div",{class:"col-2"},null,-1)),ot={class:"col-4"},at={class:"card"},lt={class:"pb-4"},nt={class:"text-primary"},it={class:"text-muted fw-bold"},dt={class:"form-field"},rt={class:"col-12"},ct={class:"label",for:""},_t={class:"form-field"},mt={class:"col-12"},pt={class:"label",for:""},ut={class:"form-field pt-4"},ht={class:"col-12 text-end"},ft=["disabled"],gt={key:1,class:"pt-0"},vt={key:2,class:"pt-0"},wt={key:0},bt={key:1},yt={key:0,class:"col-4"},$t={class:"card"},St={class:"pb-4"},kt={class:"text-primary"},Ct={class:"text-muted fw-bold"},It={class:"row"},Dt={class:"col-12"},Bt={class:"table table-striped table-bordered table-responsive"},Mt={width:"70%"},xt={class:"fw-bold text-primary"},Tt={class:"fw-bold text-primary"},Nt={class:"fw-bold text-primary"},Vt={class:"fw-bold text-primary"},Ft={class:"fw-bold text-primary"},zt={class:"fw-bold text-primary"},Pt={class:"fw-bold text-primary"},Yt={class:"fw-bold text-primary"},Et={class:"fw-bold text-primary"},Lt={class:"fw-bold text-primary"},Ut={class:"fw-bold text-primary"},Ot={class:"col-12 mt-5 text-end"},Rt={class:"form-field"},jt=["disabled"],qt={key:1,class:"pt-0"},At={key:2,class:"pt-0"},Gt={__name:"data_migrate",setup(m){const{t:k}=T(),a=N({...{server_messages:{type:"",messages:""},email:"",password:"",is_connecting:!1,is_importing:!1}}),n=V([]);async function C(){a.is_connecting=!0;var e=new FormData;e.append("email",a.email),e.append("password",a.password),await axios.post("/api/data_migrate/connect",e).then(l=>{l.data.status_code==200&&l.data.data.connected?(n.value=l.data.data,toast.success(l.data.msg)):Swal.fire({icon:"error",title:l.data.msg}),a.is_connecting=!1}).catch(l=>{a.server_messages.type="error",a.server_messages.messages=l,console.log(l)})}async function I(){a.is_importing=!0;var e=new FormData;e.append("merchant_dbname",n.value.merchant_dbname),await axios.post("/api/data_migrate/import",e).then(l=>{if(l.data.status_code==200){let p;Swal.fire({icon:"success",title:l.data.msg,html:k("You will be redirecting to sign in page in <strong></strong> seconds."),timer:6e3,timerProgressBar:!0,showConfirmButton:!1,didOpen:()=>{const r=Swal.getPopup().querySelector("strong");p=setInterval(()=>{let h=Swal.getTimerLeft()/1e3;r.textContent=`${Math.ceil(h)}`},1e3)},willClose:()=>{clearInterval(p)}}).then(r=>{window.location.href="/"})}a.is_importing=!1}).catch(l=>{a.server_messages.type="error",a.server_messages.messages=l,console.log(l)})}return(e,l)=>{const p=w("Icon"),r=w("router-link"),h=M,D=B;return i(),g(D,null,{subheader:c(()=>[t("div",L,[t("div",U,[t("div",O,[t("div",R,[_(r,{class:"text-primary",to:"/settings"},{default:c(()=>[_(p,{icon:"fa6-solid:chevron-left"}),F(" "+s(e.$t("Settings")),1)]),_:1})])]),t("div",j,[t("h5",q,s(e.$t("Data Migrate")),1)])])])]),default:c(()=>[t("div",A,[o(a).server_messages.messages!=""?(i(),d("div",G,[_(h,{server_messages:o(a).server_messages},null,8,["server_messages"])])):u("",!0),t("div",K,[H,t("div",J,[t("h4",Q,s(e.$t("Data Migration")),1),t("p",W,s(e.$t("You Get 2 Step Solution To Move Your Existing Data To Our New System")),1)]),t("div",X,[_(r,{to:"/"},{default:c(()=>[t("img",{src:o(E),class:"logo",alt:""},null,8,Z)]),_:1})])]),tt,t("div",st,[et,t("div",ot,[t("div",at,[t("div",lt,[t("h4",nt,"1. "+s(e.$t("Connect")),1),t("p",it,s(e.$t("You can enter your registered email and password with wosul here and start restoring the data")),1)]),_(o(Y),{enctype:"multipart/form-data","initial-values":o(a),onSubmit:C},{default:c(()=>[t("div",dt,[t("div",rt,[t("label",ct,s(e.$t("Email")),1),b(t("input",{type:"text",class:"form-control form-control-solid","onUpdate:modelValue":l[0]||(l[0]=f=>o(a).email=f)},null,512),[[y,o(a).email]])])]),t("div",_t,[t("div",mt,[t("label",pt,s(e.$t("Password")),1),b(t("input",{type:"password",class:"form-control form-control-solid","onUpdate:modelValue":l[1]||(l[1]=f=>o(a).password=f)},null,512),[[y,o(a).password]])])]),t("div",ut,[t("div",ht,[t("button",{type:"submit",class:$(["btn",[o(n).connected?"btn-success":"btn-primary"]]),disabled:o(a).is_connecting||o(n).connected},[o(a).is_connecting?(i(),g(S,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):u("",!0),o(a).is_connecting?(i(),d("span",gt,s(e.$t("Connecting...")),1)):(i(),d("span",vt,[o(n).connected?(i(),d("span",wt,s(e.$t("Connected")),1)):(i(),d("span",bt,s(e.$t("Connect")),1))]))],10,ft)])])]),_:1},8,["initial-values"])])]),o(n).connected?(i(),d("div",yt,[t("div",$t,[t("div",St,[t("h4",kt,"2. "+s(e.$t("Import")),1),t("p",Ct,s(e.$t("Start importing all the data from your old system to new system except sales data")),1)]),t("div",It,[t("div",Dt,[t("table",Bt,[t("thead",null,[t("tr",null,[t("th",Mt,s(e.$t("Module")),1),t("th",null,s(e.$t("Records Found")),1)])]),t("tbody",null,[t("tr",null,[t("td",null,s(e.$t("Branches")),1),t("td",xt,s(o(n).total_branches),1)]),t("tr",null,[t("td",null,s(e.$t("Users")),1),t("td",Tt,s(o(n).total_users),1)]),t("tr",null,[t("td",null,s(e.$t("Roles")),1),t("td",Nt,s(o(n).total_roles),1)]),t("tr",null,[t("td",null,s(e.$t("Products")),1),t("td",Vt,s(o(n).total_products),1)]),t("tr",null,[t("td",null,s(e.$t("Categories")),1),t("td",Ft,s(o(n).total_categories),1)]),t("tr",null,[t("td",null,s(e.$t("Terminals")),1),t("td",zt,s(o(n).total_terminals),1)]),t("tr",null,[t("td",null,s(e.$t("Business Accounts")),1),t("td",Pt,s(o(n).total_accounts),1)]),t("tr",null,[t("td",null,s(e.$t("Suppliers")),1),t("td",Yt,s(o(n).total_suppliers),1)]),t("tr",null,[t("td",null,s(e.$t("Modifiers")),1),t("td",Et,s(o(n).total_modifiers),1)]),t("tr",null,[t("td",null,s(e.$t("Customers")),1),t("td",Lt,s(o(n).total_customers),1)]),t("tr",null,[t("td",null,s(e.$t("Dining Tables")),1),t("td",Ut,s(o(n).total_dining_tables),1)])])])]),t("div",Ot,[t("div",Rt,[t("button",{type:"submit",class:$(["btn","btn-primary"]),disabled:o(a).is_importing,onClick:I},[o(a).is_importing?(i(),g(S,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):u("",!0),o(a).is_importing?(i(),d("span",qt,s(e.$t("Importing...")),1)):(i(),d("span",At,s(e.$t("Start Importing")),1))],8,jt)])])])])])):u("",!0)])])]),_:1})}}},ss=x(Gt,[["__scopeId","data-v-99ded866"]]);export{ss as default};
