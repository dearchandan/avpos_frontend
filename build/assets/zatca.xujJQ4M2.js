import{_ as w}from"./DefaultLayout.nvkZ4UhM.js";import{_ as P}from"./EditFormSkeleton.hbjdnq7m.js";import{_ as Z}from"./VSelect.UFegTIpk.js";import $ from"./ServerMessage.I5ol-gtz.js";import{F as D}from"./vee-validate.esm.N3uz7Rsk.js";import{c as O,a as r}from"./index.esm.cd1bITNA.js";import{_ as l}from"./VTextInput.VtSvZjuc.js";import{C as f}from"./ClipLoader.1qNfpKDH.js";import{u as E,a as F,r as v,e as M,o as L,g as m,p as N,w as _,f as V,i,k as o,n as j,t as p,h as b,l as S,j as h}from"./index.7OFNPsHl.js";/* empty css                                                                */import"./VTooltip.n3SV8A0p.js";/* empty css                                                   */const H={class:"header-nav-wrap"},G={class:"row align-items-center"},J={class:"col-auto"},K={class:"header-back-link"},Q={class:"col-auto"},W={class:"fw-bold"},X={key:0,class:"col-auto ms-auto"},Y=["disabled"],ee={key:0},ae={class:"pt-0"},te={key:1,class:"pt-0"},se={class:"content"},ie={class:"row card-strash"},de={key:0,class:"py-3"},oe={class:"col-md-12"},ne={class:"row"},le={class:"col-md-12 mb-4"},re={class:"card"},me={class:"row"},ue={class:"col-6 col-md-4 col-lg-3"},ce={class:"col-6 col-md-4 col-lg-3"},be={class:"col-6 col-md-4 col-lg-3"},pe={class:"col-6 col-md-4 col-lg-3"},ge={class:"col-6 col-md-4 col-lg-3"},ye={class:"col-6 col-md-4 col-lg-3"},ve={class:"col-6 col-md-4 col-lg-3"},Ne={class:"col-6 col-md-4 col-lg-3"},_e={class:"col-6 col-md-4 col-lg-3"},Se={class:"col-6 col-md-4 col-lg-3"},Ce={class:"col-6 col-md-4 col-lg-3"},fe={class:"col-md-12 mb-4"},Ve={class:"card"},he={class:"pb-3"},qe={class:"row"},xe={class:"col-6 col-md-4 col-lg-3"},ze={class:"col-6 col-md-4 col-lg-3"},Ue={class:"col-6 col-md-4 col-lg-3"},Ie={class:"col-6 col-md-4 col-lg-3"},ke={class:"col-6 col-md-4 col-lg-3"},Ae={class:"col-6 col-md-4 col-lg-3"},Be={class:"col-6 col-md-4 col-lg-3"},Te={class:"col-6 col-md-4 col-lg-3"},Re={class:"text-end"},we={type:"submit",class:"btn btn-primary"},Pe={key:1,class:"pt-0"},Ze={key:0},$e={key:1},De={key:2,class:"pt-0"},Oe={key:0},Ee={key:1},ta={__name:"zatca",setup(Fe){const{t}=E(),q=F(),n=v({commonName:t("Common Name"),organizationName:t("Organization Name"),organizationUnitName:t("Organization Unit Name"),countryName:t("Country Name"),deviceSerialNumber:t("Device Serial Number"),taxRegistrationNumber:t("Tax Registration Number (15 Digits)"),commercialRegistrationNumber:t("Commercial Registration Number"),invoiceType:t("Invoice Type"),businessIndustry:t("Business Industry"),addressStreetName:t("Street Name"),addressAdditionalStreetName:t("Additional Street Name"),addressBuildingNumber:t("Building Number"),addressCityName:t("City Name"),addressPostalZone:t("Postal Zone (5 Digit Number)"),addressCountrySubentity:t("Country Subentity"),addressCitySubdivisionName:t("Subdivision Name"),addressIdentificationCode:t("Identification Code"),otp:t("OTP"),emailAddress:t("Customer Email")}),e=M({...{server_messages:{type:"",messages:""},is_submitting:!1,commonName:"",organizationName:"",organizationUnitName:"",countryName:"",deviceSerialNumber:"",taxRegistrationNumber:"",commercialRegistrationNumber:"",invoiceType:"1100",businessIndustry:"",addressStreetName:"",addressAdditionalStreetName:"",addressBuildingNumber:"",addressCityName:"",addressPostalZone:"",addressCountrySubentity:"",addressCitySubdivisionName:"",addressIdentificationCode:"",otp:"",emailAddress:""}}),x=O({commonName:r().required(t("Common name is required",{name:t("Common name")})),organizationName:r().required(t("Organization name is required",{name:t("Organization name")})),organizationUnitName:r().required(t("Organization unit name is required",{name:t("Organization unit name")})),deviceSerialNumber:r().required(t("Device serial number is required",{name:t("Device serial number")})),commercialRegistrationNumber:r().required(t("Commercial registration number is required",{name:t("Commercial registration number")})),taxRegistrationNumber:r().required(t("Tax registration number is required",{name:t("Tax registration number")})),invoiceType:r().required(t("Invoice type is required",{name:t("Invoice type")})),businessIndustry:r().required(t("Business industry is required",{name:t("Business industry")})),addressStreetName:r().required(t("Street name is required",{name:t("Street Name")})),addressAdditionalStreetName:r().required(t("Additional Street name is required",{name:t("Additional Street Name")})),addressCountrySubentity:r().required(t("Country Subentity is required",{name:t("Country Subentity")})),addressBuildingNumber:r().required(t("Building number is required",{name:t("Building number")})),addressCityName:r().required(t("City name is required",{name:t("City name")})),addressPostalZone:r().required(t("Postal zone is required",{name:t("Postal zone")})),addressCitySubdivisionName:r().required(t("City subdivision name is required",{name:t("City subdivision name")})),otp:r().required(t("OTP is required",{name:t("OTP")})),emailAddress:r().required(t("Email address is required",{name:t("Email address")}))}),z=[{key:"0100",value:t("Simplified Invoices (B2C)")},{key:"1000",value:t("Standard Invoices (B2B)")},{key:"1100",value:t("Both Simplified & Standard Invoices")}];L(()=>{U(),q.path});const C=v(!1),g=v(!1),y=v("");async function U(){await axios.get("/api/v2/zatca/merchant").then(a=>{C.value=!0,(a.data.status_code==200||a.data.status_code==201)&&(e.commonName=a.data.data.commonName,e.organizationName=a.data.data.organizationName,e.organizationUnitName=a.data.data.organizationUnitName,e.countryName=a.data.data.countryName,e.deviceSerialNumber=a.data.data.deviceSerialNumber,e.taxRegistrationNumber=a.data.data.taxRegistrationNumber,e.commercialRegistrationNumber=a.data.data.commercialRegistrationNumber,e.invoiceType=a.data.data.invoiceType,e.businessIndustry=a.data.data.businessIndustry,e.addressStreetName=a.data.data.addressStreetName,e.addressAdditionalStreetName=a.data.data.addressAdditionalStreetName,e.addressBuildingNumber=a.data.data.addressBuildingNumber,e.addressCityName=a.data.data.addressCityName,e.addressPostalZone=a.data.data.addressPostalZone,e.addressCountrySubentity=a.data.data.addressCountrySubentity,e.addressCitySubdivisionName=a.data.data.addressCitySubdivisionName,e.addressIdentificationCode=a.data.data.addressIdentificationCode,e.otp=a.data.data.otp,e.emailAddress=a.data.data.emailAddress,y.value=a.data.data.slack,g.value=!0)}).catch(a=>{e.server_messages.type="error",e.server_messages.messages=a,console.log(a)})}async function I(){e.is_submitting=!0;var a=new FormData;a.append("commonName",e.commonName),a.append("organizationName",e.organizationName),a.append("organizationUnitName",e.organizationUnitName),a.append("countryName",e.countryName||""),a.append("deviceSerialNumber",e.deviceSerialNumber),a.append("taxRegistrationNumber",e.taxRegistrationNumber),a.append("commercialRegistrationNumber",e.commercialRegistrationNumber),a.append("invoiceType",e.invoiceType),a.append("businessIndustry",e.businessIndustry),a.append("addressStreetName",e.addressStreetName),a.append("addressAdditionalStreetName",e.addressAdditionalStreetName),a.append("addressBuildingNumber",e.addressBuildingNumber),a.append("addressCityName",e.addressCityName),a.append("addressPostalZone",e.addressPostalZone),a.append("addressCountrySubentity",e.addressCountrySubentity),a.append("addressCitySubdivisionName",e.addressCitySubdivisionName),a.append("addressIdentificationCode",e.addressIdentificationCode||""),a.append("otp",e.otp),a.append("emailAddress",e.emailAddress),a.append("slack",y.value);var s="/api/v2/zatca/merchant/register";await axios.post(s,a).then(u=>{u.data.status_code==200||u.data.status_code==201?(toast.success(u.data.msg),e.is_submitting=!1):(e.server_messages.type="error",e.server_messages.messages=u.data.data?u.data.data:u.data.msg,e.is_submitting=!1)}).catch(u=>{e.server_messages.type="error",e.server_messages.messages=u,e.is_submitting=!1,console.log(u)})}async function k(){var a=!1;if(await Swal.fire({title:t("This action cannot be undone?"),showCancelButton:!0,confirmButtonText:t("Delete"),confirmButtonColor:"#d33",cancelButtonText:t("Cancel")}).then(c=>{c.isConfirmed&&(a=!0)}),a){e.is_submitting=!0;var s=new FormData;s.append("slack",y.value);var u="/api/v2/zatca/merchant/delete";await axios.post(u,s).then(c=>{c.data.status_code==200||c.data.status_code==201?(toast.success(c.data.msg),e.is_submitting=!1):(e.server_messages.type="error",e.server_messages.messages=c.data.data?c.data.data:c.data.msg,e.is_submitting=!1)}).catch(c=>{e.server_messages.type="error",e.server_messages.messages=c,e.is_submitting=!1,console.log(c)})}}return(a,s)=>{const u=V("Icon"),c=V("router-link"),A=$,B=Z,T=P,R=w;return m(),N(R,null,{subheader:_(()=>[i("div",H,[i("div",G,[i("div",J,[i("div",K,[o(c,{class:"text-primary",to:"/settings"},{default:_(()=>[o(u,{icon:"fa6-solid:chevron-left"}),j(" "+p(a.$t("Settings")),1)]),_:1})])]),i("div",Q,[i("h5",W,p(a.$t("Zatca Settings")),1)]),g.value?(m(),b("div",X,[i("button",{onClick:s[0]||(s[0]=d=>k(y.value)),class:"btn btn-light btn-text-danger ms-2 btn-xs",disabled:e.is_submitting},[e.is_submitting?(m(),b("span",ee,[o(f,{color:"white",size:"20px",class:"pt-2 pe-2"}),i("span",ae,p(a.$t("Deleting...")),1)])):(m(),b("span",te,p(a.$t("Delete Company")),1))],8,Y)])):S("",!0)])])]),default:_(()=>[i("div",se,[C.value?(m(),N(h(D),{key:0,"validation-schema":h(x),"initial-values":e,onSubmit:I,enctype:"multipart/form-data",id:"add_customer_form"},{default:_(()=>[i("div",ie,[e.server_messages.messages!=""?(m(),b("div",de,[o(A,{server_messages:e.server_messages},null,8,["server_messages"])])):S("",!0),i("div",oe,[i("div",ne,[i("div",le,[i("div",re,[i("div",me,[i("div",ue,[o(l,{type:"text",name:"commonName",modelValue:e.commonName,"onUpdate:modelValue":s[1]||(s[1]=d=>e.commonName=d),label:n.value.commonName,required:!0,tooltip:"The common name of the company"},null,8,["modelValue","label"])]),i("div",ce,[o(l,{type:"text",name:"organizationName",modelValue:e.organizationName,"onUpdate:modelValue":s[2]||(s[2]=d=>e.organizationName=d),label:n.value.organizationName,required:!0,tooltip:"The company name."},null,8,["modelValue","label"])]),i("div",be,[o(l,{type:"text",name:"organizationUnitName",modelValue:e.organizationUnitName,"onUpdate:modelValue":s[3]||(s[3]=d=>e.organizationUnitName=d),label:n.value.organizationUnitName,required:!0},null,8,["modelValue","label"])]),i("div",pe,[o(l,{type:"text",name:"countryName",modelValue:e.countryName,"onUpdate:modelValue":s[4]||(s[4]=d=>e.countryName=d),label:n.value.countryName},null,8,["modelValue","label"])]),i("div",ge,[o(l,{type:"text",name:"deviceSerialNumber",modelValue:e.deviceSerialNumber,"onUpdate:modelValue":s[5]||(s[5]=d=>e.deviceSerialNumber=d),label:n.value.deviceSerialNumber,required:!0},null,8,["modelValue","label"])]),i("div",ye,[o(l,{type:"text",name:"taxRegistrationNumber",modelValue:e.taxRegistrationNumber,"onUpdate:modelValue":s[6]||(s[6]=d=>e.taxRegistrationNumber=d),label:n.value.taxRegistrationNumber,required:!0},null,8,["modelValue","label"])]),i("div",ve,[o(l,{type:"text",name:"commercialRegistrationNumber",modelValue:e.commercialRegistrationNumber,"onUpdate:modelValue":s[7]||(s[7]=d=>e.commercialRegistrationNumber=d),label:n.value.commercialRegistrationNumber,required:!0},null,8,["modelValue","label"])]),i("div",Ne,[o(B,{name:"invoiceType",label:n.value.invoiceType,modelValue:e.invoiceType,"onUpdate:modelValue":s[8]||(s[8]=d=>e.invoiceType=d),options:z,required:""},null,8,["label","modelValue"])]),i("div",_e,[o(l,{type:"text",name:"businessIndustry",modelValue:e.businessIndustry,"onUpdate:modelValue":s[9]||(s[9]=d=>e.businessIndustry=d),label:n.value.businessIndustry,required:!0,tooltip:"The business industry such as (Technology, Healthcare, Retail)."},null,8,["modelValue","label"])]),i("div",Se,[o(l,{type:"text",name:"otp",modelValue:e.otp,"onUpdate:modelValue":s[10]||(s[10]=d=>e.otp=d),label:n.value.otp,required:!0,tooltip:"The one-time password of ZATCA Portal that is given from the owner to start sign the invoices."},null,8,["modelValue","label"])]),i("div",Ce,[o(l,{type:"text",name:"emailAddress",modelValue:e.emailAddress,"onUpdate:modelValue":s[11]||(s[11]=d=>e.emailAddress=d),label:n.value.emailAddress,required:!0},null,8,["modelValue","label"])])])])]),i("div",fe,[i("div",Ve,[i("h5",he,p(a.$t("Address")),1),i("div",qe,[i("div",xe,[o(l,{type:"text",name:"addressStreetName",modelValue:e.addressStreetName,"onUpdate:modelValue":s[12]||(s[12]=d=>e.addressStreetName=d),label:n.value.addressStreetName,required:!0},null,8,["modelValue","label"])]),i("div",ze,[o(l,{type:"text",name:"addressAdditionalStreetName",modelValue:e.addressAdditionalStreetName,"onUpdate:modelValue":s[13]||(s[13]=d=>e.addressAdditionalStreetName=d),label:n.value.addressAdditionalStreetName,required:!0},null,8,["modelValue","label"])]),i("div",Ue,[o(l,{type:"text",name:"addressBuildingNumber",modelValue:e.addressBuildingNumber,"onUpdate:modelValue":s[14]||(s[14]=d=>e.addressBuildingNumber=d),label:n.value.addressBuildingNumber,required:!0},null,8,["modelValue","label"])]),i("div",Ie,[o(l,{type:"text",name:"addressCityName",modelValue:e.addressCityName,"onUpdate:modelValue":s[15]||(s[15]=d=>e.addressCityName=d),label:n.value.addressCityName,required:!0},null,8,["modelValue","label"])]),i("div",ke,[o(l,{type:"text",name:"addressPostalZone",modelValue:e.addressPostalZone,"onUpdate:modelValue":s[16]||(s[16]=d=>e.addressPostalZone=d),label:n.value.addressPostalZone,required:!0},null,8,["modelValue","label"])]),i("div",Ae,[o(l,{type:"text",name:"addressCountrySubentity",modelValue:e.addressCountrySubentity,"onUpdate:modelValue":s[17]||(s[17]=d=>e.addressCountrySubentity=d),label:n.value.addressCountrySubentity,required:!0},null,8,["modelValue","label"])]),i("div",Be,[o(l,{type:"text",name:"addressCitySubdivisionName",modelValue:e.addressCitySubdivisionName,"onUpdate:modelValue":s[18]||(s[18]=d=>e.addressCitySubdivisionName=d),label:n.value.addressCitySubdivisionName,required:!0,tooltip:"The city subdivision name such as (Naseem, Azizia)."},null,8,["modelValue","label"])]),i("div",Te,[o(l,{type:"text",name:"addressIdentificationCode",modelValue:e.addressIdentificationCode,"onUpdate:modelValue":s[19]||(s[19]=d=>e.addressIdentificationCode=d),label:n.value.addressIdentificationCode,tooltip:"The identification code of the country. By default it's 'SA' "},null,8,["modelValue","label"])])])])])])])]),i("div",Re,[i("button",we,[e.is_submitting?(m(),N(f,{key:0,color:"white",size:"20px",class:"pt-2 pe-2",disabled:e.is_submitting},null,8,["disabled"])):S("",!0),e.is_submitting?(m(),b("span",Pe,[g.value?(m(),b("span",Ze,p(a.$t("Updating...")),1)):(m(),b("span",$e,p(a.$t("Registering...")),1))])):(m(),b("span",De,[g.value?(m(),b("span",Oe,p(a.$t("Update")),1)):(m(),b("span",Ee,p(a.$t("Register")),1))]))])])]),_:1},8,["validation-schema","initial-values"])):(m(),N(T,{key:1}))])]),_:1})}}};export{ta as default};
