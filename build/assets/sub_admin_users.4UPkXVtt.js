import{_ as T}from"./ActionButtonGroup.qGH_Fqs8.js";import{_ as J}from"./ListingSkeleton.upY030ro.js";import{u as E,b as G,r as c,e as $,o as K,v as R,g as i,p as h,w as S,f as B,i as t,t as o,h as p,k as m,n as Y,l as f,K as D,N as H,j as x,y as Q,L as W,F as X,x as Z,O as tt}from"./index.GdMxdeuf.js";import{_ as et}from"./DefaultLayout.qd3nRBiq.js";import{_ as st}from"./PaginateLimit.H-orl6zP.js";import{j as ot}from"./vue-datepicker.iEAbZR0K.js";import"./ClipLoader.UcGuNCxH.js";/* empty css                                                   */const at={class:"header-nav-wrap"},nt={class:"row align-items-center"},it={class:"col-auto"},lt={class:"fw-bold"},ct={class:"content"},dt={class:"page-heading"},rt={class:"row align-items-center justify-content-between"},_t={class:"col-auto"},ut={class:"row align-items-center"},mt={key:0,class:"col-auto"},ht={class:"col-auto"},pt={class:"row align-items-center"},ft={class:"col-auto"},gt={class:"form-field page-heading-search-field mb-0"},vt={class:"field-icon"},bt=["placeholder"],yt={class:"icon"},wt={class:"col-auto"},kt={class:"dropdown filter-dropdown"},Ct={class:"row gx-3"},$t={class:"col-12"},St={class:"form-field"},xt={class:"form-label"},At={class:"row gx-3"},Nt={class:"col-6"},Bt={class:"form-field"},Dt={class:"form-label"},Vt={value:""},Ft={value:"1"},Mt={value:"0"},jt={class:"row py-3"},qt={class:"col-12 text-end"},zt={key:1,class:"table-responsive"},Lt={class:"table table-list-data table-hover"},Ot={class:"bg-light"},Ut={scope:"col",width:"15%"},It={scope:"col",width:"10%"},Pt={scope:"col",width:"10%"},Tt={scope:"col",width:"10%"},Jt={scope:"col",width:"10%"},Et={scope:"col",width:"10%"},Gt={scope:"col",class:"text-end",width:"5%"},Kt=["onClick"],Rt={class:"fw-bold highlighted-list-item"},Yt=["onClick"],Ht=["onClick"],Qt={class:"badge p-2 bg-secondary"},Wt=["onClick"],Xt=["onClick"],Zt=["onClick"],te={class:"text-end"},ee={key:1},se={class:"text-center py-3",colspan:"11"},oe={class:"data-footer"},ae={class:"row align-items-center justify-content-between"},ne={class:"col-auto"},ie={class:"col-auto"},ge={__name:"sub_admin_users",setup(le){const{t:v}=E();G(),c(!1);const V={server_messages:{type:"",messages:""},is_listing:!1,search_query:c("")},F=v("Search by name, email, phone.."),a=$({...V});K(()=>{d()}),R(()=>a.search_query,_.debounce(()=>{d()},500));const y=c([]),w=c([]);async function d(e=1){a.is_listing=!0,await axios.get("/api/sub_admins",{params:{page:e,paginate_limit:A.value,search_query:a.search_query,filter:r}}).then(n=>{y.value=n.data.data,w.value=n.data.pagination,a.is_listing=!1}).catch(n=>{a.server_messages.type="error",a.server_messages.messages=n,a.is_listing=!1,console.log(n)})}const A=c();async function M(e){A.value=e,await d()}const b=c(!1),k=$({created_date:c(),status:c(""),type:c("")}),r=$({...k}),C=c(!1);async function j(){JSON.stringify(r)!=JSON.stringify(k)&&(C.value=!0),b.value=!1,await d()}async function q(){b.value=!b.value}function z(){Object.assign(r,k),C.value=!1,d()}function ce(e){}function L(e){router.push("/admin/user/edit/"+e)}async function O(e){var n=!1;await Swal.fire({title:v("Do you want to delete this Sub Admin?"),showCancelButton:!0,confirmButtonText:v("Yes, Delete"),confirmButtonColor:"#d33",cancelButtonText:v("Cancel")}).then(l=>{l.isConfirmed&&(n=!0)}),n&&await axios.post("/api/sub_admin/delete",{slack:e}).then(l=>{if(l.data.status_code==200)Swal.fire(l.data.msg),d();else try{a.server_messages.type="error",a.server_messages.messages=JSON.parse(l.data.msg)}catch{a.server_messages.type="error",a.server_messages.messages=l.data.msg}}).catch(l=>{a.server_messages.type="error",a.server_messages.messages=l,console.log(l)})}const N=c({write:!0,delete:!0});return(e,n)=>{const l=B("router-link"),u=B("Icon"),U=J,I=T;return i(),h(et,null,{subheader:S(()=>[t("div",at,[t("div",nt,[t("div",it,[t("h5",lt,o(e.$t("Sub Admins")),1)])])])]),default:S(()=>[t("div",ct,[t("div",dt,[t("div",rt,[t("div",_t,[t("div",ut,[N.value.write?(i(),p("div",mt,[m(l,{class:"btn btn-sm btn-light-primary",to:"/admin/user/add"},{default:S(()=>[Y("+ "+o(e.$t("New Sub Admin")),1)]),_:1})])):f("",!0)])]),t("div",ht,[t("div",pt,[t("div",ft,[t("div",gt,[t("div",vt,[D(t("input",{type:"search",class:"form-control form-control-sm form-control-shadow",placeholder:x(F),"onUpdate:modelValue":n[0]||(n[0]=s=>a.search_query=s)},null,8,bt),[[H,a.search_query]]),t("div",yt,[m(u,{icon:"fa6-solid:magnifying-glass"})])])])]),t("div",wt,[t("div",kt,[t("button",{type:"button",class:"btn btn-sm btn-icon btn-light-primary","data-bs-auto-close":"outside",onClick:q},[m(u,{icon:"fa6-solid:filter"})]),t("div",{class:Q([b.value?"show":"","dropdown-menu p-3 w-365"]),id:"filter_box",style:{position:"absolute",inset:"0px auto auto 0px",margin:"0px",transform:"translate3d(-310px, 36px, 0px)"}},[t("form",null,[t("div",Ct,[t("div",$t,[t("div",St,[t("label",xt,o(e.$t("Created Date")),1),m(x(ot),{range:"",modelValue:r.created_date,"onUpdate:modelValue":n[1]||(n[1]=s=>r.created_date=s),format:"dd-MM-yyyy","enable-time-picker":!1},null,8,["modelValue"])])])]),t("div",At,[t("div",Nt,[t("div",Bt,[t("label",Dt,o(e.$t("Status")),1),D(t("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":n[2]||(n[2]=s=>r.status=s)},[t("option",Vt,o(e.$t("All")),1),t("option",Ft,o(e.$t("Active")),1),t("option",Mt,o(e.$t("Inactive")),1)],512),[[W,r.status]])])])]),t("button",{type:"button",onClick:j,class:"btn btn-sm btn-primary w-100"},o(e.$t("Filter")),1)])],2)])])])])]),t("div",jt,[t("div",qt,[C.value?(i(),p("button",{key:0,class:"badge badge-danger btn-sm",onClick:z},o(e.$t("Clear Filters")),1)):f("",!0)])])]),a.is_listing?(i(),h(U,{key:0})):(i(),p("div",zt,[t("table",Lt,[t("thead",Ot,[t("tr",null,[t("th",Ut,o(e.$t("Sub Admin Name")),1),t("th",It,o(e.$t("Phone")),1),t("th",Pt,o(e.$t("Role")),1),t("th",Tt,o(e.$t("Multi-Device Login")),1),t("th",Jt,o(e.$t("Allow Adding Merchants")),1),t("th",Et,o(e.$t("Created At")),1),t("th",Gt,o(e.$t("Action")),1)])]),t("tbody",null,[y.value!=""?(i(!0),p(X,{key:0},Z(y.value,(s,P)=>(i(),p("tr",{key:P},[t("td",{onClick:g=>(s.slack,void 0),role:"button"},[t("span",Rt,o(s.name),1)],8,Kt),t("td",{onClick:g=>(s.slack,void 0),role:"button"},o(s.phone),9,Yt),t("td",{onClick:g=>(s.slack,void 0),role:"button"},[t("span",Qt,o(s.role.name),1)],8,Ht),t("td",{onClick:g=>(s.slack,void 0),role:"button"},[s.multi_session_login?(i(),h(u,{key:0,style:{fontSize:"20px"},class:"text-success",icon:"material-symbols:check"})):f("",!0),s.multi_session_login?f("",!0):(i(),h(u,{key:1,style:{fontSize:"20px"},class:"text-danger",icon:"material-symbols:close"}))],8,Wt),t("td",{onClick:g=>(s.slack,void 0),role:"button"},[s.allow_adding_merchants?(i(),h(u,{key:0,style:{fontSize:"20px"},class:"text-success",icon:"material-symbols:check"})):f("",!0),s.allow_adding_merchants?f("",!0):(i(),h(u,{key:1,style:{fontSize:"20px"},class:"text-danger",icon:"material-symbols:close"}))],8,Xt),t("td",{onClick:g=>(s.slack,void 0),role:"button"},o(s.created_at_label),9,Zt),t("td",te,[m(I,{permissions:N.value,onEdit:L,onDelete:O,slack:s.slack},null,8,["permissions","slack"])])]))),128)):(i(),p("tr",ee,[t("td",se,o(e.$t("No Data Found")),1)]))])])])),t("div",oe,[t("div",ae,[t("div",ne,[m(st,{onPaginate_limit_update:M,pagination:w.value},null,8,["pagination"])]),t("div",ie,[m(x(tt),{data:w.value,limit:5,onPaginationChangePage:d},null,8,["data"])])])])])]),_:1})}}};export{ge as default};
