import{bS as C,b as M,e as x,d as v,o as N,r as A,f as V,g as o,p,i as t,t as l,j as a,h as d,k as c,m as _,F as D,x as E,l as b,ae as B,q as f,_ as y}from"./index.li3fCRRM.js";const L={class:"modal fade",id:"terminalModal",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"},O={class:"modal-dialog modal-dialog-centered modal-w-1260 modal-xl"},R={class:"modal-content"},P={class:"modal-header modal-title border-0"},F={class:"mb-0"},j={class:"modal-body pt-0"},q={class:"tarminals-wrap"},J={key:0,class:"tarminals-items-wrap","data-simplebar":""},z={key:0,class:"badge badge-light"},G={class:"row gx-0 flex-nowrap"},H=["onClick"],K=["data-terminal-status"],Q={key:0},U={class:"text-success"},W={key:1},X=t("br",null,null,-1),Y={key:2,class:"text-success badge badge-success"},Z={key:1,class:"text-danger"},ae={__name:"SelectTerminal",setup(ee){const k=C(),u=M(),g=x({type:"",messages:""}),w=v(()=>u.loggedInTerminal?u.loggedInTerminal.active_business_register:"");N(()=>{if(localStorage.getItem("auth")&&localStorage.getItem("timings")){var e=JSON.parse(localStorage.getItem("timings"));let r=new Date().getDay(),s="";e.find(i=>i.weekday===r)&&e[e.findIndex(i=>i.weekday===r)].is_allday_running==!1&&(s=e[e.findIndex(i=>i.weekday===r)]),s!=""&&s.shifts!=""&&s.shifts!=null||w.value==""&&$("#terminalModal").modal("show")}});const h=A("");async function S(e){e.registered_device_id==null?(h.value=e,$("#terminalModal").modal("hide"),$("#openRegisterModal").modal("show")):toast.warning("Terminal is already linked to a device "+e.registered_device_id)}const n=v(()=>k.all_terminals),T=f(()=>y(()=>import("./ServerMessage.Re9KOdbP.js"),__vite__mapDeps([0,1,2]))),I=f(()=>y(()=>import("./OpenRegister.ng9paS5Z.js"),__vite__mapDeps([3,4,5,1,2,6,7])));return(e,m)=>{const r=V("Icon");return o(),p(B,{to:"body"},[t("div",L,[t("div",O,[t("div",R,[t("div",P,[t("h2",F,l(e.$t("Terminals")),1),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:m[0]||(m[0]=(...s)=>e.closeModal&&e.closeModal(...s)),id:"close_btn"})]),t("div",j,[t("div",q,[a(n)&&a(n)&&a(n).length>0?(o(),d("div",J,[t("h2",null,[c(l(e.$t("Terminals"))+" ",1),a(n)?(o(),d("span",z,l(a(n).length),1)):_("",!0)]),t("div",G,[(o(!0),d(D,null,E(a(n),(s,i)=>(o(),d("div",{class:"col-auto",onClick:se=>S(s)},[t("div",{class:"terminal_box","data-terminal-status":[s.registered_device_id!=null?"linked":"assigned"]},[t("h3",null,l(s.terminal_name),1),s.last_logged_out_at_formatted?(o(),d("p",Q,[t("b",U,l(e.$t("Closed at")),1),c(" "+l(s.last_logged_out_at_formatted),1)])):_("",!0),s.registered_device_id!=null?(o(),d("p",W,[c(l(e.$t("Linked with"))+" ",1),X,c(),b(r,{icon:"mdi:tablet-ipad"}),c(" "+l(s.registered_device_id),1)])):_("",!0),s.last_logged_in_at_formatted==null?(o(),d("p",Y,l(e.$t("New Terminal")),1)):_("",!0)],8,K)],8,H))),256))])])):(o(),d("div",Z,[t("h5",null,l(e.$t("No active terminals found")),1)]))])])])])]),a(g).messages!=""?(o(),p(a(T),{key:0,server_messages:a(g)},null,8,["server_messages"])):_("",!0),b(a(I),{terminal:a(h)},null,8,["terminal"])])}}};export{ae as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ServerMessage.Re9KOdbP.js","assets/index.li3fCRRM.js","assets/index.KTHCd6a8.css","assets/OpenRegister.ng9paS5Z.js","assets/VTextInput.pcaNaUkX.js","assets/VTooltip.pHzwBjkF.js","assets/vee-validate.esm.reM-LHjC.js","assets/index.esm.e6McCFlz.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
