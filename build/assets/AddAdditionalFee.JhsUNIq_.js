import{u as U,r as v,e as D,b as E,P as M,v as p,g as i,h as n,i as s,t as u,l as m,w as I,k as f,F as O,j as r,x as T,p as k,m as A,q as j,_ as L}from"./index.li3fCRRM.js";import{a as F,F as R}from"./vee-validate.esm.reM-LHjC.js";import{c as z,a as V,e as J}from"./index.esm.e6McCFlz.js";import{_ as y}from"./VTextInput.pcaNaUkX.js";import{C as G}from"./ClipLoader.gDBpDd3b.js";import"./VTooltip.pHzwBjkF.js";/* empty css                                                   */const H={class:"modal modal-lg hide",id:"addAdditionalFeeModal",tabindex:"-1","aria-labelledby":"Add Additional Fee","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},K={class:"modal-dialog modal-dialog-centered"},Q={class:"modal-content"},W={class:"modal-header"},X={key:0,class:"modal-title"},Y={key:1,class:"modal-title"},Z={class:"modal-body"},ee={class:"row"},ae={class:"col-6"},se={class:"col-6"},te={class:"col-6"},le={class:"form-field"},de={for:"",class:"pb-3"},oe=s("em",null,"*",-1),ie=s("br",null,null,-1),ne={class:"col-6"},ue={class:"col-md-3"},me={class:"form-field"},re={class:"form-check form-switch form-switch-2 pt-4"},ce={class:"mt-2 text-end"},ve=["disabled"],_e={key:1,class:"pt-0"},pe={key:2,class:"pt-0"},Fe={__name:"AddAdditionalFee",props:{show_add_additional_fee_modal:Boolean,edit_data:{type:[Array,Object]}},emits:["closeAddAdditionalFeeModal"],setup(w,{emit:N}){const{t:l}=U(),$=j(()=>L(()=>import("./ServerMessage.Re9KOdbP.js"),__vite__mapDeps([0,1,2]))),q=v([{id:1,name:"Percentage"},{id:2,name:"Fix Amount"}]),b=v({name:l("Discount Name"),name_ar:l("Discount Name (Arabic)"),additional_fees_percentage:l("Fees Percentage"),additional_fees_amount:l("Fees Amount"),fee_type:l("Product Fee Type"),fee_value:l("Product Fee Value")}),o=D({type:"",messages:""}),e=v({is_saving:!1,is_listing:!1,slack:"",name:"",name_ar:"",type:1,value:"",status:!0});E();const x=z({name:V().required(l("name is required",{name:l("Additional Fee Name")})).min(3,l("name must be at least n characters",{name:l("Additional Fee Name"),number:3})),status:J().label("status"),value:V().required(l("fee value is required",{name:l("Fee value is required")}))}),B=N,h=w;M(h,"edit_data");function g(){document.getElementById("frmAdditionalFee").reset(),P(),document.getElementById("close_btn").click(),B("closeAddAdditionalFeeModal")}p(()=>e.value.type,a=>{e.value.type==1&&e.value.value>100&&(e.value.value=100)}),p(()=>e.value.value,a=>{e.value.type==1&&e.value.value>100?e.value.value=100:e.value.value=a}),p(()=>h.edit_data,a=>{a&&(e.value.name=a.name,e.value.name_ar=a.name_ar!=null?a.name_ar:"",e.value.status=a.status==1,e.value.type=a.type,e.value.value=a.value,e.value.slack=a.slack)});async function C(){e.value.is_saving=!0;var a=new FormData;a.append("slack",e.value.slack),a.append("name",e.value.name),a.append("name_ar",_.isUndefined(e.value.name_ar)?"":e.value.name_ar),a.append("status",e.value.status),a.append("type",e.value.type),a.append("value",e.value.value);var d=e.value.slack!=""&&e.value.slack!=null?"/api/additional_fee/update":"/api/additional_fee/save";await axios.post(d,a).then(t=>{if(t.data.status_code==200)toast.success(t.data.msg),o.type="",o.messages="",e.value.is_saving=!1,g();else{try{o.type="error",o.messages=JSON.parse(t.data.msg)}catch{o.type="error",o.messages=t.data.msg}e.value.is_saving=!1}}).catch(t=>{o.type="error",o.messages=t,e.value.is_saving=!1,console.log(t)})}function P(){Object.assign(e,e)}return(a,d)=>(i(),n("div",H,[s("div",K,[s("div",Q,[s("div",W,[e.value.slack==""||e.value.slack==null?(i(),n("h5",X,u(a.$t("Add Additional Fee")),1)):(i(),n("h5",Y,u(a.$t("Update Additional Fee")),1)),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:g,id:"close_btn"})]),s("div",Z,[m(r(R),{"validation-schema":r(x),onSubmit:C,enctype:"multipart/form-data","initial-values":e.value,id:"frmAdditionalFee"},{default:I(()=>[s("div",ee,[s("div",ae,[m(y,{type:"text",name:"name",modelValue:e.value.name,"onUpdate:modelValue":d[0]||(d[0]=t=>e.value.name=t),label:"Additional Fee Name",required:!0},null,8,["modelValue"])]),s("div",se,[m(y,{type:"text",name:"name_ar",modelValue:e.value.name_ar,"onUpdate:modelValue":d[1]||(d[1]=t=>e.value.name_ar=t),label:"Additional Fee Name (Arabic)"},null,8,["modelValue"])]),s("div",te,[s("div",le,[s("label",de,[f(u(a.$t("Type")),1),oe]),ie,(i(!0),n(O,null,T(q.value,(t,c)=>(i(),n("label",{class:"label",key:c},[m(r(F),{class:"form-check-input mx-2",name:"type",type:"radio",id:c,modelValue:e.value.type,"onUpdate:modelValue":d[2]||(d[2]=S=>e.value.type=S),value:t.id},null,8,["id","modelValue","value"]),f(" "+u(t.name),1)]))),128))])]),s("div",ne,[m(y,{type:"text",name:"value",label:e.value.type==1?b.value.additional_fees_percentage:b.value.additional_fees_amount,required:!0,modelValue:e.value.value,"onUpdate:modelValue":d[3]||(d[3]=t=>e.value.value=t)},null,8,["label","modelValue"])]),s("div",ue,[s("div",me,[s("div",re,[m(r(F),{class:"form-check-input me-2",type:"checkbox",role:"switch",name:"status",id:"status","unchecked-value":!1,value:!0,modelValue:e.value.status,"onUpdate:modelValue":d[4]||(d[4]=t=>e.value.status=t)},null,8,["modelValue"]),f(" "+u(a.$t("Active")),1)])])])]),o.messages!=""?(i(),k(r($),{key:0,class:"py-3",server_messages:o},null,8,["server_messages"])):A("",!0),s("div",ce,[s("button",{type:"submit",class:"btn btn-primary",disabled:e.value.is_saving},[e.value.is_saving?(i(),k(G,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):A("",!0),e.value.is_saving?(i(),n("span",_e,u(a.$t("Saving...")),1)):(i(),n("span",pe,u(a.$t("Save")),1))],8,ve)])]),_:1},8,["validation-schema","initial-values"])])])])]))}};export{Fe as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ServerMessage.Re9KOdbP.js","assets/index.li3fCRRM.js","assets/index.KTHCd6a8.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
