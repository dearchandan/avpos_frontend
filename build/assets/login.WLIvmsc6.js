import{_ as T}from"./SimpleLayout.AZDc_bTg.js";import{u as z,a as j,b as L,c as U,d as y,r as m,o as G,e as J,f as Y,g as d,h,i as e,j as s,t as i,k as c,l as V,w as f,m as k,n as q,p as C,F as H,q as K,_ as Q}from"./index.GdMxdeuf.js";import{_ as W}from"./VTextInput.ZgtOiOMJ.js";import X from"./ServerMessage.Wf7puwQc.js";import{F as Z}from"./vee-validate.esm.9aElOHQY.js";import{c as ee,a as N}from"./index.esm.0vhAmrVd.js";import{C as se}from"./ClipLoader.UcGuNCxH.js";import{u as ae}from"./subscriptionStore._pP7KP5N.js";import{l as te,a as oe}from"./login-shape-2.k7GEnLK2.js";import"./VTooltip.Ewb958d6.js";/* empty css                                                   */const re={class:"login-page"},ne={class:"login-shape-1"},le=["src"],ie={class:"login-shape-2"},ce=["src"],ue={class:"row g-0"},me={class:"col-lg-4 offset-4"},de={class:"login-page-wrap"},_e={class:"card login-card"},pe={class:"row align-items-center justify-content-between mb-3 mb-md-5"},ge={class:"col-auto"},he={class:"login-logo"},fe={href:"#"},ve=["src"],be={class:"text-primary"},ye={key:0},we={class:"text-end"},Se=["disabled"],Ie={key:1,class:"pt-0"},Ve={key:2,class:"pt-0"},$e={class:"pt-4 text-center login-link-text"},ke={class:"copyright-text text-center"},qe={__name:"SignIn",setup(F){const{t}=z(),g=j(),a=L(),w=U(),E=ae(),P=y(()=>w.logo),R=y(()=>w.display_name),x=m("en"),A=y(()=>E.cart_subscription_id);G(()=>{a.reset(),x.value=localStorage.getItem("language"),g.query.message!=null&&g.params!=""&&(o.type="success",o.messages=g.query.message)});const o=J({type:"",messages:""}),u=m(!1),O=ee({email:N().required(t("name is required",{name:t("merchant email")})).email(t("must be a valid email",{name:t("merchant email")})),password:N().required(t("name is required",{name:t("password")})).min(8,t("name must be at least n characters",{name:t("password"),number:8}))}),_=m(""),p=m(""),B=m(!1),S=m("");async function D(n=!1){try{u.value=!0;var l=new FormData;l.append("email",_.value),l.append("password",p.value),l.append("language",localStorage.getItem("language")),a.resetState();let r=await a.login(l);if(u.value=!1,r.status_code==201)B.value=!0,S.value=r.msg,$("#forceSignInModal").modal("show");else if(r.status_code==200)o.type="success",o.messages=r.msg,a.user.user_type!=1&&a.user.user_type!=4?a.open_branch_change_modal?location.href="/dashboard":A.value>0||a.user.merchant.user_subscription!=null&&a.user.user_type==2&&a.user.merchant.user_subscription.status==3||a.user.merchant.user_subscription==null&&a.user.user_type==2?location.href="/subscriptions":a.user.login_branch.default_view=="INVENTORY"?location.href="/products":a.user.login_branch.default_view=="POS"?location.href="/cashier":a.user.login_branch.default_view=="INVOICING"?location.href="/invoices":location.href="/dashboard":(a.user.user_type==1||a.user.user_type==4)&&(location.href="/admin/dashboard");else try{o.type="error",o.messages=JSON.parse(r.msg)}catch{o.type="error",o.messages=r.msg}}catch(r){o.type="error",o.messages=r,u.value=!1,console.log(r)}}const M=K(()=>Q(()=>import("./ForceSignInModal.6ZnE8cfG.js"),__vite__mapDeps([0,1,2,3,4])));return(n,l)=>{const r=X,v=W,I=Y("router-link");return d(),h(H,null,[e("div",re,[e("div",ne,[e("img",{src:s(te),alt:""},null,8,le)]),e("div",ie,[e("img",{src:s(oe),alt:""},null,8,ce)]),e("div",ue,[e("div",me,[e("div",de,[e("div",_e,[e("div",pe,[e("div",ge,[e("div",he,[e("a",fe,[e("img",{src:s(P),alt:""},null,8,ve)])])])]),e("h3",be,i(n.$t("Sign In to your account")),1),s(o).messages!=""?(d(),h("div",ye,[c(r,{server_messages:s(o)},null,8,["server_messages"])])):V("",!0),c(s(Z),{"validation-schema":s(O),onSubmit:D},{default:f(()=>[c(v,{type:"email",name:"email",modelValue:s(_),"onUpdate:modelValue":l[0]||(l[0]=b=>k(_)?_.value=b:null),label:s(t)("Email"),placeholder:s(t)("Email"),required:"",size:"large"},null,8,["modelValue","label","placeholder"]),c(v,{type:"password",name:"password",modelValue:s(p),"onUpdate:modelValue":l[1]||(l[1]=b=>k(p)?p.value=b:null),label:s(t)("Password"),placeholder:s(t)("Password"),required:"",size:"large"},null,8,["modelValue","label","placeholder"]),e("div",we,[c(I,{to:"/forgot_password"},{default:f(()=>[q(i(n.$t("Forgot Password?")),1)]),_:1})]),e("button",{type:"submit",class:"btn btn-primary w-100 btn-lg mt-3",disabled:s(u)},[s(u)?(d(),C(se,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):V("",!0),s(u)?(d(),h("span",Ie,i(n.$t("Signing In...")),1)):(d(),h("span",Ve,i(n.$t("Sign In")),1))],8,Se)]),_:1},8,["validation-schema"]),e("p",$e,[q(i(n.$t("Don’t have an account?"))+" ",1),c(I,{to:"/register"},{default:f(()=>[e("b",null,i(n.$t("Sign up for free")),1)]),_:1})])])])])]),e("div",ke,[e("p",null,"© "+i(n.$t("Copyright"))+" 2025. "+i(s(R))+" "+i(n.$t("All Rights Reserved.")),1)])]),c(s(M),{msg:s(S),email:s(_),password:s(p)},null,8,["msg","email","password"])],64)}}},Me={__name:"login",setup(F){var t=localStorage.getItem("language");return localStorage.clear(),localStorage.setItem("language",t),(g,a)=>(d(),C(T,null,{default:f(()=>[c(qe)]),_:1}))}};export{Me as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ForceSignInModal.6ZnE8cfG.js","assets/index.GdMxdeuf.js","assets/index.1t-AB2n6.css","assets/subscriptionStore._pP7KP5N.js","assets/ClipLoader.7xz7y6gZ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
