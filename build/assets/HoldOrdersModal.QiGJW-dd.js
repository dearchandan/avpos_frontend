import{u as F,bR as M,b as x,d as y,r as j,v as T,f as V,g as o,p as A,i as s,t as a,j as l,h as n,K as D,N as H,m as I,F as k,x as v,n as c,k as b,l as d,ac as R}from"./index.GdMxdeuf.js";/* empty css                                                   */const L={class:"modal hide hold-order-modal cashier-layout-modal",id:"holdOrdersModal",tabindex:"5","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"},P={class:"modal-dialog modal-dialog-centered"},E={class:"modal-content"},J={class:"modal-header"},K={class:"modal-title"},U={class:"mb-0"},W=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Y={class:"modal-body"},Z={key:0,class:"text-danger"},q={key:1},z={class:"form-search-feild position-relative mb-2"},G=["placeholder"],Q=s("div",{class:"icon"},[s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("g",{opacity:"0.5"},[s("path",{d:"M6.77721 12.5582C9.96787 12.5582 12.5544 9.97031 12.5544 6.778C12.5544 3.58568 9.96787 0.997803 6.77721 0.997803C3.58654 0.997803 1 3.58568 1 6.778C1 9.97031 3.58654 12.5582 6.77721 12.5582Z",stroke:"#767F8F","stroke-width":"1.75071","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M15.0025 15.0021L11.0027 11.0005",stroke:"#767F8F","stroke-width":"1.75071","stroke-linecap":"round","stroke-linejoin":"round"})])])],-1),X={class:"modal-data-scorll","data-simplebar":""},ss={class:"hold-order-list"},es={class:"mb-4"},ts={class:"row justify-content-between order-top"},os={class:"col-auto"},as={class:"order-id"},ns={key:0,class:"text-success ps-3 fs-6"},ds={key:1,class:"text-primary ps-3 fs-6"},rs={class:"py-3"},ls={key:0},cs={class:"col-auto"},is={class:"fw-bold fs-6 text-primary"},_s={class:"row align-items-center justify-content-between order-bottom"},hs={class:"col-auto ps-0"},us={key:0,class:"py-2"},ps={key:0,class:"badge badge-danger fw-bold"},ms={key:1,class:"badge badge-warning fw-bold"},bs={key:2,class:"badge badge-success fw-bold"},gs={key:3,class:"badge badge-muted fw-bold"},ys={key:1},ks={class:"badge badge-danger"},vs={class:"col-auto pe-0"},fs={key:0,class:"btn-wrap"},ws=["onClick"],Cs=["onClick"],Ns={__name:"HoldOrdersModal",setup($s){const{t:g}=F(),u=M(),f=x(),w=y(()=>f.user.currency.symbol),p=y(()=>u.filtered_hold_orders),i=j(""),C=g("search by order number or reference number");T(()=>i.value,_.debounce(t=>{u.filterHoldOrders(t)},600));function O(t){u.editOrder(t),$("#holdOrdersModal").modal("hide")}function S(t){Swal.fire({title:"Warning!",icon:"warning",title:g("Are you sure about this?"),confirmButtonText:"Yes, Cancel",showCancelButton:!0}).then(async h=>{if(h.isConfirmed){var r=new FormData;r.append("order_slack",t),await axios.post("/api/v2/order/cancel",r).then(e=>{if(e.data.status_code==200)toast.success(e.data.msg),$("#holdOrdersModal").modal("hide");else try{server_messages.type="error",server_messages.messages=JSON.parse(e.data.msg)}catch{server_messages.type="error",server_messages.messages=e.data.msg}}).catch(e=>{server_messages.type="error",server_messages.messages=e,form.is_processing=!1,console.log(e)})}})}return(t,h)=>{const r=V("Icon");return o(),A(R,{to:"body"},[s("div",L,[s("div",P,[s("div",E,[s("div",J,[s("div",K,[s("h2",U,a(t.$t("Hold Orders"))+" ("+a(l(p).length)+") ",1)]),W]),s("div",Y,[l(p).length==0?(o(),n("div",Z,[s("h5",null,a(t.$t("No hold orders found")),1)])):(o(),n("div",q,[s("div",z,[D(s("input",{class:"form-control form-control-lg",type:"search",placeholder:l(C),"onUpdate:modelValue":h[0]||(h[0]=e=>I(i)?i.value=e:null)},null,8,G),[[H,l(i)]]),Q]),s("div",X,[s("ul",ss,[(o(!0),n(k,null,v(l(p),(e,N)=>(o(),n("li",es,[s("div",null,[s("div",ts,[s("div",os,[s("div",as,[s("h2",null,[c("Order #"+a(e.order_number)+" ",1),e.order_type==2?(o(),n("span",ns,[b(r,{icon:"streamline:food-kitchenware-fork-spoon-fork-spoon-food-dine-cook-utensils-eat-restaurant-dining"}),c(" "+a(t.$t("Dine In")),1)])):d("",!0),e.order_type==1?(o(),n("span",ds,[b(r,{icon:"ep:takeaway-box"}),c(" "+a(t.$t("Take Away")),1)])):d("",!0)])]),s("p",rs,[(o(!0),n(k,null,v(e.products,(m,B)=>(o(),n("span",null,[c(a(m.product_name)+" ",1),B+1!=e.products.length?(o(),n("span",ls,", ")):d("",!0)]))),256))])]),s("div",cs,[s("h6",is,a(e.total)+" "+a(l(w)),1)])]),s("div",_s,[s("div",hs,[e.order_status==4?(o(),n("span",us,[e.kitchen_status==0?(o(),n("span",ps,a(t.$t("Not Accepted")),1)):d("",!0),e.kitchen_status==1?(o(),n("span",ms,a(t.$t("Preparing")),1)):d("",!0),e.kitchen_status==2?(o(),n("span",bs,a(t.$t("Ready to Serve")),1)):d("",!0),e.kitchen_status==3?(o(),n("span",gs,a(t.$t("Served")),1)):d("",!0)])):(o(),n("span",ys,[s("span",ks,a(t.$t("On Hold")),1)]))]),s("div",vs,[e.order_status==3||e.order_status==4?(o(),n("div",fs,[s("a",{role:"button",class:"btn btn-link text-danger",onClick:m=>S(e.slack)},a(t.$t("Cancel")),9,ws),s("a",{role:"button",class:"btn btn-primary btn-sm",onClick:m=>O(e.slack)},[b(r,{icon:"material-symbols:payments"}),c(" "+a(t.$t("Open & Pay")),1)],8,Cs)])):d("",!0)])])])]))),256))])])]))])])])])])}}};export{Ns as default};
