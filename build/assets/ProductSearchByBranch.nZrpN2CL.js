import{u as B,e as C,v as N,r as q,f as w,g as o,p as x,w as j,y as P,j as p,i as t,N as A,K as F,k as h,h as l,F as V,t as i,l as d,x as I}from"./index.GdMxdeuf.js";import{F as $}from"./vee-validate.esm.9aElOHQY.js";import"./index.esm.0vhAmrVd.js";import{B as z}from"./BeatLoader.czpWuXPY.js";/* empty css                                                   *//* empty css                                                   */const D={class:"row"},L={class:"field-icon mb-4"},E={class:"form-field position-relative mb-0"},K=["placeholder"],M={class:"icon"},R={key:0},T={key:1,class:""},U={key:0,class:"recent-search"},G=["onClick"],H={class:"wpr"},J={key:0,class:"pr"},O={key:0,class:"col-md-4"},Q={class:"pt-0"},oe={__name:"ProductSearchByBranch",props:{product_type:String,selected_products:{type:Array,default:[]},selected_branch_id:{type:Array,default:[]},placeholder:{type:String,default:"Search Product"},is_button:{type:Boolean,default:!1},button_placeholder:{type:String,default:"Add"},not_recipe:{type:Number,default:0},only_available:{type:Number,default:0},is_stocable_products:{type:Number,default:0},is_stock_adjustment:{type:Number,default:0}},emits:["selectProduct","selectService"],setup(u,{emit:y}){B();const e=C({...{server_messages:{type:"",messages:""},is_listing:!1}});N(()=>e.search_query,_.debounce(()=>{b()},500));const s=u,f=s.placeholder,v=s.button_placeholder,c=q([]);async function b(){e.is_listing=!0,e.search_query!=""?await axios.get("/api/products/all",{params:{search_query:e.search_query,limit:10,product_type:s.product_type,except_products:s.selected_products,not_recipe:s.not_recipe,is_stocable_products:s.is_stocable_products,only_available:s.only_available,branch_id:s.selected_branch_id,is_stock_adjustment:s.is_stock_adjustment}}).then(r=>{c.value=r.data.data,e.is_listing=!1}).catch(r=>{e.server_messages.type="error",e.server_messages.messages=r,e.is_listing=!1,console.log(r)}):(c.value=[],e.is_listing=!1)}function g(){c.value=[]}const m=y;return(r,n)=>{const k=w("Icon");return o(),x(p($),null,{default:j(()=>[t("div",D,[t("div",{class:P(u.is_button?"col-md-8":"col-md-12")},[t("div",L,[t("div",E,[F(t("input",{type:"search",class:"form-control form-control-solid",placeholder:p(f),"onUpdate:modelValue":n[0]||(n[0]=a=>e.search_query=a)},null,8,K),[[A,e.search_query]]),t("div",M,[h(k,{icon:"fa6-solid:magnifying-glass"})]),e.is_listing?(o(),l("div",R,[h(z,{color:"gray",size:"15px",class:"pt-2 pe-2"})])):(o(),l("div",T,[c.value.length>0?(o(),l("ul",U,[c.value!=""?(o(!0),l(V,{key:0},I(c.value,(a,S)=>(o(),l("li",{key:S},[t("a",{href:"javascript:;",onClick:X=>(m("selectProduct",a),g())},[t("h2",null,i(a.name),1),t("div",H,[t("h4",null,i(r.$t("Code"))+": "+i(a.code),1),a.sale_price>0?(o(),l("h4",J,i(a.sale_price)+" SAR",1)):d("",!0)])],8,G)]))),128)):d("",!0)])):d("",!0)]))])])],2),u.is_button?(o(),l("div",O,[t("button",{type:"button",class:"btn btn-primary",onClick:n[1]||(n[1]=a=>m("selectService",e.search_query))},[t("span",Q,i(p(v)),1)])])):d("",!0)])]),_:1})}}};export{oe as default};
