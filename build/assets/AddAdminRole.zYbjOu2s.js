import S from"./ServerMessage.EFQMOwoZ.js";import{u as $,r as m,e as N,b as V,v as B,g as d,h as r,i as s,t as n,l as c,w as C,Q as M,K as p,N as x,m as b,p as D,j as f}from"./index.sP6fhsqN.js";import{F as j}from"./vee-validate.esm.2kXgdFia.js";import{c as q,a as E,e as F}from"./index.esm.DHYHwGJ4.js";import{_ as I}from"./VTextInput.EPCajChY.js";/* empty css                                                   */import{C as O}from"./ClipLoader._89zL49D.js";import{u as T}from"./global.AEIEVpKW.js";import"./VTooltip.kcvohVRA.js";/* empty css                                                   */const U={class:"modal hide",id:"addRoleModal",tabindex:"-1","aria-labelledby":"Add Role","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},z={class:"modal-dialog modal-dialog-centered"},G={class:"modal-content"},J={class:"modal-header"},K={class:"modal-title"},L={class:"modal-body"},Q={class:"row"},H={class:"col-md-12"},P={class:"col-md-12"},W={class:"form-field pt-3"},X={class:"form-check form-switch"},Y={class:"form-check-label",for:"status"},Z={key:0,class:"py-3"},ee={class:"row pt-4"},se={class:"col-12"},te=["disabled"],ae={key:1,class:"pt-0"},oe={key:2,class:"pt-0"},be={__name:"AddAdminRole",props:{show_add_role_modal:Boolean,edit_data:{type:[Array,Object]}},emits:["closeAddRoleModal"],setup(g,{emit:v}){const{t:i}=$(),h=m({name:i("Role Name"),role_type:i("Role Type"),select_role_type:i("Select Role Type")});T(),m(!1);const _={server_messages:{type:"",messages:""},is_submitting:!1,is_listing:!1,role_id:"",name:"",status:!0},e=N({..._});V();const y=q({name:E().required(i("name is required",{name:i("Role Name")})).min(3,i("name must be at least n characters",{name:i("Role Name"),number:3})),status:F().label("status")}),k=v,w=g;function u(){document.getElementById("add_role_form").reset(),A(),k("closeAddRoleModal"),document.getElementById("close_btn").click()}m(null),B(()=>w.edit_data,t=>{t&&(e.role_id=t.slack,e.name=t.name,e.status=t.status==1)});async function R(){e.is_submitting=!0;var t=new FormData;t.append("name",e.name),t.append("status",e.status),t.append("role_id",e.role_id);var o=e.role_id!=""&&e.role_id!=null?"/api/admin/role/update":"/api/admin/role/save";await axios.post(o,t).then(a=>{if(a.data.status_code==200)toast.success(a.data.msg),e.is_submitting=!1,u();else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(a.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=a.data.msg}e.is_submitting=!1}}).catch(a=>{e.server_messages.type="error",e.server_messages.messages=a,e.is_submitting=!1,console.log(a)})}function A(){Object.assign(e,_)}return(t,o)=>{const a=S;return d(),r("div",U,[s("div",z,[s("div",G,[s("div",J,[s("h5",K,n(t.$t("Add Role")),1),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:u,id:"close_btn"})]),s("div",L,[c(f(j),{"validation-schema":f(y),onSubmit:R,"initial-values":e,id:"add_role_form"},{default:C(()=>[s("div",Q,[s("div",H,[c(I,{type:"text",name:"name",modelValue:e.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.name=l),label:h.value.name,required:!0},null,8,["modelValue","label"])]),s("div",P,[s("div",W,[s("div",X,[p(s("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status","onUpdate:modelValue":o[1]||(o[1]=l=>e.status=l)},null,512),[[M,e.status]]),s("label",Y,n(t.$t("Active")),1)])])]),p(s("input",{type:"hidden","onUpdate:modelValue":o[2]||(o[2]=l=>e.role_id=l)},null,512),[[x,e.role_id]])]),e.server_messages.messages!=""?(d(),r("div",Z,[c(a,{server_messages:e.server_messages},null,8,["server_messages"])])):b("",!0),s("div",ee,[s("div",se,[s("button",{type:"submit",class:"btn btn-primary w-100",disabled:e.is_submitting},[e.is_submitting?(d(),D(O,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):b("",!0),e.is_submitting?(d(),r("span",ae,n(t.$t("Saving...")),1)):(d(),r("span",oe,n(t.$t("Save")),1))],8,te)])])]),_:1},8,["validation-schema","initial-values"])])])])])}}};export{be as default};
