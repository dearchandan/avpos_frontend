import{u as D,b as N,d as T,o as x,r as d,e as O,g as c,h as n,i as e,t as o,p as V,F as I,x as L,l as k,m as R,j as P,I as j,q,_ as G}from"./index.sP6fhsqN.js";import{_ as J}from"./ActionButtonGroup.AvqLZ7Zu.js";import{_ as U}from"./ListingSkeleton.0g9v9IYA.js";/* empty css                                                   */const z={class:"row pb-4 align-items-center justify-content-between"},W={class:"col-auto"},Y={class:"pt-2"},H={class:"col-auto text-end"},K={key:1,class:"table-responsive"},Q={class:"table table-list-data table-hover"},X={class:"bg-light"},Z={class:"fw-bold"},ee={class:"fw-bold"},se={width:"10%",class:"fw-bold"},te={width:"5%",class:"fw-bold"},ae={width:"5%",scope:"col",class:"text-end"},oe={class:"form-feild"},le={class:"form-check form-switch form-switch-2"},re=["onChange","checked"],ce={key:0,class:"text-end"},de={key:1},ne={class:"text-center py-3",colspan:"5"},fe={__name:"CustomerCustomField",props:["customer_slack"],setup(v){const{isAuthorized:p}=j(),w=q(()=>G(()=>import("./AddCustomerCustomField.Ko5TRENM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),{t:i}=D(),b=N();T(()=>b.user.currency.symbol),x(()=>{F(),_()});const u=d({write:!1,delete:!1});function F(){u.value={write:p("A_WRITE_CUSTOMER"),delete:p("A_DELETE_CUSTOMER")}}const A={server_messages:{type:"",messages:""},is_listing:!1,search_query:d("")};i("search orders by order no., amount");const a=O({...A}),S=v,h=d(!1),C=d([]);function y(s=""){C.value=s,h.value=!0}function $(){h.value=!1,_()}const m=d(!1),f=d([]);async function _(){m.value=!0,await axios.get("/api/customer/custom_fields",{params:{customer_slack:S.customer_slack}}).then(s=>{f.value=s.data.data,m.value=!1}).catch(s=>{a.server_messages.type="error",a.server_messages.messages=s,m.value=!1,console.log(s)})}async function E(s){var l=new FormData;l.append("slack",s),await axios.post("/api/customer/custom_field/update_status",l).then(t=>{if(t.data.status_code==200)toast.success(t.data.msg),_();else try{a.server_messages.type="error",a.server_messages.messages=JSON.parse(t.data.msg)}catch{a.server_messages.type="error",a.server_messages.messages=t.data.msg}}).catch(t=>{a.server_messages.type="error",a.server_messages.messages=t,console.log(t)})}async function B(s){var l=!1;await Swal.fire({title:i("Do you want to delete this item?"),showCancelButton:!0,confirmButtonText:i("Yes, Delete"),confirmButtonColor:"#d33",cancelButtonText:i("Cancel")}).then(t=>{t.isConfirmed&&(l=!0)}),l&&await axios.post("/api/customer/custom_field/delete",{slack:s}).then(t=>{if(t.data.status_code==200)Swal.fire(t.data.msg),_();else try{a.server_messages.type="error",a.server_messages.messages=JSON.parse(t.data.msg)}catch{a.server_messages.type="error",a.server_messages.messages=t.data.msg}}).catch(t=>{a.server_messages.type="error",a.server_messages.messages=t,console.log(t)})}return(s,l)=>{const t=U,g=J;return c(),n("div",null,[e("div",z,[e("div",W,[e("h5",Y,o(s.$t("Custom Fields")),1)]),e("div",H,[e("a",{class:"btn btn-light-primary2 btn-sm",href:"#","data-bs-toggle":"modal",onClick:l[0]||(l[0]=r=>y()),"data-bs-target":"#addCustomerCustomFieldModal"}," + "+o(s.$t("Add Custom Field")),1)])]),m.value?(c(),V(t,{key:0})):(c(),n("div",K,[e("table",Q,[e("thead",X,[e("tr",null,[e("th",Z,o(s.$t("Name")),1),e("th",ee,o(s.$t("Value")),1),e("th",se,o(s.$t("Created At")),1),e("th",te,o(s.$t("Status")),1),e("th",ae,o(s.$t("Action")),1)])]),e("tbody",null,[f.value!=""?(c(!0),n(I,{key:0},L(f.value,(r,M)=>(c(),n("tr",{key:M},[e("td",null,o(r.field_name),1),e("td",null,o(r.field_value),1),e("td",null,o(r.created_at_label),1),e("td",null,[e("div",oe,[e("div",le,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"Status_id",onChange:ie=>E(r.slack),checked:r.status==1},null,40,re)])])]),u.value.write||u.value.delete?(c(),n("td",ce,[k(g,{permissions:u.value,onDelete:B,onEditModal:y,slack:r.slack,edit_modal_data:r,edit_modal_target:"#addCustomerCustomFieldModal"},null,8,["permissions","slack","edit_modal_data"])])):R("",!0)]))),128)):(c(),n("tr",de,[e("td",ne,o(s.$t("No Data Found")),1)]))])])])),k(P(w),{show_add_customer_custom_field_modal:h.value,onCloseAddCustomerCustomFieldModal:$,customer_slack:v.customer_slack,edit_data:C.value},null,8,["show_add_customer_custom_field_modal","customer_slack","edit_data"])])}}};export{fe as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AddCustomerCustomField.Ko5TRENM.js","assets/ServerMessage.EFQMOwoZ.js","assets/index.sP6fhsqN.js","assets/index.KTHCd6a8.css","assets/vee-validate.esm.2kXgdFia.js","assets/index.esm.DHYHwGJ4.js","assets/VTextInput.EPCajChY.js","assets/VTooltip.kcvohVRA.js","assets/ClipLoader._89zL49D.js","assets/ClipLoader.7xz7y6gZ.css","assets/BeatLoader.5j6ku4bW.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
