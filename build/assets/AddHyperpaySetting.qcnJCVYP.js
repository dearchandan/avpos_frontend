import S from"./ServerMessage.EFQMOwoZ.js";import{_ as q}from"./VTextArea.-gdNAAwm.js";import{_ as A}from"./VTextInput.EPCajChY.js";import{c as M,a as m}from"./index.esm.DHYHwGJ4.js";import{C as $}from"./ClipLoader._89zL49D.js";/* empty css                                                   */import{u as x,F as D}from"./vee-validate.esm.2kXgdFia.js";import{u as E,b as N,d as I,r as P,e as C,P as T,g as _,h as c,i as t,l as r,w as Y,t as o,k as p,j as u,m as y,p as z}from"./index.sP6fhsqN.js";import"./VTooltip.kcvohVRA.js";/* empty css                                                   */const B={class:"row"},F={class:"col-12 py-3"},U={class:"card"},R={class:"row mb-3"},H={class:"col-4"},O={class:"label"},j=t("span",{class:"text-danger"},"*",-1),G={class:"col-8"},K={class:"row mb-3"},J={class:"col-4"},L={class:"label"},Q=t("span",{class:"text-danger"},"*",-1),W={class:"col-8"},X={class:"row mb-3"},Z={class:"col-4"},ee={class:"label"},te=t("span",{class:"text-danger"},"*",-1),se={class:"col-8"},ae={class:"row mb-3"},ie={class:"col-4"},ne={class:"label"},oe=t("span",{class:"text-danger"},"*",-1),re={class:"col-8"},le={class:"my-3"},me={key:0,class:"row py-3"},_e={class:"col-12 mt-2 text-end"},de=["disabled"],ce={key:1,class:"pt-0"},pe={key:2,class:"pt-0"},qe={__name:"AddHyperpaySetting",props:{active_payment_gateway:{type:[Object,Array]}},setup(h){x();const{t:a}=E(),v=h,g=N();I(()=>g.user.currency.symbol);const b=P({merchant_key:a("Merchant Key"),password:a("Password"),sms_template:a("SMS Template"),sms_note:a("Note: Square bracket([ ]) words will replace with the data like 'Your invoice number:[INVOICE_NUMBER]' to 'Your invoice number:001' in SMS")}),e=C({...{server_messages:{type:"",messages:""},is_submitting:!1,merchant_key:"",mada_entity_id:"",other_entity_id:"",sms_template:"",constant_name:"HYPERPAY"}}),l=T(v,"active_payment_gateway");l.value.name=="HYPERPAY"&&(e.merchant_key=l.value.key,e.mada_entity_id=l.value.mada_entity_id,e.other_entity_id=l.value.other_entity_id,e.sms_template=l.value.sms_template);const f=M().shape({constant_name:m().required(a("name is required",{name:a("Payment Gateway Name")})),merchant_key:m().required(a("name is required",{name:a("Merchant Key")})),mada_entity_id:m().required(a("name is required",{name:a("Entity ID (MADA)")})),other_entity_id:m().required(a("name is required",{name:a("Entity ID (Visa, MasterCard)")})),sms_template:m().required(a("name is required",{name:a("SMS Template")}))});new FormData;async function w(){e.is_submitting=!0;var i=new FormData;i.append("merchant_key",e.merchant_key),i.append("mada_entity_id",e.mada_entity_id),i.append("other_entity_id",e.other_entity_id),i.append("sms_template",e.sms_template),i.append("payment_gateway",e.constant_name),await axios.post("/api/payment_gateway_setting/save",i,{}).then(s=>{if(s.data.status_code==200)toast.success(s.data.msg),e.is_submitting=!1,router.push("/payment_gateway");else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(s.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=s.data.msg}e.is_submitting=!1}}).catch(s=>{e.server_messages.type="error",e.server_messages.messages=s,e.is_submitting=!1})}return(i,s)=>{const d=A,k=q,V=S;return _(),c("div",null,[t("div",B,[r(u(D),{onSubmit:w,"validation-schema":u(f),"initial-values":e},{default:Y(()=>[t("div",F,[t("div",U,[t("div",R,[t("div",H,[t("label",O,[p(o(i.$t("Authorization Access Token")),1),j])]),t("div",G,[r(d,{type:"text",name:"merchant_key",modelValue:e.merchant_key,"onUpdate:modelValue":s[0]||(s[0]=n=>e.merchant_key=n),label:"",required:!0,islabel:!1,size:"small"},null,8,["modelValue"])])]),t("div",K,[t("div",J,[t("label",L,[p(o(i.$t("Entity ID (MADA)")),1),Q])]),t("div",W,[r(d,{type:"text",name:"mada_entity_id",modelValue:e.mada_entity_id,"onUpdate:modelValue":s[1]||(s[1]=n=>e.mada_entity_id=n),label:"",required:!0,islabel:!1,size:"small"},null,8,["modelValue"])])]),t("div",X,[t("div",Z,[t("label",ee,[p(o(i.$t("Entity ID (Visa, MasterCard)")),1),te])]),t("div",se,[r(d,{type:"text",name:"other_entity_id",modelValue:e.other_entity_id,"onUpdate:modelValue":s[2]||(s[2]=n=>e.other_entity_id=n),label:"",required:!0,islabel:!1,size:"small"},null,8,["modelValue"])])]),t("div",ae,[t("div",ie,[t("label",ne,[p(o(i.$t("SMS Template")),1),oe])]),t("div",re,[r(k,{name:"sms_template",modelValue:e.sms_template,"onUpdate:modelValue":s[3]||(s[3]=n=>e.sms_template=n),label:"",required:!0,islabel:!1},null,8,["modelValue"]),t("span",le,o(u(b).sms_note),1)])])]),e.server_messages.messages!=""?(_(),c("div",me,[r(V,{server_messages:e.server_messages},null,8,["server_messages"])])):y("",!0)]),t("div",_e,[t("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(_(),z($,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):y("",!0),e.is_submitting?(_(),c("span",ce,o(i.$t("Saving...")),1)):(_(),c("span",pe,o(i.$t("Save")),1))],8,de)])]),_:1},8,["validation-schema","initial-values"])])])}}};export{qe as default};
