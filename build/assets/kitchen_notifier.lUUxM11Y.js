import{_ as V}from"./DefaultLayout.nvkZ4UhM.js";import{z as D,g as a,h as o,G as S,u as L,e as T,r,o as B,p as _,w as v,I as K,k as l,i as s,l as m,j as f,K as z,Q as G,t as d,F as M,x as R}from"./index.7OFNPsHl.js";import{_ as U}from"./VCodeGenerateTextInput.2xWesVom.js";import O from"./ServerMessage.I5ol-gtz.js";import{_ as H}from"./RestaurantMenu.zwVhKTo3.js";import{F as P}from"./vee-validate.esm.N3uz7Rsk.js";import"./index.esm.cd1bITNA.js";import{C as j}from"./ClipLoader.1qNfpKDH.js";import{B as J}from"./BeatLoader.cb9i48GG.js";/* empty css                                                   *//* empty css                                                   */const Q={},W={class:"content"},q=S('<div class="row card-strash"><div class="col-md-6"><div class="row"><div class="col-md-12 mb-4"><div class="card"><div class="row"><div class="col-md-6"><div class="skl-w" style="height:12px;width:25%;flex-grow:unset;margin-bottom:4px;"></div><div class="skl-w" style="height:38px;"></div></div><div class="col-md-3 pt-2 mt-3"><div class="row align-items-center g-2"><div class="col-4"><div class="skl-w" style="height:28px;border-radius:40px;"></div></div><div class="col-6"><div class="skl-w" style="height:12px;flex-grow:unset;"></div></div></div></div><div class="col-md-3 pt-1 mt-1"><div class="skl-w mt-2" style="height:38px;"></div></div></div></div></div></div></div><div class="col-md-6"><div class="row"><div class="col-md-12 mb-4"><div class="card"><div class="row"><table class="table table-list-data table-hover"><thead class="bg-light"><tr><th scope="col" width="15%"><div class="skl-w" style="width:80px;"></div></th><th scope="col" width="15%"><div class="skl-w" style="width:80px;"></div></th><th scope="col" width="15%"><div class="skl-w" style="width:80px;"></div></th></tr></thead><tbody><tr><td><div class="skl-w" style="width:80px;"></div></td><td><div class="skl-w" style="width:80px;"></div></td><td><div class="skl-w" style="width:80px;"></div></td></tr><tr><td><div class="skl-w" style="width:80px;"></div></td><td><div class="skl-w" style="width:80px;"></div></td><td><div class="skl-w" style="width:80px;"></div></td></tr><tr><td><div class="skl-w" style="width:80px;"></div></td><td><div class="skl-w" style="width:80px;"></div></td><td><div class="skl-w" style="width:80px;"></div></td></tr></tbody></table></div></div></div></div></div></div>',1),X=[q];function Y(y,h){return a(),o("div",W,X)}const Z=D(Q,[["render",Y]]),ss={key:0,class:"content"},ts={class:"row card-strash"},es={key:0,class:"py-3"},as={class:"col-md-6"},is={class:"row"},os={class:"col-md-12 mb-4"},ds={class:"card"},cs={class:"row"},ls={class:"col-md-6"},ns={class:"col-md-3 pt-md-2"},rs={class:"form-field pt-md-2"},_s={class:"form-check form-switch pt-md-4"},vs={class:"form-check-label",for:"status"},ms={key:0,class:"col-md-3"},hs=["disabled"],ps={key:1,class:"pt-0"},us={key:2,class:"pt-0"},gs={class:"col-md-6"},ws={class:"row"},fs={class:"col-md-12 mb-4"},ys={class:"card"},bs={class:"row"},ks={key:0},xs={key:1,class:"table-responsive"},$s={class:"table table-list-data table-hover"},Ns={class:"bg-light"},Cs={scope:"col",width:"15%"},Is={scope:"col",width:"15%"},As={scope:"col",width:"15%"},Es={key:1},Fs={class:"text-center py-3",colspan:"5"},Os={__name:"kitchen_notifier",setup(y){const{t:h}=L(),b=h("Activation Code"),{isAuthorized:p}=K(),t=T({...{server_messages:{type:"",messages:""},is_submitting:!1,activation_code:"",status:!0}}),n=r([]);B(()=>{N(),k()});const u=r(!1);async function k(){let e=await axios.get("api/kitchen_notifier/add");t.activation_code=e.data.data.activation_code,t.status=e.data.data.status==1,n.value=e.data.data.logs,u.value=!0}async function x(){let e=await axios.post("api/kitchen_notifier/generate_activation_code");t.activation_code=e.data.data.activation_code}async function $(){t.is_submitting=!0;var e=new FormData;e.append("activation_code",t.activation_code),e.append("status",t.status),await axios.post("/api/kitchen_notifier/save",e).then(i=>{if(i.data.status_code==200)toast.success(i.data.msg),t.is_submitting=!1,router.push("/kitchen_notifier");else{try{t.server_messages.type="error",t.server_messages.messages=JSON.parse(i.data.msg)}catch{t.server_messages.type="error",t.server_messages.messages=i.data.msg}t.is_submitting=!1}}).catch(i=>{t.server_messages.type="error",t.server_messages.messages=i,t.is_submitting=!1,console.log(i)})}const g=r({write:!1,delete:!1});function N(){g.value={write:p("A_WRITE_KITCHEN_NOTIFIER"),delete:p("A_DELETE_KITCHEN_NOTIFIER")}}return(e,i)=>{const w=H,C=O,I=U,A=Z,E=V;return a(),_(E,null,{subheader:v(()=>[l(w)]),default:v(()=>[u.value?(a(),o("div",ss,[l(f(P),{onSubmit:$,enctype:"multipart/form-data"},{default:v(()=>[s("div",ts,[t.server_messages.messages!=""?(a(),o("div",es,[l(C,{server_messages:t.server_messages},null,8,["server_messages"])])):m("",!0),s("div",as,[s("div",is,[s("div",os,[s("div",ds,[s("div",cs,[s("div",ls,[l(I,{type:"text",name:"login_code",modelValue:t.activation_code,"onUpdate:modelValue":i[0]||(i[0]=c=>t.activation_code=c),label:f(b),onGenerate_code:x,readonly:!0},null,8,["modelValue","label"])]),s("div",ns,[s("div",rs,[s("div",_s,[z(s("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status",checked:"","onUpdate:modelValue":i[1]||(i[1]=c=>t.status=c)},null,512),[[G,t.status]]),s("label",vs,d(e.$t("Active")),1)])])]),g.value.write?(a(),o("div",ms,[s("button",{type:"submit",class:"btn btn-primary mt-md-4",disabled:t.is_submitting},[t.is_submitting?(a(),_(j,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):m("",!0),t.is_submitting?(a(),o("span",ps,d(e.$t("Updating...")),1)):(a(),o("span",us,d(e.$t("Update")),1))],8,hs)])):m("",!0)])])])])]),s("div",gs,[s("div",ws,[s("div",fs,[s("div",ys,[s("div",bs,[n.value.value?(a(),o("div",ks,[l(J,{color:"gray",size:"15px",class:"pt-2 pe-2"})])):(a(),o("div",xs,[s("table",$s,[s("thead",Ns,[s("tr",null,[s("th",Cs,d(e.$t("IP Address")),1),s("th",Is,d(e.$t("Login At")),1),s("th",As,d(e.$t("Logout At")),1)])]),s("tbody",null,[n.value.length>0?(a(!0),o(M,{key:0},R(n.value,(c,F)=>(a(),o("tr",{key:F},[s("td",null,d(c.ip_address),1),s("td",null,d(c.logged_in_at_label),1),s("td",null,d(c.logged_out_at_label!=null?c.logged_out_at_label:"-"),1)]))),128)):(a(),o("tr",Es,[s("td",Fs,d(e.$t("No Data Found")),1)]))])])]))])])])])])])]),_:1})])):(a(),_(A,{key:1}))]),_:1})}}};export{Os as default};
