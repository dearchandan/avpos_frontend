import{D as R}from"./DefaultLayout.K5Bh9Jz_.js";import{_ as U}from"./DataResetSkeleton.rk4RkR1_.js";import I from"./ServerMessage.EFQMOwoZ.js";import{u as A,b as L,r as v,e as N,d as O,o as T,g as o,p as C,w,f as $,i as e,l as k,k as F,t as i,h as c,m as l,j as y,K as h,L as Q,F as p,x as f,Q as m,M as j}from"./index.sP6fhsqN.js";import{B as J}from"./BeatLoader.GLQikMEo.js";import"./ClipLoader._89zL49D.js";/* empty css                                                   *//* empty css                                                   */const K={class:"header-nav-wrap"},z={class:"row align-items-center"},E={class:"col-auto"},W={class:"header-back-link"},Y={class:"col-auto"},G={class:"fw-bold"},H={class:"content py-5"},X={key:0,class:"py-3"},Z={class:"row"},x={class:"col-12"},ss={key:1,class:""},es={key:0,class:"form-feild card"},ts={class:"col-12 py-3"},as={for:"tax_inclusive_pricing"},os={class:"fs-5"},rs={key:0,selected:""},cs=["value"],ns={key:1,class:"form-feild card"},is={class:"col-12 py-3"},ls={class:"form-check"},ds={for:"categories_products"},_s=["checked"],us={class:"fs-4"},hs={class:""},ms={key:0,class:"ps-2 pt-3"},ps={key:2,class:"form-feild card"},fs={class:"col-12 py-3"},gs={class:"form-check"},vs={for:"products"},ks=["checked"],ys={class:"fs-4"},bs={class:""},ws={key:0,class:"ps-2 pt-3"},Ss={key:3,class:"form-feild card"},Cs={class:"col-12 py-3"},$s={class:"form-check"},Vs={for:"purchases_quotations"},Ds=["checked"],Bs={class:"fs-4"},Ms={class:""},Ps={key:0,class:"ps-2 pt-3"},qs={key:4,class:"form-feild card"},Rs={class:"col-12 py-3"},Us={class:"form-check"},Is={for:"sales_returns"},As=["checked"],Ls={class:"fs-4"},Ns={class:""},Os={key:0,class:"ps-2 pt-3"},Ts={key:5,class:"form-feild card"},Fs={class:"col-12 py-3"},Qs={class:"form-check"},js={for:"restaurant_data"},Js=["checked"],Ks={class:"fs-4"},zs={class:""},Es={key:0,class:"ps-2 pt-3"},Ws={key:6,class:"form-feild card"},Ys={class:"col-12 py-3"},Gs={class:"form-check"},Hs={for:"stock_transfers"},Xs=["checked"],Zs={class:"fs-4"},xs={key:7,class:"form-feild card"},se={class:"col-12 py-3"},ee={class:"form-check"},te={for:"customers_suppliers"},ae=["checked"],oe={class:"fs-4"},re={class:"form-field pt-4"},ce={class:"col-12"},ne=["disabled"],ge={__name:"data_reset",setup(ie){const{t:g}=A(),u=L();v(!1),v([]),v();const V={server_messages:{type:"",messages:""},is_submitting:!1,categories_products:!1,products:!1,purchases_quotations:!1,sales_returns:!1,restaurant_data:!1,stock_transfers:!1,customers_suppliers:!1,merchant_id:"",merchants_list:[],merchants_data_counts:[],search_query:v("")},s=N({...V});O(()=>_.isUndefined(u)?u.user.merchant.id:""),T(()=>{u.isAdmin&&D(),u.isMerchant&&(s.merchant_id=u.user.merchant.id,b())});async function D(){s.is_listing=!0,await axios.get("/api/data_reset").then(r=>{s.merchants_list=r.data.data.merchants_list,console.log(s.merchants_list,r.data.data),s.is_listing=!1,s.server_messages.type="",s.server_messages.messages=""}).catch(r=>{s.server_messages.type="error",s.server_messages.messages=r,s.is_listing=!1,console.log(r)})}async function b(){s.is_listing=!0,await axios.get("/api/data_reset/counts",{params:{merchant_id:s.merchant_id}}).then(r=>{r.data.status_code==200?(s.merchants_data_counts=r.data.data,s.is_listing=!1,s.server_messages.type="",s.server_messages.messages=""):(s.server_messages.type="error",s.server_messages.messages=JSON.parse(r.data.msg),s.is_listing=!1,console.log(r.data.msg))}).catch(r=>{s.server_messages.type="error",s.server_messages.messages=r,s.is_listing=!1,console.log(r)})}async function B(){if(s.merchant_id!=""){var r=!1;if(s.server_messages.type="",s.server_messages.messages="",await Swal.fire({title:"Warning!",icon:"warning",text:g("Do you want to reset the selected data?"),showCancelButton:!0,confirmButtonText:g("Yes, Reset"),confirmButtonColor:"#198754",cancelButtonText:g("Cancel")}).then(d=>{d.isConfirmed&&(r=!0)}),r){s.is_submitting=!0;var t=new FormData;t.append("merchant_id",s.merchant_id),t.append("categories_products",s.categories_products),t.append("products",s.products),t.append("purchases_quotations",s.purchases_quotations),t.append("sales_returns",s.sales_returns),t.append("restaurant_data",s.restaurant_data),t.append("stock_transfers",s.stock_transfers),t.append("customers_suppliers",s.customers_suppliers),await axios.post("/api/data_reset/reset",t).then(d=>{if(console.log(d.data),d.data.status_code==200)Swal.fire(d.data.msg),b();else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(d.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=d.data.msg}s.is_submitting=!1}).catch(d=>{s.is_submitting=!1,s.server_messages.type="error",s.server_messages.messages=d,console.log(d)})}}else s.server_messages.type="error",s.server_messages.messages=g("Please select any Merchant first!")}return(r,t)=>{const d=$("Icon"),S=$("router-link"),M=I,P=U,q=R;return o(),C(q,null,{subheader:w(()=>[e("div",K,[e("div",z,[e("div",E,[e("div",W,[k(S,{class:"text-primary",to:"/settings"},{default:w(()=>[k(d,{icon:"fa6-solid:chevron-left"}),F(" "+i(r.$t("Settings")),1)]),_:1})])]),e("div",Y,[e("h5",G,i(r.$t("Data Reset")),1)])])])]),default:w(()=>[e("div",H,[s.server_messages.messages!=""?(o(),c("div",X,[k(M,{server_messages:s.server_messages},null,8,["server_messages"])])):l("",!0),e("div",Z,[e("div",x,[s.is_listing?(o(),C(P,{key:0})):(o(),c("div",ss,[y(u).isAdmin?(o(),c("div",es,[e("div",ts,[e("label",as,[e("span",os,i(r.$t("Select Merchant")),1),h(e("select",{class:"form-control form-control-solid w-100 mt-2","onUpdate:modelValue":t[0]||(t[0]=a=>s.merchant_id=a),onChange:t[1]||(t[1]=a=>b()),style:{"min-width":"200vh"}},[Object.keys(s.merchants_list).length==0?(o(),c("option",rs,i(r.$t("Merchants data not found!")),1)):(o(!0),c(p,{key:1},f(s.merchants_list,(a,n)=>(o(),c("option",{value:a.id,key:n},i(a.name),9,cs))),128))],544),[[Q,s.merchant_id]])])])])):l("",!0),s.merchant_id!=""?(o(),c("div",ns,[e("div",is,[e("div",ls,[e("label",ds,[h(e("input",{class:"form-check-input mt-1",type:"checkbox",role:"switch",id:"categories_products","onUpdate:modelValue":t[2]||(t[2]=a=>s.categories_products=a),checked:s.categories_products},null,8,_s),[[m,s.categories_products]]),e("span",us,i(r.$t("Categories and Products")),1),e("ul",hs,[(o(!0),c(p,null,f(s.merchants_data_counts,(a,n)=>(o(),c("li",null,[n==="Products"||n==="Product Ingredients"||n==="Categories"||n==="Combos"?(o(),c("div",ms,[e("span",null,i(a)+" "+i(n),1)])):l("",!0)]))),256))])])])])])):l("",!0),s.merchant_id!=""?(o(),c("div",ps,[e("div",fs,[e("div",gs,[e("label",vs,[h(e("input",{class:"form-check-input mt-1",type:"checkbox",role:"switch",id:"products","onUpdate:modelValue":t[3]||(t[3]=a=>s.products=a),checked:s.products},null,8,ks),[[m,s.products]]),e("span",ys,i(r.$t("Only Products")),1),e("ul",bs,[(o(!0),c(p,null,f(s.merchants_data_counts,(a,n)=>(o(),c("li",null,[n==="Products"||n==="Product Ingredients"?(o(),c("div",ws,[e("span",null,i(a)+" "+i(n),1)])):l("",!0)]))),256))])])])])])):l("",!0),y(u).isAdmin&&s.merchant_id!=""?(o(),c("div",Ss,[e("div",Cs,[e("div",$s,[e("label",Vs,[h(e("input",{class:"form-check-input mt-1",type:"checkbox",role:"switch",id:"purchases_quotations","onUpdate:modelValue":t[4]||(t[4]=a=>s.purchases_quotations=a),checked:s.purchases_quotations},null,8,Ds),[[m,s.purchases_quotations]]),e("span",Bs,i(r.$t("Purchases and Quotations")),1),e("ul",Ms,[(o(!0),c(p,null,f(s.merchants_data_counts,(a,n)=>(o(),c("li",null,[n==="Purchases"||n==="Purchase Returns"||n==="Quotations"?(o(),c("div",Ps,[e("span",null,i(a)+" "+i(n),1)])):l("",!0)]))),256))])])])])])):l("",!0),y(u).isAdmin&&s.merchant_id!=""?(o(),c("div",qs,[e("div",Rs,[e("div",Us,[e("label",Is,[h(e("input",{class:"form-check-input mt-1",type:"checkbox",role:"switch",id:"sales_returns","onUpdate:modelValue":t[5]||(t[5]=a=>s.sales_returns=a),checked:s.sales_returns},null,8,As),[[m,s.sales_returns]]),e("span",Ls,i(r.$t("Sales and Returns")),1),e("ul",Ns,[(o(!0),c(p,null,f(s.merchants_data_counts,(a,n)=>(o(),c("li",null,[n==="Orders"||n==="Order Returns"||n==="Invoices"||n==="Invoice Returns"||n==="Transactions"?(o(),c("div",Os,[e("span",null,i(a)+" "+i(n),1)])):l("",!0)]))),256))])])])])])):l("",!0),s.merchant_id!=""?(o(),c("div",Ts,[e("div",Fs,[e("div",Qs,[e("label",js,[h(e("input",{class:"form-check-input mt-1",type:"checkbox",role:"switch",id:"restaurant_data","onUpdate:modelValue":t[6]||(t[6]=a=>s.restaurant_data=a),checked:s.restaurant_data},null,8,Js),[[m,s.restaurant_data]]),e("span",Ks,i(r.$t("Restaurant Data")),1),e("ul",zs,[(o(!0),c(p,null,f(s.merchants_data_counts,(a,n)=>(o(),c("li",null,[n==="Kitchen Tables"?(o(),c("div",Es,[e("span",null,i(a)+" "+i(n),1)])):l("",!0)]))),256))])])])])])):l("",!0),y(u).isAdmin&&s.merchant_id!=""?(o(),c("div",Ws,[e("div",Ys,[e("div",Gs,[e("label",Hs,[h(e("input",{class:"form-check-input mt-1",type:"checkbox",role:"switch",id:"stock_transfers","onUpdate:modelValue":t[7]||(t[7]=a=>s.stock_transfers=a),checked:s.stock_transfers},null,8,Xs),[[m,s.stock_transfers]]),e("span",Zs,i(r.$t("Stock Transfers")),1)])])])])):l("",!0),s.merchant_id!=""?(o(),c("div",xs,[e("div",se,[e("div",ee,[e("label",te,[h(e("input",{class:"form-check-input mt-1",type:"checkbox",id:"customers_suppliers","onUpdate:modelValue":t[8]||(t[8]=a=>s.customers_suppliers=a),checked:s.customers_suppliers},null,8,ae),[[m,s.customers_suppliers]]),e("span",oe,i(r.$t("Customers and Suppliers")),1)])])])])):l("",!0),e("div",re,[e("div",ce,[e("button",{type:"button",class:"btn btn-danger btn-md",disabled:s.is_submitting,onClick:t[9]||(t[9]=a=>B())},i(r.$t("Reset")),9,ne),h(k(J,{color:"gray",size:"15px",class:"pt-2 pe-2"},null,512),[[j,s.is_submitting]])])])]))])])])]),_:1})}}};export{ge as default};
