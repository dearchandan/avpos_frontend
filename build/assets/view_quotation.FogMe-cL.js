import{a as B,r as u,e as S,b as I,o as A,g as i,p as g,w as v,f as p,i as s,k as _,n as l,t as a,h as n,l as c,j as Q,q as V,_ as P}from"./index.GdMxdeuf.js";import T from"./ServerMessage.Wf7puwQc.js";import{_ as x}from"./DefaultLayout.qd3nRBiq.js";import"./index.esm.0vhAmrVd.js";import{B as k}from"./BeatLoader.czpWuXPY.js";/* empty css                                                   */import"./ClipLoader.UcGuNCxH.js";/* empty css                                                   */const E={class:"header-nav-wrap"},L={class:"row align-items-center"},R={class:"col-auto"},z={class:"header-back-link"},M={class:"col-auto"},O={class:"fw-bold"},j={class:"col-auto ms-auto"},J=["disabled"],F={key:2},G=["href"],H={class:"content"},K={class:"page-heading"},U={key:0,class:"py-3"},W={key:0,class:"row"},X={class:"col-md-12"},Y={class:"card"},Z={key:0},ss={key:1},es={class:"row"},ts={class:"col-md-12 mb-3"},as={class:"col-md-3"},os={class:"data-view-box mb-3"},is={class:"item"},ns={class:"col-md-3"},ls={class:"data-view-box mb-3"},cs={class:"item"},ds={class:"col-md-3"},_s={class:"data-view-box mb-3"},rs={class:"item"},us={class:"col-md-3"},vs={class:"data-view-box mb-3"},ms={class:"item"},hs={class:"col-md-3"},bs={class:"data-view-box mb-3"},gs={class:"item"},ps={class:"col-md-3"},ks={class:"data-view-box mb-3"},fs={class:"item"},ys={key:0,class:"badge badge-primary"},ws={key:1,class:"badge badge-success"},$s={class:"col-md-3"},qs={class:"data-view-box mb-3"},Cs={class:"item"},Ds={class:"col-md-3"},Ns={class:"data-view-box mb-3"},Bs={class:"item"},Ss={key:1,class:"row"},Is={class:"col-md-12"},As={class:"card"},Qs={key:0},Vs={key:1},Ps={class:"row"},Ts={class:"col-md-12 mb-3"},xs={class:"col-md-12"},Es={class:"data-view-box mb-3"},Us={__name:"view_quotation",setup(Ls){const m=B().params.slack,d=u(!1),t=u([]),r=u(!1),o=S({...{server_messages:{type:"",messages:""},is_submitting:!1,invoice_slack:""}});I();const f=V(()=>P(()=>import("./QuotationProduct.hMk8wfZ0.js"),__vite__mapDeps([0,1,2,3,4,5])));A(()=>{y()});async function y(){d.value=!0,await axios.get("/api/v2/quotation",{params:{slack:m}}).then(e=>{t.value=e.data.data,o.invoice_slack=t.value.converted_invoice_slack,d.value=!1,r.value=!0}).catch(e=>{o.server_messages.type="error",o.server_messages.messages=e,d.value=!1,console.log(e)})}async function w(){d.value=!0,o.is_submitting=!0,await axios.get("/api/quotation_to_invoice",{params:{slack:m}}).then(e=>{if(e.data.status_code==200)toast.success(e.data.msg),console.log(" response.data.data.invoice =",e.data.data.invoice),o.invoice_slack=e.data.data.invoice.slack,o.server_messages.messages="";else{try{o.server_messages.type="error",o.server_messages.messages=JSON.parse(e.data.msg)}catch{o.server_messages.type="error",o.server_messages.messages=e.data.msg}o.is_submitting=!1}d.value=!1,r.value=!0,o.is_submitting=!1}).catch(e=>{o.is_submitting=!1,o.server_messages.type="error",o.server_messages.messages=e,d.value=!1,console.log(e)})}function $(){const e=router.resolve("/invoice/"+o.invoice_slack);window.open(e.href,"_blank")}return(e,q)=>{const C=p("Icon"),D=p("router-link"),N=T;return i(),g(x,null,{subheader:v(()=>[s("div",E,[s("div",L,[s("div",R,[s("div",z,[_(D,{class:"text-primary",to:"/quotations"},{default:v(()=>[_(C,{icon:"fa6-solid:chevron-left"}),l(" "+a(e.$t("Quotations")),1)]),_:1})])]),s("div",M,[s("h5",O,"#"+a(t.value.quotation_number),1)]),s("div",j,[t.value.status==1&&o.invoice_slack==null&&(t.value.converted_invoice_slack==null||t.value.converted_invoice_slack==null)?(i(),n("button",{key:0,class:"btn btn-warning btn-radius ms-2 btn-sm",disabled:o.is_submitting,onClick:w},a(e.$t("Convert to Invoice"))+" "+a(o.invoice_slack),9,J)):o.invoice_slack!=null&&t.value.status==1?(i(),n("button",{key:1,class:"btn btn-success btn-radius ms-2 btn-sm",onClick:$},a(e.$t("View Converted Invoice")),1)):(i(),n("a",F)),t.value.receipt_link!=null?(i(),n("a",{key:3,href:t.value.receipt_link,target:"_blank",class:"btn btn-light btn-text-primary ms-2 btn-sm"},a(e.$t("Print Now")),9,G)):c("",!0)])])])]),default:v(()=>{var h,b;return[s("div",H,[s("div",K,[o.server_messages.messages!=""?(i(),n("div",U,[_(N,{server_messages:o.server_messages},null,8,["server_messages"])])):c("",!0)]),t.value!=null?(i(),n("div",W,[s("div",X,[s("div",Y,[t.value==""?(i(),n("div",Z,[_(k,{color:"gray",size:"15px",class:"pt-2 pe-2"})])):(i(),n("div",ss,[s("div",es,[s("div",ts,[s("h5",null,a(e.$t("Basic Detail")),1)]),s("div",as,[s("div",os,[s("div",is,[s("b",null,a(e.$t("Supplier"))+":",1),l(" "+a((h=t.value.customer)==null?void 0:h.name),1)])])]),s("div",ns,[s("div",ls,[s("div",cs,[s("b",null,a(e.$t("Quotation No."))+":",1),l(" "+a(t.value.quotation_number),1)])])]),s("div",ds,[s("div",_s,[s("div",rs,[s("b",null,a(e.$t("Reference No."))+":",1),l(" "+a(t.value.reference_no),1)])])]),s("div",us,[s("div",vs,[s("div",ms,[s("b",null,a(e.$t("Quotation Date"))+":",1),l(" "+a(t.value.quotation_date_label),1)])])]),s("div",hs,[s("div",bs,[s("div",gs,[s("b",null,a(e.$t("Quotation Due Date"))+":",1),l(" "+a(t.value.quotation_due_date_label),1)])])]),s("div",ps,[s("div",ks,[s("div",fs,[s("b",null,a(e.$t("Status"))+":",1),t.value.status==0?(i(),n("span",ys,a(e.$t("Draft")),1)):c("",!0),t.value.status==1?(i(),n("span",ws,a(e.$t("Approved")),1)):c("",!0)])])]),s("div",$s,[s("div",qs,[s("div",Cs,[s("b",null,a(e.$t("Created By"))+":",1),l(" "+a((b=t.value.created_by)==null?void 0:b.name),1)])])]),s("div",Ds,[s("div",Ns,[s("div",Bs,[s("b",null,a(e.$t("Created At"))+":",1),l(" "+a(t.value.created_at_label),1)])])])])]))])])])):c("",!0),s("div",null,[r.value?(i(),g(Q(f),{key:0,quotation:t.value},null,8,["quotation"])):c("",!0)]),t.value!=null&&t.value.terms!=null?(i(),n("div",Ss,[s("div",Is,[s("div",As,[t.value==""?(i(),n("div",Qs,[_(k,{color:"gray",size:"15px",class:"pt-2 pe-2"})])):(i(),n("div",Vs,[s("div",Ps,[s("div",Ts,[s("h5",null,a(e.$t("Note/Terms and Conditions")),1)]),s("div",xs,[s("div",Es,[s("div",null,[s("p",null,a(t.value.terms!=null?t.value.terms:""),1)])])])])]))])])])):c("",!0)])]}),_:1})}}};export{Us as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/QuotationProduct.hMk8wfZ0.js","assets/index.GdMxdeuf.js","assets/index.1t-AB2n6.css","assets/index.esm.0vhAmrVd.js","assets/BeatLoader.5j6ku4bW.css","assets/ClipLoader.7xz7y6gZ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
