import{u as P,b as q,r as l,e as I,o as L,v as U,g as r,p as T,w as v,f as C,i as e,k as f,n as E,t as i,h,j as d,l as $,F as O,x as R,q as j,_ as J}from"./index.7OFNPsHl.js";import{_ as Y}from"./DefaultLayout.nvkZ4UhM.js";import{_ as z}from"./ListingSkeleton.iExoV4hO.js";/* empty css                                                   */import{c as G,a as H}from"./index.esm.cd1bITNA.js";import"./ClipLoader.1qNfpKDH.js";/* empty css                                                   */const K={class:"header-nav-wrap"},Q={class:"row align-items-center"},W={class:"col-auto"},X={class:"header-back-link"},Z={class:"col-auto"},ee={class:"fw-bold"},te={class:"content"},se={class:"row"},ae={class:"col-12"},oe={class:"section-title pb-3 text-muted"},ne={key:1,class:"table-responsive"},ie={class:"table table-list-data table-hover"},ce={class:"bg-light"},le={scope:"col"},re={scope:"col"},_e={key:0,scope:"col",width:"10%"},de=["onClick"],ue={class:"fw-bold highlighted-list-item"},he=["onClick"],me={key:0},pe={class:"form-field ps-5"},ge={class:"form-check form-switch form-switch-2"},ve=["onChange","checked"],fe={key:1},ye={class:"text-center py-3",colspan:"7"},Ve={__name:"taxes",setup(xe){const{t:o}=P(),S=j(()=>J(()=>import("./ViewTax.bp2fjJ4r.js"),__vite__mapDeps([0,1,2]))),n=q();l({frm_tax_type:o("Tax Type"),frm_tax_amount:o("Tax Amount"),tax_type:o("Select Type"),fee_type:o("Product Fee Type"),fee_name:o("Product Fee Name"),fee_value:o("Product Fee Value")}),l([{id:1,name:"Percentage"},{id:2,name:"Fix Amount"}]);const V={server_messages:{type:"",messages:""},is_listing:!1,is_submitting:!1,search_query:l("")},t=I({...V});G({tax_type:H()}),L(()=>{y()}),U(()=>t.search_query,_.debounce(()=>{y()},500));const p=l([]),F=l([]);async function y(s=1){t.is_listing=!0,await axios.get("/api/v2/taxes",{params:{page:s,paginate_limit:B.value,search_query:t.search_query}}).then(c=>{t.is_listing=!1,p.value=c.data.data,F.value=c.data.pagination}).catch(c=>{t.server_messages.type="error",t.server_messages.messages=c,t.is_listing=!1,console.log(c)})}const B=l();async function M(s){await Swal.fire({title:o("Are you sure about this because this action will reset the taxes for all the products!"),showCancelButton:!0,confirmButtonText:o("Yes"),confirmButtonColor:"#d33",cancelButtonText:o("Cancel")}).then(c=>{if(c.isConfirmed){var m=new FormData;m.append("slack",s),axios.post("/api/tax/set_default",m).then(a=>{if(a.data.status_code==200)n.setUserTax(a.data.data),n.setUserTaxId(a.data.data.id),toast.success(a.data.msg);else try{t.server_messages.type="error",t.server_messages.messages=JSON.parse(a.data.msg)}catch{t.server_messages.type="error",t.server_messages.messages=a.data.msg}}).catch(a=>{t.server_messages.type="error",t.server_messages.messages=a,console.log(a)})}else router.go()})}const g=l(!1),x=l([]);function w(s){g.value=!0,x.value=s}function N(){g.value=!1}return(s,c)=>{const m=C("Icon"),a=C("router-link"),k=z,A=Y;return r(),T(A,null,{subheader:v(()=>[e("div",K,[e("div",Q,[e("div",W,[e("div",X,[f(a,{class:"text-primary",to:"/settings"},{default:v(()=>[f(m,{icon:"fa6-solid:chevron-left"}),E(" "+i(s.$t("Settings")),1)]),_:1})])]),e("div",Z,[e("h5",ee,i(s.$t("Taxes")),1)])])])]),default:v(()=>[e("div",te,[e("div",se,[e("div",ae,[e("h5",oe,i(s.$t("Taxes")),1),t.is_listing?(r(),T(k,{key:0})):(r(),h("div",ne,[e("table",ie,[e("thead",ce,[e("tr",null,[e("th",le,i(s.$t("Name")),1),e("th",re,i(s.$t("Percentages")),1),d(n).isMerchant||d(n).isUser?(r(),h("th",_e,i(s.$t("Default Tax/Force Reset")),1)):$("",!0)])]),e("tbody",null,[p.value!=""?(r(!0),h(O,{key:0},R(p.value,(u,D)=>(r(),h("tr",{key:D},[e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewTaxModal",onClick:b=>w(u)},[e("div",null,[e("span",ue,i(u.name),1)])],8,de),e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewTaxModal",onClick:b=>w(u)},i(u.total_percentage)+"% ",9,he),d(n).isMerchant||d(n).isUser?(r(),h("td",me,[e("div",pe,[e("div",ge,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"Status_id",onChange:b=>M(u.slack),checked:d(n).user.tax!=""&&d(n).user.tax!=null&&u.slack==d(n).user.tax.slack},null,40,ve)])])])):$("",!0)]))),128)):(r(),h("tr",fe,[e("td",ye,i(s.$t("No Data Found")),1)]))])])]))])])]),f(d(S),{show_view_tax_modal:g.value,tax:x.value,onCloseViewTaxModal:N},null,8,["show_view_tax_modal","tax"])]),_:1})}}};export{Ve as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ViewTax.bp2fjJ4r.js","assets/index.7OFNPsHl.js","assets/index.1t-AB2n6.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
