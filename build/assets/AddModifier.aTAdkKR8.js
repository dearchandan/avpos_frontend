import S from"./ServerMessage.Wf7puwQc.js";import{u as x,r as A,b as $,d as B,e as C,P as U,v as D,g as l,h as r,i as a,t as m,k as n,w as j,Q as q,K as p,N as E,l as v,p as F,j as b}from"./index.GdMxdeuf.js";import{F as I}from"./vee-validate.esm.9aElOHQY.js";import{c as O,a as z,e as J}from"./index.esm.0vhAmrVd.js";import{_ as h}from"./VTextInput.ZgtOiOMJ.js";/* empty css                                                   */import{C as K}from"./ClipLoader.UcGuNCxH.js";import"./VTooltip.Ewb958d6.js";/* empty css                                                   */const L={class:"modal hide",id:"addModifierModal",tabindex:"-1","aria-labelledby":"Add Modifier","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},P={class:"modal-dialog modal-dialog-centered modal-lg"},Q={class:"modal-content"},R={class:"modal-header"},T={key:0,class:"modal-title"},G={key:1,class:"modal-title"},H={class:"modal-body"},W={class:"row"},X={class:"col-md-6"},Y={class:"col-md-6"},Z={class:"col"},ee={class:"form-field"},se={class:"form-check form-switch"},ae={class:"form-check-label",for:"status"},ie={key:0,class:"py-3"},te={class:"mt-2 text-end"},oe=["disabled"],de={key:1,class:"pt-0"},le={key:2,class:"pt-0"},be={__name:"AddModifier",props:{show_add_modifier_modal:Boolean,edit_data:{type:[Array,Object]}},emits:["closeAddModifierModal"],setup(g,{emit:y}){const{t:o}=x(),_=A({modifier_name:o("Modifier Name"),modifier_name_ar:o("Modifier Name (Arabic)")}),M=$();B(()=>M.user.currency.symbol);const c={server_messages:{type:"",messages:""},is_saving:!1,modifier_id:"",modifier_name:"",modifier_name_ar:"",allow_multiple_selections:!1},e=C({...c}),w=O({modifier_name:z().required(o("name is required",{name:o("Modifier Name")})).min(3,o("name must be at least n characters",{name:o("Modifier Name"),number:3})).max(20,o("Must be less than 20 characters",{name:o("Modifier Name"),number:20})),allow_multiple_selections:J().label("Status")}),k=y,f=g;U(f,"edit_data"),D(()=>f.edit_data,s=>{s&&(e.modifier_name=s.name,e.modifier_name_ar=s.name_ar!=null?s.name_ar:"",e.allow_multiple_selections=s.allow_multiple_selections==1,e.modifier_id=s.id)});function u(){document.getElementById("add_modifier_form").reset(),N(),document.getElementById("close_btn").click(),k("closeAddModifierModal")}async function V(){var s=new FormData;s.append("modifier_id",e.modifier_id),s.append("modifier_name",e.modifier_name),s.append("modifier_name_ar",e.modifier_name_ar),s.append("allow_multiple_selections",e.allow_multiple_selections);var i=e.modifier_id!=""?"/api/modifier/update":"/api/modifier/save";await axios.post(i,s).then(t=>{if(e.is_saving=!0,t.data.status_code==200)toast.success(t.data.msg),e.is_saving=!1,u();else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(t.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=t.data.msg}e.is_saving=!1}}).catch(t=>{e.server_messages.type="error",e.server_messages.messages=t,e.is_saving=!1,console.log(t)})}function N(){Object.assign(e,c)}return(s,i)=>{const t=S;return l(),r("div",L,[a("div",P,[a("div",Q,[a("div",R,[e.modifier_id==""?(l(),r("h5",T,m(s.$t("Add Modifier")),1)):(l(),r("h5",G,"Update Modifier")),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:u,id:"close_btn"})]),a("div",H,[n(b(I),{"validation-schema":b(w),onSubmit:V,enctype:"multipart/form-data","initial-values":e,id:"add_modifier_form"},{default:j(()=>[a("div",W,[a("div",X,[n(h,{type:"text",name:"modifier_name",modelValue:e.modifier_name,"onUpdate:modelValue":i[0]||(i[0]=d=>e.modifier_name=d),label:_.value.modifier_name,required:!0},null,8,["modelValue","label"])]),a("div",Y,[n(h,{type:"text",name:"modifier_name_ar",modelValue:e.modifier_name_ar,"onUpdate:modelValue":i[1]||(i[1]=d=>e.modifier_name_ar=d),label:_.value.modifier_name_ar},null,8,["modelValue","label"])]),a("div",Z,[a("div",ee,[a("div",se,[p(a("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status","onUpdate:modelValue":i[2]||(i[2]=d=>e.allow_multiple_selections=d)},null,512),[[q,e.allow_multiple_selections]]),a("label",ae,m(s.$t("Allow Multiple Selections")),1)])])]),p(a("input",{type:"hidden","onUpdate:modelValue":i[3]||(i[3]=d=>e.modifier_id=d)},null,512),[[E,e.modifier_id]])]),e.server_messages.messages!=""?(l(),r("div",ie,[n(t,{server_messages:e.server_messages},null,8,["server_messages"])])):v("",!0),a("div",te,[a("button",{type:"submit",class:"btn btn-primary",disabled:e.is_saving},[e.is_saving?(l(),F(K,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):v("",!0),e.is_saving?(l(),r("span",de,m(s.$t("Saving...")),1)):(l(),r("span",le,m(s.$t("Save")),1))],8,oe)])]),_:1},8,["validation-schema","initial-values"])])])])])}}};export{be as default};
