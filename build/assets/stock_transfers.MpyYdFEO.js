import{u as ne,b as le,r,e as P,o as ie,v as de,g as l,p as F,w as L,I as ce,f as re,k as v,i as e,t as o,K as k,bG as O,h as i,l as c,j as w,L as U,N as _e,F as V,x as N,O as ue,q as me,_ as he}from"./index.ri7Y_V5F.js";import{_ as pe}from"./DefaultLayout.EMHfdzn0.js";import{_ as ge}from"./PaginateLimit.Qyl6CO-f.js";import{_ as ve}from"./ActionButtonGroup.UoCDvTnh.js";import{_ as fe}from"./ListingSkeleton.PW5leU6x.js";import{_ as be}from"./VSelect.ijXeZp1F.js";import{_ as ye}from"./InventoryMenu.rcnIHVl3.js";import{j as ke}from"./vue-datepicker.gRWbN_6J.js";import"./ClipLoader.4-rIzqtH.js";/* empty css                                                   */import"./vee-validate.esm.0La7AMjT.js";/* empty css                                                                */const we={class:"content"},$e={class:"page-heading"},Se={class:"row align-items-center justify-content-between mb-3 g-3"},Ce={class:"col-auto order-1 order-md-1"},Ae={class:"mb-0"},Te={class:"col-auto me-auto ms-auto ms-md-0 order-3 order-md-2"},Me={class:"btn-group radio-btn-group"},Pe={class:"btn btn-sm",for:"r-sent-stock"},Ve={class:"btn btn-sm",for:"r-sent-stock2"},Ne={key:0,class:"col-auto order-2 order-md-3"},Re={class:"row align-items-end justify-content-between g-3"},De={class:"col col-lg-auto order-2 order-md-1"},Be={class:"row align-items-end g-3"},je={class:"col-6 col-md-auto"},Ee={class:"form-field"},Fe={for:"",class:"form-label"},Le={class:"col-6 col-md-auto"},Oe={class:"form-field"},Ue={for:"",class:"form-label"},qe={class:"col-6 col-md-auto"},Ie={class:"form-field"},Je={for:"",class:"form-label"},Ge={value:""},Ke={value:"0"},ze={value:"1"},We={value:"2"},Ye={value:"3"},He={value:"4"},Qe={class:"col-auto col-md-auto"},Xe={class:"col-12 col-md-4 col-lg-3 order-1 order-md-2 d-none d-md-block"},Ze={class:"form-field mb-0"},xe={class:"field-icon"},et=["placeholder"],tt={class:"icon"},st={key:0},ot={key:1,class:"table-responsive"},at={key:0,class:"table table-list-data table-hover"},nt={class:"bg-light"},lt={scope:"col",width:"10%"},it={scope:"col",width:"60%"},dt={scope:"col",width:"10%"},ct={scope:"col",width:"10%"},rt={key:0,scope:"col",class:"text-end",width:"10%"},_t=["onClick"],ut=["onClick"],mt=["onClick"],ht={key:0,class:"badge badge-primary"},pt={key:1,class:"badge badge-info"},gt={key:2,class:"badge badge-success"},vt={key:3,class:"badge badge-warning"},ft={key:4,class:"badge badge-danger"},bt={key:0,class:"text-end"},yt={key:1},kt={class:"text-center py-3",colspan:"8"},wt={key:1,class:"table table-list-data table-hover"},$t={class:"bg-light"},St={scope:"col",width:"10%"},Ct={scope:"col",width:"70%"},At={scope:"col",width:"10%"},Tt={scope:"col",width:"10%"},Mt=["onClick"],Pt=["onClick"],Vt=["onClick"],Nt={key:0},Rt=["onUpdate:modelValue","id","onChange"],Dt=["value"],Bt={key:1},jt={key:0,class:"badge badge-success"},Et={key:1,class:"badge badge-warning"},Ft={key:2,class:"badge badge-danger"},Lt={key:1},Ot=e("td",{class:"text-center py-3",colspan:"8"},"No Data Found",-1),Ut=[Ot],qt={class:"data-footer"},It={class:"row align-items-center justify-content-between"},Jt={class:"col-auto"},Gt={class:"col-auto"},as={__name:"stock_transfers",setup(Kt){const{t:b}=ne(),{isAuthorized:R}=ce(),q=me(()=>he(()=>import("./AddStockTransfer.ywDb2ZwE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])));le();const $=r(!1);function I(){$.value=!0}function J(){$.value=!1,h()}const G={server_messages:{type:"",messages:""},is_listing:!1,list_type:2,search_query:r("")},K=b("Search by reference no..."),n=P({...G});ie(()=>{x(),h(),Z()}),de(()=>n.search_query,_.debounce(()=>{h()},500));const y=r([]),S=r([]);r([{key:"0",value:"Pending"},{key:"1",value:"Approval Pending"}]);const z=r([{key:"1",value:"Approval Pending"},{key:"4",value:"Rejected"}]);async function D(t){n.list_type=t.target.value,h(1)}async function h(t=1){n.is_listing=!0,await axios.get("/api/v2/stock_transfers",{params:{page:t,paginate_limit:B.value,search_query:n.search_query,filter:p,list_type:n.list_type}}).then(a=>{y.value=a.data.data.data,S.value=a.data.data.pagination,n.is_listing=!1}).catch(a=>{n.server_messages.type="error",n.server_messages.messages=a,n.is_listing=!1,console.log(a)})}const B=r();async function W(t){B.value=t,await h()}async function Y(t,a){var d=new FormData;d.append("slack",a),d.append("status",t.target.value),await axios.post("/api/stock_transfer/update_status",d).then(m=>{if(m.data.status_code==200)toast.success(m.data.msg);else try{n.server_messages.type="error",n.server_messages.messages=JSON.parse(m.data.msg)}catch{n.server_messages.type="error",n.server_messages.messages=m.data.msg}}).catch(m=>{n.server_messages.type="error",n.server_messages.messages=m,console.log(m)})}const H=r(!1),C=P({dates:r(),branch:r(),status:r("")}),p=P({...C}),A=r(!1);async function T(){JSON.stringify(p)!=JSON.stringify(C)&&(A.value=!0),H.value=!1,await h()}function Q(){Object.assign(p,C),A.value=!1,h()}function f(t){router.push("/stock_transfer/"+t)}async function X(t){var a=!1;await Swal.fire({title:b("Do you want to delete this stock transfer?"),showCancelButton:!0,confirmButtonText:b("Yes, Delete"),confirmButtonColor:"#d33",cancelButtonText:b("Cancel")}).then(d=>{d.isConfirmed&&(a=!0)}),a&&await axios.post("/api/stock_transfer/delete",{slack:t}).then(d=>{if(d.data.status_code==200)toast.success(d.data.msg),h();else try{n.server_messages.type="error",n.server_messages.messages=JSON.parse(d.data.msg)}catch{n.server_messages.type="error",n.server_messages.messages=d.data.msg}}).catch(d=>{n.server_messages.type="error",n.server_messages.messages=d,console.log(d)})}const j=r([]);async function Z(){let t=await axios.get("api/v2/branches/get_to_branches");t=t.data.data,_.forEach(t,a=>{let d={key:a.slack,value:a.code+" - "+a.name};j.value.push(d)})}const g=r({write:!1,delete:!1});function x(){g.value={write:R("A_WRITE_STOCK_TRANSFER"),delete:R("A_DELETE_STOCK_TRANSFER")}}return(t,a)=>{const d=ye,m=be,E=re("Icon"),ee=fe,te=ve,se=ge,oe=pe;return l(),F(oe,null,{subheader:L(()=>[v(d)]),default:L(()=>[e("div",we,[e("div",$e,[e("div",Se,[e("div",Ce,[e("h2",Ae,o(t.$t("Stock Transfer")),1)]),e("div",Te,[e("div",Me,[k(e("input",{class:"btn-check",type:"radio",name:"list_type",checked:"","onUpdate:modelValue":a[0]||(a[0]=s=>n.list_type=s),value:1,onChange:a[1]||(a[1]=s=>D(s)),id:"r-sent-stock"},null,544),[[O,n.list_type]]),e("label",Pe,o(t.$t("Sent Stock")),1),k(e("input",{class:"btn-check",type:"radio",name:"list_type","onUpdate:modelValue":a[2]||(a[2]=s=>n.list_type=s),value:2,onChange:a[3]||(a[3]=s=>D(s)),id:"r-sent-stock2"},null,544),[[O,n.list_type]]),e("label",Ve,o(t.$t("Received Stock")),1)])]),g.value.write?(l(),i("div",Ne,[e("a",{href:"#",class:"btn btn-sm btn-light-primary2","data-bs-toggle":"modal",onClick:a[4]||(a[4]=s=>I()),"data-bs-target":"#addStockTransferModal"},"+ "+o(t.$t("New Stock Transfer")),1)])):c("",!0)]),e("div",Re,[e("div",De,[e("div",Be,[e("div",je,[e("div",Ee,[e("label",Fe,o(t.$t("Date")),1),v(w(ke),{range:"",modelValue:p.dates,"onUpdate:modelValue":[a[5]||(a[5]=s=>p.dates=s),a[6]||(a[6]=s=>T())],format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid form-control-sm"},null,8,["modelValue"])])]),e("div",Le,[e("div",Oe,[e("label",Ue,o(t.$t("Select Branch")),1),v(m,{name:"branch",modelValue:p.branch,"onUpdate:modelValue":a[7]||(a[7]=s=>p.branch=s),placeholder:w(b)("All"),options:j.value,onChange:T,islabel:!1,height_sm:"true"},null,8,["modelValue","placeholder","options"])])]),e("div",qe,[e("div",Ie,[e("label",Je,o(t.$t("Status")),1),k(e("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":a[8]||(a[8]=s=>p.status=s),onChange:T},[e("option",Ge,o(t.$t("All")),1),e("option",Ke,o(t.$t("Pending")),1),e("option",ze,o(t.$t("Approval Pending")),1),e("option",We,o(t.$t("Accepted")),1),e("option",Ye,o(t.$t("Partial Accepted")),1),e("option",He,o(t.$t("Rejected")),1)],544),[[U,p.status]])])]),e("div",Qe,[A.value?(l(),i("button",{key:0,class:"btn btn-sm btn-light-danger",onClick:Q},o(t.$t("Clear")),1)):c("",!0)])])]),e("div",Xe,[e("div",Ze,[e("div",xe,[k(e("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:w(K),"onUpdate:modelValue":a[9]||(a[9]=s=>n.search_query=s)},null,8,et),[[_e,n.search_query]]),e("div",tt,[v(E,{icon:"fa6-solid:magnifying-glass"})])])])])])]),n.is_listing?(l(),i("div",st,[v(ee)])):(l(),i("div",ot,[n.list_type==1?(l(),i("table",at,[e("thead",nt,[e("tr",null,[e("th",lt,o(t.$t("Reference Number")),1),e("th",it,o(t.$t("Receiving Branch")),1),e("th",dt,o(t.$t("Date")),1),e("th",ct,o(t.$t("Status")),1),g.value.write||g.value.delete?(l(),i("th",rt,o(t.$t("Action")),1)):c("",!0)])]),e("tbody",null,[y.value!=""?(l(!0),i(V,{key:0},N(y.value,(s,M)=>(l(),i("tr",{key:M},[e("td",{stock_transfer:"button","data-bs-toggle":"modal","data-bs-target":"#viewStockTransferModal",onClick:u=>f(s.slack)},o(s.reference_no),9,_t),e("td",{stock_transfer:"button","data-bs-toggle":"modal","data-bs-target":"#viewStockTransferModal",onClick:u=>f(s.slack)},o(s.to_branch.name),9,ut),e("td",{stock_transfer:"button","data-bs-toggle":"modal","data-bs-target":"#viewStockTransferModal",onClick:u=>f(s.slack)},o(s.transfer_at_label),9,mt),e("td",null,[s.status==0?(l(),i("span",ht,o(t.$t("Pending")),1)):c("",!0),s.status==1?(l(),i("span",pt,o(t.$t("Approval Pending")),1)):c("",!0),s.status==2?(l(),i("span",gt,o(t.$t("Accepted")),1)):c("",!0),s.status==3?(l(),i("span",vt,o(t.$t("Partial Accepted")),1)):c("",!0),s.status==4?(l(),i("span",ft,o(t.$t("Rejected")),1)):c("",!0)]),g.value.write||g.value.delete?(l(),i("td",bt,[s.status==0||s.status==1?(l(),F(te,{key:0,permissions:g.value,onDelete:X,slack:s.slack},null,8,["permissions","slack"])):c("",!0)])):c("",!0)]))),128)):(l(),i("tr",yt,[e("td",kt,o(t.$t("No Data Found")),1)]))])])):c("",!0),n.list_type==2?(l(),i("table",wt,[e("thead",$t,[e("tr",null,[e("th",St,o(t.$t("Reference Number")),1),e("th",Ct,o(t.$t("Sent Branch")),1),e("th",At,o(t.$t("Date")),1),e("th",Tt,o(t.$t("Status")),1)])]),e("tbody",null,[y.value!=""?(l(!0),i(V,{key:0},N(y.value,(s,M)=>(l(),i("tr",{key:M},[e("td",{stock_transfer:"button","data-bs-toggle":"modal","data-bs-target":"#viewStockTransferModal",onClick:u=>f(s.slack)},o(s.reference_no),9,Mt),e("td",{stock_transfer:"button","data-bs-toggle":"modal","data-bs-target":"#viewStockTransferModal",onClick:u=>f(s.slack)},o(s.from_branch.name),9,Pt),e("td",{stock_transfer:"button","data-bs-toggle":"modal","data-bs-target":"#viewStockTransferModal",onClick:u=>f(s.slack)},o(s.transfer_at_label),9,Vt),g.value.write&&s.status==0||s.status==1?(l(),i("td",Nt,[k(e("select",{class:"form-control form-control-solid","onUpdate:modelValue":u=>s.status=u,name:"from_status",id:s.slack,onChange:u=>Y(u,s.slack)},[(l(!0),i(V,null,N(z.value,(u,ae)=>(l(),i("option",{value:u.key,key:ae},o(u.value),9,Dt))),128))],40,Rt),[[U,s.status]])])):(l(),i("td",Bt,[s.status==2?(l(),i("span",jt,o(t.$t("Accepted")),1)):c("",!0),s.status==3?(l(),i("span",Et,o(t.$t("Partial Accepted")),1)):c("",!0),s.status==4?(l(),i("span",Ft,o(t.$t("Rejected")),1)):c("",!0)]))]))),128)):(l(),i("tr",Lt,Ut))])])):c("",!0)])),e("div",qt,[e("div",It,[e("div",Jt,[v(se,{onPaginate_limit_update:W,pagination:S.value},null,8,["pagination"])]),e("div",Gt,[v(w(ue),{data:S.value,limit:5,onPaginationChangePage:h},null,8,["data"])])])])]),v(w(q),{show_add_stock_transfer_modal:$.value,onCloseAddStockTransferModal:J},null,8,["show_add_stock_transfer_modal"])]),_:1})}}};export{as as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AddStockTransfer.ywDb2ZwE.js","assets/ServerMessage.qNo4NwTp.js","assets/index.ri7Y_V5F.js","assets/index.1t-AB2n6.css","assets/VTextInput.o2P1IcEE.js","assets/VTooltip.a7qKl6DY.js","assets/vee-validate.esm.0La7AMjT.js","assets/VSelect.ijXeZp1F.js","assets/VSelect.6khW9yoi.css","assets/index.esm.wERziE-M.js","assets/ClipLoader.4-rIzqtH.js","assets/ClipLoader.7xz7y6gZ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
