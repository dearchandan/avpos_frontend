import{_ as N}from"./EditFormSkeleton.hbjdnq7m.js";import S from"./ServerMessage.I5ol-gtz.js";import{u as U,a as x,r as g,e as A,o as I,g as n,p as v,w as u,f as k,i as t,k as l,n as M,t as d,j as _,h as m,l as q,K as B,Q as F}from"./index.7OFNPsHl.js";import{_ as D}from"./DefaultLayout.nvkZ4UhM.js";import{F as E}from"./vee-validate.esm.N3uz7Rsk.js";import{c as Q,a as h}from"./index.esm.cd1bITNA.js";import{_ as f}from"./VTextInput.VtSvZjuc.js";import{C as P}from"./ClipLoader.1qNfpKDH.js";/* empty css                                                                */import"./VTooltip.n3SV8A0p.js";/* empty css                                                   */const T={class:"header-nav-wrap"},j={class:"row align-items-center"},z={class:"col-auto"},J={class:"header-back-link"},K={class:"col-auto"},L={key:0,class:"fw-bold"},O={key:1,class:"fw-bold"},G={key:0,class:"content"},H={class:"row card-strash"},W={key:0,class:"py-3"},X={class:"col-md-12"},Y={class:"row"},Z={class:"col-md-12"},ee={class:"card"},se={class:"row"},te={class:"col-md-3"},ae={class:"col-md-3"},oe={class:"col-md-3"},re={class:"col-md-3"},ne={class:"form-field pt-2"},ie={class:"form-check form-switch pt-4"},ce={class:"form-check-label",for:"status"},le={class:"text-end"},_e=["disabled"],de={key:1,class:"pt-0"},me={key:2,class:"pt-0"},Ce={__name:"add_receipt_user",setup(ue){const{t:o}=U(),i=x().params.slack,p=g({name:o("Name"),iqama_or_passport_number:o("IQAMA/Passport No."),country:o("Country")}),e=A({...{server_messages:{type:"",messages:""},is_submitting:!1,name:"",iqama_or_passport_number:"",country:"",status:!0}});let w=Q({name:h().required(o("name is required",{name:o("Name")})),iqama_or_passport_number:h().required(o("name is required",{name:o("IQAMA/Passport No.")})),country:h().required(o("name is required",{name:o("Country")}))});I(()=>{i!=""&&i!=null&&V()});const b=g(!1);async function V(){let s=await axios.get("/api/voucher_user",{params:{slack:i,type:2}});s.data.data&&(e.rent_receipt_user_slack=s.data.data.slack,e.name=s.data.data.name,e.iqama_or_passport_number=s.data.data.iqama_or_passport_number,e.country=s.data.data.country,e.status=s.data.data.status==1),b.value=!0}async function R(){e.is_submitting=!0;var s=new FormData;s.append("name",e.name),s.append("iqama_or_passport_number",e.iqama_or_passport_number),s.append("country",e.country),s.append("status",e.status),s.append("type",2),s.append("slack",e.rent_receipt_user_slack);var a=e.rent_receipt_user_slack!=""&&e.rent_receipt_user_slack!=null?"/api/voucher_user/update":"/api/voucher_user/save";await axios.post(a,s,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>{if(r.data.status_code==200)toast.success(r.data.msg),e.is_submitting=!1,router.push("/rent_receipt_users");else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(r.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=r.data.msg}e.is_submitting=!1}}).catch(r=>{e.server_messages.type="error",e.server_messages.messages=r,e.is_submitting=!1,console.log(r)})}return(s,a)=>{const r=k("Icon"),y=k("router-link"),$=S,C=N;return n(),v(D,null,{subheader:u(()=>[t("div",T,[t("div",j,[t("div",z,[t("div",J,[l(y,{class:"text-primary",to:"/voucher_users"},{default:u(()=>[l(r,{icon:"fa6-solid:chevron-left"}),M(" "+d(s.$t("Rent Receipt Users")),1)]),_:1})])]),t("div",K,[_(i)==null||_(i)==""?(n(),m("h5",L,d(s.$t("Add Rent Receipt User")),1)):(n(),m("h5",O,d(s.$t("Edit Rent Receipt User")),1))])])])]),default:u(()=>[_(i)==""||_(i)==null||_(i)!=""&&b.value?(n(),m("div",G,[l(_(E),{"validation-schema":_(w),onSubmit:R,enctype:"multipart/form-data","initial-values":e},{default:u(()=>[t("div",H,[e.server_messages.messages!=""?(n(),m("div",W,[l($,{server_messages:e.server_messages},null,8,["server_messages"])])):q("",!0),t("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[t("div",se,[t("div",te,[l(f,{type:"text",name:"name",modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=c=>e.name=c),label:p.value.name,required:!0},null,8,["modelValue","label"])]),t("div",ae,[l(f,{type:"text",name:"iqama_or_passport_number",modelValue:e.iqama_or_passport_number,"onUpdate:modelValue":a[1]||(a[1]=c=>e.iqama_or_passport_number=c),label:p.value.iqama_or_passport_number,required:!0},null,8,["modelValue","label"])]),t("div",oe,[l(f,{type:"text",name:"country",modelValue:e.country,"onUpdate:modelValue":a[2]||(a[2]=c=>e.country=c),label:p.value.country,required:!0},null,8,["modelValue","label"])]),t("div",re,[t("div",ne,[t("div",ie,[B(t("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status",checked:"","onUpdate:modelValue":a[3]||(a[3]=c=>e.status=c)},null,512),[[F,e.status]]),t("label",ce,d(s.$t("Active")),1)])])])])])])])])]),t("div",le,[t("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(n(),v(P,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):q("",!0),e.is_submitting?(n(),m("span",de,d(s.$t("Saving...")),1)):(n(),m("span",me,d(s.$t("Save")),1))],8,_e)])]),_:1},8,["validation-schema","initial-values"])])):(n(),v(C,{key:1}))]),_:1})}}};export{Ce as default};
