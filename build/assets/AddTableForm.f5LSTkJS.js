import{u as x,s as F,e as O,r as h,P as U,E as g,o as j,g as c,h as m,i as s,j as a,t as _,k as u,w as P,p as k,l as V,q as L,_ as R}from"./index.ri7Y_V5F.js";import{_ as z}from"./VTextInput.o2P1IcEE.js";import{_ as G}from"./VSelectInput.ncg8IJ_w.js";import{F as J}from"./vee-validate.esm.0La7AMjT.js";import{c as H,a as T,d as K}from"./index.esm.wERziE-M.js";/* empty css                                                   */import{C as Q}from"./ClipLoader.4-rIzqtH.js";import{u as W}from"./global.f8Ro4KP-.js";import"./VTooltip.a7qKl6DY.js";/* empty css                                                   */const X={class:"modal hide",id:"addTableModal",tabindex:"-1","aria-labelledby":"Add Table","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},Y={class:"modal-dialog modal-md modal-dialog-centered"},Z={class:"modal-content"},ee={class:"modal-header"},ae={key:0,class:"modal-title"},te={key:1,class:"modal-title"},se={class:"modal-body"},le={class:"row"},ie={class:"col-md-12"},ne={class:"white-card"},de={class:"row"},oe={class:"col-12"},ce={class:"col-12"},re={class:"col-12"},me={class:"mt-2 text-end"},_e=["disabled"],ue={key:1,class:"pt-0"},be={key:2,class:"pt-0"},Me={__name:"AddTableForm",props:["show_add_table_modal","edit_table_data","dinein_areas"],emits:["closeAddTableModal","getDineinAreas","closeModal"],setup(A,{emit:C}){const{t}=x();W(),F(Multiselect);const b=A,n=O({type:"",messages:""}),e=h({is_submitting:!1,dinein_area_slack:"",name:"",table_capacity:"",type:"",table_slack:""}),v=t("Select Dinein Area"),M=t("Table Name"),q=t("Capacity"),w=H({dinein_area_slack:T().required(t("name is required",{name:t("Dinein Area")})),name:T().required(t("name is required",{name:t("Table Name")})).min(3,t("name must be at least n characters",{name:t("Table Name"),number:3})),table_capacity:K().typeError(t("must be a number",{name:t("Capacity")})).required(t("name is required",{name:t("Capacity")})).min(0,t("must be greater than or equal to 0",{name:t("Capacity")}))}),y=C,f=h([]),d=U(b,"edit_table_data");g(()=>{d.value!=null&&(e.value.name=d.value.name,e.value.table_capacity=d.value.table_capacity,e.value.table_slack=d.value.slack,e.value.dinein_area_slack=d.value.dinein_area_id&&d.value.dinein_area?d.value.dinein_area.slack:"")}),j(()=>{}),g(()=>{b.dinein_areas!=null&&(f.value=b.dinein_areas)});async function E(o){e.value.is_submitting=!0;var l=new FormData;l.append("dinein_area_slack",o.dinein_area_slack),l.append("name",o.name),l.append("table_capacity",o.table_capacity),l.append("table_slack",e.value.table_slack);var p=e.value.table_slack!=""&&e.value.table_slack!=null?"/api/table/update":"/api/table/save";await axios.post(p,l).then(i=>{if(i.data.status_code==200)toast.success(i.data.msg),e.value.is_submitting=!1,e.value.name="",e.value.table_capacity="",e.value.dinein_area_slack="",e.value.table_slack="",document.getElementById("add_table_form").reset(),S();else{try{n.type="error",n.messages=JSON.parse(i.data.msg)}catch{n.type="error",n.messages=i.data.msg}e.value.is_submitting=!1}}).catch(i=>{n.type="error",n.messages=i,e.value.is_submitting=!1,console.log(i)})}function S(){y("closeAddTableModal"),document.getElementById("add_table_form").reset(),B(),$("#addTableModal").modal("hide")}function B(){d.value=[],Object.assign(e,e)}function D(){Object.assign(e,e),document.getElementById("add_table_form").reset(),y("closeModal"),$("#addTableModal").modal("hide")}const I=L(()=>R(()=>import("./ServerMessage.qNo4NwTp.js"),__vite__mapDeps([0,1,2])));return(o,l)=>{const p=G,i=z;return c(),m("div",X,[s("div",Y,[s("div",Z,[s("div",ee,[a(e).table_slack!=null&&a(e).table_slack!=""?(c(),m("h5",ae,_(o.$t("Update Table")),1)):(c(),m("h5",te,_(o.$t("Add Table")),1)),s("button",{type:"button",class:"btn-close",onClick:D,"aria-label":"Close",id:"close_btn"})]),s("div",se,[u(a(J),{"validation-schema":a(w),onSubmit:E,enctype:"multipart/form-data","initial-values":a(e),id:"add_table_form"},{default:P(({setFieldValue:N,values:pe})=>[s("div",le,[s("div",ie,[s("div",ne,[s("div",de,[s("div",oe,[u(p,{label:a(v),required:"",options:a(f),name:"dinein_area_slack",placeholder:a(v),modelValue:a(e).dinein_area_slack,"onUpdate:modelValue":l[0]||(l[0]=r=>a(e).dinein_area_slack=r)},null,8,["label","options","placeholder","modelValue"])]),s("div",ce,[u(i,{type:"text",name:"name",label:a(M),required:!0,modelValue:a(e).name,"onUpdate:modelValue":l[1]||(l[1]=r=>a(e).name=r)},null,8,["label","modelValue"])]),s("div",re,[u(i,{type:"number",name:"table_capacity",label:a(q),required:!0,modelValue:a(e).table_capacity,"onUpdate:modelValue":l[2]||(l[2]=r=>a(e).table_capacity=r)},null,8,["label","modelValue"])])])])])]),a(n).messages!=""?(c(),k(a(I),{key:0,class:"py-3",server_messages:a(n)},null,8,["server_messages"])):V("",!0),s("div",me,[s("button",{type:"submit",class:"btn btn-primary",disabled:a(e).is_submitting},[a(e).is_submitting?(c(),k(Q,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):V("",!0),a(e).is_submitting?(c(),m("span",ue,_(o.$t("Saving...")),1)):(c(),m("span",be,_(o.$t("Save")),1))],8,_e)])]),_:1},8,["validation-schema","initial-values"])])])])])}}};export{Me as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ServerMessage.qNo4NwTp.js","assets/index.ri7Y_V5F.js","assets/index.1t-AB2n6.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
