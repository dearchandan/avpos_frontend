import A from"./ServerMessage.qNo4NwTp.js";import{_ as L}from"./VTextArea.lLiSVu42.js";import{F as S}from"./vee-validate.esm.0La7AMjT.js";import{c as $,a as w}from"./index.esm.wERziE-M.js";import{u as B,r as V,e as C,b as D,g as i,h as o,i as a,t as c,k as d,w as M,j as l,l as g,p as x}from"./index.ri7Y_V5F.js";import{C as N}from"./ClipLoader.4-rIzqtH.js";import"./VTooltip.a7qKl6DY.js";/* empty css                                                   */const q={class:"modal modal-lg hide",id:"addActivityLogModal",tabindex:"-1","aria-labelledby":"Add ActivityLog","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},E={class:"modal-dialog modal-dialog-centered"},F={class:"modal-content"},I={class:"modal-header"},j={key:0,class:"modal-title"},O={key:1,class:"modal-title"},U={class:"modal-body"},z={class:"row"},J={class:"col-12"},T={key:0,class:"py-3"},G={class:"mt-2 text-end"},H=["disabled"],K={key:1,class:"pt-0"},P={key:2,class:"pt-0"},te={__name:"AddActivityLog",props:{show_add_activity_log_modal:Boolean},emits:["closeAddActivityLogModal"],setup(Q,{emit:p}){const{t:n}=B(),m={server_messages:{type:"",messages:""},is_saving:!1,is_listing:!1,slack:"",description:""},u=V([{id:"",unit_name:"",unit_name_ar:"",abbreviation:"",abbreviation_ar:""}]),e=C({...m});D();const y=$({description:w().required(n("name is required",{name:n("Activity Log Description")})).min(10,n("name must be at least n characters",{name:n("Activity Log Description"),number:10}))}),b=p;function _(){document.getElementById("frmActivityLog").reset(),h(),b("closeAddActivityLogModal"),document.getElementById("close_btn").click()}async function f(){e.is_saving=!0;var t=new FormData;t.append("description",e.description);var r=e.slack!=""&&e.slack!=null?"/api/v2/activity_log/update":"/api/v2/activity_log/save";await axios.post(r,t).then(s=>{if(s.data.status_code==200)toast.success(s.data.msg),e.is_saving=!1,_();else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(s.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=s.data.msg}e.is_saving=!1}}).catch(s=>{e.server_messages.type="error",e.server_messages.messages=s,e.is_saving=!1,console.log(s)})}function h(){Object.assign(e,m),u.value=[{id:"",unit_name:"",unit_name_ar:"",abbreviation:""}]}return(t,r)=>{const s=L,v=A;return i(),o("div",q,[a("div",E,[a("div",F,[a("div",I,[e.slack==""||e.slack==null?(i(),o("h5",j,c(t.$t("Add Activity Log")),1)):(i(),o("h5",O,c(t.$t("Update Activity Log")),1)),a("button",{type:"button",class:"btn-close",id:"close_btn","data-bs-dismiss":"modal","aria-label":"Close",onClick:_})]),a("div",U,[d(l(S),{"validation-schema":l(y),onSubmit:f,enctype:"multipart/form-data","initial-values":e,id:"frmActivityLog"},{default:M(()=>[a("div",z,[a("div",J,[d(s,{label:l(n)("Description"),name:"description",modelValue:e.description,"onUpdate:modelValue":r[0]||(r[0]=k=>e.description=k),required:!0},null,8,["label","modelValue"])])]),e.server_messages.messages!=""?(i(),o("div",T,[d(v,{server_messages:e.server_messages},null,8,["server_messages"])])):g("",!0),a("div",G,[a("button",{type:"submit",class:"btn btn-primary",disabled:e.is_saving},[e.is_saving?(i(),x(N,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):g("",!0),e.is_saving?(i(),o("span",K,c(t.$t("Saving...")),1)):(i(),o("span",P,c(t.$t("Save")),1))],8,H)])]),_:1},8,["validation-schema","initial-values"])])])])])}}};export{te as default};
