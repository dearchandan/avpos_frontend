import{u as H,b as Q,r as l,e as W,o as X,v as Z,g as r,p as B,w as M,f as E,i as e,k as c,n as ee,t as i,K as se,N as te,j as h,h as u,F as ae,x as oe,l as q,O as ne,q as C,_ as A}from"./index.GdMxdeuf.js";import{_ as ie}from"./DefaultLayout.qd3nRBiq.js";import{_ as le}from"./ListingSkeleton.upY030ro.js";import{_ as ce}from"./PaginateLimit.H-orl6zP.js";import"./vue-datepicker.iEAbZR0K.js";/* empty css                                                   */import"./ClipLoader.UcGuNCxH.js";/* empty css                                                   */const de={class:"header-nav-wrap"},re={class:"row align-items-center"},_e={class:"col-auto"},ue={class:"header-back-link"},me={class:"col-auto"},he={class:"fw-bold"},ve={class:"content"},ge={class:"page-heading"},pe={class:"row align-items-center justify-content-end"},fe={class:"col-auto"},we={class:"form-field page-heading-search-field mb-0"},ye={class:"field-icon"},ke=["placeholder"],be={class:"icon"},Me={class:"col-auto"},Ce={key:1,class:"table-responsive"},Ae={class:"table table-list-data table-hover"},$e={class:"bg-light"},Se={scope:"col"},Ve={scope:"col"},De={scope:"col",width:"10%"},Ne={scope:"col",width:"10%",class:"text-end"},Be=["onClick"],Ee={class:"fw-bold highlighted-list-item"},qe=["onClick"],Pe={class:"form-field"},Te={class:"form-check form-switch form-switch-2"},xe=["onChange","checked"],Ie={class:"text-end"},Le={key:0,class:"dropdown"},Oe={class:"btn btn-icon btn-sm btn-light dropdown-toggle arrow-none",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Fe={class:"dropdown-menu"},je=["onClick"],Re=["onClick"],Je=["onClick"],Ke={key:1},Ue={class:"text-center py-3",colspan:"7"},Ye={class:"data-footer"},ze={class:"row align-items-center justify-content-between"},Ge={class:"col-auto"},He={class:"col-auto"},ns={__name:"measurements",setup(Qe){const{t:v}=H(),P=C(()=>A(()=>import("./AddMeasurement.kV82LONv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),T=C(()=>A(()=>import("./ViewMeasurement.rqjSOfVM.js"),__vite__mapDeps([10,2,3]))),x=C(()=>A(()=>import("./AddConversion.rrbgkRYp.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,12])));Q();const g=l(!1),p=l(!1),$=l([]);function S(s=""){$.value=s,g.value=!0}function I(){g.value=!1,d()}const f=l("");function L(s){f.value=s,p.value=!0}function O(){f.value="",p.value=!1,d()}const F={server_messages:{type:"",messages:""},is_listing:!1,search_query:l("")},j=v("Search by name, type.."),t=W({...F});X(()=>{d()}),Z(()=>t.search_query,_.debounce(()=>{d()},500));const w=l([]),y=l([]);async function d(s=1){t.is_listing=!0,await axios.get("/api/v2/measurements",{params:{page:s,paginate_limit:V.value,search_query:t.search_query}}).then(o=>{w.value=o.data.data,y.value=o.data.pagination,t.is_listing=!1}).catch(o=>{t.server_messages.type="error",t.server_messages.messages=o,t.is_listing=!1,console.log(o)})}const V=l();async function R(s){V.value=s,await d()}async function J(s){var o=new FormData;o.append("slack",s),await axios.post("/api/measurement/update_status",o).then(a=>{if(a.data.status_code==200)toast.success(a.data.msg),d();else try{t.server_messages.type="error",t.server_messages.messages=JSON.parse(a.data.msg)}catch{t.server_messages.type="error",t.server_messages.messages=a.data.msg}}).catch(a=>{t.server_messages.type="error",t.server_messages.messages=a,console.log(a)})}const k=l(!1),D=l([]);function N(s){k.value=!0,D.value=s}function K(){k.value=!1}async function U(s){var o=!1;await Swal.fire({title:v("Do you want to delete this Measurement?"),showCancelButton:!0,confirmButtonText:v("Yes, Delete"),confirmButtonColor:"#d33",cancelButtonText:v("Cancel")}).then(a=>{a.isConfirmed&&(o=!0)}),o&&await axios.post("/api/measurement/delete",{slack:s}).then(a=>{if(a.data.status_code==200)Swal.fire(a.data.msg),d();else try{t.server_messages.type="error",t.server_messages.messages=JSON.parse(a.data.msg)}catch{t.server_messages.type="error",t.server_messages.messages=a.data.msg}}).catch(a=>{t.server_messages.type="error",t.server_messages.messages=a,console.log(a)})}return(s,o)=>{const a=E("Icon"),b=E("router-link"),Y=le,z=ie;return r(),B(z,null,{subheader:M(()=>[e("div",de,[e("div",re,[e("div",_e,[e("div",ue,[c(b,{class:"text-primary",to:"/settings"},{default:M(()=>[c(a,{icon:"fa6-solid:chevron-left"}),ee(" "+i(s.$t("Settings")),1)]),_:1})])]),e("div",me,[e("h5",he,i(s.$t("Measurements")),1)])])])]),default:M(()=>[e("div",ve,[e("div",ge,[e("div",pe,[e("div",fe,[e("div",we,[e("div",ye,[se(e("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:h(j),"onUpdate:modelValue":o[0]||(o[0]=n=>t.search_query=n)},null,8,ke),[[te,t.search_query]]),e("div",be,[c(a,{icon:"fa6-solid:magnifying-glass"})])])])]),e("div",Me,[e("a",{href:"#",class:"btn btn-sm btn-light-primary2","data-bs-toggle":"modal",onClick:S,"data-bs-target":"#addMeasurementModal"}," + "+i(s.$t("New Measurement")),1)])])]),t.is_listing?(r(),B(Y,{key:0})):(r(),u("div",Ce,[e("table",Ae,[e("thead",$e,[e("tr",null,[e("th",Se,i(s.$t("Name")),1),e("th",Ve,i(s.$t("Constant")),1),e("th",De,i(s.$t("Active")),1),e("th",Ne,i(s.$t("Action")),1)])]),e("tbody",null,[w.value!=""?(r(!0),u(ae,{key:0},oe(w.value,(n,G)=>(r(),u("tr",{key:G},[e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewMeasurementModal",onClick:m=>N(n)},[e("div",null,[e("span",Ee,i(n.name),1)])],8,Be),e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewMeasurementModal",onClick:m=>N(n)},i(n.constant),9,qe),e("td",null,[e("div",Pe,[e("div",Te,[n.merchant_id>0?(r(),u("input",{key:0,class:"form-check-input",type:"checkbox",role:"switch",id:"Status_id",onChange:m=>J(n.slack),checked:n.status==1},null,40,xe)):q("",!0)])])]),e("td",Ie,[n.merchant_id>0?(r(),u("div",Le,[e("button",Oe,[c(a,{icon:"fa6-solid:ellipsis-vertical"})]),e("ul",Fe,[e("li",null,[e("a",{class:"dropdown-item",href:"#","data-bs-toggle":"modal",onClick:m=>S(n),"data-bs-target":"#addMeasurementModal"},i(s.$t("Edit")),9,je)]),e("li",null,[e("a",{class:"dropdown-item",href:"#","data-bs-toggle":"modal",onClick:m=>L(n.slack),"data-bs-target":"#addConversionModal"},i(s.$t("Conversion")),9,Re)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:m=>U(n.slack)},i(s.$t("Delete")),9,Je)])])])):q("",!0)])]))),128)):(r(),u("tr",Ke,[e("td",Ue,i(s.$t("No Data Found")),1)]))])])])),e("div",Ye,[e("div",ze,[e("div",Ge,[c(ce,{onPaginate_limit_update:R,pagination:y.value},null,8,["pagination"])]),e("div",He,[c(h(ne),{data:y.value,limit:5,onPaginationChangePage:d},null,8,["data"])])])])]),c(h(P),{show_add_measurement_modal:g.value,onCloseAddMeasurementModal:I,edit_data:$.value},null,8,["show_add_measurement_modal","edit_data"]),c(h(x),{show_add_conversion_modal:p.value,measurement_slack:f.value,onCloseAddConversionModal:O},null,8,["show_add_conversion_modal","measurement_slack"]),c(h(T),{show_view_measurement_modal:k.value,measurement:D.value,onCloseViewMeasurementModal:K},null,8,["show_view_measurement_modal","measurement"])]),_:1})}}};export{ns as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AddMeasurement.kV82LONv.js","assets/ServerMessage.Wf7puwQc.js","assets/index.GdMxdeuf.js","assets/index.1t-AB2n6.css","assets/vee-validate.esm.9aElOHQY.js","assets/index.esm.0vhAmrVd.js","assets/VTextInput.ZgtOiOMJ.js","assets/VTooltip.Ewb958d6.js","assets/ClipLoader.UcGuNCxH.js","assets/ClipLoader.7xz7y6gZ.css","assets/ViewMeasurement.rqjSOfVM.js","assets/AddConversion.rrbgkRYp.js","assets/BeatLoader.5j6ku4bW.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
