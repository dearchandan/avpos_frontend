import{_ as S}from"./EditFormSkeleton.MxB2Xqx6.js";import U from"./ServerMessage.qNo4NwTp.js";import{u as x,a as A,r as g,e as I,o as M,g as n,p as v,w as _,f as k,i as a,k as l,n as B,t as d,j as u,h as m,l as q,K as F,Q as D}from"./index.ri7Y_V5F.js";import{_ as E}from"./DefaultLayout.EMHfdzn0.js";import{F as Q}from"./vee-validate.esm.0La7AMjT.js";import{c as P,a as h}from"./index.esm.wERziE-M.js";import{_ as f}from"./VTextInput.o2P1IcEE.js";import{C as T}from"./ClipLoader.4-rIzqtH.js";/* empty css                                                                */import"./VTooltip.a7qKl6DY.js";/* empty css                                                   */const j={class:"header-nav-wrap"},z={class:"row align-items-center"},J={class:"col-auto"},K={class:"header-back-link"},L={class:"col-auto"},O={key:0,class:"fw-bold"},R={key:1,class:"fw-bold"},G={key:0,class:"content"},H={class:"row card-strash"},W={key:0,class:"py-3"},X={class:"col-md-12"},Y={class:"row"},Z={class:"col-md-12"},ee={class:"card"},se={class:"row"},ae={class:"col-md-3"},te={class:"col-md-3"},oe={class:"col-md-3"},re={class:"col-md-3"},ne={class:"form-field pt-2"},ie={class:"form-check form-switch pt-4"},ce={class:"form-check-label",for:"status"},le={class:"text-end"},ue=["disabled"],de={key:1,class:"pt-0"},me={key:2,class:"pt-0"},Ne={__name:"add_voucher_user",setup(_e){const{t:o}=x(),i=A().params.slack,p=g({name:o("Name"),iqama_or_passport_number:o("IQAMA/Passport No."),country:o("Country")}),e=I({...{server_messages:{type:"",messages:""},is_submitting:!1,name:"",iqama_or_passport_number:"",country:"",status:!0}});let V=P({name:h().required(o("name is required",{name:o("Name")})),iqama_or_passport_number:h().required(o("name is required",{name:o("IQAMA/Passport No.")})),country:h().required(o("name is required",{name:o("Country")}))});M(()=>{i!=""&&i!=null&&w()});const b=g(!1);async function w(){let s=await axios.get("/api/voucher_user",{params:{slack:i,type:1}});s.data.data&&(e.voucher_user_slack=s.data.data.slack,e.name=s.data.data.name,e.iqama_or_passport_number=s.data.data.iqama_or_passport_number,e.country=s.data.data.country,e.status=s.data.data.status==1),b.value=!0}async function $(){e.is_submitting=!0;var s=new FormData;s.append("name",e.name),s.append("iqama_or_passport_number",e.iqama_or_passport_number),s.append("country",e.country),s.append("status",e.status),s.append("type",1),s.append("slack",e.voucher_user_slack);var t=e.voucher_user_slack!=""&&e.voucher_user_slack!=null?"/api/voucher_user/update":"/api/voucher_user/save";await axios.post(t,s,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>{if(r.data.status_code==200)toast.success(r.data.msg),e.is_submitting=!1,router.push("/voucher_users");else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(r.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=r.data.msg}e.is_submitting=!1}}).catch(r=>{e.server_messages.type="error",e.server_messages.messages=r,e.is_submitting=!1,console.log(r)})}return(s,t)=>{const r=k("Icon"),y=k("router-link"),C=U,N=S;return n(),v(E,null,{subheader:_(()=>[a("div",j,[a("div",z,[a("div",J,[a("div",K,[l(y,{class:"text-primary",to:"/voucher_users"},{default:_(()=>[l(r,{icon:"fa6-solid:chevron-left"}),B(" "+d(s.$t("Voucher Users")),1)]),_:1})])]),a("div",L,[u(i)==null||u(i)==""?(n(),m("h5",O,d(s.$t("Add Voucher User")),1)):(n(),m("h5",R,d(s.$t("Edit Voucher User")),1))])])])]),default:_(()=>[u(i)==""||u(i)==null||u(i)!=""&&b.value?(n(),m("div",G,[l(u(Q),{"validation-schema":u(V),onSubmit:$,enctype:"multipart/form-data","initial-values":e},{default:_(()=>[a("div",H,[e.server_messages.messages!=""?(n(),m("div",W,[l(C,{server_messages:e.server_messages},null,8,["server_messages"])])):q("",!0),a("div",X,[a("div",Y,[a("div",Z,[a("div",ee,[a("div",se,[a("div",ae,[l(f,{type:"text",name:"name",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=c=>e.name=c),label:p.value.name,required:!0},null,8,["modelValue","label"])]),a("div",te,[l(f,{type:"text",name:"iqama_or_passport_number",modelValue:e.iqama_or_passport_number,"onUpdate:modelValue":t[1]||(t[1]=c=>e.iqama_or_passport_number=c),label:p.value.iqama_or_passport_number,required:!0},null,8,["modelValue","label"])]),a("div",oe,[l(f,{type:"text",name:"country",modelValue:e.country,"onUpdate:modelValue":t[2]||(t[2]=c=>e.country=c),label:p.value.country,required:!0},null,8,["modelValue","label"])]),a("div",re,[a("div",ne,[a("div",ie,[F(a("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status",checked:"","onUpdate:modelValue":t[3]||(t[3]=c=>e.status=c)},null,512),[[D,e.status]]),a("label",ce,d(s.$t("Active")),1)])])])])])])])])]),a("div",le,[a("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(n(),v(T,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):q("",!0),e.is_submitting?(n(),m("span",de,d(s.$t("Saving...")),1)):(n(),m("span",me,d(s.$t("Save")),1))],8,ue)])]),_:1},8,["validation-schema","initial-values"])])):(n(),v(N,{key:1}))]),_:1})}}};export{Ne as default};
