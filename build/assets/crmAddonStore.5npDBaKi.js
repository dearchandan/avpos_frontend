import{a4 as d,I as r}from"./index.ri7Y_V5F.js";const{calculateCrmAddon:s}=r(),u=d("crmAddonStore",{state:()=>({cart:[],discount:{value:"",type:""}}),actions:{resetState(){this.$reset()},async addToCart(t,n,o){let a=s(t,n,o);const e=this.cart.findIndex(i=>i.addon_id===t.id);if(e>-1)this.cart[e].quantity=a.addon_quantity,this.cart[e].price=a.addon_amount.toFixed(2),this.cart[e].tax_percentage=a.tax_percentage.toFixed(2),this.cart[e].tax_amount=a.tax_amount.toFixed(2),this.cart[e].final_addon_amount=a.final_addon_amount.toFixed(2);else{let i={addon:t,addon_id:t.id,addon_name:t.name,addon_constant:t.constant_name,type:t.type,value_type:t.value_type,quantity:a.addon_quantity,price:a.addon_amount.toFixed(2),tax_percentage:a.tax_percentage.toFixed(2),tax_amount:a.tax_amount.toFixed(2),final_addon_amount:a.final_addon_amount.toFixed(2)};this.cart.push(i)}},removeItemFromCart(t){this.cart.splice(t,1)},clearCart(){this.cart=[]},addDiscount(t){this.discount.value=t.value,this.discount.type=t.type},clearDiscount(){this.discount.value="",this.discount.type=""}},getters:{cartItemCount(){return this.cart.length},isCartEmpty(){return this.cart.length===0},grandTotal(){var t=0,n=0,o=0,a=0,e=0;return this.cart.map(i=>{t+=parseFloat(i.price)}),this.discount.type==1?(n=parseFloat(t)*parseFloat(this.discount.value)/100,o=parseFloat(t-n)):this.discount.type==2?(n=parseFloat(this.discount.value),o=parseFloat(t-n)):o=t,a=parseFloat(o*15/100),e=parseFloat(o+a),{grand_addon_price_without_tax:t.toFixed(2),discount_amount:n.toFixed(2),grand_addon_tax:a.toFixed(2),grand_addon_amount:e.toFixed(2)}}}});export{u};
