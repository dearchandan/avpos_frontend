import{_ as $}from"./DefaultLayout.EMHfdzn0.js";import{_ as U}from"./VTextInput.o2P1IcEE.js";import{_ as C}from"./VMultiSelect.3zUL7lik.js";import D from"./ServerMessage.qNo4NwTp.js";import{_ as E}from"./VoucherMenu.2wt_4vQ9.js";import{F as M}from"./vee-validate.esm.0La7AMjT.js";import{c as P,a as p}from"./index.esm.wERziE-M.js";import{C as F}from"./ClipLoader.4-rIzqtH.js";import{b as I,u as L,r as f,e as j,o as z,v as A,g as n,p as y,w as h,k as l,i,h as m,l as c,t as v,j as x}from"./index.ri7Y_V5F.js";import"./VTooltip.a7qKl6DY.js";/* empty css                                                   */const J={class:"content"},O={class:"row card-strash"},T={key:0,class:"py-3"},G={class:"col-md-12"},H={class:"row"},K={class:"col-md-12"},Q={class:"card"},R={class:"pb-3"},W={class:"row"},X={class:"col-md-3"},Y={class:"row"},Z={key:0,class:"col-md-3"},ee={key:1,class:"col-md-3"},ae={key:2,class:"col-md-3"},se={key:3,class:"col-md-3"},te={key:0,class:"text-end"},oe=["disabled"],ie={key:1,class:"pt-0"},ne={key:2,class:"pt-0"},fe={__name:"voucher_settings",setup(re){I();const{t:s}=L(),V={server_messages:{type:"",messages:""},is_submitting:!1,branch:"",pavilion_code:"",pavilion_name:"",shop_no:"",exhibitor_name:""},d=f({branch:s("Branch"),select_branch:s("Select Branch"),pavilion_code:s("Pavilion Code"),pavilion_name:s("Pavilion Name"),shop_no:s("Shop No."),exhibitor_name:s("Exhibitor Name")}),e=j({...V}),k=P({branch:p().required(s("name is required",{name:s("Branch")})),pavilion_code:p().required(s("name is required",{name:s("Pavilion Code")})),pavilion_name:p().required(s("name is required",{name:s("Pavilion Name")})),shop_no:p().required(s("name is required",{name:s("Shop No.")})),exhibitor_name:p().required(s("name is required",{name:s("Exhibitor Name")}))});z(()=>{q()});const b=f([]);async function q(){let a=await axios.get("api/branches/all");a=a.data.data,_.forEach(a,t=>{if(t.status==1){let o={id:t.slack,name:t.name};b.value.push(o)}})}A(()=>e.branch,a=>{a!=""&&w()});async function w(){await axios.get("/api/branch",{params:{slack:e.branch}}).then(a=>{e.pavilion_code=a.data.data.pavilion_code,e.pavilion_name=a.data.data.pavilion_name,e.shop_no=a.data.data.shop_no,e.exhibitor_name=a.data.data.exhibitor_name}).catch(a=>{e.server_messages.type="error",e.server_messages.messages=a,is_loading.value=!1})}async function S(){e.is_submitting=!0;var a=new FormData;a.append("branch_slack",e.branch),a.append("pavilion_code",e.pavilion_code),a.append("pavilion_name",e.pavilion_name),a.append("shop_no",e.shop_no),a.append("exhibitor_name",e.exhibitor_name);var t="/api/branch/update_voucher_setting";await axios.post(t,a).then(o=>{if(o.data.status_code==200)toast.success(o.data.msg),e.is_submitting=!1;else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(o.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=o.data.msg}e.is_submitting=!1}}).catch(o=>{e.server_messages.type="error",e.server_messages.messages=o,e.is_submitting=!1,console.log(o)})}return(a,t)=>{const o=E,g=D,N=C,u=U,B=$;return n(),y(B,null,{subheader:h(()=>[l(o)]),default:h(()=>[i("div",J,[l(x(M),{"validation-schema":x(k),onSubmit:S,enctype:"multipart/form-data","initial-values":e},{default:h(()=>[i("div",O,[e.server_messages.messages!=""?(n(),m("div",T,[l(g,{server_messages:e.server_messages},null,8,["server_messages"])])):c("",!0),i("div",G,[i("div",H,[i("div",K,[i("div",Q,[i("h5",R,v(a.$t("Select a branch for update voucher settings")),1),i("div",W,[i("div",X,[l(N,{name:"branch",text:"name",value:"id",options:b.value,mode:"single",modelValue:e.branch,"onUpdate:modelValue":t[0]||(t[0]=r=>e.branch=r),placeholder:d.value.select_branch},null,8,["options","modelValue","placeholder"])])]),i("div",Y,[e.branch!=""?(n(),m("div",Z,[l(u,{type:"text",name:"pavilion_code",modelValue:e.pavilion_code,"onUpdate:modelValue":t[1]||(t[1]=r=>e.pavilion_code=r),label:d.value.pavilion_code,required:!0},null,8,["modelValue","label"])])):c("",!0),e.branch!=""?(n(),m("div",ee,[l(u,{type:"text",name:"pavilion_name",modelValue:e.pavilion_name,"onUpdate:modelValue":t[2]||(t[2]=r=>e.pavilion_name=r),label:d.value.pavilion_name,required:!0},null,8,["modelValue","label"])])):c("",!0),e.branch!=""?(n(),m("div",ae,[l(u,{type:"text",name:"shop_no",modelValue:e.shop_no,"onUpdate:modelValue":t[3]||(t[3]=r=>e.shop_no=r),label:d.value.shop_no,required:!0},null,8,["modelValue","label"])])):c("",!0),e.branch!=""?(n(),m("div",se,[l(u,{type:"text",name:"exhibitor_name",modelValue:e.exhibitor_name,"onUpdate:modelValue":t[4]||(t[4]=r=>e.exhibitor_name=r),label:d.value.exhibitor_name,required:!0},null,8,["modelValue","label"])])):c("",!0)])])])])])]),e.branch!=""?(n(),m("div",te,[i("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(n(),y(F,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):c("",!0),e.is_submitting?(n(),m("span",ie,v(a.$t("Updating...")),1)):(n(),m("span",ne,v(a.$t("Update")),1))],8,oe)])):c("",!0)]),_:1},8,["validation-schema","initial-values"])])]),_:1})}}};export{fe as default};
