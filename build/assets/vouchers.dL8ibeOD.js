import{_ as T}from"./ActionButtonGroup.qGH_Fqs8.js";import{_ as G}from"./ListingSkeleton.upY030ro.js";import{_ as K}from"./VoucherMenu.wm0wcq5n.js";import{u as z,b as H,r as c,e as $,o as Q,v as W,g as n,p as M,w,f as S,k as h,i as t,t as s,j as d,h as a,n as X,l as r,K as j,L as Y,N as Z,F as x,x as tt,O as et}from"./index.GdMxdeuf.js";import{_ as st}from"./DefaultLayout.qd3nRBiq.js";import{_ as ot}from"./PaginateLimit.H-orl6zP.js";import{j as nt}from"./vue-datepicker.iEAbZR0K.js";import"./ClipLoader.UcGuNCxH.js";/* empty css                                                   */const at={class:"content"},it={class:"page-heading"},lt={class:"row align-items-center justify-content-between mb-3"},ct={class:"col-auto"},rt={class:"mb-0"},dt={key:0,class:"col-auto"},_t={class:"row align-items-end justify-content-between mb-3"},ut={class:"col-md-auto"},ht={class:"row align-items-end justify-content-between g-3"},mt={class:"col-12 col-md-auto"},pt={class:"form-field"},ft={class:"col col-md-auto"},gt={class:"form-field"},vt={value:""},yt={value:"0"},bt={value:"1"},kt={value:"2"},$t={class:"col-auto col-md-auto"},wt={class:"col-auto"},Ct={class:"form-field page-heading-search-field mb-0"},Vt={class:"field-icon"},Mt=["placeholder"],St={class:"icon"},jt={key:0},Nt={key:1,class:"table-responsive"},At={class:"table table-list-data table-hover"},Pt={class:"bg-light"},qt={scope:"col",width:"10%"},Bt={scope:"col",width:"10%"},Dt={key:0,scope:"col",width:"20%"},Ft={scope:"col",width:"20%"},Lt={scope:"col",width:"10%"},Ot={scope:"col",width:"10%"},Ut={key:1,scope:"col",class:"text-end",width:"5%"},It=["onClick"],Et=["onClick"],Jt=["onClick"],Rt=["onClick"],Tt=["onClick"],Gt=["onClick"],Kt={key:0,class:"badge badge-primary"},zt={key:1,class:"badge badge-success"},Ht={key:2,class:"badge badge-danger"},Qt={key:1,class:"text-end"},Wt={key:1},Xt={key:1},Yt={class:"text-center py-3",colspan:"11"},Zt={class:"data-footer"},xt={class:"row align-items-center justify-content-between"},te={class:"col-auto"},ee={class:"col-auto"},ue={__name:"vouchers",setup(se){const{t:N}=z(),f=H(),A={server_messages:{type:"",messages:""},is_listing:!1,search_query:c("")},P=N("Search by number, amount"),l=$({...A});Q(()=>{m()}),W(()=>l.search_query,_.debounce(()=>{m()},500));const v=c([]),y=c([]);async function m(e=1){l.is_listing=!0,await axios.get("/api/vouchers",{params:{page:e,paginate_limit:C.value,search_query:l.search_query,filter:u,type:1}}).then(i=>{v.value=i.data.data,y.value=i.data.pagination,l.is_listing=!1}).catch(i=>{l.server_messages.type="error",l.server_messages.messages=i,l.is_listing=!1,console.log(i)})}const C=c();async function q(e){C.value=e,await m()}const B=c(!1),b=$({dates:c(),status:c("")}),u=$({...b}),k=c(!1);async function V(){JSON.stringify(u)!=JSON.stringify(b)&&(k.value=!0),B.value=!1,await m()}function D(){Object.assign(u,b),k.value=!1,m()}function p(e){router.push("/voucher/"+e)}function F(e){router.push("/voucher/edit/"+e)}const L=c({write:!0,delete:!1});return(e,i)=>{const O=K,U=S("router-link"),I=S("Icon"),E=G,J=T;return n(),M(st,null,{subheader:w(()=>[h(O)]),default:w(()=>[t("div",at,[t("div",it,[t("div",lt,[t("div",ct,[t("h2",rt,s(e.$t("Vouchers")),1)]),d(f).isMerchant?r("",!0):(n(),a("div",dt,[h(U,{class:"btn btn-sm btn-light-primary2",to:"/voucher/add"},{default:w(()=>[X("+ "+s(e.$t("New Voucher")),1)]),_:1})]))]),t("div",_t,[t("div",ut,[t("div",ht,[t("div",mt,[t("div",pt,[t("label",null,s(e.$t("Voucher Date")),1),h(d(nt),{range:"",modelValue:u.dates,"onUpdate:modelValue":[i[0]||(i[0]=o=>u.dates=o),i[1]||(i[1]=o=>V())],format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid form-control-sm"},null,8,["modelValue"])])]),t("div",ft,[t("div",gt,[t("label",null,s(e.$t("Payment Status")),1),j(t("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":i[2]||(i[2]=o=>u.status=o),onChange:V},[t("option",vt,s(e.$t("All")),1),t("option",yt,s(e.$t("Pending")),1),t("option",bt,s(e.$t("Approved")),1),t("option",kt,s(e.$t("Reject")),1)],544),[[Y,u.status]])])]),t("div",$t,[k.value?(n(),a("button",{key:0,class:"btn btn-sm btn-light-danger",onClick:D},s(e.$t("Clear")),1)):r("",!0)])])]),t("div",wt,[t("div",Ct,[t("div",Vt,[j(t("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:d(P),"onUpdate:modelValue":i[3]||(i[3]=o=>l.search_query=o)},null,8,Mt),[[Z,l.search_query]]),t("div",St,[h(I,{icon:"fa6-solid:magnifying-glass"})])])])])])]),l.is_listing?(n(),a("div",jt,[h(E)])):(n(),a("div",Nt,[t("table",At,[t("thead",Pt,[t("tr",null,[t("th",qt,s(e.$t("Voucher No.")),1),t("th",Bt,s(e.$t("Amount")),1),d(f).isMerchant?(n(),a("th",Dt,s(e.$t("Branch")),1)):r("",!0),t("th",Ft,s(e.$t("User")),1),t("th",Lt,s(e.$t("Voucher Date")),1),t("th",Ot,s(e.$t("Payment Status")),1),d(f).isMerchant?r("",!0):(n(),a("th",Ut,s(e.$t("Action")),1))])]),t("tbody",null,[v.value!=""?(n(!0),a(x,{key:0},tt(v.value,(o,R)=>(n(),a("tr",{key:R},[t("td",{onClick:g=>p(o.slack),role:"button"},s(o.voucher_number),9,It),t("td",{onClick:g=>p(o.slack),role:"button"},s(o.withdrawal_amount),9,Et),d(f).isMerchant?(n(),a("td",{key:0,onClick:g=>p(o.slack),role:"button"},s(o.branch.name),9,Jt)):r("",!0),t("td",{onClick:g=>p(o.slack),role:"button"},s(o.voucher_user.name),9,Rt),t("td",{onClick:g=>p(o.slack),role:"button"},s(o.voucher_date_label),9,Tt),t("td",{onClick:g=>p(o.slack),role:"button"},[o.status==0?(n(),a("span",Kt,s(e.$t("Pending")),1)):r("",!0),o.status==1?(n(),a("span",zt,s(e.$t("Approved")),1)):r("",!0),o.status==2?(n(),a("span",Ht,s(e.$t("Rejected")),1)):r("",!0)],8,Gt),d(f).isMerchant?r("",!0):(n(),a("td",Qt,[o.status==0?(n(),M(J,{key:0,permissions:L.value,onEdit:F,slack:o.slack},null,8,["permissions","slack"])):(n(),a("span",Wt,"--"))]))]))),128)):(n(),a("tr",Xt,[t("td",Yt,s(e.$t("No Data Found")),1)]))])])])),t("div",Zt,[t("div",xt,[t("div",te,[h(ot,{onPaginate_limit_update:q,pagination:y.value},null,8,["pagination"])]),t("div",ee,[h(d(et),{data:y.value,limit:5,onPaginationChangePage:m},null,8,["data"])])])])])]),_:1})}}};export{ue as default};
