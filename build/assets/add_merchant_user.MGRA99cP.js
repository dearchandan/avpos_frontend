import{_ as E}from"./DefaultLayout.EMHfdzn0.js";import{_ as L}from"./VSelect.ijXeZp1F.js";import{_ as M}from"./VCodeGenerateTextInput.V8OCl1PV.js";import{_ as R}from"./VTextInput.o2P1IcEE.js";import O from"./ServerMessage.qNo4NwTp.js";import{F as G}from"./vee-validate.esm.0La7AMjT.js";import{u as J,a as z,r as v,e as H,o as K,g as h,p as k,w as g,f,i as s,k as n,n as Q,t as m,h as b,l as S,j as q}from"./index.ri7Y_V5F.js";import{u as W}from"./crmAddonStore.5npDBaKi.js";import{c as X,a as c}from"./index.esm.wERziE-M.js";import"./ClipLoader.4-rIzqtH.js";/* empty css                                                   *//* empty css                                                                */import"./VTooltip.a7qKl6DY.js";const Y={class:"header-nav-wrap"},Z={class:"row align-items-center"},ee={class:"col-auto"},ae={class:"header-back-link"},se={class:"col-auto"},te={class:"fw-bold"},oe={class:"content"},le={class:"row card-strash"},ne={key:0,class:"py-3"},ie={class:"col-md-12"},re={class:"row"},de={class:"col-md-12 mb-4"},me={class:"card"},ce={class:"row"},_e={class:"col-md-3"},ue={class:"col-md-3"},pe={class:"col-md-3"},he={class:"col-md-3"},ve={class:"col-md-3"},ge={class:"col-md-12"},fe={class:"card"},be={class:"row"},we={class:"col-md-3"},ye={class:"col-md-3"},Ve={class:"col-md-3"},ke={class:"col-md-3"},Se={class:"col-md-3"},qe={class:"col-md-3"},Pe={class:"label"},Ue={class:"input-group input-file-group"},$e={class:"btn btn-light-primary min-width-0 mb-0",for:"formFile"},je={class:"text-end"},xe=["disabled"],Ie={key:1,class:"pt-0"},Ce={key:2,class:"pt-0"},Qe={__name:"add_merchant_user",setup(Ne){W();const{t:a}=J(),u=z().params.slack,P=v("/merchant/"+u),r=v({name:a("Name"),email:a("Email"),password:a("Password"),phone:a("Phone"),role:a("Role"),select_role:a("Select Role"),status:a("Status"),select_status:a("Select Status"),date_of_birth:a("Date Of Birth"),date_of_anniversary:a("Date Of Anniversary"),joining_date:a("Date Of Joining"),login_code:a("Login Code")}),e=H({...{server_messages:{type:"",messages:""},is_submitting:!1,name:"",email:"",password:"",role:"",status:"",login_code:"",phone:"",date_of_birth:"",date_of_anniversary:"",joining_date:"",image:"",user_slack:"",password_dummy:"123456789",passwordType:"password",switchPasswordIcon:!0}});let U=X({name:c().required(a("name is required",{name:a("Name")})).min(3,a("name must be at least n characters",{name:a("Name"),number:3})),email:c().required(a("name is required",{name:a("Email")})).email(a("must be a valid email",{name:a("Email")})),password:c().required(a("name is required",{name:a("Password")})).min(8,a("name must be at least n characters",{name:a("Password"),number:8})),role:c().required(a("name is required",{name:a("Role")})),status:c().required(a("name is required",{name:a("Status")})),phone:c().matches(/^(?:[0-9]{9,10})?$/,a("Mobile number must be number and should be 9 or 10 digits"))});const w=v([]),$=[{key:"0",value:a("Inactive")},{key:"1",value:a("Active")},{key:"2",value:a("Hold")},{key:"3",value:a("Left")}],j=v([]);K(()=>{x()});async function x(){let t=await axios.get("api/roles/merchant_roles/"+u);t=t.data.data,_.forEach(t,o=>{let i={key:o.slack,value:o.name};w.value.push(i)})}function I(){let t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$*",i=o.length;for(let p=0;p<10;p++)t+=o.charAt(Math.floor(Math.random()*i));e.password=t}async function C(){let t=await axios.get("api/user/generate_merchant_login_code/"+u);e.login_code=t.data.data.login_code}async function N(t){e.image=t.target.files[0]}async function T(){e.is_submitting=!0;var t=new FormData;t.append("name",e.name),t.append("email",e.email),t.append("password",e.password),t.append("role",e.role),t.append("status",e.status),t.append("login_code",e.login_code),t.append("phone",e.phone),t.append("date_of_birth",e.date_of_birth),t.append("date_of_anniversary",e.date_of_anniversary),t.append("joining_date",e.joining_date),t.append("image",e.image),t.append("merchant_slack",u);var o="/api/user/save_merchant_user";await axios.post(o,t,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{if(i.data.status_code==200)toast.success(i.data.msg),e.is_submitting=!1,router.push("/merchant/"+u);else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(i.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=i.data.msg}e.is_submitting=!1}}).catch(i=>{e.server_messages.type="error",e.server_messages.messages=i,e.is_submitting=!1,console.log(i)})}function D(){e.switchPasswordIcon==!0?(e.switchPasswordIcon=!1,e.passwordType="text"):(e.switchPasswordIcon=!0,e.passwordType="password")}return(t,o)=>{const i=f("Icon"),p=f("router-link"),F=O,d=R,y=M,V=L,A=f("clip-loader"),B=E;return h(),k(B,null,{subheader:g(()=>[s("div",Y,[s("div",Z,[s("div",ee,[s("div",ae,[n(p,{class:"text-primary",to:P.value},{default:g(()=>[n(i,{icon:"fa6-solid:chevron-left"}),Q(" "+m(t.$t("Users")),1)]),_:1},8,["to"])])]),s("div",se,[s("h5",te,m(t.$t("Add User")),1)])])])]),default:g(()=>[s("div",oe,[n(q(G),{"validation-schema":q(U),onSubmit:T,enctype:"multipart/form-data","initial-values":e},{default:g(()=>[s("div",le,[e.server_messages.messages!=""?(h(),b("div",ne,[n(F,{server_messages:e.server_messages},null,8,["server_messages"])])):S("",!0),s("div",ie,[s("div",re,[s("div",de,[s("div",me,[s("div",ce,[s("div",_e,[n(d,{type:"text",name:"name",modelValue:e.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.name=l),label:r.value.name,required:!0},null,8,["modelValue","label"])]),s("div",ue,[n(d,{type:"email",name:"email",modelValue:e.email,"onUpdate:modelValue":o[1]||(o[1]=l=>e.email=l),label:r.value.email,required:!0},null,8,["modelValue","label"])]),s("div",pe,[n(y,{type:e.passwordType,name:"password",modelValue:e.password,"onUpdate:modelValue":o[2]||(o[2]=l=>e.password=l),label:r.value.password,required:!0,onGenerate_code:I,onShow_password_text:D,is_show_password:!0,showPassword:e.switchPasswordIcon},null,8,["type","modelValue","label","showPassword"])]),s("div",he,[n(V,{name:"role",label:r.value.role,modelValue:e.role,"onUpdate:modelValue":o[3]||(o[3]=l=>e.role=l),placeholder:r.value.select_role,options:w.value,required:""},null,8,["label","modelValue","placeholder","options"])]),s("div",ve,[n(V,{name:"status",label:r.value.status,modelValue:e.status,"onUpdate:modelValue":o[4]||(o[4]=l=>e.status=l),placeholder:r.value.select_status,options:$,required:"",disabled:j.value.user_type==2},null,8,["label","modelValue","placeholder","disabled"])])])])]),s("div",ge,[s("div",fe,[s("div",be,[s("div",we,[n(y,{type:"text",name:"login_code",modelValue:e.login_code,"onUpdate:modelValue":o[5]||(o[5]=l=>e.login_code=l),label:r.value.login_code,onGenerate_code:C,readonly:!0},null,8,["modelValue","label"])]),s("div",ye,[n(d,{type:"text",name:"phone",modelValue:e.phone,"onUpdate:modelValue":o[6]||(o[6]=l=>e.phone=l),label:r.value.phone},null,8,["modelValue","label"])]),s("div",Ve,[n(d,{type:"date",name:"date_of_birth",modelValue:e.date_of_birth,"onUpdate:modelValue":o[7]||(o[7]=l=>e.date_of_birth=l),label:r.value.date_of_birth},null,8,["modelValue","label"])]),s("div",ke,[n(d,{type:"date",name:"date_of_anniversary",modelValue:e.date_of_anniversary,"onUpdate:modelValue":o[8]||(o[8]=l=>e.date_of_anniversary=l),label:r.value.date_of_anniversary},null,8,["modelValue","label"])]),s("div",Se,[n(d,{type:"date",name:"joining_date",modelValue:e.joining_date,"onUpdate:modelValue":o[9]||(o[9]=l=>e.joining_date=l),label:r.value.joining_date},null,8,["modelValue","label"])]),s("div",qe,[s("label",Pe,m(t.$t("Upload Profile Pic")),1),s("div",Ue,[s("input",{class:"form-control form-control-solid",name:"image",type:"file",id:"formFile",accept:"image/jpg, image/jpeg, image/png",onChange:N},null,32),s("label",$e,m(t.$t("Upload")),1)])])])])])])])]),s("div",je,[s("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(h(),k(A,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):S("",!0),e.is_submitting?(h(),b("span",Ie,m(t.$t("Saving...")),1)):(h(),b("span",Ce,m(t.$t("Save")),1))],8,xe)])]),_:1},8,["validation-schema","initial-values"])])]),_:1})}}};export{Qe as default};
