import{D as V}from"./DefaultLayout.saUWsTkY.js";import{_ as R}from"./ActionButtonGroup.IGw_8hrL.js";import{_ as j}from"./ListingSkeleton.6NzqF9S5.js";import{_ as U}from"./RestaurantMenu.kRQRH_37.js";import{u as Y,r as m,e as G,o as J,v as z,g as l,p as A,w as y,I as K,f as $,l as u,i as e,t as n,K as W,N as H,j as a,h as d,k as Q,m as w,F as X,x as Z,O as ee}from"./index.li3fCRRM.js";import{_ as se}from"./PaginateLimit.SmYeFgfo.js";import"./vue-datepicker.a6BsTEHj.js";/* empty css                                                   */import"./ClipLoader.gDBpDd3b.js";/* empty css                                                   */const te={class:"content"},oe={class:"page-heading"},ae={class:"row align-items-center justify-content-between"},ie={class:"col-auto"},ne={class:"mb-0"},ce={class:"col-auto"},le={class:"row align-items-center"},re={class:"col-auto"},de={class:"row align-items-center"},_e=e("div",{class:"col-auto"},[e("div",{class:"dropdown filter-dropdown"},[e("div",{class:"dropdown-menu p-0",style:{"min-width":"150px"}},[e("div",{class:"dropdown-item"},"An item"),e("div",{class:"dropdown-item"},"A second item"),e("div",{class:"dropdown-item"},"A third item"),e("div",{class:"dropdown-item"},"A fourth item"),e("div",{class:"dropdown-item"},"And a fifth one")])])],-1),me={class:"col-auto"},ue={class:"form-field page-heading-search-field mb-0"},he={class:"field-icon"},pe=["placeholder"],ge={class:"icon"},fe={key:0,class:"col-auto"},ve={key:1,class:"table-responsive"},ye={class:"table table-list-data table-hover"},we={class:"bg-light"},ke={scope:"col"},Ce={scope:"col"},be={scope:"col"},De={scope:"col",width:"10%"},Se={key:0,scope:"col",class:"text-end",width:"5%"},Ae=["onClick"],$e={class:"fw-bold highlighted-list-item"},Ne={class:"fs-5 ls-wider text-primary"},xe=["onClick"],Be={class:"form-feild"},Te={class:"form-check form-switch form-switch-2"},Ee=["onChange","checked"],Ie={key:0,class:"text-end"},Le={key:1},qe={class:"text-center py-3",colspan:"11"},Pe={class:"data-footer"},Fe={class:"row align-items-center justify-content-between"},Me={class:"col-auto"},Oe={class:"col-auto"},Qe={__name:"customer_displays",setup(Ve){const{t:p}=Y(),{isAuthorized:k}=K();m(!1);const N={server_messages:{type:"",messages:""},is_listing:!1,search_query:m("")},x=p("Search by CDS name.."),s=G({...N});J(()=>{L(),h()}),z(()=>s.search_query,_.debounce(()=>{h()},500));const g=m([]),f=m([]);async function h(t=1){s.is_listing=!0,await axios.get("/api/v2/customer_displays",{params:{page:t,paginate_limit:C.value,search_query:s.search_query}}).then(i=>{g.value=i.data.data,f.value=i.data.pagination,s.is_listing=!1}).catch(i=>{s.server_messages.type="error",s.server_messages.messages=i,s.is_listing=!1,console.log(i)})}const C=m();async function B(t){C.value=t,await h()}async function T(t){var i=new FormData;i.append("slack",t),await axios.post("/api/customer_display/update_status",i).then(o=>{if(o.data.status_code==200)toast.success(o.data.msg);else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(o.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=o.data.msg}}).catch(o=>{s.server_messages.type="error",s.server_messages.messages=o,console.log(o)})}function b(t){router.push("/customer_display/"+t)}function E(t){router.push("/customer_display/edit/"+t)}async function I(t){var i=!1;await Swal.fire({title:p("Do you want to delete this CDS?"),showCancelButton:!0,confirmButtonText:p("Yes, Delete"),confirmButtonColor:"#d33",cancelButtonText:p("Cancel")}).then(o=>{o.isConfirmed&&(i=!0)}),i&&await axios.post("/api/customer_display/delete",{slack:t}).then(o=>{if(o.data.status_code==200)Swal.fire(o.data.msg),h();else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(o.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=o.data.msg}}).catch(o=>{s.server_messages.type="error",s.server_messages.messages=o,console.log(o)})}const r=m({write:!1,delete:!1});function L(){r.value={write:k("A_WRITE_CUSTOMER_DISPLAY"),delete:k("A_DELETE_CUSTOMER_DISPLAY")}}return(t,i)=>{const o=U,v=$("Icon"),q=$("router-link"),P=j,F=R,M=V;return l(),A(M,null,{subheader:y(()=>[u(o)]),default:y(()=>[e("div",te,[e("div",oe,[e("div",ae,[e("div",ie,[e("h2",ne,n(t.$t("CDS")),1)]),e("div",ce,[e("div",le,[e("div",re,[e("div",de,[_e,e("div",me,[e("div",ue,[e("div",he,[W(e("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:a(x),"onUpdate:modelValue":i[0]||(i[0]=c=>a(s).search_query=c)},null,8,pe),[[H,a(s).search_query]]),e("div",ge,[u(v,{icon:"fa6-solid:magnifying-glass"})])])])])])]),a(r).write?(l(),d("div",fe,[u(q,{class:"btn btn-sm btn-light-primary2",to:"/customer_display/add"},{default:y(()=>[Q("+ "+n(t.$t("New CDS")),1)]),_:1})])):w("",!0)])])])]),a(s).is_listing?(l(),A(P,{key:0})):(l(),d("div",ve,[e("table",ye,[e("thead",we,[e("tr",null,[e("th",ke,n(t.$t("CDS Name")),1),e("th",Ce,n(t.$t("Activation Code")),1),e("th",be,n(t.$t("Terminal")),1),e("th",De,n(t.$t("Active")),1),a(r).write||a(r).delete?(l(),d("th",Se,n(t.$t("Action")),1)):w("",!0)])]),e("tbody",null,[a(g)!=""?(l(!0),d(X,{key:0},Z(a(g),(c,O)=>{var D;return l(),d("tr",{key:O},[e("td",{onClick:S=>b(c.slack),role:"button"},[e("div",null,[e("span",$e,n(c.name),1)])],8,Ae),e("td",Ne,n(c.activation_code),1),e("td",{onClick:S=>b(c.slack),role:"button"},n((D=c.terminal)==null?void 0:D.terminal_name),9,xe),e("td",null,[e("div",Be,[e("div",Te,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"Status_id",onChange:S=>T(c.slack),checked:c.status==1},null,40,Ee)])])]),a(r).write||a(r).delete?(l(),d("td",Ie,[u(F,{permissions:a(r),onEdit:E,onDelete:I,slack:c.slack},null,8,["permissions","slack"])])):w("",!0)])}),128)):(l(),d("tr",Le,[e("td",qe,n(t.$t("No Data Found")),1)]))])])])),e("div",Pe,[e("div",Fe,[e("div",Me,[u(se,{onPaginate_limit_update:B,pagination:a(f)},null,8,["pagination"])]),e("div",Oe,[u(a(ee),{data:a(f),limit:5,onPaginationChangePage:h},null,8,["data"])])])])])]),_:1})}}};export{Qe as default};
