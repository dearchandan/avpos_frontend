import S from"./ServerMessage.qNo4NwTp.js";import{u as A,b as $,e as B,v as x,g as n,h as d,i as s,t as l,k as m,w as C,j as _,N as M,K as D,l as u,p as U}from"./index.ri7Y_V5F.js";import{F as j}from"./vee-validate.esm.0La7AMjT.js";import{c as q,a as E}from"./index.esm.wERziE-M.js";import{_ as g}from"./VTextInput.o2P1IcEE.js";import{C as F}from"./ClipLoader.4-rIzqtH.js";import"./VTooltip.a7qKl6DY.js";/* empty css                                                   */const I={class:"modal hide",id:"addVariantModal",tabindex:"-1","aria-labelledby":"Add Variant","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},O={class:"modal-dialog modal-dialog-centered modal-lg"},z={class:"modal-content"},J={class:"modal-header"},K={key:0,class:"modal-title"},L={key:1,class:"modal-title"},T={class:"modal-body"},G={class:"row"},H={class:"col-6"},P={class:"col-6"},Q={key:0,class:"py-3"},R={class:"mt-2 text-end"},W=["disabled"],X={key:1,class:"pt-0"},Y={key:2,class:"pt-0"},oa={__name:"AddVariant",props:{show_add_variant_modal:Boolean,edit_data:{type:[Array,Object,String]}},emits:["closeAddVariantModal"],setup(b,{emit:h}){const{t:r}=A();$();const c={server_messages:{type:"",messages:""},is_saving:!1,variant_id:"",variant_name:"",variant_name_ar:""},a=B({...c}),f=q({variant_name:E().required(r("name is required",{name:r("Variant Name")})).min(3,r("name must be at least n characters",{name:r("Variant Name"),number:3}))}),y=h,V=b,k=r("Variant Name"),w=r("Variant Name (Arabic)");x(()=>V.edit_data,e=>{e!=""&&(a.variant_name=e.name,a.variant_name_ar=e.name_ar!=null?e.name_ar:"",a.variant_id=e.id)});function v(){document.getElementById("add_variant_form").reset(),p(),document.getElementById("close_btn").click(),y("closeAddVariantModal")}async function N(){var e=new FormData;e.append("variant_name",a.variant_name),e.append("variant_name_ar",a.variant_name_ar),e.append("variant_id",a.variant_id);var i=a.variant_id!=""?"/api/variant/update":"/api/variant/save";await axios.post(i,e).then(t=>{if(a.is_saving=!0,t.data.status_code==200)toast.success(t.data.msg),a.is_saving=!1,p(),v();else{try{a.server_messages.type="error",a.server_messages.messages=JSON.parse(t.data.msg)}catch{a.server_messages.type="error",a.server_messages.messages=t.data.msg}a.is_saving=!1}}).catch(t=>{a.server_messages.type="error",a.server_messages.messages=t,a.is_saving=!1,console.log(t)})}function p(){Object.assign(a,c)}return(e,i)=>{const t=S;return n(),d("div",I,[s("div",O,[s("div",z,[s("div",J,[a.variant_id==""||a.variant_id==null?(n(),d("h5",K,l(e.$t("Add Variant")),1)):(n(),d("h5",L,l(e.$t("Update Variant")),1)),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:v,id:"close_btn"})]),s("div",T,[m(_(j),{"validation-schema":_(f),onSubmit:N,enctype:"multipart/form-data","initial-values":a,id:"add_variant_form"},{default:C(()=>[s("div",G,[s("div",H,[m(g,{type:"text",name:"variant_name",modelValue:a.variant_name,"onUpdate:modelValue":i[0]||(i[0]=o=>a.variant_name=o),label:_(k),required:!0},null,8,["modelValue","label"])]),s("div",P,[m(g,{type:"text",name:"variant_name_ar",modelValue:a.variant_name_ar,"onUpdate:modelValue":i[1]||(i[1]=o=>a.variant_name_ar=o),label:_(w)},null,8,["modelValue","label"])]),D(s("input",{type:"hidden","onUpdate:modelValue":i[2]||(i[2]=o=>a.variant_id=o)},null,512),[[M,a.variant_id]])]),a.server_messages.messages!=""?(n(),d("div",Q,[m(t,{server_messages:a.server_messages},null,8,["server_messages"])])):u("",!0),s("div",R,[s("button",{type:"submit",class:"btn btn-primary",disabled:a.is_saving},[a.is_saving?(n(),U(F,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):u("",!0),a.is_saving?(n(),d("span",X,l(e.$t("Saving...")),1)):(n(),d("span",Y,l(e.$t("Save")),1))],8,W)])]),_:1},8,["validation-schema","initial-values"])])])])])}}};export{oa as default};
