import{u as V,r as _,e as F,P as C,g as i,h as r,i as s,t as d,k as u,w as D,j as v,l as h,F as x,x as B,L as E,K as N,n as L,p as Q,q as U,_ as j}from"./index.7OFNPsHl.js";import R from"./ServerMessage.I5ol-gtz.js";import{F as T}from"./vee-validate.esm.N3uz7Rsk.js";import{c as z,d as J}from"./index.esm.cd1bITNA.js";import{_ as K}from"./VTextInput.VtSvZjuc.js";/* empty css                                                   */import{C as G}from"./ClipLoader.1qNfpKDH.js";import"./VTooltip.n3SV8A0p.js";/* empty css                                                   */const H={class:"modal hide",id:"addModifierOptionItemModal",tabindex:"-1","aria-labelledby":"Add Option","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},W={class:"modal-dialog modal-dialog-centered"},X={class:"modal-content"},Y={class:"modal-header"},Z={class:"modal-title"},ee={class:"modal-body"},se={class:"row"},te={class:"col-12 mb-3"},ae={key:0,class:"col-md-12 mb-3"},oe={for:""},ie=s("br",null,null,-1),de={class:"badge badge-primary text-primary"},re={class:"col-md-12"},ne={class:"col-12"},le={for:""},ce={key:0,value:""},me=["value"],_e={key:0,class:"py-3"},ue={class:"mt-2 text-end"},pe=["disabled"],ve={key:1,class:"pt-0"},he={key:2,class:"pt-0"},$e={__name:"AddModifierOptionItem",props:["show_add_option_modal","edit_data","modifier_option_slack"],emits:["closeAddModifierOptionItemModal"],setup(y,{emit:b}){const{t:o}=V(),p=_({search_placeholder:o("Search and Add Product"),search_product:o("Search Product"),quantity:o("Quantity")}),k=U(()=>j(()=>import("./ProductSearch.TX6_3K2y.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),f={server_messages:{type:"",messages:""},is_saving:!1,product_slack:"",quantity:"",measurement_unit_id:""},e=F({...f}),M=z({quantity:J().typeError(o("must be a number",{name:o("Quantity")})).required(o("name is required",{name:o("Quantity")})).min(1,o("name must be at least n characters",{name:o("Quantity"),number:1}))}),q=b,S=C(y,"modifier_option_slack");function g(){P(),c.value={},q("closeAddModifierOptionItemModal"),$("#addModifierOptionItemModal").modal("hide")}const O=_([]);async function I(){var t=new FormData;t.append("product_slack",e.product_slack),t.append("modifier_option_slack",S.value),t.append("quantity",e.quantity),t.append("measurement_unit_id",e.measurement_unit_id),await axios.post("/api/modifier/option/item/save",t).then(a=>{if(e.is_saving=!0,a.data.status_code==200)toast.success(a.data.msg),e.is_saving=!1,document.getElementById("addModifierOptionItemForm").reset(),g();else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(a.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=a.data.msg}e.is_saving=!1}}).catch(a=>{e.server_messages.type="error",e.server_messages.messages=a,e.is_saving=!1,console.log(a)})}const m=_([]),c=_({});async function w(t){c.value=t,e.product_slack=t.slack;let a=new FormData;a.append("product_slack",t.slack),await axios.post("/api/product/measurements",a).then(n=>{m.value=n.data.data}).catch(n=>{e.server_messages.type="error",e.server_messages.messages=n,console.log(n)})}function P(){Object.assign(e,f)}return(t,a)=>{const n=R;return i(),r("div",H,[s("div",W,[s("div",X,[s("div",Y,[s("h5",Z,d(t.$t("Add Modifier Product")),1),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:g})]),s("div",ee,[u(v(T),{"validation-schema":v(M),onSubmit:I,enctype:"multipart/form-data",id:"addModifierOptionItemForm"},{default:D(()=>[s("div",se,[s("div",te,[u(v(k),{onSelectProduct:w,placeholder:p.value.search_placeholder,button_placeholder:p.value.search_product,selected_products:O.value},null,8,["placeholder","button_placeholder","selected_products"])]),c.value.name?(i(),r("div",ae,[s("label",oe,d(t.$t("Product")),1),ie,s("span",de,d(c.value.name),1)])):h("",!0),s("div",re,[u(K,{type:"number",name:"quantity",modelValue:e.quantity,"onUpdate:modelValue":a[0]||(a[0]=l=>e.quantity=l),label:p.value.quantity,required:!0},null,8,["modelValue","label"])]),s("div",ne,[s("label",le,d(t.$t("Select Measurement Unit")),1),N(s("select",{name:"measurement_unit_id","onUpdate:modelValue":a[1]||(a[1]=l=>e.measurement_unit_id=l),class:"form-control form-control-solid"},[m.value==""||m.value==null?(i(),r("option",ce,d(t.$t("Units")),1)):(i(!0),r(x,{key:1},B(m.value,(l,A)=>(i(),r("option",{key:A,value:l.id},d(l.unit_name),9,me))),128))],512),[[E,e.measurement_unit_id]])])]),L(" "+d(e.server_messages.messages)+" ",1),e.server_messages.messages!=""?(i(),r("div",_e,[u(n,{server_messages:e.server_messages},null,8,["server_messages"])])):h("",!0),s("div",ue,[s("button",{type:"submit",class:"btn btn-primary",disabled:e.is_saving||c.value.slack==null},[e.is_saving?(i(),Q(G,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):h("",!0),e.is_saving?(i(),r("span",ve,d(t.$t("Saving...")),1)):(i(),r("span",he,d(t.$t("Save")),1))],8,pe)])]),_:1},8,["validation-schema"])])])])])}}};export{$e as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ProductSearch.TX6_3K2y.js","assets/index.7OFNPsHl.js","assets/index.1t-AB2n6.css","assets/vee-validate.esm.N3uz7Rsk.js","assets/index.esm.cd1bITNA.js","assets/BeatLoader.cb9i48GG.js","assets/BeatLoader.5j6ku4bW.css","assets/ClipLoader.7xz7y6gZ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
