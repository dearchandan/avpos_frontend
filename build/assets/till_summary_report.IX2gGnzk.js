import{z as X,G as Z,u as tt,b as st,d as S,e as T,r,g as o,p as O,w as g,f as A,i as t,k as v,n as h,t as l,j as e,l as B,A as w,B as y,h as i,x as R,F as L,I as et,bV as f,q as at,_ as lt}from"./index.ri7Y_V5F.js";import{_ as nt}from"./DefaultLayout.EMHfdzn0.js";import{_ as ot}from"./VMultiSelect.3zUL7lik.js";import{s as x,a as P,e as I,j as N}from"./vue-datepicker.gRWbN_6J.js";import{s as k,e as D}from"./index.DsgwUBM9.js";import"./ClipLoader.4-rIzqtH.js";/* empty css                                                   */import"./vee-validate.esm.0La7AMjT.js";const dt={},it=Z('<div class="row"><div><div class="card-head mb-4"><div class="text-center"><div class="head-title"><div class="skl-w mb-3 mx-auto" style="height:18px;width:80%;"></div></div><div class="head-data"><div class="skl-w mb-2 mx-auto" style="height:8px;width:70%;"></div></div><div class="head-data"><div class="skl-w mb-2 mx-auto" style="height:8px;width:80%;"></div></div><div class="head-data"><div class="skl-w mb-2 mx-auto" style="height:8px;width:50%;"></div></div></div></div><div class="card-data"><div class="table-responsive mb-3"><table class="table table-list-data table-hover"><tbody><tr><td width="75%" class="text-start"><div class="skl-w" style="height:8px;"></div></td><td width="25%" class="text-end"><div class="skl-w" style="height:8px;"></div></td></tr><tr><td width="75%" class="text-start"><div class="skl-w" style="height:8px;"></div></td><td width="25%" class="text-end"><div class="skl-w" style="height:8px;"></div></td></tr><tr><td width="75%" class="text-start"><div class="skl-w" style="height:8px;"></div></td><td width="25%" class="text-end"><div class="skl-w" style="height:8px;"></div></td></tr><tr><td width="75%" class="text-start"><div class="skl-w" style="height:8px;"></div></td><td width="25%" class="text-end"><div class="skl-w" style="height:8px;"></div></td></tr><tr><td width="75%" class="text-start"><div class="skl-w" style="height:8px;"></div></td><td width="25%" class="text-end"><div class="skl-w" style="height:8px;"></div></td></tr></tbody></table></div></div></div></div><div class="row"><div class="col-md-12 text-center"><div class="skl-w mx-auto" style="height:38px;width:130px;"></div></div></div>',2);function ct(E,M){return it}const _t=X(dt,[["render",ct]]),rt={class:"header-nav-wrap"},ht={class:"row align-items-center"},mt={class:"col-auto"},ut={class:"header-back-link"},vt={class:"col-auto"},pt={class:"fw-bold"},gt={class:"content"},bt={class:"row"},wt={class:"col-md-12"},yt={class:"card"},ft={class:"row field-m-0 align-items-end g-3"},xt={class:"col-md-4 col-lg-3"},kt={class:"form-field"},Dt={class:"form-label"},Mt=t("span",{class:"text-danger"},"*",-1),$t=["onClick","onKeyup"],Ct={class:"col-md-4 col-lg-3"},Vt={class:"form-field"},Yt={class:"form-label"},St=t("span",{class:"text-danger"},"*",-1),Tt=["onClick","onKeyup"],Ot={class:"col-md-4 col-lg-3"},At={class:"col-auto text-end"},Bt={class:"row align-items-center"},Rt={class:"col-auto"},Lt=["disabled"],Pt=t("div",{class:"col-auto"},null,-1),It={class:"row"},Nt={class:"card"},Et=["id"],Kt={key:0},Ft={key:1},Ht={class:"card-head mb-4"},jt={class:"text-center"},Ut=t("div",{class:"head-title"},[t("h4",null,"Tills Summary Report")],-1),qt={class:"head-data"},zt=t("b",null,"Printed On:",-1),Gt={class:"head-data"},Wt=t("b",null,"Opening Date Time:",-1),Jt={key:0},Qt=t("b",null,"Closing Date Time:",-1),Xt={class:"head-data"},Zt=t("b",null,"Branch:",-1),ts={class:"card-data"},ss={class:"table-responsive mb-3"},es={class:"table table-list-data table-hover"},as={width:"75%",class:"text-start"},ls={width:"25%",class:"text-end"},ns={width:"75%",class:"text-start"},os={width:"25%",class:"text-end"},ds={width:"75%",class:"text-start"},is={width:"25%",class:"text-end"},cs={key:0},_s={key:1},rs={width:"75%",class:"text-start"},hs={width:"25%",class:"text-end"},ms={width:"75%",class:"text-start"},us={width:"25%",class:"text-end"},vs={key:0},ps={key:1},gs={class:"row"},bs={class:"col-md-12 text-center"},ws=["onClick"],ys={key:1,class:""},fs={class:"card text-center"},Ts={__name:"till_summary_report",setup(E){const{t:M}=tt(),{isAuthorized:xs,getRoundedValue:p}=et(),V=st();S(()=>V.user.currency.symbol);const K=T({server_messages:{type:"",messages:""},is_submitting:!1,is_listing:!1,opening_dates:r([new Date,new Date]),closing_dates:r([new Date,new Date]),selected_branch:r(),is_exporting:!1,is_data_loaded:!1}),s=T({...K}),F=M("Select Branch"),H=M("All Branches"),j=r([{label:"Today",value:[new Date,new Date]},{label:"This month",value:[k(new Date),D(new Date)]},{label:"Last month",value:[k(x(new Date,1)),D(x(new Date,1))]},{label:"This year",value:[P(new Date),I(new Date)]}]),U=r([{label:"Today",value:[new Date,new Date]},{label:"This month",value:[k(new Date),D(new Date)]},{label:"Last month",value:[k(x(new Date,1)),D(x(new Date,1))]},{label:"This year",value:[P(new Date),I(new Date)]}]),q=S(()=>V.user.branches),$=r([]),Y=r();async function z(d=1){s.is_listing=!0,s.opening_dates.length>0&&(s.opening_dates[0]=f(s.opening_dates[0]).format("YYYY-MM-DD"),s.opening_dates[1]=s.opening_dates[1]!=""?f(s.opening_dates[1]).format("YYYY-MM-DD"):""),s.closing_dates.length>0&&(s.closing_dates[0]=f(s.closing_dates[0]).format("YYYY-MM-DD"),s.closing_dates[1]=s.closing_dates[1]!=""?f(s.closing_dates[1]).format("YYYY-MM-DD"):""),await axios.get("/api/till_summary_report",{params:{filter:s}}).then(n=>{$.value=n.data.data.summery_data,$.value==null?s.is_data_loaded=!1:s.is_data_loaded=!0,Y.value=n.data.data.printed_date,s.is_listing=!1}).catch(n=>{s.server_messages.type="error",s.server_messages.messages=n,s.is_listing=!1,console.log(n)})}async function G(d){const n=document.getElementById(d).innerHTML;let b="";for(const C of[...document.querySelectorAll('link[rel="stylesheet"], style')])b+=C.outerHTML;const m=window.open("AvPOS","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");m.document.write(`<!DOCTYPE html>
<html>
  <head>
    ${b}
  </head>
  <body>
    ${n}
  </body>
</html>`),m.document.close(),m.focus(),m.print()}const W=at(()=>lt(()=>import("./ServerMessage.qNo4NwTp.js"),__vite__mapDeps([0,1,2])));return(d,n)=>{const b=A("Icon"),m=A("router-link"),C=ot,J=_t,Q=nt;return o(),O(Q,null,{subheader:g(()=>[t("div",rt,[t("div",ht,[t("div",mt,[t("div",ut,[v(m,{class:"text-primary",to:"/reports"},{default:g(()=>[v(b,{icon:"fa6-solid:chevron-left"}),h(" "+l(d.$t("Reports")),1)]),_:1})])]),t("div",vt,[t("h5",pt,l(d.$t("Till Summary Report")),1)])])])]),default:g(()=>[t("div",gt,[e(s).server_messages.messages!=""?(o(),O(e(W),{key:0,class:"py-3",server_messages:e(s).server_messages},null,8,["server_messages"])):B("",!0),t("div",bt,[t("div",wt,[t("div",yt,[t("div",ft,[t("div",xt,[t("div",kt,[t("label",Dt,[h(l(d.$t("Select dates for filter opening time"))+" ",1),Mt]),v(e(N),{range:"","preset-dates":e(j),modelValue:e(s).opening_dates,"onUpdate:modelValue":n[0]||(n[0]=a=>e(s).opening_dates=a),format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid"},{"preset-date-range-button":g(({label:a,value:_,presetDate:c})=>[t("span",{role:"button",tabindex:0,onClick:u=>c(_),onKeyup:[w(y(u=>c(_),["prevent"]),["enter"]),w(y(u=>c(_),["prevent"]),["space"])]},l(a),41,$t)]),_:1},8,["preset-dates","modelValue"])])]),t("div",Ct,[t("div",Vt,[t("label",Yt,[h(l(d.$t("Select dates for filter closing time"))+" ",1),St]),v(e(N),{range:"","preset-dates":e(U),modelValue:e(s).closing_dates,"onUpdate:modelValue":n[1]||(n[1]=a=>e(s).closing_dates=a),format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid"},{"preset-date-range-button":g(({label:a,value:_,presetDate:c})=>[t("span",{role:"button",tabindex:0,onClick:u=>c(_),onKeyup:[w(y(u=>c(_),["prevent"]),["enter"]),w(y(u=>c(_),["prevent"]),["space"])]},l(a),41,Tt)]),_:1},8,["preset-dates","modelValue"])])]),t("div",Ot,[v(C,{name:"branches",label:e(F),placeholder:e(H),text:"name",value:"id",options:e(q),modelValue:e(s).selected_branch,"onUpdate:modelValue":n[2]||(n[2]=a=>e(s).selected_branch=a),mode:"single"},null,8,["label","placeholder","options","modelValue"])]),t("div",At,[t("div",Bt,[t("div",Rt,[t("button",{class:"btn btn-primary",onClick:z,disabled:e(s).opening_dates==null&&e(s).closing_dates==null},"View",8,Lt)]),Pt])])])])])]),t("div",It,[e(s).is_data_loaded==!0?(o(!0),i(L,{key:0},R(e($),(a,_)=>(o(),i("div",{class:"col-md-3",key:_},[t("div",Nt,[t("div",{class:"row",id:a.slack},[e(s).is_listing?(o(),i("div",Kt,[v(J)])):(o(),i("div",Ft,[t("div",Ht,[t("div",jt,[Ut,t("div",qt,[t("span",null,[t("label",null,[zt,h(" "+l(e(Y)),1)])])]),t("div",Gt,[t("span",null,[t("label",null,[Wt,h(" "+l(a.opening_datetime),1)])]),a.closing_datetime!=null?(o(),i("span",Jt,[t("label",null,[Qt,h(" "+l(a.closing_datetime),1)])])):B("",!0)]),t("div",Xt,[t("span",null,[t("label",null,[Zt,h(" "+l(a.branch_name),1)])])])])]),t("div",ts,[t("div",ss,[t("table",es,[t("tbody",null,[(o(!0),i(L,null,R(a.payment_data,(c,u)=>(o(),i("tr",null,[t("td",as,l(c.payment_method_name),1),t("td",ls,l(e(p)(c.amount)),1)]))),256)),t("tr",null,[t("td",ns,l(d.$t("System Opening Cash")),1),t("td",os,l(e(p)(a.system_opening_cash)),1)]),t("tr",null,[t("td",ds,l(d.$t("System Closing Cash")),1),t("td",is,[a.system_closing_cash>0?(o(),i("span",cs,l(e(p)(a.system_closing_cash)),1)):(o(),i("span",_s,"0.00"))])]),t("tr",null,[t("td",rs,l(d.$t("Manual Opening Cash")),1),t("td",hs,l(e(p)(a.manual_opening_cash)),1)]),t("tr",null,[t("td",ms,l(d.$t("Manual Closing Cash")),1),t("td",us,[a.manual_closing_cash>0?(o(),i("span",vs,l(e(p)(a.manual_closing_cash)),1)):(o(),i("span",ps,"0.00"))])])])])])]),t("div",gs,[t("div",bs,[t("button",{class:"btn btn-success ms-3",onClick:c=>G(a.slack)},"Print",8,ws)])])]))],8,Et)])]))),128)):(o(),i("div",ys,[t("div",fs,l(d.$t("No Data Found")),1)]))])])]),_:1})}}};export{Ts as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ServerMessage.qNo4NwTp.js","assets/index.ri7Y_V5F.js","assets/index.1t-AB2n6.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
