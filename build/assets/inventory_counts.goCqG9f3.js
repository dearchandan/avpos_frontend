import{_ as F}from"./DefaultLayout.EMHfdzn0.js";import{_ as M}from"./PaginateLimit.Qyl6CO-f.js";import{_ as R}from"./ActionButtonGroup.UoCDvTnh.js";import{_ as x}from"./ListingSkeleton.PW5leU6x.js";import{_ as U}from"./InventoryMenu.rcnIHVl3.js";import{u as Y,r as m,e as G,o as z,v as J,g as a,p as $,w as k,I as K,f as N,k as d,i as e,t as n,h as l,n as W,l as g,K as H,N as Q,j as I,F as X,x as Z,O as ee}from"./index.ri7Y_V5F.js";import"./ClipLoader.4-rIzqtH.js";/* empty css                                                   */const te={class:"content"},se={class:"page-heading"},oe={class:"row align-items-center justify-content-between mb-3"},ae={class:"col-auto"},ne={class:"mb-0"},ie={key:0,class:"col-auto"},ce={class:"row align-items-end justify-content-between g-3"},le={class:"col-12 col-md-4 col-lg-3 order-1 order-md-2"},re={class:"form-field mb-0"},_e={class:"field-icon"},de=["placeholder"],ue={class:"icon"},me={key:0},he={key:1,class:"table-responsive"},pe={class:"table table-list-data table-hover"},ge={class:"bg-light"},ve={scope:"col",width:"10%"},fe={scope:"col",width:"15%"},ye={scope:"col",width:"10%"},ke={scope:"col",width:"10%"},be={key:0,scope:"col",class:"text-end",width:"10%"},we=["onClick"],Ce=["onClick"],$e=["onClick"],Ne=["onClick"],Ie={key:0,class:"badge badge-primary"},Te={key:1,class:"badge badge-success"},Be={key:0,class:"text-end"},De={key:1},Ee={key:1},Ve={class:"text-center py-3",colspan:"10"},Ae={class:"data-footer"},Se={class:"row align-items-center justify-content-between"},qe={class:"col-auto"},Oe={class:"col-auto"},Ge={__name:"inventory_counts",setup(Le){const{t:h}=Y(),{isAuthorized:b}=K(),T={server_messages:{type:"",messages:""},is_listing:!1,search_query:m(""),filter_count:0},B=h("Search by reference number"),s=G({...T});z(()=>{A(),u()}),J(()=>s.search_query,_.debounce(()=>{u()},500));const v=m([]),f=m([]);async function u(t=1){s.is_listing=!0,await axios.get("/api/v2/inventory_counts",{params:{page:t,paginate_limit:w.value,search_query:s.search_query}}).then(i=>{v.value=i.data.data,f.value=i.data.pagination,s.is_listing=!1}).catch(i=>{s.server_messages.type="error",s.server_messages.messages=i,s.is_listing=!1,console.log(i)})}const w=m();async function D(t){w.value=t,await u()}function p(t){router.push("/inventory_count/"+t)}function E(t){router.push("/inventory_count/edit/"+t)}async function V(t){var i=!1;await Swal.fire({title:h("Do you want to delete this inventory count?"),showCancelButton:!0,confirmButtonText:h("Yes, Delete"),confirmButtonColor:"#d33",cancelButtonText:h("Cancel")}).then(c=>{c.isConfirmed&&(i=!0)}),i&&await axios.post("/api/inventory_count/delete",{slack:t}).then(c=>{if(c.data.status_code==200)toast.success(c.data.msg),u();else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(c.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=c.data.msg}}).catch(c=>{s.server_messages.type="error",s.server_messages.messages=c,console.log(c)})}const r=m({write:!1,delete:!1});function A(){r.value={write:b("A_WRITE_INVENTORY_COUNT")||!0,delete:b("A_DELETE_INVENTORY_COUNT")||!0}}return(t,i)=>{const c=U,C=N("router-link"),S=N("Icon"),q=x,O=R,L=M,P=F;return a(),$(P,null,{subheader:k(()=>[d(c)]),default:k(()=>[e("div",te,[e("div",se,[e("div",oe,[e("div",ae,[e("h2",ne,n(t.$t("Inventory Counts")),1)]),(r.value.write,a(),l("div",ie,[d(C,{class:"btn btn-sm btn-light-primary2",to:"/inventory_count/add"},{default:k(()=>[W("+ "+n(t.$t("New Inventory Count")),1)]),_:1})]))]),e("div",ce,[e("div",le,[e("div",re,[e("div",_e,[H(e("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:I(B),"onUpdate:modelValue":i[0]||(i[0]=o=>s.search_query=o)},null,8,de),[[Q,s.search_query]]),e("div",ue,[d(S,{icon:"fa6-solid:magnifying-glass"})])])])])])]),s.is_listing?(a(),l("div",me,[d(q)])):(a(),l("div",he,[e("table",pe,[e("thead",ge,[e("tr",null,[e("th",ve,n(t.$t("Ref. Number")),1),e("th",fe,n(t.$t("Created At")),1),e("th",ye,n(t.$t("Completed At")),1),e("th",ke,n(t.$t("Status")),1),r.value.write&&r.value.delete?(a(),l("th",be,n(t.$t("Action")),1)):g("",!0)])]),e("tbody",null,[v.value.length>0?(a(!0),l(X,{key:0},Z(v.value,(o,j)=>(a(),l("tr",{key:j},[e("td",{inventory_count:"button","data-bs-toggle":"modal","data-bs-target":"#viewInventoryCountModal",onClick:y=>p(o.slack)},n(o.reference_no),9,we),e("td",{onClick:y=>p(o.slack),role:"button"},n(o.created_at_label),9,Ce),e("td",{onClick:y=>p(o.slack),role:"button"},n(o.completed_at_label),9,$e),e("td",{onClick:y=>p(o.slack),role:"button"},[o.status==0?(a(),l("span",Ie,n(t.$t("Draft")),1)):g("",!0),o.status==1?(a(),l("span",Te,n(t.$t("Completed")),1)):g("",!0)],8,Ne),r.value.write&&r.value.delete?(a(),l("td",Be,[o.status==0?(a(),$(O,{key:0,permissions:r.value,onDelete:V,onEdit:E,slack:o.slack},null,8,["permissions","slack"])):(a(),l("div",De,"--"))])):g("",!0)]))),128)):(a(),l("tr",Ee,[e("td",Ve,n(t.$t("No Data Found")),1)]))])])])),e("div",Ae,[e("div",Se,[e("div",qe,[d(L,{onPaginate_limit_update:D,pagination:f.value},null,8,["pagination"])]),e("div",Oe,[d(I(ee),{data:f.value,limit:5,onPaginationChangePage:u},null,8,["data"])])])])])]),_:1})}}};export{Ge as default};
