import{D as K}from"./DefaultLayout.K5Bh9Jz_.js";import{_ as Y}from"./ListingSkeleton.0g9v9IYA.js";import{_ as q}from"./PaginateLimit.T5jDCI_N.js";import{_ as z}from"./RestaurantMenu.ymk5MzCc.js";import{u as E,r as h,o as U,b as G,e as k,v as H,g as c,p as C,w as v,l as g,i as t,t as s,A as M,B as T,j as l,h as _,F as J,x as Q,k as B,m as I,y as V,O as W}from"./index.sP6fhsqN.js";import{s as F,a as X,e as Z,j as x}from"./vue-datepicker.S8gODTVm.js";/* empty css                                                   */import{s as w,e as y}from"./index.KqBHsonE.js";import"./ClipLoader._89zL49D.js";/* empty css                                                   */const tt={class:"content"},et={class:"page-heading pt-2"},st={class:"row align-items-center"},at={class:"col-md-4 col-lg-3"},ot={class:"form-field mb-0"},nt=["onClick","onKeyup"],it={key:0},ct={class:"table-responsive"},lt={class:"table table-list-data table-hover"},_t={class:"bg-light"},dt={scope:"col",width:"15%"},rt={scope:"col",width:"10%"},ht={scope:"col",width:"10%"},mt={scope:"col",width:"10%"},ut={scope:"col",width:"10%"},pt={scope:"col",width:"5%"},gt={scope:"col",width:"10%"},ft={scope:"col",class:"text-end",width:"20%"},bt={role:"button"},kt={role:"button"},vt={key:0},wt={role:"button"},yt={role:"button"},$t={role:"button"},Dt={role:"button"},Ct={class:"text-end"},Mt=["onClick"],Tt=["onClick"],Bt=["onClick"],It={key:1},Vt={class:"text-center py-3",colspan:"11"},Ft={class:"data-footer"},Lt={class:"row align-items-center justify-content-between"},St={class:"col-auto"},Nt={class:"col-auto"},Gt={__name:"reservations",setup(Ot){E();const L=h([{label:"Today",value:[new Date,new Date]},{label:"This month",value:[w(new Date),y(new Date)]},{label:"Last month",value:[w(F(new Date,1)),y(F(new Date,1))]},{label:"This year",value:[X(new Date),Z(new Date)]}]);U(()=>{d()}),G();const S={server_messages:{type:"",messages:""},is_listing:!1,search_query:h("")},i=k({...S}),N=k({reservation_dates:h([w(new Date),y(new Date)])}),p=k({...N}),f=h([]),b=h([]),$=h();H(p,()=>{d()},{deep:!0});async function d(a=1){i.is_listing=!0,await axios.post("/api/reservations",{page:a,paginate_limit:$.value,filters:p}).then(n=>{f.value=n.data.data,b.value=n.data.pagination,i.is_listing=!1}).catch(n=>{i.server_messages.type="error",i.server_messages.messages=n,i.is_listing=!1,console.log(n)})}async function O(a){$.value=a,await d()}async function D(a){var n=new FormData;n.append("reservation_id",a),await axios.post("/api/cashier/cancel_table_booking",n).then(o=>{o.data.status_code==200?(toast.success(o.data.msg),d()):toast.error(o.data.msg)}).catch(o=>{i.server_messages.type="error",i.server_messages.messages=o,i.is_processing=!1,console.log(o)})}async function P(a){var n=new FormData;n.append("reservation_id",a),await axios.post("/api/cashier/check_in_table",n).then(o=>{o.data.status_code==200?(toast.success(o.data.msg),d()):toast.error(o.data.msg)}).catch(o=>{i.server_messages.type="error",i.server_messages.messages=o,i.is_processing=!1,console.log(o)})}return(a,n)=>{const o=z,j=q,A=Y,R=K;return c(),C(R,null,{subheader:v(()=>[g(o)]),default:v(()=>[t("div",tt,[t("div",et,[t("div",st,[t("div",at,[t("div",ot,[t("label",null,s(a.$t("Date Range")),1),g(l(x),{range:"","preset-dates":l(L),modelValue:l(p).reservation_dates,"onUpdate:modelValue":n[0]||(n[0]=e=>l(p).reservation_dates=e),format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control-solid form-control form-control-sm"},{"preset-date-range-button":v(({label:e,value:m,presetDate:r})=>[t("span",{role:"button",tabindex:0,onClick:u=>r(m),onKeyup:[M(T(u=>r(m),["prevent"]),["enter"]),M(T(u=>r(m),["prevent"]),["space"])]},s(e),41,nt)]),_:1},8,["preset-dates","modelValue"])])])])]),l(i).is_listing?(c(),C(A,{key:1})):(c(),_("div",it,[t("div",ct,[t("table",lt,[t("thead",_t,[t("tr",null,[t("th",dt,s(a.$t("Date & Time")),1),t("th",rt,s(a.$t("Person Detail")),1),t("th",ht,s(a.$t("Check In Status (Checked In)")),1),t("th",mt,s(a.$t("Check In Time")),1),t("th",ut,s(a.$t("Booked Table")),1),t("th",pt,s(a.$t("Seats")),1),t("th",gt,s(a.$t("Reserved At")),1),t("th",ft,s(a.$t("Action")),1)])]),t("tbody",null,[l(f)!=""?(c(!0),_(J,{key:0},Q(l(f),(e,m)=>{var r;return c(),_("tr",{key:m},[t("td",bt,s(e.reservation_date_formatted)+" "+s(e.reservation_time_formatted),1),t("td",kt,[B(s(e.person_contact)+" ",1),e.person_name!=""?(c(),_("br",vt)):I("",!0),B(" "+s(e.person_name),1)]),t("td",wt,s(e.checked_in_at!=""&&e.checked_in_at!=null?"Checked In":""),1),t("td",yt,s(e.checked_in_at_formatted),1),t("td",$t,s((r=e.table)==null?void 0:r.name),1),t("td",Dt,s(e.reserved_seats),1),t("td",null,s(e.reserved_at),1),t("td",Ct,[t("div",null,[e.is_check_in_time&&e.checked_in_at==null?(c(),_("a",{key:0,class:"btn btn-sm btn-success",href:"#",onClick:u=>P(e.id)},s(a.$t("Check-In")),9,Mt)):I("",!0),e.checked_in_at==null?(c(),_("a",{key:1,class:V(["ms-1 btn btn-sm btn-warning",[e.is_check_in_time?"w-40":""]]),href:"#",onClick:u=>D(e.id)},s(a.$t("Cancel")),11,Tt)):(c(),_("a",{key:2,href:"#",class:V(["btn btn-sm ms-1",[e.spent_minutes>45?"btn-danger":"btn-success"]]),onClick:u=>D(e.id)},s(a.$t("Free Table")),11,Bt))])])])}),128)):(c(),_("tr",It,[t("td",Vt,s(a.$t("No Data Found")),1)]))])])]),t("div",Ft,[t("div",Lt,[t("div",St,[g(j,{onPaginate_limit_update:O,pagination:l(b)},null,8,["pagination"])]),t("div",Nt,[g(l(W),{data:l(b),limit:5,onPaginationChangePage:d},null,8,["data"])])])])]))])]),_:1})}}};export{Gt as default};
