import{u as W,r as l,e as A,o as X,v as U,g as d,p as q,w as L,f as D,i as e,k as c,n as Y,t as a,j as n,K as Z,N as ee,h as u,F as te,x as oe,l as h,O as se,q as E,_ as N}from"./index.7OFNPsHl.js";import{_ as ae}from"./DefaultLayout.nvkZ4UhM.js";import{_ as ne}from"./ListingSkeleton.iExoV4hO.js";import{_ as le}from"./VMultiSelect.XXz7TsgF.js";import{_ as ie}from"./PaginateLimit.Xv-qfeqj.js";import{u as de}from"./global.wK1y07-b.js";import"./ClipLoader.1qNfpKDH.js";/* empty css                                                   */import"./vee-validate.esm.N3uz7Rsk.js";const ce={class:"header-nav-wrap"},_e={class:"row align-items-center"},re={class:"col-auto"},ue={class:"header-back-link"},ge={class:"col-auto"},me={class:"fw-bold"},pe={class:"content"},ve={class:"page-heading"},he={class:"row align-items-end justify-content-between"},ye={class:"col-md order-2 order-md-1"},fe={class:"row g-3"},be={class:"col-6 col-md-4 col-lg-3"},we={class:"col-6 col-md-4 col-lg-3"},ke={class:"col-6 col-md-4 col-lg-3"},Ae={class:"col-md-auto order-1 order-md-2 mb-3 mb-md-0"},Le={class:"row"},Ve={class:"col-lg-4"},Ce={class:"form-field page-heading-search-field mb-0"},Me={class:"field-icon"},$e=["placeholder"],Se={class:"icon"},Ue={class:"col text-end"},qe={key:1,class:"table-responsive"},De={class:"table table-list-data table-hover"},Ee={class:"bg-light"},Ne={scope:"col",width:"60%"},Pe={scope:"col",width:"10%"},Ie={scope:"col",width:"15%"},je={scope:"col",width:"15%"},xe=["onClick"],Be=["onClick"],Te={key:0,class:"badge badge-success"},Fe={key:1,class:"badge badge-danger"},Oe={key:2,class:"badge badge-warning"},Re={key:3,class:"badge badge-primary"},Ge=["onClick"],Ke=["onClick"],ze={key:1},He={class:"text-center py-3",colspan:"7"},Je={class:"data-footer"},Qe={class:"row align-items-center justify-content-md-between justify-content-center g-3"},We={class:"col-auto"},Xe={class:"col-auto"},dt={__name:"activity_logs",setup(Ye){const{action_types:P,section_types:I}=de(),{t:g}=W(),j=E(()=>N(()=>import("./AddActivityLog.QnXp-UjL.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),x=E(()=>N(()=>import("./ViewActivityLog.PaNMQNZX.js"),__vite__mapDeps([10,2,3]))),V=l(!1),B={server_messages:{type:"",messages:""},is_listing:!1,search_query:l("")},T=g("Search by name, type.."),i=A({...B});X(()=>{m(),O()}),U(()=>i.search_query,_.debounce(()=>{m()},500));const F=A({user:l(""),action_type:l(""),section:l("")}),r=A({...F});U(r,()=>{m()},{deep:!0});const y=l([]),f=l([]);async function m(s=1){i.is_listing=!0,await axios.get("/api/v2/activity_logs",{params:{page:s,paginate_limit:M.value,search_query:i.search_query,filters:r}}).then(o=>{y.value=o.data.data.data,f.value=o.data.data.pagination,i.is_listing=!1}).catch(o=>{i.server_messages.type="error",i.server_messages.messages=o,i.is_listing=!1,console.log(o)})}const C=l([]);async function O(){let s=await axios.get("api/v2/users/dropdown");s=s.data.data,_.forEach(s,o=>{let v={key:o.id,value:o==null?void 0:o.name};C.value.push(v)})}const M=l();async function R(s){M.value=s,await m()}const b=l(!1),$=l([]);function G(){V.value=!1,m()}function p(s){b.value=!0,$.value=s}function K(){b.value=!1}return(s,o)=>{const v=D("Icon"),z=D("router-link"),w=le,H=ne,J=ae;return d(),q(J,null,{subheader:L(()=>[e("div",ce,[e("div",_e,[e("div",re,[e("div",ue,[c(z,{class:"text-primary",to:"/settings"},{default:L(()=>[c(v,{icon:"fa6-solid:chevron-left"}),Y(" "+a(s.$t("Settings")),1)]),_:1})])]),e("div",ge,[e("h5",me,a(s.$t("Activity Logs")),1)])])])]),default:L(()=>[e("div",pe,[e("div",ve,[e("div",he,[e("div",ye,[e("div",fe,[e("div",be,[c(w,{name:"user",label:n(g)("Users"),placeholder:n(g)("Select User"),text:"value",value:"key",options:C.value,modelValue:r.user,"onUpdate:modelValue":o[0]||(o[0]=t=>r.user=t),mode:"single",no_class:!1,height_sm:!0},null,8,["label","placeholder","options","modelValue"])]),e("div",we,[c(w,{modelValue:r.action_type,"onUpdate:modelValue":o[1]||(o[1]=t=>r.action_type=t),name:"action_types",text:"value",value:"key",mode:"single",options:n(P),no_class:!1,height_sm:!0,label:n(g)("Action"),placeholder:n(g)("Select Action")},null,8,["modelValue","options","label","placeholder"])]),e("div",ke,[c(w,{modelValue:r.section,"onUpdate:modelValue":o[2]||(o[2]=t=>r.section=t),name:"action_types",text:"key",value:"value",mode:"single",options:n(I),no_class:!1,height_sm:!0,label:n(g)("Section"),placeholder:n(g)("Select Section")},null,8,["modelValue","options","label","placeholder"])])])]),e("div",Ae,[e("div",Le,[e("div",Ve,[e("div",Ce,[e("div",Me,[Z(e("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:n(T),"onUpdate:modelValue":o[3]||(o[3]=t=>i.search_query=t)},null,8,$e),[[ee,i.search_query]]),e("div",Se,[c(v,{icon:"fa6-solid:magnifying-glass"})])])])]),e("div",Ue,[e("a",{href:"#",class:"btn btn-sm btn-light-primary2","data-bs-toggle":"modal",onClick:o[4]||(o[4]=(...t)=>s.openAddActivityLogModal&&s.openAddActivityLogModal(...t)),"data-bs-target":"#addActivityLogModal"}," + "+a(s.$t("New Activity Log")),1)])])])])]),i.is_listing?(d(),q(H,{key:0})):(d(),u("div",qe,[e("table",De,[e("thead",Ee,[e("tr",null,[e("th",Ne,a(s.$t("Description")),1),e("th",Pe,a(s.$t("Event")),1),e("th",Ie,a(s.$t("User")),1),e("th",je,a(s.$t("Created At")),1)])]),e("tbody",null,[y.value!=""?(d(!0),u(te,{key:0},oe(y.value,(t,Q)=>{var S;return d(),u("tr",{key:Q},[e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewActivityLogModal",onClick:k=>p(t)},a(t.description),9,xe),e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewActivityLogModal",onClick:k=>p(t)},[t.event=="created"?(d(),u("span",Te,a(t.event),1)):h("",!0),t.event=="deleted"?(d(),u("span",Fe,a(t.event),1)):h("",!0),t.event=="updated"?(d(),u("span",Oe,a(t.event),1)):h("",!0),t.event=="custom"?(d(),u("span",Re,a(t.event),1)):h("",!0)],8,Be),e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewActivityLogModal",onClick:k=>p(t)},a((S=t.user)==null?void 0:S.name),9,Ge),e("td",{role:"button","data-bs-toggle":"modal","data-bs-target":"#viewActivityLogModal",onClick:k=>p(t)},a(t.time_ago),9,Ke)])}),128)):(d(),u("tr",ze,[e("td",He,a(s.$t("No Data Found")),1)]))])])])),e("div",Je,[e("div",Qe,[e("div",We,[c(ie,{onPaginate_limit_update:R,pagination:f.value},null,8,["pagination"])]),e("div",Xe,[c(n(se),{data:f.value,limit:5,onPaginationChangePage:m},null,8,["data"])])])])]),c(n(j),{show_add_activity_log_modal:V.value,onCloseAddActivityLogModal:G},null,8,["show_add_activity_log_modal"]),c(n(x),{show_view_activity_log_modal:b.value,activity_log:$.value,onCloseViewActivityLogModal:K},null,8,["show_view_activity_log_modal","activity_log"])]),_:1})}}};export{dt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AddActivityLog.QnXp-UjL.js","assets/ServerMessage.I5ol-gtz.js","assets/index.7OFNPsHl.js","assets/index.1t-AB2n6.css","assets/VTextArea.uv2r4aOV.js","assets/VTooltip.n3SV8A0p.js","assets/vee-validate.esm.N3uz7Rsk.js","assets/index.esm.cd1bITNA.js","assets/ClipLoader.1qNfpKDH.js","assets/ClipLoader.7xz7y6gZ.css","assets/ViewActivityLog.PaNMQNZX.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
