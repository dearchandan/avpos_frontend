import{u as Q,bT as W,r as x,v as T,e as L,d as D,f as X,g as i,h as c,i as t,j as u,l as k,n as Y,m as y,t as l,F as w,x as S,y as v,k as C,q as Z,_ as ee}from"./index.sP6fhsqN.js";import{j as te}from"./vue-datepicker.S8gODTVm.js";import{B as se}from"./BeatLoader.GLQikMEo.js";/* empty css                                                   */const ae={class:"modal hide cashier-layout-modal",id:"dineInModal",tabindex:"-1","aria-labelledby":"Selcet Dine In Table","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},ne={class:"modal-dialog modal-xl modal-dialog-centered"},le={class:"modal-content"},oe={class:"modal-header modal-title border-0"},ie={class:"row align-items-center justify-content-between w-100"},ce={class:"col-auto"},de={class:"row align-items-center"},_e={key:0,class:"col-4 col-md-5"},re={class:"form-field mb-0"},ue={class:"col-auto"},me={class:"nav nav-tabs seats-tabs",role:"tablist"},pe={class:"nav-item",role:""},he=["onClick"],be={class:"col-auto"},ve={class:"nav nav-tabs seats-tabs",role:"tablist"},fe={class:"nav-item",role:"presentation"},ge={class:"nav-item",role:"presentation"},ke=["onClick"],ye=t("div",{class:"col-auto pe-0"},[t("div",{class:"row align-items-center"},[t("div",{class:"col-auto pe-0"})])],-1),we={class:"modal-body pt-0"},Ce={class:"table-seats-wrap"},$e={class:"tab-content","data-simplebar":""},Se={class:"tab-pane fade show",id:"seats_all",role:"tabpanel"},Ie={class:"c_table-wrap"},xe={class:"row"},Te={key:0,class:"text text-muted text-center pt-5"},De={key:1,class:"text-muted text-center p-5"},Ve={class:"col-4 mt-5"},Fe=["data-table-seat","data-table-status","data-table-area","onClick"],Me={key:0,class:"c_table_data"},Ae={class:"table"},Ne={width:"50%",style:{"font-size":"10px !important"}},Be={width:"20%",style:{"font-size":"10px !important"}},Le={width:"30%",style:{"font-size":"10px !important"}},Oe=t("br",null,null,-1),ze={key:0},Ee={key:1},je=["onClick"],Je=["onClick"],Pe=["onClick"],Qe={__name:"SelectDineIn",props:["show_dine_in_modal"],emits:["closeDineInModal"],setup(O,{emit:z}){Q();const p=W(),E=O,V=x(!1);T(()=>E.show_dine_in_modal,e=>{e&&g()});const d=L({...{server_messages:{type:"",messages:""},is_processing:!1}}),j={areas:[],active_area:"",selected_area:"",seats:[],active_seat:null,selected_seat:null,show_only_available:!!V.value},r=L({...j}),h=x([]),m=x([]),F=D(()=>p.booking_type),f=D({get(){return p.booking_date},set(e){p.setBookingDate(e)}}),I=D(()=>p.booking_data);T(()=>I.value,e=>{g()},{deep:!0});async function g(){if(f.value!="Invalid date"){d.is_processing=!0;var e=new FormData;e.append("booking_date",f.value),e.append("booking_type",F.value),e.append("booking_data",JSON.stringify(I.value)),await axios.post("/api/cashier/tables",e).then(s=>{d.server_messages.type="success",d.server_messages.messages=s.data.msg,h.value=s.data.data,m.value=h.value.tables,r.selected_area=h.value.areas.length>0?h.value.areas[0].id:null,d.is_processing=!1,M()}).catch(s=>{d.server_messages.type="error",d.server_messages.messages=s,d.is_processing=!1,console.log(s)})}}const J=z;function P(){J("closeDineInModal")}T(r,(e,s)=>{M()});async function M(){r.selected_area!=null&&(m.value=_.filter(h.value.tables,e=>e.dinein_area_id==r.selected_area)),r.selected_seat!=null&&(m.value=_.filter(m.value,e=>e.table_capacity==r.selected_seat)),r.show_only_available?m.value=_.filter(m.value,e=>e.status==0):m.value=_.filter(m.value,e=>e.status==1||e.status==0)}function R(e,s){r.active_area=e,r.selected_area=s}function A(e,s){e!=null?(r.active_seat=e,r.selected_seat=s):(r.active_seat=null,r.selected_seat=null)}function q(e){F.value==1?($("#dineInSeatModal").modal("show"),p.setTable(e),p.setSeats(e.table_capacity),p.setOrderType(2)):U(e),$("#dineInModal").modal("hide")}async function U(e){var s=new FormData;s.append("table",JSON.stringify(e)),s.append("booking_data",JSON.stringify(I.value)),await axios.post("/api/cashier/book_table",s).then(n=>{n.data.status_code==200?toast.success(n.data.msg):toast.error(n.data.msg)}).catch(n=>{d.server_messages.type="error",d.server_messages.messages=n,d.is_processing=!1,console.log(n)})}async function N(e){var s=new FormData;s.append("reservation_id",e),await axios.post("/api/cashier/cancel_table_booking",s).then(n=>{n.data.status_code==200?(toast.success(n.data.msg),g()):toast.error(n.data.msg)}).catch(n=>{d.server_messages.type="error",d.server_messages.messages=n,d.is_processing=!1,console.log(n)})}async function G(e){var s=new FormData;s.append("reservation_id",e),await axios.post("/api/cashier/check_in_table",s).then(n=>{n.data.status_code==200?(toast.success(n.data.msg),g()):toast.error(n.data.msg)}).catch(n=>{d.server_messages.type="error",d.server_messages.messages=n,d.is_processing=!1,console.log(n)})}function H(e){if(e.is_checked_in)return"checkedin";if(!e.is_checked_in&&e.is_reserved)return"reserved"}const K=Z(()=>ee(()=>import("./SelectDineInSeat.g-3LP2Rk.js"),__vite__mapDeps([0,1,2])));return(e,s)=>{const n=X("Icon");return i(),c(w,null,[t("div",ae,[t("div",ne,[t("div",le,[t("div",oe,[t("div",ie,[t("div",ce,[t("div",de,[u(V)?y("",!0):(i(),c("div",_e,[t("div",re,[k(u(te),{modelValue:u(f),"onUpdate:modelValue":[s[0]||(s[0]=o=>Y(f)?f.value=o:null),s[1]||(s[1]=o=>g())],format:"dd-MM-yyyy","enable-time-picker":!1},null,8,["modelValue"])])])),t("div",ue,[t("ul",me,[t("li",null,l(e.$t("AREAS"))+" :",1),(i(!0),c(w,null,S(u(h).areas,(o,b)=>(i(),c("li",pe,[t("button",{class:v(["nav-link",{active:u(r).active_area==b}]),onClick:a=>R(b,o.id),id:"",type:"button",role:"tab","aria-selected":"true",tabindex:"-1"},l(o.name),11,he)]))),256))])]),t("div",be,[t("ul",ve,[t("li",null,l(e.$t("SEATS"))+" :",1),t("li",fe,[t("button",{class:v(["nav-link",{active:u(r).active_seat==null}]),onClick:s[2]||(s[2]=o=>A(null,null)),type:"button","aria-selected":"false",tabindex:"-1"},l(e.$t("ALL")),3)]),(i(!0),c(w,null,S(u(h).seats,(o,b)=>(i(),c("li",ge,[t("button",{class:v(["nav-link",{active:u(r).active_seat==b}]),onClick:a=>A(b,o),type:"button","aria-selected":"false",tabindex:"-1"},l(o),11,ke)]))),256))])])])]),ye]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[3]||(s[3]=o=>P())})]),t("div",we,[t("div",Ce,[t("div",$e,[t("div",Se,[t("div",Ie,[t("div",xe,[u(m)?y("",!0):(i(),c("div",Te,[k(se,{color:"gray",size:"15px",class:"pt-2 pe-2"}),C(" "+l(e.$t("Loading Tables")),1)])),u(m).length==0?(i(),c("h5",De,[t("span",null,l(e.$t("No Tables Found")),1)])):y("",!0),(i(!0),c(w,null,S(u(m),(o,b)=>(i(),c("div",Ve,[t("div",{class:"c_table","data-table-seat":o.table_capacity,"data-table-status":H(o),"data-table-area":o.table_capacity,onClick:a=>q(o)},[t("h3",null,l(o.name),1),t("p",null,[k(n,{icon:"fa6-solid:users"}),C(" "+l(o.table_capacity),1)])],8,Fe),o.reservations.length?(i(),c("div",Me,[t("table",Ae,[t("tr",null,[t("th",Ne,l(e.$t("Person")),1),t("th",Be,l(e.$t("Time")),1),t("th",Le,l(e.$t("Order")),1)]),(i(!0),c(w,null,S(o.reservations,(a,qe)=>(i(),c("tr",{class:v([{"text-danger":a.checked_in_at!=null&&a.spent_minutes>45},{"text-success":a.checked_in_at!=null&&a.spent_minutes<=45},{"bg-warning fw-bold":a.is_check_in_time&&a.checked_in_at==null},{"bg-success fw-bold":a.is_check_in_time&&a.checked_in_at!=null}])},[t("td",null,[C(l(a.person_name)+" ",1),Oe,C(" "+l(a.person_contact)+" (",1),k(n,{icon:"fa6-solid:users",class:"p-0"}),C(l(a.reserved_seats)+") ",1)]),a.checked_in_at==null?(i(),c("td",ze,l(a.reservation_time_formatted),1)):(i(),c("td",Ee,l(a.checked_in_at_formatted),1)),t("td",null,[a.is_check_in_time&&a.checked_in_at==null?(i(),c("a",{key:0,class:"btn btn-xs btn-success",href:"#",onClick:B=>G(a.id)},l(e.$t("Check-In")),9,je)):y("",!0),a.checked_in_at==null?(i(),c("a",{key:1,class:v(["ms-1 btn btn-xs btn-warning",[a.is_check_in_time?"w-40":"w-100"]]),href:"#",onClick:B=>N(a.id)},l(e.$t("Cancel")),11,Je)):(i(),c("a",{key:2,href:"#",class:v(["btn btn-xs ms-1",[a.spent_minutes>45?"btn-danger":"btn-success"]]),onClick:B=>N(a.id)},l(e.$t("Free Table")),11,Pe))])],2))),256))])])):y("",!0)]))),256))])])])])])])])])]),k(u(K))],64)}}};export{Qe as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/SelectDineInSeat.g-3LP2Rk.js","assets/index.sP6fhsqN.js","assets/index.KTHCd6a8.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
