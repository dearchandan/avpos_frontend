import{u as x,r as l,e as O,o as S,v as j,g as c,p as F,w as A,I as R,f as U,k as d,i as t,t as n,K as G,N as z,j as f,h as m,l as J,F as K,x as W,O as Y,q as H,_ as Q}from"./index.GdMxdeuf.js";import{_ as X}from"./DefaultLayout.qd3nRBiq.js";import{_ as Z}from"./PaginateLimit.H-orl6zP.js";import{_ as tt}from"./ActionButtonGroup.qGH_Fqs8.js";import{_ as et}from"./ListingSkeleton.upY030ro.js";import{_ as st}from"./InventoryMenu.8t9QU9er.js";import"./ClipLoader.UcGuNCxH.js";/* empty css                                                   */const at={class:"content"},ot={class:"page-heading"},nt={class:"row align-items-center justify-content-between mb-3"},it={class:"col-auto"},lt={class:"mb-md-0"},ct={class:"col-md-auto"},dt={class:"row align-items-center justify-content-between"},_t={class:"col col-md-auto"},rt={class:"form-field mb-0"},mt={class:"field-icon"},ut=["placeholder"],ht={class:"icon"},pt={key:0,class:"col-auto"},gt={key:0},vt={key:1,class:"table-responsive"},ft={class:"table table-list-data table-hover"},yt={class:"bg-light"},wt={scope:"col",width:"20%"},bt={scope:"col",width:"25%"},kt={scope:"col",width:"10%"},Vt={scope:"col",class:"text-end",width:"10%"},At={class:"fw-bold highlighted-list-item"},Ct={class:"fw-bold highlighted-list-item"},Dt={class:"text-end"},$t={key:1},Bt={class:"text-center py-3",colspan:"8"},Mt={class:"data-footer"},Nt={class:"row align-items-center justify-content-between"},Pt={class:"col-auto"},Et={class:"col-auto"},Rt={__name:"variants",setup(Tt){const{isAuthorized:y}=R(),{t:u}=x(),C=H(()=>Q(()=>import("./AddVariant.4C3hnzyP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),h=l(!1),w=l([]);function b(s=""){w.value=s,h.value=!0}function D(){h.value=!1,r()}const $={server_messages:{type:"",messages:""},is_listing:!1,search_query:l("")},B=u("search by name, name(arabic)..."),e=O({...$});S(()=>{r(),M()}),j(()=>e.search_query,_.debounce(()=>{r()},300));const p=l({write:!1,delete:!1});function M(){p.value={write:y("A_WRITE_PRODUCT"),delete:y("A_DELETE_PRODUCT")}}const g=l([]),v=l([]);async function r(s=1){e.is_listing=!0,await axios.get("/api/variants",{params:{page:s,paginate_limit:k.value,search_query:e.search_query}}).then(a=>{g.value=a.data.data,v.value=a.data.pagination,e.is_listing=!1}).catch(a=>{e.server_messages.type="error",e.server_messages.messages=a,e.is_listing=!1,console.log(a)})}const k=l();async function N(s){k.value=s,await r()}async function P(s){var a=!1;await Swal.fire({title:u("Do you want to delete this item?"),showCancelButton:!0,confirmButtonText:u("Yes, Delete"),cancelButtonText:u("Cancel"),confirmButtonColor:"#d33"}).then(o=>{o.isConfirmed&&(a=!0)}),a&&await axios.post("/api/variant/delete",{slack:s}).then(o=>{if(o.data.status_code==200)toast.success(o.data.msg),r();else try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(o.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=o.data.msg}}).catch(o=>{e.server_messages.type="error",e.server_messages.messages=o,console.log(o)})}return(s,a)=>{const o=st,V=U("Icon"),E=et,T=tt,q=Z,I=X;return c(),F(I,null,{subheader:A(()=>[d(o)]),default:A(()=>[t("div",at,[t("div",ot,[t("div",nt,[t("div",it,[t("h2",lt,n(s.$t("Variants")),1)]),t("div",ct,[t("div",dt,[t("div",_t,[t("div",rt,[t("div",mt,[G(t("input",{type:"search",class:"form-control form-control-sm form-control-shadow",placeholder:f(B),"onUpdate:modelValue":a[0]||(a[0]=i=>e.search_query=i)},null,8,ut),[[z,e.search_query]]),t("div",ht,[d(V,{icon:"fa6-solid:magnifying-glass"})])])])]),p.value.write?(c(),m("div",pt,[t("a",{href:"#",class:"btn btn-sm btn-light-primary2","data-bs-toggle":"modal",onClick:a[1]||(a[1]=i=>b()),"data-bs-target":"#addVariantModal"},"+ "+n(s.$t("New Variant")),1)])):J("",!0)])])])]),e.is_listing?(c(),m("div",gt,[d(E)])):(c(),m("div",vt,[t("table",ft,[t("thead",yt,[t("tr",null,[t("th",wt,n(s.$t("Name")),1),t("th",bt,n(s.$t("Name (Arabic)")),1),t("th",kt,n(s.$t("Created At")),1),t("th",Vt,n(s.$t("Action")),1)])]),t("tbody",null,[g.value!=""?(c(!0),m(K,{key:0},W(g.value,(i,L)=>(c(),m("tr",{key:L},[t("td",null,[t("div",null,[t("span",At,n(i.name),1)])]),t("td",null,[t("div",null,[t("span",Ct,n(i.name_ar),1)])]),t("td",null,n(i.created_at_label),1),t("td",Dt,[d(T,{permissions:p.value,onDelete:P,onEditModal:b,slack:i.slack,edit_modal_data:i,edit_modal_target:"#addVariantModal"},null,8,["permissions","slack","edit_modal_data"])])]))),128)):(c(),m("tr",$t,[t("td",Bt,n(s.$t("No Data Found")),1)]))])])])),t("div",Mt,[t("div",Nt,[t("div",Pt,[d(q,{onPaginate_limit_update:N,pagination:v.value},null,8,["pagination"])]),t("div",Et,[d(f(Y),{data:v.value,limit:5,onPaginationChangePage:r},null,8,["data"])])])])]),d(f(C),{show_add_variant_modal:h.value,onCloseAddVariantModal:D,edit_data:w.value},null,8,["show_add_variant_modal","edit_data"])]),_:1})}}};export{Rt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AddVariant.4C3hnzyP.js","assets/ServerMessage.Wf7puwQc.js","assets/index.GdMxdeuf.js","assets/index.1t-AB2n6.css","assets/vee-validate.esm.9aElOHQY.js","assets/index.esm.0vhAmrVd.js","assets/VTextInput.ZgtOiOMJ.js","assets/VTooltip.Ewb958d6.js","assets/ClipLoader.UcGuNCxH.js","assets/ClipLoader.7xz7y6gZ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
