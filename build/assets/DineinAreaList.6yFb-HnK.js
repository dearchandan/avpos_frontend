import{u as P,r as m,e as F,o as V,v as O,f as R,g as i,h as r,i as e,t as u,K as W,N as j,j as a,k as h,p as G,l as w,F as E,x as J,O as z,I as K,q as U,_ as Y}from"./index.GdMxdeuf.js";import{_ as H}from"./PaginateLimit.H-orl6zP.js";import{_ as Q}from"./ActionButtonGroup.qGH_Fqs8.js";import{_ as X}from"./ListingSkeleton.upY030ro.js";/* empty css                                                   */const Z={class:"pb-2"},ee={class:"form-field page-heading-search-field"},se={class:"field-icon"},te=["placeholder"],ae={class:"icon"},oe={key:1,class:"table-responsive"},ne={class:"table table-list-data table-hover"},ie={class:"bg-light"},ce={scope:"col",width:"15%"},re={scope:"col",width:"5%"},le={key:0,scope:"col",class:"text-end",width:"10%"},de={class:"highlighted-list-item"},_e={class:"form-feild"},me={class:"form-check form-switch form-switch-2"},ue=["onChange","checked"],he={key:0,class:"text-end"},ge={key:1},pe={class:"text-center py-3",colspan:"8"},fe={class:"data-footer"},ve={class:"row align-items-center justify-content-between"},ye={class:"col-auto"},Ae={class:"col-auto"},be={__name:"DineinAreaList",setup(ke){const{t:g}=P(),{isAuthorized:l}=K(),D={server_messages:{type:"",messages:""},is_listing:!1,search_query:m("")},T=g("search dine in area by name"),s=F({...D}),p=m([]);V(()=>{I(),d()}),O(()=>s.search_query,_.debounce(()=>{d()},500));function B(o=""){p.value=o,$("#addAreaModal").modal("show")}const f=m([]),v=m([]);async function d(o=1){s.is_listing=!0,await axios.get("/api/v2/dinein_areas",{params:{page:o,paginate_limit:A.value,search_query:s.search_query}}).then(n=>{f.value=n.data.data,v.value=n.data.pagination,s.is_listing=!1}).catch(n=>{s.server_messages.type="error",s.server_messages.messages=n,s.is_listing=!1,console.log(n)})}const A=m();async function L(o){A.value=o,await d()}async function b(o){var n=new FormData;n.append("slack",o),await axios.post("/api/dinein_area/update_status",n).then(t=>{if(t.data.status_code==200)toast.success(t.data.msg);else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(t.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=t.data.msg}}).catch(t=>{s.server_messages.type="error",s.server_messages.messages=t,console.log(t)})}async function C(o){var n=!1;await Swal.fire({title:g("Do you want to delete this item?"),showCancelButton:!0,confirmButtonText:g("Yes, Delete"),cancelButtonText:g("Cancel"),confirmButtonColor:"#d33"}).then(t=>{t.isConfirmed&&(n=!0)}),n&&await axios.post("/api/dinein_area/delete",{slack:o}).then(t=>{if(t.data.status_code==200)toast.success(t.data.msg),d();else try{s.server_messages.type="error",s.server_messages.messages=JSON.parse(t.data.msg)}catch{s.server_messages.type="error",s.server_messages.messages=t.data.msg}}).catch(t=>{s.server_messages.type="error",s.server_messages.messages=t,console.log(t)})}const k=m({write:!1,delete:!1});function I(){k.value={write:l("A_WRITE_TABLE"),delete:l("A_DELETE_TABLE")}}const x=U(()=>Y(()=>import("./AddAreaForm.mf9Jb5kK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])));function M(){p.value=[]}return(o,n)=>{const t=R("Icon"),y=X,S=Q,q=H;return i(),r(E,null,[e("div",null,[e("h5",Z,u(o.$t("Dine-In Areas")),1),e("div",ee,[e("div",se,[W(e("input",{type:"search",class:"form-control form-control-solid",placeholder:a(T),"onUpdate:modelValue":n[0]||(n[0]=c=>a(s).search_query=c)},null,8,te),[[j,a(s).search_query]]),e("div",ae,[h(t,{icon:"fa6-solid:magnifying-glass"})])])]),a(s).is_listing?(i(),G(y,{key:0})):(i(),r("div",oe,[e("table",ne,[e("thead",ie,[e("tr",null,[e("th",ce,u(o.$t("Dine In Area")),1),e("th",re,u(o.$t("Active")),1),a(l)("A_WRITE_TABLE")||a(l)("A_DELETE_TABLE")?(i(),r("th",le,u(o.$t("Action")),1)):w("",!0)])]),e("tbody",null,[a(f)!=""?(i(!0),r(E,{key:0},J(a(f),(c,N)=>(i(),r("tr",{key:N},[e("td",null,[e("div",null,[e("span",de,u(c.name),1)])]),e("td",null,[e("div",_e,[e("div",me,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"Status_id",onChange:we=>b(c.slack),checked:c.status==1},null,40,ue)])])]),a(l)("A_WRITE_TABLE")||a(l)("A_DELETE_TABLE")?(i(),r("td",he,[h(S,{permissions:a(k),slack:c.slack,onDelete:C,onEditModal:B,edit_modal_data:c},null,8,["permissions","slack","edit_modal_data"])])):w("",!0)]))),128)):(i(),r("tr",ge,[e("td",pe,u(o.$t("No Data Found")),1)]))])])])),e("div",fe,[e("div",ve,[e("div",ye,[h(q,{onPaginate_limit_update:L,pagination:a(v)},null,8,["pagination"])]),e("div",Ae,[h(a(z),{data:a(v),limit:5,onPaginationChangePage:d},null,8,["data"])])])])]),h(a(x),{onCloseAddAreaModal:d,onCloseModal:M,edit_area_data:a(p)},null,8,["edit_area_data"])],64)}}};export{be as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AddAreaForm.mf9Jb5kK.js","assets/index.GdMxdeuf.js","assets/index.1t-AB2n6.css","assets/VTextInput.ZgtOiOMJ.js","assets/VTooltip.Ewb958d6.js","assets/vee-validate.esm.9aElOHQY.js","assets/index.esm.0vhAmrVd.js","assets/ClipLoader.UcGuNCxH.js","assets/ClipLoader.7xz7y6gZ.css","assets/global.8gHgB6cY.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
