import{b as S,bT as B,d as I,V as E,e as N,r as P,E as b,g as a,p as R,i,j as l,h as r,m as u,t as n,F as f,x as p,k as v,K as k,R as T,Q as A,af as F,y as L}from"./index.sP6fhsqN.js";import{_ as q,a as z}from"./cashier.c_R3VnRW.js";import"./index.G34VVlwZ.js";import"./VMultiSelect.pXBL2AV1.js";import"./vee-validate.esm.2kXgdFia.js";const K={class:"modal fade cashier-layout p-0",id:"modifierDiscountModal",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"},Q={class:"modal-dialog modal-w-550 modal-dialog-centered"},Y={key:0,class:"modal-content"},G={class:"modal-header"},H={class:"modal-title"},J={class:"row gx-2"},O={key:0,class:"col-auto veg-icon"},W=i("img",{src:q,alt:""},null,-1),X=[W],Z={key:1,class:"col-auto nonveg-icon"},j=i("img",{src:z,alt:""},null,-1),ee=[j],ie={class:"col"},oe={class:"modal-body"},se={class:"row gx-5"},de={key:0,class:L("col-md-12")},te={class:"variation-select-group"},ae={key:0},re={class:"variation-select-list"},le={class:"radio-wrap"},ne=["name","value","onUpdate:modelValue"],ce={class:"v_price"},ue={class:"checkbox-wrap"},me=["name","value","checked"],_e={class:"v_price"},fe={class:"total-wrap"},pe={class:"row align-items-center"},ve={class:"col-md-12"},Me={__name:"SelectModifierDiscount",props:["product"],emits:["closeModifierModal"],setup(g,{emit:w}){const x=S(),M=B(),h=I(()=>x.user.currency.symbol),C=g,{product:e,openmodal:he}=E(C),U=w,t=N({modifiers:P([])});b(()=>{e.value.modifiers==""&&(t.modifiers=[])}),b(()=>{if(e.value){for(var o=0;o<e.value.product.product_modifiers.length;o++)if(!_.isUndefined(e.value.product.product_modifiers[o])&&e.value.product.product_modifiers[o].modifier.allow_multiple_selections==!1)for(var d=0;d<e.value.product.product_modifiers[o].options.length;d++)e.value.modifiers.findIndex(s=>s.modifier_id===e.value.product.product_modifiers[o].options[d].modifier_id)>-1&&_.isUndefined(t.modifiers[e.value.product.product_modifiers[o].modifier_id])&&e.value.modifiers.findIndex(s=>s.id===e.value.product.product_modifiers[o].options[d].id)>-1&&(t.modifiers[e.value.product.product_modifiers[o].modifier_id]=e.value.product.product_modifiers[o].options[d])}});function y(){t.modifiers=[],U("closeModifierModal")}function V(){for(var o=0;o<t.modifiers.length;o++)_.isUndefined(t.modifiers[o])||e.value.modifiers.findIndex(d=>d.modifier_id===t.modifiers[o].modifier_id)>-1&&e.value.modifiers.splice(e.value.modifiers.findIndex(d=>d.modifier_id===t.modifiers[o].modifier_id),1);for(var o=0;o<t.modifiers.length;o++)_.isUndefined(t.modifiers[o])||e.value.modifiers.find(s=>s.id===t.modifiers[o].id)||e.value.modifiers.push(t.modifiers[o]);M.addProductModifiers(e.value.cart_id,e.value.modifiers),y(),$("#modifierDiscountModal").modal("hide")}return(o,d)=>(a(),R(F,{to:"body"},[i("div",K,[i("div",Q,[l(e)?(a(),r("div",Y,[i("div",G,[i("div",H,[i("div",J,[l(e).dietary==1?(a(),r("div",O,X)):u("",!0),l(e).dietary==2?(a(),r("div",Z,ee)):u("",!0),i("div",ie,[i("h2",null,n(l(e).name),1)])])]),i("button",{type:"button",class:"btn-close",onClick:d[0]||(d[0]=s=>y()),"aria-label":"Close"})]),i("div",oe,[i("div",se,[l(e).product.product_modifiers.length>0?(a(),r("div",de,[(a(!0),r(f,null,p(l(e).product.product_modifiers,(s,ye)=>(a(),r("div",te,[i("h4",null,[v(n(s.modifier.name)+" ",1),s.modifier.allow_multiple_selections?u("",!0):(a(),r("span",ae,"("+n(o.$t("required"))+")",1))]),i("ul",re,[s.modifier.allow_multiple_selections?(a(!0),r(f,{key:1},p(s.options,(c,m)=>(a(),r("li",null,[i("div",ue,[i("label",null,[k(i("input",{type:"checkbox",name:s.modifier.name+"_"+m,value:c,checked:c.is_default,"onUpdate:modelValue":d[1]||(d[1]=D=>l(e).modifiers=D)},null,8,me),[[A,l(e).modifiers]]),i("span",null,[v(n(c.option_name)+" ",1),i("div",_e,n(c.sale_price)+" "+n(l(h)),1)])])])]))),256)):(a(!0),r(f,{key:0},p(s.options,c=>(a(),r("li",null,[i("div",le,[i("label",null,[k(i("input",{type:"radio",name:s.modifier.name,value:c,"onUpdate:modelValue":m=>t.modifiers[s.modifier.id]=m},null,8,ne),[[T,t.modifiers[s.modifier.id]]]),i("span",null,[v(n(c.option_name)+" ",1),i("div",ce,n(c.sale_price)+" "+n(l(h)),1)])])])]))),256))])]))),256))])):u("",!0)]),i("div",fe,[i("div",pe,[i("div",ve,[i("a",{href:"#",class:"btn btn-lg btn-primary w-100",onClick:d[2]||(d[2]=s=>V())},n(o.$t("APPLY")),1)])])])])])):u("",!0)])])]))}};export{Me as default};
