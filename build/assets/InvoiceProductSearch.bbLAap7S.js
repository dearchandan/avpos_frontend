import{u as C,e as q,v as w,r as x,f as B,g as o,p as N,w as P,y as F,j as p,i as t,N as I,K as V,k as h,h as l,F as A,t as i,l as d,x as $}from"./index.GdMxdeuf.js";import{F as j}from"./vee-validate.esm.9aElOHQY.js";import"./index.esm.0vhAmrVd.js";import{B as z}from"./BeatLoader.czpWuXPY.js";/* empty css                                                   *//* empty css                                                   */const D={class:"row"},L={class:"field-icon mb-4"},E={class:"form-field position-relative mb-0"},K=["placeholder"],M={class:"icon"},R={key:0},T={key:1,class:""},U={key:0,class:"recent-search"},G=["onClick"],H={class:"wpr"},J={key:0,class:"pr"},O={key:0,class:"col-md-4"},Q={class:"pt-0"},ae={__name:"InvoiceProductSearch",props:{product_type:String,selected_products:{type:Array,default:[]},placeholder:{type:String,default:"Search Product"},is_button:{type:Boolean,default:!1},button_placeholder:{type:String,default:"Add"},not_recipe:{type:Number,default:0},only_available:{type:Number,default:0},is_stocable_products:{type:Number,default:0}},emits:["selectProduct","selectService"],setup(u,{emit:y}){C();const e=q({...{server_messages:{type:"",messages:""},is_listing:!1}});w(()=>e.search_query,_.debounce(()=>{g()},500));const a=u,v=a.placeholder,f=a.button_placeholder,c=x([]);async function g(){e.is_listing=!0,e.search_query!=""?await axios.get("/api/invoice/products",{params:{search_query:e.search_query,limit:10,product_type:a.product_type,except_products:a.selected_products,not_recipe:a.not_recipe,is_stocable_products:a.is_stocable_products,only_available:a.only_available}}).then(r=>{c.value=r.data.data,e.is_listing=!1}).catch(r=>{e.server_messages.type="error",e.server_messages.messages=r,e.is_listing=!1,console.log(r)}):(c.value=[],e.is_listing=!1)}function b(){c.value=[]}const m=y;return(r,n)=>{const k=B("Icon");return o(),N(p(j),null,{default:P(()=>[t("div",D,[t("div",{class:F(u.is_button?"col-md-8":"col-md-12")},[t("div",L,[t("div",E,[V(t("input",{type:"search",class:"form-control form-control-solid",placeholder:p(v),"onUpdate:modelValue":n[0]||(n[0]=s=>e.search_query=s)},null,8,K),[[I,e.search_query]]),t("div",M,[h(k,{icon:"fa6-solid:magnifying-glass"})]),e.is_listing?(o(),l("div",R,[h(z,{color:"gray",size:"15px",class:"pt-2 pe-2"})])):(o(),l("div",T,[c.value.length>0?(o(),l("ul",U,[c.value!=""?(o(!0),l(A,{key:0},$(c.value,(s,S)=>(o(),l("li",{key:S},[t("a",{href:"javascript:;",onClick:X=>(m("selectProduct",s),b())},[t("h2",null,i(s.name),1),t("div",H,[t("h4",null,i(r.$t("Code"))+": "+i(s.code),1),s.sale_price>0?(o(),l("h4",J,i(s.sale_price)+" SAR",1)):d("",!0)])],8,G)]))),128)):d("",!0)])):d("",!0)]))])])],2),u.is_button?(o(),l("div",O,[t("button",{type:"button",class:"btn btn-primary",onClick:n[1]||(n[1]=s=>m("selectService",e.search_query))},[t("span",Q,i(p(f)),1)])])):d("",!0)])]),_:1})}}};export{ae as default};
