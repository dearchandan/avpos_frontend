import{_ as O}from"./PaginateLimit.Qyl6CO-f.js";import{_ as E}from"./ListingSkeleton.PW5leU6x.js";import{_ as J}from"./VSelect.ijXeZp1F.js";import{u as H,P as K,r as n,e as k,o as T,v as j,f as z,g as l,h as i,i as t,t as s,j as m,k as u,K as N,L as G,l as h,N as Q,p as W,F as X,x as Y,O as Z}from"./index.ri7Y_V5F.js";import{j as x}from"./vue-datepicker.gRWbN_6J.js";import"./vee-validate.esm.0La7AMjT.js";/* empty css                                                                */const tt={class:"content"},et={class:"page-heading position-relative"},st={class:"row align-items-center justify-content-between mb-3"},ot={class:"col-auto"},at={class:"mb-0"},lt={class:"col-auto"},nt=["href"],it={class:"row align-items-end justify-content-between mb-3"},ct={class:"col-md-auto"},dt={class:"row align-items-end justify-content-between g-3"},rt={class:"col-12 col-md-auto"},_t={class:"form-field"},ht={class:"col-auto"},ut={class:"form-field"},mt={value:""},pt={value:"0"},ft={value:"1"},vt={value:"2"},gt={value:"3"},yt={class:"col-auto"},bt={class:"col-auto col-md-auto"},wt={class:"col-auto"},$t={class:"form-field page-heading-search-field mb-0"},kt={class:"field-icon"},Vt=["placeholder"],St={class:"icon"},Ct={key:1,class:"table-responsive"},jt={class:"table table-list-data table-hover"},Nt={class:"bg-light"},Ut={scope:"col",width:"20%"},Lt={scope:"col",width:"15%"},qt={scope:"col",width:"15%"},Mt={scope:"col",width:"10%"},Pt={scope:"col",width:"10%"},Dt={scope:"col",width:"10%"},It={scope:"col",width:"10%"},Rt={scope:"col",width:"10%"},At={class:"fw-bold highlighted-list-item"},Bt=t("br",null,null,-1),Ft={class:"text-muted"},Ot={key:0},Et={class:"text-center"},Jt={key:0,class:"text-danger"},Ht={key:1,class:"text-success"},Kt={key:2,class:"text-warning"},Tt={key:3,class:"text-danger"},zt={key:1},Gt={class:"text-center py-3",colspan:"11"},Qt={class:"data-footer"},Wt={class:"row align-items-center justify-content-between"},Xt={class:"col-auto"},Yt={class:"col-auto"},ne={__name:"MerchantUsers",props:["merchant"],setup(U){const{t:p}=H(),f=K(U,"merchant"),L={server_messages:{type:"",messages:""},is_listing:!1,search_query:n("")},q=p("Search by name, email, phone.."),c=k({...L});T(()=>{r(),P()}),j(()=>c.search_query,_.debounce(()=>{r()},500));const V=n({role:p("Role"),select_role:p("Select Role")}),v=n([]),g=n([]);async function r(e=1){c.is_listing=!0,await axios.post("/api/merchant/users",{page:e,paginate_limit:S.value,search_query:c.search_query,merchant_id:f.value.id,filter:d}).then(a=>{v.value=a.data.data,g.value=a.data.pagination,c.is_listing=!1}).catch(a=>{c.server_messages.type="error",c.server_messages.messages=a,c.is_listing=!1,console.log(a)})}const S=n();async function M(e){S.value=e,await r()}const C=n([]);async function P(){let e=await axios.post("api/merchant/roles",{merchant_id:f.value.id});e=e.data.data,_.forEach(e,a=>{let $={key:a.slack,value:a.name};C.value.push($)})}const D=n(!1),y=k({created_date:n(""),status:n(""),role:n("")}),d=k({...y}),b=n(!1);j(()=>d.role,e=>{w()});async function w(){JSON.stringify(d)!=JSON.stringify(y)&&(b.value=!0),D.value=!1,await r()}function I(){Object.assign(d,y),b.value=!1,r()}return(e,a)=>{const $=J,R=z("Icon"),A=E,B=O;return l(),i("div",tt,[t("div",et,[t("div",st,[t("div",ot,[t("h2",at,s(e.$t("Users")),1)]),t("div",lt,[t("a",{href:m(f).slack+"/user/add",class:"btn btn-sm btn-light-primary2"},"+ New User",8,nt)])]),t("div",it,[t("div",ct,[t("div",dt,[t("div",rt,[t("div",_t,[t("label",null,s(e.$t("Created Date")),1),u(m(x),{range:"",modelValue:d.created_date,"onUpdate:modelValue":[a[0]||(a[0]=o=>d.created_date=o),a[1]||(a[1]=o=>w())],format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid form-control-sm"},null,8,["modelValue"])])]),t("div",ht,[t("div",ut,[t("label",null,s(e.$t("Status")),1),N(t("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":a[2]||(a[2]=o=>d.status=o),onChange:w},[t("option",mt,s(e.$t("All")),1),t("option",pt,s(e.$t("Inactive")),1),t("option",ft,s(e.$t("Active")),1),t("option",vt,s(e.$t("Hold")),1),t("option",gt,s(e.$t("Left")),1)],544),[[G,d.status]])])]),t("div",yt,[u($,{name:"role",label:V.value.role,modelValue:d.role,"onUpdate:modelValue":a[3]||(a[3]=o=>d.role=o),placeholder:V.value.select_role,options:C.value,height_sm:!0},null,8,["label","modelValue","placeholder","options"])]),t("div",bt,[b.value?(l(),i("button",{key:0,class:"btn btn-sm btn-light-danger",onClick:I},s(e.$t("Clear")),1)):h("",!0)])])]),t("div",wt,[t("div",$t,[t("div",kt,[N(t("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:m(q),"onUpdate:modelValue":a[4]||(a[4]=o=>c.search_query=o)},null,8,Vt),[[Q,c.search_query]]),t("div",St,[u(R,{icon:"fa6-solid:magnifying-glass"})])])])])])]),c.is_listing?(l(),W(A,{key:0})):(l(),i("div",Ct,[t("table",jt,[t("thead",Nt,[t("tr",null,[t("th",Ut,s(e.$t("User Name")),1),t("th",Lt,s(e.$t("Email")),1),t("th",qt,s(e.$t("Role")),1),t("th",Mt,s(e.$t("Phone")),1),t("th",Pt,s(e.$t("Login Code")),1),t("th",Dt,s(e.$t("Joining Date")),1),t("th",It,s(e.$t("Created At")),1),t("th",Rt,s(e.$t("Status")),1)])]),t("tbody",null,[v.value!=""?(l(!0),i(X,{key:0},Y(v.value,(o,F)=>(l(),i("tr",{key:F},[t("td",null,[t("div",null,[t("span",At,s(o.name),1),Bt,t("small",Ft,s(e.$t("Code"))+": "+s(o.code),1)])]),t("td",null,s(o.email),1),t("td",null,[o.role?(l(),i("span",Ot,s(o.role.name)+" ("+s(o.role.role_type_text)+") ",1)):h("",!0)]),t("td",null,s(o.phone),1),t("td",null,s(o.login_code),1),t("td",null,s(o.joining_date),1),t("td",null,s(o.created_at_label),1),t("td",Et,[o.status==0?(l(),i("span",Jt,s(e.$t("Inactive")),1)):h("",!0),o.status==1?(l(),i("span",Ht,s(e.$t("Active")),1)):h("",!0),o.status==2?(l(),i("span",Kt,s(e.$t("Hold")),1)):h("",!0),o.status==3?(l(),i("span",Tt,s(e.$t("Left")),1)):h("",!0)])]))),128)):(l(),i("tr",zt,[t("td",Gt,s(e.$t("No Data Found")),1)]))])])])),t("div",Qt,[t("div",Wt,[t("div",Xt,[u(B,{onPaginate_limit_update:M,pagination:g.value},null,8,["pagination"])]),t("div",Yt,[u(m(Z),{data:g.value,limit:5,onPaginationChangePage:r},null,8,["data"])])])])])}}};export{ne as default};
