import{_ as N}from"./PaginateLimit.T5jDCI_N.js";import{_ as j}from"./ListingSkeleton.0g9v9IYA.js";import{u as q,b as A,d as B,r as d,e as g,o as L,v as F,g as o,h as n,i as t,t as s,p as V,F as R,x as E,m as c,l as m,j as I,O as M}from"./index.sP6fhsqN.js";/* empty css                                                   */const U={class:"pb-2"},z={key:1,class:"table-responsive"},G={class:"table table-list-data table-hover"},H={class:"bg-light"},J={scope:"col",width:"10%"},K={scope:"col",width:"10%"},Q={scope:"col",width:"10%"},T={scope:"col",width:"10%"},W={scope:"col",width:"10%"},X={scope:"col",width:"10%"},Y={scope:"col",width:"10%"},Z=["onClick"],x={key:0,class:"badge badge-primary"},tt={key:1,class:"badge badge-success"},et={key:2,class:"badge badge-danger"},st={key:3,class:"badge badge-warning"},at={key:0,class:"badge badge-primary"},ot={key:1,class:"badge badge-warning"},nt={key:2,class:"badge badge-success"},it={key:1},lt={class:"text-center py-3",colspan:"7"},ct={class:"data-footer"},rt={class:"row align-items-center justify-content-between"},dt={class:"col-auto"},_t={class:"col-auto"},vt={__name:"SupplierPOList",props:["customer_slack"],setup(v){const{t:y}=q(),b=A();B(()=>b.user.currency.symbol);const f={server_messages:{type:"",messages:""},is_listing:!1,search_query:d("")};y("search purchase orders by purchase order no., amount");const i=g({...f}),k=v;L(()=>{r()}),F(()=>i.search_query,_.debounce(()=>{r()},500));function $(e){const l=router.resolve("/purchase_order/"+e);window.open(l.href,"_blank")}const w=g({customer_slack:k.customer_slack}),P=g({...w}),u=d([]),p=d([]);async function r(e=1){i.is_listing=!0,await axios.get("/api/purchase_orders",{params:{page:e,paginate_limit:h.value,search_query:i.search_query,filters:P}}).then(l=>{u.value=l.data.data,p.value=l.data.pagination,i.is_listing=!1}).catch(l=>{i.server_messages.type="error",i.server_messages.messages=l,i.is_listing=!1,console.log(l)})}const h=d();async function D(e){h.value=e,await r()}return(e,l)=>{const O=j,S=N;return o(),n("div",null,[t("h5",U,s(e.$t("Purchase Orders")),1),i.is_listing?(o(),V(O,{key:0})):(o(),n("div",z,[t("table",G,[t("thead",H,[t("tr",null,[t("th",J,s(e.$t("PO No.")),1),t("th",K,s(e.$t("PO Ref No.")),1),t("th",Q,s(e.$t("PO Date")),1),t("th",T,s(e.$t("PO Due Date")),1),t("th",W,s(e.$t("Amount")),1),t("th",X,s(e.$t("Approval Status")),1),t("th",Y,s(e.$t("Delivery Status")),1)])]),t("tbody",null,[u.value!=""?(o(!0),n(R,{key:0},E(u.value,(a,C)=>(o(),n("tr",{key:C},[t("td",null,[t("a",{onClick:ut=>$(a.slack),href:"javascript:;"},"# "+s(a.po_number),9,Z)]),t("td",null,s(a.reference_no),1),t("td",null,s(a.po_date_label),1),t("td",null,s(a.po_due_date_label),1),t("td",null,s(a.grand_product_amount),1),t("td",null,[a.approval_status==0?(o(),n("span",x,s(e.$t("Draft")),1)):c("",!0),a.approval_status==1?(o(),n("span",tt,s(e.$t("Approved")),1)):c("",!0),a.approval_status==2?(o(),n("span",et,s(e.$t("Rejected")),1)):c("",!0),a.approval_status==3?(o(),n("span",st,s(e.$t("Cancelled")),1)):c("",!0)]),t("td",null,[a.delivery_status==0?(o(),n("span",at,s(e.$t("Undelivered")),1)):c("",!0),a.delivery_status==1?(o(),n("span",ot,s(e.$t("Partial Delivered")),1)):c("",!0),a.delivery_status==2?(o(),n("span",nt,s(e.$t("Close/Delivered")),1)):c("",!0)])]))),128)):(o(),n("tr",it,[t("td",lt,s(e.$t("No Data Found")),1)]))])])])),t("div",ct,[t("div",rt,[t("div",dt,[m(S,{onPaginate_limit_update:D,pagination:p.value},null,8,["pagination"])]),t("div",_t,[m(I(M),{data:p.value,limit:5,onPaginationChangePage:r},null,8,["data"])])])])])}}};export{vt as default};
