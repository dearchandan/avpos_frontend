import{u as S,r,e as O,o as j,v as G,E as R,f as z,g as c,h as d,i as e,t as l,K as J,N as K,j as s,k as h,p as U,l as A,F as E,x as W,n as Y,O as H,I as Q,q as X,_ as Z}from"./index.ri7Y_V5F.js";import{_ as ee}from"./PaginateLimit.Qyl6CO-f.js";import{_ as se}from"./ActionButtonGroup.UoCDvTnh.js";import{_ as te}from"./ListingSkeleton.PW5leU6x.js";/* empty css                                                   */const ae={class:"pb-2"},oe={class:"form-field page-heading-search-field"},ne={class:"field-icon"},ie=["placeholder"],le={class:"icon"},ce={key:1,class:"table-responsive"},re={class:"table table-list-data table-hover"},de={class:"bg-light"},_e={scope:"col",width:"15%"},ue={scope:"col",width:"10%"},me={scope:"col",width:"10%"},he={key:0,scope:"col",class:"text-end",width:"10%"},pe={class:"highlighted-list-item"},ge={key:0,class:"text-end"},fe={key:1},ve={class:"text-center py-3",colspan:"8"},ye={class:"data-footer"},be={class:"row align-items-center justify-content-between"},we={class:"col-auto"},Te={class:"col-auto"},$e={__name:"TableList",props:["dinein_areas"],setup(B){const{t:p}=S(),{isAuthorized:y}=Q(),C={server_messages:{type:"",messages:""},is_listing:!1,search_query:r("")},D=p("search tables by name, capacity"),t=O({...C}),g=r([]),b=B,w=r([]);j(()=>{N(),u()}),G(()=>t.search_query,_.debounce(()=>{u()},500)),R(()=>{b.dinein_areas!=null&&(w.value=b.dinein_areas)});const f=r([]),v=r([]);async function u(a=1){t.is_listing=!0,await axios.get("/api/v2/tables",{params:{page:a,paginate_limit:T.value,search_query:t.search_query}}).then(o=>{f.value=o.data.data,v.value=o.data.pagination,t.is_listing=!1}).catch(o=>{t.server_messages.type="error",t.server_messages.messages=o,t.is_listing=!1,console.log(o)})}const T=r();async function L(a){T.value=a,await u()}async function M(a){var o=!1;await Swal.fire({title:p("Do you want to delete this item?"),showCancelButton:!0,confirmButtonText:p("Yes, Delete"),cancelButtonText:p("Cancel"),confirmButtonColor:"#d33"}).then(n=>{n.isConfirmed&&(o=!0)}),o&&await axios.post("/api/table/delete",{slack:a}).then(n=>{if(n.data.status_code==200)toast.success(n.data.msg),u();else try{t.server_messages.type="error",t.server_messages.messages=JSON.parse(n.data.msg)}catch{t.server_messages.type="error",t.server_messages.messages=n.data.msg}}).catch(n=>{t.server_messages.type="error",t.server_messages.messages=n,console.log(n)})}function P(a=""){g.value=a,$("#addTableModal").modal("show")}const q=X(()=>Z(()=>import("./AddTableForm.f5LSTkJS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),m=r({write:!1,delete:!1});function N(){m.value={write:y("A_WRITE_TABLE"),delete:y("A_DELETE_TABLE")}}function x(){g.value=[]}return(a,o)=>{const n=z("Icon"),k=te,I=se,V=ee;return c(),d(E,null,[e("div",null,[e("h5",ae,l(a.$t("Tables")),1),e("div",oe,[e("div",ne,[J(e("input",{type:"search",class:"form-control form-control-solid",placeholder:s(D),"onUpdate:modelValue":o[0]||(o[0]=i=>s(t).search_query=i)},null,8,ie),[[K,s(t).search_query]]),e("div",le,[h(n,{icon:"fa6-solid:magnifying-glass"})])])]),s(t).is_listing?(c(),U(k,{key:0})):(c(),d("div",ce,[e("table",re,[e("thead",de,[e("tr",null,[e("th",_e,l(a.$t("Table")),1),e("th",ue,l(a.$t("Area")),1),e("th",me,l(a.$t("Capacity")),1),s(m).write||s(m).delete?(c(),d("th",he,l(a.$t("Action")),1)):A("",!0)])]),e("tbody",null,[s(f)!=""?(c(!0),d(E,{key:0},W(s(f),(i,F)=>(c(),d("tr",{key:F},[e("td",null,[e("div",null,[e("span",pe,l(i.name!=null?i.name:""),1)])]),e("td",null,l(i.dinein_area!=null?i.dinein_area.name:""),1),e("td",null,[e("strong",null,l(i.table_capacity),1),Y(" Persons")]),s(m).write||s(m).delete?(c(),d("td",ge,[h(I,{permissions:s(m),slack:i.slack,onDelete:M,onEditModal:P,edit_modal_data:i},null,8,["permissions","slack","edit_modal_data"])])):A("",!0)]))),128)):(c(),d("tr",fe,[e("td",ve,l(a.$t("No Data Found")),1)]))])])])),e("div",ye,[e("div",be,[e("div",we,[h(V,{onPaginate_limit_update:L,pagination:s(v)},null,8,["pagination"])]),e("div",Te,[h(s(H),{data:s(v),limit:5,onPaginationChangePage:u},null,8,["data"])])])])]),h(s(q),{onCloseAddTableModal:u,onCloseModal:x,edit_table_data:s(g),dinein_areas:s(w)},null,8,["edit_table_data","dinein_areas"])],64)}}};export{$e as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AddTableForm.f5LSTkJS.js","assets/index.ri7Y_V5F.js","assets/index.1t-AB2n6.css","assets/VTextInput.o2P1IcEE.js","assets/VTooltip.a7qKl6DY.js","assets/vee-validate.esm.0La7AMjT.js","assets/VSelectInput.ncg8IJ_w.js","assets/index.esm.wERziE-M.js","assets/ClipLoader.4-rIzqtH.js","assets/ClipLoader.7xz7y6gZ.css","assets/global.f8Ro4KP-.js","assets/BeatLoader.5j6ku4bW.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
