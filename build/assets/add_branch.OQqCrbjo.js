import{_ as C}from"./DefaultLayout.nvkZ4UhM.js";import{_ as M}from"./EditFormSkeleton.hbjdnq7m.js";import{_ as E}from"./VTextArea.uv2r4aOV.js";import{_ as F}from"./VTextInput.VtSvZjuc.js";import L from"./ServerMessage.I5ol-gtz.js";import{b as j,u as H,r as f,e as G,a as J,o as Q,g as c,p as V,w as g,f as S,i as a,k as i,n as Y,t as r,j as p,h as v,l as k,K as x,L as z,Q as B}from"./index.7OFNPsHl.js";import{F as K}from"./vee-validate.esm.N3uz7Rsk.js";import{c as Z,a as b}from"./index.esm.cd1bITNA.js";import{C as W}from"./ClipLoader.1qNfpKDH.js";import"./VTooltip.n3SV8A0p.js";/* empty css                                                   */const X={class:"header-nav-wrap"},ee={class:"row align-items-center"},ae={class:"col-auto"},te={class:"header-back-link"},se={class:"col-auto"},oe={key:0,class:"fw-bold"},le={key:1,class:"fw-bold"},ie={key:0,class:"content"},ne={class:"row card-strash"},re={key:0,class:"py-3"},de={class:"col-md-12"},_e={class:"row"},ce={class:"col-md-12 mb-4"},me={class:"card"},ue={class:"row"},pe={class:"col-md-3"},ve={class:"col-md-3"},be={class:"col-md-3"},he={class:"col-md-3"},ge={class:"input-group input-file-group"},ye={class:"btn btn-light-primary min-width-0 mb-0",for:"formFile"},fe={class:"col-md-3"},Ve={class:"col-md-3"},ke={class:"col-md-3"},xe={class:"form-field"},we={for:"",class:"form-label"},$e=["selected"],Ue={value:"INVENTORY"},Se={value:"POS"},Be={value:"INVOICING"},Ne={class:"col-md-12 mb-4"},Ae={class:"card"},qe={class:"pb-3"},De={class:"row"},Ie={class:"col-md-3"},Pe={class:"col-md-3"},Te={class:"col-md-3"},Oe={class:"col-md-3"},Re={class:"col-md-3"},Ce={class:"col-md-12 mb-4"},Me={class:"card"},Ee={class:"pb-3"},Fe={class:"row"},Le={class:"col-md-3"},je={class:"col-md-3"},He={class:"col-md-3 mt-4"},Ge={class:"form-field"},Je={class:"form-check"},Qe={for:"tax_inclusive_pricing"},Ye=["checked"],ze={class:"fs-5"},Ke={class:"col-md-3 mt-4"},Ze={class:"form-field"},We={class:"form-check"},Xe={for:"enable_order_return"},ea=["checked"],aa={class:"fs-5"},ta=a("small",null,[a("i",null,"You can enter number of hours under which the order will be allowed to return, keep it blank to make all orders refundable")],-1),sa={key:0,class:"col-md-3"},oa={class:"col-md-12 mb-4"},la={class:"card"},ia={class:"pb-3"},na={class:"row"},ra={class:"col-md-4"},da={class:"col-md-4"},_a={class:"col-md-4"},ca={class:"col-md-4"},ma={class:"text-end"},ua=["disabled"],pa={key:1,class:"pt-0"},va={key:2,class:"pt-0"},Na={__name:"add_branch",setup(ba){const N=j(),{t:l}=H(),w={server_messages:{type:"",messages:""},is_submitting:!1,name:"",name_ar:"",email:"",phone:"",logo:"",vat_registration_name:"",vat_registration_number:"",gst_number:"",default_view:"DASHBOARD",first_address_line:"",second_address_line:"",district:"",city:"",pincode:"",branch_slack:"",tax_registration_number:"",tax_registration_name:"",tax_inclusive_pricing:!1,enable_order_return:!1,order_return_period:0,invoice_policy:"",pos_policy:"",purchase_policy:"",quotation_policy:""},n=f({name:l("Branch Name"),name_ar:l("Branch Name")+" ("+l("Arabic")+")",email:l("Branch Email"),phone:l("Branch Phone"),vat_registration_name:l("VAT Registration Name"),vat_registration_number:l("VAT Registration Number"),gst_number:l("GST Number"),first_address_line:l("Address Line 1"),second_address_line:l("Address Line 2"),district:l("District"),city:l("City"),pincode:l("Pincode/Zipcode"),tax_registration_name:l("Tax Registration Name"),tax_registration_number:l("Tax Registration Number"),order_return_period:l("Enter Return Period (In Hours)"),invoice_policy:l("Invoice Policy"),pos_policy:l("POS Policy"),purchase_policy:l("Purchase Policy"),quotation_policy:l("Quotation Policy")}),e=G({...w}),A=Z({name:b().required(l("name is required",{name:l("Branch Name")})).min(3,l("name must be at least n characters",{name:l("Branch Name"),number:3})),phone:b().matches(/^(?:[0-9]{9,10})?$/,l("Mobile number must be number and should be 9 or 10 digits")),invoice_policy:b().nullable(!0).max(1e3,l("Must not be grater than 1000 characters")),pos_policy:b().nullable(!0).max(1e3,l("Must not be grater than 1000 characters")),quotation_policy:b().nullable(!0).max(1e3,l("Must not be grater than 1000 characters")),purchase_policy:b().nullable(!0).max(1e3,l("Must not be grater than 1000 characters")),vat_registration_number:b().nullable().matches(/^3\d{13}3$/,"VAT registration number must start and end with 3, and be exactly 15 digits").test("is-valid-length","VAT registration number must be exactly 15 digits if provided",t=>t===null||t===""||t.length===15)}),u=J().params.slack;async function q(t){e.logo=t.target.files[0]}Q(()=>{_.isUndefined(u)||I()});const D=f([]),$=f(!1);async function I(){await axios.get("/api/branch",{params:{slack:u}}).then(t=>{D.value=t.data.data,t.data.data&&(e.branch_slack=t.data.data.slack,e.name=t.data.data.name,e.name_ar=t.data.data.name_ar,e.email=t.data.data.email,e.default_view=t.data.data.default_view,e.district=t.data.data.district,e.pincode=t.data.data.pincode,e.city=t.data.data.city,e.first_address_line=t.data.data.first_address_line,e.second_address_line=t.data.data.second_address_line,e.phone=t.data.data.phone,e.gst_number=t.data.data.gst_number,e.vat_registration_name=t.data.data.tax_registration_name,e.vat_registration_number=t.data.data.tax_registration_number,e.tax_inclusive_pricing=t.data.data.tax_inclusive_pricing,e.enable_order_return=t.data.data.enable_order_return,e.order_return_period=t.data.data.order_return_period!=null?t.data.data.order_return_period:0,e.invoice_policy=t.data.data.invoice_policy,e.pos_policy=t.data.data.pos_policy,e.purchase_policy=t.data.data.purchase_policy,e.quotation_policy=t.data.data.quotation_policy),$.value=!0}).catch(t=>{e.server_messages.type="error",e.server_messages.messages=t})}async function P(){e.is_submitting=!0;var t=new FormData,s=JSON.stringify({name:e.name,name_ar:e.name_ar,email:e.email,phone:e.phone,vat_registration_name:e.vat_registration_name,vat_registration_number:e.vat_registration_number,gst_number:e.gst_number,default_view:e.default_view,first_address_line:e.first_address_line,second_address_line:e.second_address_line,district:e.district,city:e.city,pincode:e.pincode,tax_inclusive_pricing:e.tax_inclusive_pricing,enable_order_return:e.enable_order_return,order_return_period:e.order_return_period,invoice_policy:e.invoice_policy,pos_policy:e.pos_policy,purchase_policy:e.purchase_policy,quotation_policy:e.quotation_policy,branch_slack:e.branch_slack});t.append("form_fields",s),t.append("logo",e.logo);var y=e.branch_slack!=""&&e.branch_slack!=null?"/api/branch/update":"/api/branch/save";await axios.post(y,t,{headers:{"Content-Type":"multipart/form-data"}}).then(m=>{if(m.data.status_code==200)toast.success(m.data.msg),e.is_submitting=!1,N.refresh().then(()=>{T(),router.push("/branches")});else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(m.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=m.data.msg}e.is_submitting=!1}}).catch(m=>{e.server_messages.type="error",e.server_messages.messages=m,e.is_submitting=!1,console.log(m)})}function T(){Object.assign(e,w)}return(t,s)=>{const y=S("Icon"),m=S("router-link"),U=L,d=F,h=E,O=M,R=C;return c(),V(R,null,{subheader:g(()=>[a("div",X,[a("div",ee,[a("div",ae,[a("div",te,[i(m,{class:"text-primary",to:"/branches"},{default:g(()=>[i(y,{icon:"fa6-solid:chevron-left"}),Y(" "+r(t.$t("Branches")),1)]),_:1})])]),a("div",se,[p(u)==null||p(u)==""?(c(),v("h5",oe,r(t.$t("Add Branch")),1)):(c(),v("h5",le,r(t.$t("Edit Branch")),1))])])])]),default:g(()=>[p(u)==""||p(u)==null||p(u)!=""&&$.value?(c(),v("div",ie,[i(p(K),{"validation-schema":p(A),onSubmit:P,enctype:"multipart/form-data","initial-values":e},{default:g(()=>[a("div",ne,[e.server_messages.messages!=""?(c(),v("div",re,[i(U,{server_messages:e.server_messages},null,8,["server_messages"])])):k("",!0),a("div",de,[a("div",_e,[a("div",ce,[a("div",me,[a("div",ue,[a("div",pe,[i(d,{type:"text",name:"name",modelValue:e.name,"onUpdate:modelValue":s[0]||(s[0]=o=>e.name=o),label:n.value.name,required:!0},null,8,["modelValue","label"])]),a("div",ve,[i(d,{type:"text",name:"name_ar",modelValue:e.name_ar,"onUpdate:modelValue":s[1]||(s[1]=o=>e.name_ar=o),label:n.value.name_ar},null,8,["modelValue","label"])]),a("div",be,[i(d,{type:"email",name:"email",modelValue:e.email,"onUpdate:modelValue":s[2]||(s[2]=o=>e.email=o),label:n.value.email},null,8,["modelValue","label"])]),a("div",he,[a("label",null,r(t.$t("Upload Logo")),1),a("div",ge,[a("input",{class:"form-control form-control-solid",name:"image",type:"file",id:"formFile",accept:"image/jpg, image/jpeg, image/png",onChange:q},null,32),a("label",ye,r(t.$t("Upload")),1)])]),a("div",fe,[i(d,{type:"text",name:"phone",modelValue:e.phone,"onUpdate:modelValue":s[3]||(s[3]=o=>e.phone=o),label:n.value.phone},null,8,["modelValue","label"])]),a("div",Ve,[i(d,{type:"text",name:"gst_number",modelValue:e.gst_number,"onUpdate:modelValue":s[4]||(s[4]=o=>e.gst_number=o),label:n.value.gst_number},null,8,["modelValue","label"])]),a("div",ke,[a("div",xe,[a("label",we,r(t.$t("Default View")),1),x(a("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":s[5]||(s[5]=o=>e.default_view=o)},[a("option",{value:"DASHBOARD",selected:e.default_view=="DASHBOARD"||e.default_view==null},r(t.$t("Dashboard")),9,$e),a("option",Ue,r(t.$t("Inventory")),1),a("option",Se,r(t.$t("POS")),1),a("option",Be,r(t.$t("Invoicing")),1)],512),[[z,e.default_view]])])])])])]),a("div",Ne,[a("div",Ae,[a("h5",qe,r(t.$t("Address")),1),a("div",De,[a("div",Ie,[i(d,{type:"text",name:"first_address_line",modelValue:e.first_address_line,"onUpdate:modelValue":s[6]||(s[6]=o=>e.first_address_line=o),label:n.value.first_address_line},null,8,["modelValue","label"])]),a("div",Pe,[i(d,{type:"text",name:"second_address_line",modelValue:e.second_address_line,"onUpdate:modelValue":s[7]||(s[7]=o=>e.second_address_line=o),label:n.value.second_address_line},null,8,["modelValue","label"])]),a("div",Te,[i(d,{type:"text",name:"district",modelValue:e.district,"onUpdate:modelValue":s[8]||(s[8]=o=>e.district=o),label:n.value.district},null,8,["modelValue","label"])]),a("div",Oe,[i(d,{type:"text",name:"city",modelValue:e.city,"onUpdate:modelValue":s[9]||(s[9]=o=>e.city=o),label:n.value.city},null,8,["modelValue","label"])]),a("div",Re,[i(d,{type:"text",name:"pincode",modelValue:e.pincode,"onUpdate:modelValue":s[10]||(s[10]=o=>e.pincode=o),label:n.value.pincode},null,8,["modelValue","label"])])])])]),a("div",Ce,[a("div",Me,[a("h5",Ee,r(t.$t("Branch Setting")),1),a("div",Fe,[a("div",Le,[i(d,{type:"text",name:"vat_registration_name",modelValue:e.vat_registration_name,"onUpdate:modelValue":s[11]||(s[11]=o=>e.vat_registration_name=o),label:n.value.tax_registration_name},null,8,["modelValue","label"])]),a("div",je,[i(d,{type:"text",name:"vat_registration_number",modelValue:e.vat_registration_number,"onUpdate:modelValue":s[12]||(s[12]=o=>e.vat_registration_number=o),label:n.value.tax_registration_number},null,8,["modelValue","label"])]),a("div",He,[a("div",Ge,[a("div",Je,[a("label",Qe,[x(a("input",{class:"form-check-input mt-1",type:"checkbox",role:"switch",id:"tax_inclusive_pricing","onUpdate:modelValue":s[13]||(s[13]=o=>e.tax_inclusive_pricing=o),checked:e.tax_inclusive_pricing},null,8,Ye),[[B,e.tax_inclusive_pricing]]),a("span",ze,r(t.$t("Tax Inclusive Pricing")),1)])])])]),a("div",Ke,[a("div",Ze,[a("div",We,[a("label",Xe,[x(a("input",{class:"form-check-input mt-1",type:"checkbox",id:"enable_order_return","onUpdate:modelValue":s[14]||(s[14]=o=>e.enable_order_return=o),checked:e.enable_order_return},null,8,ea),[[B,e.enable_order_return]]),a("span",aa,r(t.$t("Enable Order Return")),1)])]),ta])]),e.enable_order_return?(c(),v("div",sa,[i(d,{type:"number",name:"order_return_period",modelValue:e.order_return_period,"onUpdate:modelValue":s[15]||(s[15]=o=>e.order_return_period=o),label:n.value.order_return_period,min:"0"},null,8,["modelValue","label"])])):k("",!0)])])]),a("div",oa,[a("div",la,[a("h5",ia,r(t.$t("Policies")),1),a("div",na,[a("div",ra,[i(h,{name:"invoice_policy",label:n.value.invoice_policy,modelValue:e.invoice_policy,"onUpdate:modelValue":s[16]||(s[16]=o=>e.invoice_policy=o)},null,8,["label","modelValue"])]),a("div",da,[i(h,{name:"pos_policy",label:n.value.pos_policy,modelValue:e.pos_policy,"onUpdate:modelValue":s[17]||(s[17]=o=>e.pos_policy=o)},null,8,["label","modelValue"])]),a("div",_a,[i(h,{name:"purchase_policy",label:n.value.purchase_policy,modelValue:e.purchase_policy,"onUpdate:modelValue":s[18]||(s[18]=o=>e.purchase_policy=o)},null,8,["label","modelValue"])]),a("div",ca,[i(h,{name:"quotation_policy",label:n.value.quotation_policy,modelValue:e.quotation_policy,"onUpdate:modelValue":s[19]||(s[19]=o=>e.quotation_policy=o)},null,8,["label","modelValue"])])])])])])])]),a("div",ma,[a("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(c(),V(W,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):k("",!0),e.is_submitting?(c(),v("span",pa,r(t.$t("Saving...")),1)):(c(),v("span",va,r(t.$t("Save")),1))],8,ua)])]),_:1},8,["validation-schema","initial-values"])])):(c(),V(O,{key:1}))]),_:1})}}};export{Na as default};
