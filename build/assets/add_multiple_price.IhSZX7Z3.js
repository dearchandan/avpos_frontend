import C from"./ServerMessage.qNo4NwTp.js";import{u as M,a as B,r as d,e as P,o as U,g as c,p as f,w as m,f as g,i as s,k as l,n as q,t as n,h as u,l as b,K as A,Q as D,j as k}from"./index.ri7Y_V5F.js";import{_ as F}from"./DefaultLayout.EMHfdzn0.js";import{F as I}from"./vee-validate.esm.0La7AMjT.js";import{c as T,a as j}from"./index.esm.wERziE-M.js";import{_ as y}from"./VTextInput.o2P1IcEE.js";import{C as z}from"./ClipLoader.4-rIzqtH.js";/* empty css                                                                */import"./VTooltip.a7qKl6DY.js";/* empty css                                                   */const E={class:"header-nav-wrap"},J={class:"row align-items-center"},K={class:"col-auto"},L={class:"header-back-link"},O={class:"col-auto"},Q={class:"fw-bold"},R={class:"content"},G={class:"row card-strash"},H={key:0,class:"py-3"},W={class:"col-md-12"},X={class:"row"},Y={class:"col-md-12 mb-0"},Z={class:"card"},ee={class:"row"},se={class:"col-md-4"},ae={class:"col-md-4"},te={class:"col-md-4 pt-2"},ie={class:"form-field pt-1"},oe={class:"form-check form-switch pt-4"},le={class:"form-check-label",for:"status"},re={class:"text-end"},ce=["disabled"],ne={key:1,class:"pt-0"},me={key:2,class:"pt-0"},Ne={__name:"add_multiple_price",setup(de){const{t:o}=M(),p=B().params.slack,v=d({name:o("Name"),name_ar:o("Name (Arabic)")}),e=P({...{server_messages:{type:"",messages:""},is_submitting:!1,name:"",name_ar:"",status:!0,multiple_price_slack:""}}),w=T({name:j().required(o("name is required",{name:o("Name")})).min(3,o("name must be at least n characters",{name:o("Name"),number:3}))});U(()=>{_.isUndefined(p)||$()});const V=d([]),N=d(!1);async function $(){await axios.get("/api/multiple_price",{params:{slack:p}}).then(a=>{V.value=a.data.data,e.multiple_price_slack=a.data.data.slack,e.name=a.data.data.name,e.name_ar=a.data.data.name_ar,e.status=a.data.data.status==1,N.value=!0}).catch(a=>{e.server_messages.type="error",e.server_messages.messages=a,console.log(a)})}async function x(){e.is_submitting=!0;var a=new FormData;a.append("name",e.name),a.append("name_ar",e.name_ar),a.append("status",e.status),a.append("multiple_price_slack",e.multiple_price_slack);var i=e.multiple_price_slack!=""&&e.multiple_price_slack!=null?"/api/multiple_price/update":"/api/multiple_price/save";await axios.post(i,a,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{if(t.data.status_code==200)toast.success(t.data.msg),e.is_submitting=!1,router.push("/multiple_prices");else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(t.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=t.data.msg}e.is_submitting=!1}}).catch(t=>{e.server_messages.type="error",e.server_messages.messages=t,e.is_submitting=!1,console.log(t)})}return(a,i)=>{const t=g("Icon"),h=g("router-link"),S=C;return c(),f(F,null,{subheader:m(()=>[s("div",E,[s("div",J,[s("div",K,[s("div",L,[l(h,{class:"text-primary",to:"/multiple_prices"},{default:m(()=>[l(t,{icon:"fa6-solid:chevron-left"}),q(" "+n(a.$t("Multiple Prices")),1)]),_:1})])]),s("div",O,[s("h5",Q,n(a.$t("Add Multiple Price")),1)])])])]),default:m(()=>[s("div",R,[l(k(I),{"validation-schema":k(w),onSubmit:x,enctype:"multipart/form-data"},{default:m(()=>[s("div",G,[e.server_messages.messages!=""?(c(),u("div",H,[l(S,{server_messages:e.server_messages},null,8,["server_messages"])])):b("",!0),s("div",W,[s("div",X,[s("div",Y,[s("div",Z,[s("div",ee,[s("div",se,[l(y,{type:"text",name:"name",modelValue:e.name,"onUpdate:modelValue":i[0]||(i[0]=r=>e.name=r),label:v.value.name,required:!0},null,8,["modelValue","label"])]),s("div",ae,[l(y,{type:"name_ar",name:"text",modelValue:e.name_ar,"onUpdate:modelValue":i[1]||(i[1]=r=>e.name_ar=r),label:v.value.name_ar},null,8,["modelValue","label"])]),s("div",te,[s("div",ie,[s("div",oe,[A(s("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status",checked:"","onUpdate:modelValue":i[2]||(i[2]=r=>e.status=r)},null,512),[[D,e.status]]),s("label",le,n(a.$t("Active")),1)])])])])])])])])]),s("div",re,[s("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(c(),f(z,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):b("",!0),e.is_submitting?(c(),u("span",ne,n(a.$t("Saving...")),1)):(c(),u("span",me,n(a.$t("Save")),1))],8,ce)])]),_:1},8,["validation-schema"])])]),_:1})}}};export{Ne as default};
