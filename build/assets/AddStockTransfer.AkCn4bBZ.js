import A from"./ServerMessage.EFQMOwoZ.js";import{_ as C}from"./VTextInput.EPCajChY.js";import{_ as M}from"./VSelect.twStq9pE.js";import{u as U,r as g,e as E,b as F,v as I,g as c,h as m,i as t,t as d,l as u,w as j,k as O,j as s,N as h,K as f,m as v,p as z}from"./index.sP6fhsqN.js";import{F as J}from"./vee-validate.esm.2kXgdFia.js";import{c as K,a as k}from"./index.esm.DHYHwGJ4.js";import{C as L}from"./ClipLoader._89zL49D.js";import"./VTooltip.kcvohVRA.js";/* empty css                                                                *//* empty css                                                   */const G={class:"modal hide",id:"addStockTransferModal",tabindex:"-1","aria-labelledby":"Add Stock Transfer","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},H={class:"modal-dialog modal-lg modal-dialog-centered"},P={class:"modal-content"},Q={class:"modal-header"},R={class:"modal-title"},W={class:"modal-body"},X={class:"row"},Y={class:"col-md-6"},Z={class:"label"},ee=t("span",{class:"text-danger"},"*",-1),ae={class:"col-md-6"},se={class:"col-md-6"},te={class:"col-md-12"},oe=["label"],re={key:0,class:"py-3"},ne={class:"mt-4 text-end"},le=["disabled"],ce={key:1,class:"pt-0"},de={key:2,class:"pt-0"},ke={__name:"AddStockTransfer",props:["show_add_stock_transfer_modal","edit_data"],emits:["closeAddStockTransferModal"],setup(y,{emit:S}){const{t:n}=U();g(!1);const p={server_messages:{type:"",messages:""},is_submitting:!1,is_listing:!1,from_branch_name:"",from_branch:"",to_branch:"",transfer_date:"",note:""},e=E({...p}),l=F();e.from_branch=l.user.login_branch!=null?l.user.login_branch.slack:"",e.from_branch_name=l.user.login_branch!=null?l.user.login_branch.name:"";const T=K({to_branch:k().required(n("name is required",{name:n("To Branch")})),transfer_date:k().required(n("name is required",{name:n("Transfer Date")}))}),V=S,w=y;function B(){D(),V("closeAddStockTransferModal"),document.getElementById("close_btn").click()}I(()=>w.show_add_stock_transfer_modal,o=>{o&&(e.from_branch=l.user.login_branch!=null?l.user.login_branch.slack:"",e.from_branch_name=l.user.login_branch!=null?l.user.login_branch.name:"",x())});const b=g([]);async function x(){b.value=[];let o=await axios.get("api/branches/get_to_branches");o=o.data.data,_.forEach(o,a=>{let i={key:a.slack,value:a.code+" - "+a.name};b.value.push(i)})}async function $(){e.is_submitting=!0;var o=new FormData;o.append("from_branch",e.from_branch),o.append("to_branch",e.to_branch),o.append("transfer_date",e.transfer_date),o.append("note",e.note!=null?e.note:""),await axios.post("/api/stock_transfer/save",o).then(a=>{if(a.data.status_code==200)toast.success(a.data.msg),e.is_submitting=!1,document.getElementById("close_btn").click(),router.push("/stock_transfer/"+a.data.data.stock_transfer.slack);else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(a.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=a.data.msg}e.is_submitting=!1}}).catch(a=>{e.server_messages.type="error",e.server_messages.messages=a,e.is_submitting=!1,console.log(a)})}function D(){Object.assign(e,p)}return(o,a)=>{const i=M,N=C,q=A;return c(),m("div",G,[t("div",H,[t("div",P,[t("div",Q,[t("h5",R,d(o.$t("Add Stock Transfer")),1),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:B,id:"close_btn"})]),t("div",W,[u(s(J),{"validation-schema":s(T),onSubmit:$},{default:j(()=>[t("div",X,[t("div",Y,[t("label",Z,[O(d(o.$t("From Branch"))+" ",1),ee]),f(t("input",{type:"text",class:"form-control form-control-solid",name:"from_branch_name","onUpdate:modelValue":a[0]||(a[0]=r=>s(e).from_branch_name=r),disabled:""},null,512),[[h,s(e).from_branch_name]]),f(t("input",{type:"hidden",class:"form-control form-control-solid",name:"from_branch","onUpdate:modelValue":a[1]||(a[1]=r=>s(e).from_branch=r)},null,512),[[h,s(e).from_branch]])]),t("div",ae,[u(i,{name:"to_branch",label:s(n)("To Branch"),modelValue:s(e).to_branch,"onUpdate:modelValue":a[2]||(a[2]=r=>s(e).to_branch=r),placeholder:s(n)("Select To Branch"),options:s(b),required:""},null,8,["label","modelValue","placeholder","options"])]),t("div",se,[u(N,{type:"date",name:"transfer_date",modelValue:s(e).transfer_date,"onUpdate:modelValue":a[3]||(a[3]=r=>s(e).transfer_date=r),label:s(n)("Transfer Date"),required:""},null,8,["modelValue","label"])]),t("div",te,[t("label",null,d(o.$t("Description")),1),f(t("textarea",{class:"form-control form-control-solid p-3",name:"note","onUpdate:modelValue":a[4]||(a[4]=r=>s(e).note=r),label:s(n)("Note"),cols:"3",rows:"3",maxlength:"250"},null,8,oe),[[h,s(e).note]])])]),s(e).server_messages.messages!=""?(c(),m("div",re,[u(q,{server_messages:s(e).server_messages},null,8,["server_messages"])])):v("",!0),t("div",ne,[t("button",{type:"submit",class:"btn btn-primary",disabled:s(e).is_submitting},[s(e).is_submitting?(c(),z(L,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):v("",!0),s(e).is_submitting?(c(),m("span",ce,d(o.$t("Saving...")),1)):(c(),m("span",de,d(o.$t("Save")),1))],8,le)])]),_:1},8,["validation-schema"])])])])])}}};export{ke as default};
