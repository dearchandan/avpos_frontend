import{_ as N}from"./EditFormSkeleton.Ez20ofO9.js";import S from"./ServerMessage.EFQMOwoZ.js";import{u as U,a as x,r as g,e as A,o as D,g as n,p as v,w as u,f as k,i as t,l,k as I,t as m,j as d,h as _,m as q,K as M,Q as B}from"./index.sP6fhsqN.js";import{D as F}from"./DefaultLayout.K5Bh9Jz_.js";import{F as E}from"./vee-validate.esm.2kXgdFia.js";import{c as Q,a as h}from"./index.esm.DHYHwGJ4.js";import{_ as f}from"./VTextInput.EPCajChY.js";import{C as L}from"./ClipLoader._89zL49D.js";/* empty css                                                                */import"./VTooltip.kcvohVRA.js";/* empty css                                                   */const P={class:"header-nav-wrap"},T={class:"row align-items-center"},j={class:"col-auto"},z={class:"header-back-link"},J={class:"col-auto"},K={key:0,class:"fw-bold"},O={key:1,class:"fw-bold"},G={key:0,class:"content"},H={class:"row card-strash"},W={key:0,class:"py-3"},X={class:"col-md-12"},Y={class:"row"},Z={class:"col-md-12"},ee={class:"card"},se={class:"row"},te={class:"col-md-3"},ae={class:"col-md-3"},oe={class:"col-md-3"},re={class:"col-md-3"},ne={class:"form-field pt-2"},ie={class:"form-check form-switch pt-4"},ce={class:"form-check-label",for:"status"},le={class:"text-end"},de=["disabled"],me={key:1,class:"pt-0"},_e={key:2,class:"pt-0"},Ce={__name:"add_receipt_user",setup(ue){const{t:o}=U(),i=x().params.slack,p=g({name:o("Name"),iqama_or_passport_number:o("IQAMA/Passport No."),country:o("Country")}),e=A({...{server_messages:{type:"",messages:""},is_submitting:!1,name:"",iqama_or_passport_number:"",country:"",status:!0}});let w=Q({name:h().required(o("name is required",{name:o("Name")})),iqama_or_passport_number:h().required(o("name is required",{name:o("IQAMA/Passport No.")})),country:h().required(o("name is required",{name:o("Country")}))});D(()=>{i!=""&&i!=null&&V()});const b=g(!1);async function V(){let s=await axios.get("/api/voucher_user",{params:{slack:i,type:2}});s.data.data&&(e.rent_receipt_user_slack=s.data.data.slack,e.name=s.data.data.name,e.iqama_or_passport_number=s.data.data.iqama_or_passport_number,e.country=s.data.data.country,e.status=s.data.data.status==1),b.value=!0}async function R(){e.is_submitting=!0;var s=new FormData;s.append("name",e.name),s.append("iqama_or_passport_number",e.iqama_or_passport_number),s.append("country",e.country),s.append("status",e.status),s.append("type",2),s.append("slack",e.rent_receipt_user_slack);var a=e.rent_receipt_user_slack!=""&&e.rent_receipt_user_slack!=null?"/api/voucher_user/update":"/api/voucher_user/save";await axios.post(a,s,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>{if(r.data.status_code==200)toast.success(r.data.msg),e.is_submitting=!1,router.push("/rent_receipt_users");else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(r.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=r.data.msg}e.is_submitting=!1}}).catch(r=>{e.server_messages.type="error",e.server_messages.messages=r,e.is_submitting=!1,console.log(r)})}return(s,a)=>{const r=k("Icon"),y=k("router-link"),$=S,C=N;return n(),v(F,null,{subheader:u(()=>[t("div",P,[t("div",T,[t("div",j,[t("div",z,[l(y,{class:"text-primary",to:"/voucher_users"},{default:u(()=>[l(r,{icon:"fa6-solid:chevron-left"}),I(" "+m(s.$t("Rent Receipt Users")),1)]),_:1})])]),t("div",J,[d(i)==null||d(i)==""?(n(),_("h5",K,m(s.$t("Add Rent Receipt User")),1)):(n(),_("h5",O,m(s.$t("Edit Rent Receipt User")),1))])])])]),default:u(()=>[d(i)==""||d(i)==null||d(i)!=""&&b.value?(n(),_("div",G,[l(d(E),{"validation-schema":d(w),onSubmit:R,enctype:"multipart/form-data","initial-values":e},{default:u(()=>[t("div",H,[e.server_messages.messages!=""?(n(),_("div",W,[l($,{server_messages:e.server_messages},null,8,["server_messages"])])):q("",!0),t("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[t("div",se,[t("div",te,[l(f,{type:"text",name:"name",modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=c=>e.name=c),label:p.value.name,required:!0},null,8,["modelValue","label"])]),t("div",ae,[l(f,{type:"text",name:"iqama_or_passport_number",modelValue:e.iqama_or_passport_number,"onUpdate:modelValue":a[1]||(a[1]=c=>e.iqama_or_passport_number=c),label:p.value.iqama_or_passport_number,required:!0},null,8,["modelValue","label"])]),t("div",oe,[l(f,{type:"text",name:"country",modelValue:e.country,"onUpdate:modelValue":a[2]||(a[2]=c=>e.country=c),label:p.value.country,required:!0},null,8,["modelValue","label"])]),t("div",re,[t("div",ne,[t("div",ie,[M(t("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status",checked:"","onUpdate:modelValue":a[3]||(a[3]=c=>e.status=c)},null,512),[[B,e.status]]),t("label",ce,m(s.$t("Active")),1)])])])])])])])])]),t("div",le,[t("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(n(),v(L,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):q("",!0),e.is_submitting?(n(),_("span",me,m(s.$t("Saving...")),1)):(n(),_("span",_e,m(s.$t("Save")),1))],8,de)])]),_:1},8,["validation-schema","initial-values"])])):(n(),v(C,{key:1}))]),_:1})}}};export{Ce as default};
