import{D as x}from"./DefaultLayout.saUWsTkY.js";import{_ as ee}from"./PaginateLimit.SmYeFgfo.js";import{_ as te}from"./ListingSkeleton.6NzqF9S5.js";import{_ as se}from"./BusinessMenu.77sNJPBQ.js";import{u as oe,b as ae,d as ne,r as n,e as b,o as le,v as O,g as l,p as ie,w,I as ce,f as de,l as h,i as e,t,A as M,B as T,j as $,h as i,K as k,L as B,F as E,x as I,m as L,N as re,O as _e}from"./index.li3fCRRM.js";import{b as ue,c as me,s as N,j as he}from"./vue-datepicker.a6BsTEHj.js";import{s as V,e as R}from"./index.dFkrF4C6.js";import"./ClipLoader.gDBpDd3b.js";/* empty css                                                   */const pe={class:"content"},fe={class:"page-heading"},ge={class:"row align-items-center justify-content-between mb-3"},ve={class:"col-auto"},ye={class:"mb-0"},be={class:"row align-items-end g-3"},we={class:"col-12 col-md-auto"},$e={class:"form-field"},ke={class:"form-label"},Se=["onClick","onKeyup"],De={key:0,class:"col-6 col-md-auto"},Ce={class:"form-field"},Oe={class:"form-label"},Me={value:""},Te=["value"],Be={class:"col-6 col-md-auto"},Ee={class:"form-field"},Ie={class:"form-label"},Le={value:"1"},Ne={value:"2"},Ve={class:"col-auto col-md-auto"},Re={class:"col-auto col-md-auto offset-2 align-items-end ms-auto"},Ae={class:"form-field page-heading-search-field mb-0"},je={class:"field-icon"},qe=["placeholder"],Pe={class:"icon"},Ue={key:0},Fe={key:1,class:"table-responsive"},Ke={class:"table table-list-data table-hover"},We={class:"bg-light"},Ge={scope:"col",width:"10%"},Je={scope:"col",width:"10%"},ze={scope:"col",width:"10%"},He={scope:"col",width:"10%"},Qe={scope:"col",width:"10%"},Xe={scope:"col",width:"10%"},Ye={scope:"col",width:"10%"},Ze={scope:"col",width:"10%"},xe={key:0,class:"badge badge-success"},et={key:1,class:"text-muted"},tt={key:1},st={class:"text-center py-3",colspan:"8"},ot={class:"data-footer"},at={class:"row align-items-center justify-content-between"},nt={class:"col-auto"},lt={class:"col-auto"},gt={__name:"business_registers",setup(it){const{t:A}=oe(),{isAuthorized:S}=ce(),j=ae();ne(()=>j.user.currency.symbol);const q={server_messages:{type:"",messages:""},is_listing:!1,search_query:n("")},c=b({...q}),P=n(!1),p=b({terminal_id:n(""),date_type:n(1),dates:n(["",""])}),d=b({...p}),f=n(!1);async function U(){JSON.stringify(d)!=JSON.stringify(p)&&(f.value=!0),P.value=!1,await r()}function F(){Object.assign(d,p),f.value=!1,r()}const g=n([]),K=A("Search by terminal");le(()=>{z(),r()}),O(()=>c.search_query,_.debounce(()=>{r()},500)),O(d,()=>{U(),r()},{deep:!0});const v=n([]),y=n([]),W=n([{label:"Today",value:[new Date,new Date]},{label:"This Week",value:[ue(new Date),me(new Date)]},{label:"This Month",value:[V(new Date),R(new Date)]},{label:"Last Month",value:[V(N(new Date,1)),R(N(new Date,1))]}]);async function r(s=1){c.is_listing=!0,await axios.get("/api/v2/business_registers",{params:{page:s,paginate_limit:D.value,search_query:c.search_query,filter:d}}).then(a=>{v.value=a.data.data,y.value=a.data.pagination,g.value=a.data.terminals,c.is_listing=!1}).catch(a=>{c.server_messages.type="error",c.server_messages.messages=a,c.is_listing=!1,console.log(a)})}const D=n();async function G(s){D.value=s,await r()}const J=n({write:!1,delete:!1});function z(){J.value={write:S("A_WRITE_BUSINESS_REGISTER"),delete:S("A_DELETE_BUSINESS_REGISTER")}}return(s,a)=>{const H=se,Q=de("Icon"),X=te,Y=ee,Z=x;return l(),ie(Z,null,{subheader:w(()=>[h(H)]),default:w(()=>[e("div",pe,[e("div",fe,[e("div",ge,[e("div",ve,[e("h2",ye,t(s.$t("Business Registers")),1)])]),e("div",be,[e("div",we,[e("div",$e,[e("label",ke,t(s.$t("Date Range")),1),h($(he),{range:"",format:"dd-MM-yyyy",modelValue:d.dates,"onUpdate:modelValue":a[0]||(a[0]=o=>d.dates=o),"enable-time-picker":!1,"input-class-name":"dp-custom-input form-control-solid form-control form-control-sm","max-range":"90","multi-calendars":"","preset-dates":W.value},{"preset-date-range-button":w(({label:o,value:u,presetDate:m})=>[e("span",{role:"button",tabindex:0,onClick:C=>m(u),onKeyup:[M(T(C=>m(u),["prevent"]),["enter"]),M(T(C=>m(u),["prevent"]),["space"])]},t(o),41,Se)]),_:1},8,["modelValue","preset-dates"])])]),g.value!=""?(l(),i("div",De,[e("div",Ce,[e("label",Oe,t(s.$t("Terminal")),1),k(e("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":a[1]||(a[1]=o=>d.terminal_id=o)},[e("option",Me,t(s.$t("Select Terminal")),1),(l(!0),i(E,null,I(g.value,(o,u)=>(l(),i("option",{value:o.id,key:u},t(o.terminal_name),9,Te))),128))],512),[[B,d.terminal_id]])])])):L("",!0),e("div",Be,[e("div",Ee,[e("label",Ie,t(s.$t("Date Type")),1),k(e("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":a[2]||(a[2]=o=>d.date_type=o)},[e("option",Le,t(s.$t("Opening Date")),1),e("option",Ne,t(s.$t("Closing Date")),1)],512),[[B,d.date_type]])])]),e("div",Ve,[f.value?(l(),i("button",{key:0,class:"btn btn-sm btn-light-danger",onClick:F},t(s.$t("Clear")),1)):L("",!0)]),e("div",Re,[e("div",Ae,[e("div",je,[k(e("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:$(K),"onUpdate:modelValue":a[3]||(a[3]=o=>c.search_query=o)},null,8,qe),[[re,c.search_query]]),e("div",Pe,[h(Q,{icon:"fa6-solid:magnifying-glass"})])])])])])]),c.is_listing?(l(),i("div",Ue,[h(X)])):(l(),i("div",Fe,[e("table",Ke,[e("thead",We,[e("tr",null,[e("th",Ge,t(s.$t("Terminal")),1),e("th",Je,t(s.$t("Opened At")),1),e("th",ze,t(s.$t("Closed At")),1),e("th",He,t(s.$t("System Opening/Closing Cash")),1),e("th",Qe,t(s.$t("Manual OPening/Closing Cash")),1),e("th",Xe,t(s.$t("System Closing Credit")),1),e("th",Ye,t(s.$t("Status")),1),e("th",Ze,t(s.$t("Opened By")),1)])]),e("tbody",null,[v.value!=""?(l(!0),i(E,{key:0},I(v.value,(o,u)=>{var m;return l(),i("tr",{key:u},[e("td",null,t((m=o.terminal)==null?void 0:m.terminal_name),1),e("td",null,t(o.opening_datetime_label??"-"),1),e("td",null,t(o.closing_datetime??"-"),1),e("td",null,t(o.system_opening_cash)+" / "+t(o.system_closing_cash??" -"),1),e("td",null,t(o.manual_opening_cash)+" / "+t(o.manual_closing_cash??" -"),1),e("td",null,t(o.system_closing_credit??" -"),1),e("td",null,[o.closing_datetime==null?(l(),i("span",xe,t(s.$t("Opened")),1)):(l(),i("span",et,t(s.$t("Closed")),1))]),e("td",null,t(o.user.name),1)])}),128)):(l(),i("tr",tt,[e("td",st,t(s.$t("No Data Found")),1)]))])])])),e("div",ot,[e("div",at,[e("div",nt,[h(Y,{onPaginate_limit_update:G,pagination:y.value},null,8,["pagination"])]),e("div",lt,[h($(_e),{data:y.value,limit:5,onPaginationChangePage:r},null,8,["data"])])])])])]),_:1})}}};export{gt as default};
