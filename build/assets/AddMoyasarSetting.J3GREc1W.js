import V from"./ServerMessage.Re9KOdbP.js";import{_ as M}from"./VTextArea.S7BcQM-W.js";import{_ as q}from"./VTextInput.pcaNaUkX.js";import{c as N,a as _}from"./index.esm.e6McCFlz.js";import{C as $}from"./ClipLoader.gDBpDd3b.js";/* empty css                                                   */import{u as x,F as A}from"./vee-validate.esm.reM-LHjC.js";import{u as T,b as B,d as C,r as F,e as O,P as I,g as o,h as m,i as s,l as i,w as P,t as n,k as u,j as d,m as y,p as R}from"./index.li3fCRRM.js";import"./VTooltip.pHzwBjkF.js";/* empty css                                                   */const Y={class:"row"},D={class:"col-12 py-3"},E={class:"card"},K={class:"row mb-3"},U={class:"col-4"},j={class:"label"},z=s("span",{class:"text-danger"},"*",-1),G={class:"col-8"},J={class:"row mb-3"},L={class:"col-4"},H={class:"label"},Q=s("span",{class:"text-danger"},"*",-1),W={class:"col-8"},X={class:"my-3"},Z={key:0,class:"row py-3"},ee={class:"col-12 mt-2 text-end"},se=["disabled"],te={key:1,class:"pt-0"},ae={key:2,class:"pt-0"},ye={__name:"AddMoyasarSetting",props:{active_payment_gateway:{type:[Object,Array]}},setup(h){x();const{t:a}=T(),g=h,v=B();C(()=>v.user.currency.symbol);const b=F({merchant_key:a("Merchant Key"),password:a("Password"),sms_template:a("SMS Template"),sms_note:a("Note: Square bracket([ ]) words will replace with the data like 'Your invoice number:[INVOICE_NUMBER]' to 'Your invoice number:001' in SMS")}),e=O({...{server_messages:{type:"",messages:""},is_submitting:!1,merchant_key:"",sms_template:"",constant_name:"MOYASAR"}}),l=I(g,"active_payment_gateway");l.value.name=="MOYASAR"&&(e.merchant_key=l.value.key,e.sms_template=l.value.sms_template);const f=N().shape({constant_name:_().required(a("name is required",{name:a("Payment Gateway Name")})),merchant_key:_().required(a("name is required",{name:a("Merchant Key")})),sms_template:_().required(a("name is required",{name:a("SMS Template")}))});new FormData;async function w(){e.is_submitting=!0;var r=new FormData;r.append("merchant_key",e.merchant_key),r.append("sms_template",e.sms_template),r.append("payment_gateway",e.constant_name),await axios.post("/api/payment_gateway_setting/save",r,{}).then(t=>{if(t.data.status_code==200)toast.success(t.data.msg),e.is_submitting=!1,router.push("/payment_gateway");else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(t.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=t.data.msg}e.is_submitting=!1}}).catch(t=>{e.server_messages.type="error",e.server_messages.messages=t,e.is_submitting=!1})}return(r,t)=>{const p=q,S=M,k=V;return o(),m("div",null,[s("div",Y,[i(d(A),{onSubmit:w,"validation-schema":d(f),"initial-values":e},{default:P(()=>[s("div",D,[s("div",E,[s("div",K,[s("div",U,[s("label",j,[u(n(r.$t("Merchant Key")),1),z])]),s("div",G,[i(p,{type:"text",name:"merchant_key",modelValue:e.merchant_key,"onUpdate:modelValue":t[0]||(t[0]=c=>e.merchant_key=c),label:"",required:!0,islabel:!1,size:"small"},null,8,["modelValue"])])]),s("div",J,[s("div",L,[s("label",H,[u(n(r.$t("SMS Template")),1),Q])]),s("div",W,[i(S,{name:"sms_template",modelValue:e.sms_template,"onUpdate:modelValue":t[1]||(t[1]=c=>e.sms_template=c),label:"",required:!0,islabel:!1},null,8,["modelValue"]),s("span",X,n(d(b).sms_note),1)])])]),e.server_messages.messages!=""?(o(),m("div",Z,[i(k,{server_messages:e.server_messages},null,8,["server_messages"])])):y("",!0)]),s("div",ee,[s("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(o(),R($,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):y("",!0),e.is_submitting?(o(),m("span",te,n(r.$t("Saving...")),1)):(o(),m("span",ae,n(r.$t("Save")),1))],8,se)])]),_:1},8,["validation-schema","initial-values"])])])}}};export{ye as default};
