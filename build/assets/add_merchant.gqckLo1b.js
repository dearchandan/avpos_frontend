import{_ as I}from"./EditFormSkeleton.MxB2Xqx6.js";import{_ as j}from"./VMultiSelect.3zUL7lik.js";import J from"./ServerMessage.qNo4NwTp.js";import{u as G,a as L,b as z,d as H,r as y,e as K,o as Q,g as i,p as k,w as g,f as x,i as t,k as o,n as N,t as u,j as b,h as d,l as m,K as Z,Q as W,I as X}from"./index.ri7Y_V5F.js";import{_ as Y}from"./DefaultLayout.EMHfdzn0.js";import{F as ee}from"./vee-validate.esm.0La7AMjT.js";import{c as se,a as h}from"./index.esm.wERziE-M.js";import{_}from"./VTextInput.o2P1IcEE.js";import{C as ae}from"./ClipLoader.4-rIzqtH.js";import"./VTooltip.a7qKl6DY.js";/* empty css                                                   */const te={class:"header-nav-wrap"},ne={class:"row align-items-center"},le={class:"col-auto"},oe={class:"header-back-link"},ie={class:"col-auto"},re={key:0,class:"fw-bold"},de={key:1,class:"fw-bold"},ue={key:0,class:"content"},ce={class:"row card-strash"},_e={key:0,class:"py-3"},me={class:"col-md-12"},pe={class:"row"},be={class:"col-md-12 mb-4"},ve={class:"card"},ye={class:"row"},he={class:"col-md-3"},ge={class:"col-md-3"},fe={class:"col-md-3"},ke={class:"col-md-3"},Ve={class:"col-md-3"},we={class:"col-md-3"},$e={key:0,class:"col-md-3"},Se={class:"col-md-3 pt-2"},qe={class:"form-field pt-2"},Ue={class:"form-check form-switch pt-4"},Me={class:"form-check-label",for:"status"},xe=t("div",{class:"col-md-3 pt-2"},null,-1),Ne={class:"col-md-12 mb-4"},Oe={key:0,class:"card"},Ae={class:"pb-3"},Ce={key:0,class:"badge badge-primary"},Fe={key:1,class:"badge badge-success"},Ee={key:2,class:"badge badge-warning"},Re={key:3,class:"badge badge-gray"},Be={key:4,class:"badge badge-danger"},De={class:"row"},Pe={class:"col-md-3"},Te={class:"col-md-3"},Ie={class:"col-md-3"},je={class:"col-md-3"},Je={class:"col-md-3"},Ge={class:"col-md-3"},Le={class:"text-end"},ze=["disabled"],He={key:1,class:"pt-0"},Ke={key:2,class:"pt-0"},rs={__name:"add_merchant",setup(Qe){const{t:a}=G(),p=L().params.slack,{generatePassword:O}=X(),V=z(),w=H(()=>V.user.is_third_party),r=y({name:a("Merchant Name"),email:a("Merchant Email"),phone:a("Merchant Phone"),vat_registration_number:a("VAT Registration Number"),gst_number:a("GST Number"),business_type:a("Business Type"),date_of_birth:a("Date Of Birth"),date_of_anniversary:a("Date Of Anniversary"),joining_date:a("Date Of Joining"),address:a("Address"),second_address_line:a("Address Line 2"),city:a("City"),pincode:a("Pincode/Zipcode"),state:a("State"),user_subscription_name:a("Subscription Name"),user_subscription_start_date:a("Start Date"),user_subscription_end_date:a("End Date"),user_subscription_active_subscriptions_at:a("Subscription Ends In"),user_subscription_payable_amount:a("Subscription Amount"),user_subscription_status:a("Subscription Status"),country:a("Country"),referral_account:a("Referral Account")}),A={server_messages:{type:"",messages:""},is_submitting:!1,name:"",email:"",phone:"",merchant_type:"",vat_registration_number:"",gst_number:"",business_type:"",date_of_birth:"",date_of_anniversary:"",joining_date:"",status:!0,address:"",first_address_line:"",second_address_line:"",city:"",pincode:"",state:"",country:"",merchant_slack:"",user_subscription:{name:"",status_text:""},referral_account:w?V.user.id:""},e=K({...A}),C=se({name:h().required(a("name is required",{name:a("Merchant Name")})).min(3,a("name must be at least n characters",{name:a("Merchant Name"),number:3})).default(""),country:h().required(a("Country is required",{name:a("Country")})),business_type:h().required(a("business type is required",{name:a("Business Type")})),email:h().required(a("name is required",{name:a("Email")})).email(a("must be a valid email",{name:a("Email")})),phone:h().matches(/^[0-9]{9,10}$/,a("Phone must be 9 or 10 digits")).typeError(a("must be a number",{name:a("Phone")})).required(a("phone is required",{name:a("Phone")})).min(9).max(10)});Q(()=>{R(),p!=""&&p!=null&&B(),F(),E()});const $=y([]);async function F(){let s=await axios.get("api/business_types");$.value=s.data}const S=y([]);async function E(){let s=await axios.get("api/sub_admins?dropdown=1");S.value=s.data}const q=y([]),v=y([]);async function R(){await axios.get("/api/countries/serving").then(s=>{if(s.data.status_code==200)q.value=s.data.data;else try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(s.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=s.data.msg}}).catch(s=>{e.server_messages.type="error",e.server_messages.messages=s,console.log(s)})}const U=y(!1);async function B(){await axios.post("/api/merchant",{slack:p}).then(s=>{v.value=s.data.data,s.data.data&&(e.merchant_slack=s.data.data.slack,e.name=s.data.data.name,e.email=s.data.data.email,e.city=s.data.data.city,e.state=s.data.data.state,e.gst_number=s.data.data.gst_number,e.vat_registration_number=s.data.data.vat_number,e.business_type=s.data.data.business_type,e.phone=s.data.data.phone,e.address=s.data.data.address,e.second_address_line=s.data.data.second_address_line,e.pincode=s.data.data.postal_code,e.country=s.data.data.country_slack,e.date_of_anniversary=s.data.data.date_of_anniversary,e.date_of_birth=s.data.data.date_of_birth,e.joining_date=s.data.data.joining_date,e.merchant_type=s.data.data.type,e.status=s.data.data.status==1,e.user_subscription=s.data.data.user_subscription,e.referral_account=s.data.data.referral_account),U.value=!0}).catch(s=>{e.server_messages.type="error",e.server_messages.messages=s,console.log(s)})}async function D(){e.is_submitting=!0;var s=new FormData;s.append("s_token",""),s.append("merchant_name",e.name),s.append("business_type",e.business_type),s.append("merchant_email",e.email),s.append("phone",e.phone),s.append("status",e.status),s.append("country",e.country),s.append("password",O(8)),s.append("merchant_slack",e.merchant_slack),s.append("is_register_mail_send",!0),s.append("referral_account",e.referral_account);var n=e.merchant_slack!=""&&e.merchant_slack!=null?"/api/merchant/update":"/api/web_register";await axios.post(n,s).then(c=>{if(c.data.status_code==200)toast.success(c.data.msg),e.is_submitting=!1,!e.merchant_slack||e.merchant_slack==null?router.push("/merchant/"+c.data.data.user.slack):router.push("/merchants");else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(c.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=c.data.msg}e.is_submitting=!1}}).catch(c=>{e.server_messages.type="error",e.server_messages.messages=c,e.is_submitting=!1,console.log(c)})}return(s,n)=>{const c=x("Icon"),M=x("router-link"),P=J,f=j,T=I;return i(),k(Y,null,{subheader:g(()=>[t("div",te,[t("div",ne,[t("div",le,[t("div",oe,[o(M,{class:"text-primary",to:"/merchants"},{default:g(()=>[o(c,{icon:"fa6-solid:chevron-left"}),N(" "+u(s.$t("Merchants")),1)]),_:1})])]),t("div",ie,[b(p)==""||b(p)==null?(i(),d("h5",re,u(s.$t("Add Merchant")),1)):(i(),d("h5",de,u(s.$t("Edit Merchant")),1))])])])]),default:g(()=>[b(p)==""||b(p)==null||b(p)!=""&&U.value?(i(),d("div",ue,[o(b(ee),{"validation-schema":b(C),"initial-values":e,onSubmit:D,enctype:"multipart/form-data"},{default:g(()=>[t("div",ce,[e.server_messages.messages!=""?(i(),d("div",_e,[o(P,{server_messages:e.server_messages},null,8,["server_messages"])])):m("",!0),t("div",me,[t("div",pe,[t("div",be,[t("div",ve,[t("div",ye,[t("div",he,[o(_,{type:"text",name:"name",modelValue:e.name,"onUpdate:modelValue":n[0]||(n[0]=l=>e.name=l),label:r.value.name,required:!0},null,8,["modelValue","label"])]),t("div",ge,[o(_,{type:"email",name:"email",modelValue:e.email,"onUpdate:modelValue":n[1]||(n[1]=l=>e.email=l),label:r.value.email,required:""},null,8,["modelValue","label"])]),t("div",fe,[o(_,{type:"number",name:"phone",modelValue:e.phone,"onUpdate:modelValue":n[2]||(n[2]=l=>e.phone=l),label:r.value.phone,required:""},null,8,["modelValue","label"])]),t("div",ke,[o(f,{name:"business_type",label:r.value.business_type,placeholder:r.value.business_type,text:"value",value:"key",options:$.value,modelValue:e.business_type,"onUpdate:modelValue":n[3]||(n[3]=l=>e.business_type=l),mode:"single",required:"",selected:e.business_type},null,8,["label","placeholder","options","modelValue","selected"])]),t("div",Ve,[o(f,{name:"country",label:r.value.country,placeholder:r.value.country,text:"name",value:"slack",options:q.value,modelValue:e.country,"onUpdate:modelValue":n[4]||(n[4]=l=>e.country=l),mode:"single",required:"",selected:e.country},null,8,["label","placeholder","options","modelValue","selected"])]),t("div",we,[o(_,{type:"text",name:"address",modelValue:e.address,"onUpdate:modelValue":n[5]||(n[5]=l=>e.address=l),label:r.value.address},null,8,["modelValue","label"])]),b(w)?m("",!0):(i(),d("div",$e,[o(f,{name:"referral_account",label:r.value.referral_account,placeholder:r.value.referral_account,text:"value",value:"key",options:S.value,modelValue:e.referral_account,"onUpdate:modelValue":n[6]||(n[6]=l=>e.referral_account=l),mode:"single",selected:e.referral_account},null,8,["label","placeholder","options","modelValue","selected"])])),t("div",Se,[t("div",qe,[t("div",Ue,[Z(t("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status",checked:"","onUpdate:modelValue":n[7]||(n[7]=l=>e.status=l)},null,512),[[W,e.status]]),t("label",Me,u(s.$t("Active")),1)])])]),xe])])]),t("div",Ne,[v.value.user_subscription?(i(),d("div",Oe,[t("h5",Ae,[N(u(s.$t("Subscription"))+" ",1),v.value.user_subscription.status==0?(i(),d("span",Ce,u(s.$t("Inactive")),1)):m("",!0),v.value.user_subscription.status==1?(i(),d("span",Fe,u(s.$t("Active")),1)):m("",!0),v.value.user_subscription.status==2?(i(),d("span",Ee,u(s.$t("On Hold")),1)):m("",!0),v.value.user_subscription.status==3?(i(),d("span",Re,u(s.$t("Upgraded")),1)):m("",!0),v.value.user_subscription.status==4?(i(),d("span",Be,u(s.$t("Expired")),1)):m("",!0)]),t("div",De,[t("div",Pe,[o(_,{type:"text",name:"user_subscription.name",modelValue:e.user_subscription.name,"onUpdate:modelValue":n[8]||(n[8]=l=>e.user_subscription.name=l),label:r.value.user_subscription_name,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),t("div",Te,[o(_,{type:"text",name:"user_subscription.start_date_label",modelValue:e.user_subscription.start_date_label,"onUpdate:modelValue":n[9]||(n[9]=l=>e.user_subscription.start_date_label=l),label:s.labelslabels.user_subscription_start_date,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),t("div",Ie,[o(_,{type:"text",name:"user_subscription.end_date_label",modelValue:e.user_subscription.end_date_label,"onUpdate:modelValue":n[10]||(n[10]=l=>e.user_subscription.end_date_label=l),label:r.value.user_subscription_end_date,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),t("div",je,[o(_,{type:"text",name:"user_subscription.active_subscriptions_at",modelValue:e.user_subscription.active_subscriptions_at,"onUpdate:modelValue":n[11]||(n[11]=l=>e.user_subscription.active_subscriptions_at=l),label:r.value.user_subscription_active_subscriptions_at,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),t("div",Je,[o(_,{type:"text",name:"user_subscription.payable_amount",modelValue:e.user_subscription.payable_amount,"onUpdate:modelValue":n[12]||(n[12]=l=>e.user_subscription.payable_amount=l),label:r.value.user_subscription_payable_amount,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),t("div",Ge,[o(_,{type:"text",name:"user_subscription.status_text",modelValue:e.user_subscription.status_text,"onUpdate:modelValue":n[13]||(n[13]=l=>e.user_subscription.status_text=l),label:r.value.user_subscription_status,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])])])])):m("",!0)])])])]),t("div",Le,[t("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(i(),k(ae,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):m("",!0),e.is_submitting?(i(),d("span",He,u(s.$t("Saving...")),1)):(i(),d("span",Ke,u(s.$t("Save")),1))],8,ze)])]),_:1},8,["validation-schema","initial-values"])])):(i(),k(T,{key:1}))]),_:1})}}};export{rs as default};
