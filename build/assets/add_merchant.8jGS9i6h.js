import{_ as A}from"./EditFormSkeleton.Ez20ofO9.js";import{_ as B}from"./VMultiSelect.pXBL2AV1.js";import R from"./ServerMessage.EFQMOwoZ.js";import{u as I,a as P,r as y,e as T,o as j,g as l,p as f,w as g,f as q,i as a,l as o,k as U,t as d,j as v,h as u,m as p,K as J,Q as L,I as G}from"./index.sP6fhsqN.js";import{D as Z}from"./DefaultLayout.K5Bh9Jz_.js";import{F as z}from"./vee-validate.esm.2kXgdFia.js";import{c as H,a as h}from"./index.esm.DHYHwGJ4.js";import{_}from"./VTextInput.EPCajChY.js";import{C as K}from"./ClipLoader._89zL49D.js";import"./VTooltip.kcvohVRA.js";/* empty css                                                   */const Q={class:"header-nav-wrap"},W={class:"row align-items-center"},X={class:"col-auto"},Y={class:"header-back-link"},ee={class:"col-auto"},se={key:0,class:"fw-bold"},te={key:1,class:"fw-bold"},ae={key:0,class:"content"},ie={class:"row card-strash"},ne={key:0,class:"py-3"},oe={class:"col-md-12"},le={class:"row"},re={class:"col-md-12 mb-4"},de={class:"card"},ue={class:"row"},ce={class:"col-md-3"},_e={class:"col-md-3"},me={class:"col-md-3"},pe={class:"col-md-3"},be={class:"col-md-3"},ve={class:"col-md-3"},ye={class:"col-md-3 pt-2"},he={class:"form-field pt-2"},ge={class:"form-check form-switch pt-4"},fe={class:"form-check-label",for:"status"},ke={class:"col-md-12 mb-4"},Ve={key:0,class:"card"},we={class:"pb-3"},$e={key:0,class:"badge badge-primary"},Se={key:1,class:"badge badge-success"},qe={key:2,class:"badge badge-warning"},Ue={key:3,class:"badge badge-gray"},Me={key:4,class:"badge badge-danger"},Ne={class:"row"},Oe={class:"col-md-3"},xe={class:"col-md-3"},Ce={class:"col-md-3"},De={class:"col-md-3"},Fe={class:"col-md-3"},Ee={class:"col-md-3"},Ae={class:"text-end"},Be=["disabled"],Re={key:1,class:"pt-0"},Ie={key:2,class:"pt-0"},es={__name:"add_merchant",setup(Pe){const{t}=I(),m=P().params.slack,{generatePassword:M}=G(),r=y({name:t("Merchant Name"),email:t("Merchant Email"),phone:t("Merchant Phone"),vat_registration_number:t("VAT Registration Number"),gst_number:t("GST Number"),business_type:t("Business Type"),date_of_birth:t("Date Of Birth"),date_of_anniversary:t("Date Of Anniversary"),joining_date:t("Date Of Joining"),address:t("Address"),second_address_line:t("Address Line 2"),city:t("City"),pincode:t("Pincode/Zipcode"),state:t("State"),user_subscription_name:t("Subscription Name"),user_subscription_start_date:t("Start Date"),user_subscription_end_date:t("End Date"),user_subscription_active_subscriptions_at:t("Subscription Ends In"),user_subscription_payable_amount:t("Subscription Amount"),user_subscription_status:t("Subscription Status"),country:t("Country")}),e=T({...{server_messages:{type:"",messages:""},is_submitting:!1,name:"",email:"",phone:"",merchant_type:"",vat_registration_number:"",gst_number:"",business_type:"",date_of_birth:"",date_of_anniversary:"",joining_date:"",status:!0,address:"",first_address_line:"",second_address_line:"",city:"",pincode:"",state:"",country:"",merchant_slack:"",user_subscription:{name:"",status_text:""}}}),N=H({name:h().required(t("name is required",{name:t("Merchant Name")})).min(3,t("name must be at least n characters",{name:t("Merchant Name"),number:3})).default(""),country:h().required(t("Country is required",{name:t("Country")})),business_type:h().required(t("business type is required",{name:t("Business Type")})),email:h().required(t("name is required",{name:t("Email")})).email(t("must be a valid email",{name:t("Email")})),phone:h().matches(/^[0-9]{9,10}$/,t("Phone must be 9 or 10 digits")).typeError(t("must be a number",{name:t("Phone")})).required(t("phone is required",{name:t("Phone")})).min(9).max(10)});j(()=>{x(),m!=""&&m!=null&&C(),O()});const k=y([]);async function O(){let s=await axios.get("api/business_types");k.value=s.data}const V=y([]),b=y([]);async function x(){await axios.get("/api/countries/serving").then(s=>{if(s.data.status_code==200)V.value=s.data.data;else try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(s.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=s.data.msg}}).catch(s=>{e.server_messages.type="error",e.server_messages.messages=s,console.log(s)})}const w=y(!1);async function C(){await axios.post("/api/merchant",{slack:m}).then(s=>{b.value=s.data.data,s.data.data&&(e.merchant_slack=s.data.data.slack,e.name=s.data.data.name,e.email=s.data.data.email,e.city=s.data.data.city,e.state=s.data.data.state,e.gst_number=s.data.data.gst_number,e.vat_registration_number=s.data.data.vat_number,e.business_type=s.data.data.business_type,e.phone=s.data.data.phone,e.address=s.data.data.address,e.second_address_line=s.data.data.second_address_line,e.pincode=s.data.data.postal_code,e.country=s.data.data.country_slack,e.date_of_anniversary=s.data.data.date_of_anniversary,e.date_of_birth=s.data.data.date_of_birth,e.joining_date=s.data.data.joining_date,e.merchant_type=s.data.data.type,e.status=s.data.data.status==1,e.user_subscription=s.data.data.user_subscription),w.value=!0}).catch(s=>{e.server_messages.type="error",e.server_messages.messages=s,console.log(s)})}async function D(){e.is_submitting=!0;var s=new FormData;s.append("s_token","6iua8ZDIU~81s{Oy6([6%t%NVbP@~8"),s.append("merchant_name",e.name),s.append("business_type",e.business_type),s.append("merchant_email",e.email),s.append("phone",e.phone),s.append("status",e.status),s.append("country",e.country),s.append("password",M(8)),s.append("merchant_slack",e.merchant_slack),s.append("is_register_mail_send",!0);var i=e.merchant_slack!=""&&e.merchant_slack!=null?"/api/merchant/update":"/api/web_register";await axios.post(i,s).then(c=>{if(c.data.status_code==200)toast.success(c.data.msg),e.is_submitting=!1,!e.merchant_slack||e.merchant_slack==null?router.push("/merchant/"+c.data.data.user.slack):router.push("/merchants");else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(c.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=c.data.msg}e.is_submitting=!1}}).catch(c=>{e.server_messages.type="error",e.server_messages.messages=c,e.is_submitting=!1,console.log(c)})}return(s,i)=>{const c=q("Icon"),$=q("router-link"),F=R,S=B,E=A;return l(),f(Z,null,{subheader:g(()=>[a("div",Q,[a("div",W,[a("div",X,[a("div",Y,[o($,{class:"text-primary",to:"/merchants"},{default:g(()=>[o(c,{icon:"fa6-solid:chevron-left"}),U(" "+d(s.$t("Merchants")),1)]),_:1})])]),a("div",ee,[v(m)==""||v(m)==null?(l(),u("h5",se,d(s.$t("Add Merchant")),1)):(l(),u("h5",te,d(s.$t("Edit Merchant")),1))])])])]),default:g(()=>[v(m)==""||v(m)==null||v(m)!=""&&w.value?(l(),u("div",ae,[o(v(z),{"validation-schema":v(N),"initial-values":e,onSubmit:D,enctype:"multipart/form-data"},{default:g(()=>[a("div",ie,[e.server_messages.messages!=""?(l(),u("div",ne,[o(F,{server_messages:e.server_messages},null,8,["server_messages"])])):p("",!0),a("div",oe,[a("div",le,[a("div",re,[a("div",de,[a("div",ue,[a("div",ce,[o(_,{type:"text",name:"name",modelValue:e.name,"onUpdate:modelValue":i[0]||(i[0]=n=>e.name=n),label:r.value.name,required:!0},null,8,["modelValue","label"])]),a("div",_e,[o(_,{type:"email",name:"email",modelValue:e.email,"onUpdate:modelValue":i[1]||(i[1]=n=>e.email=n),label:r.value.email,required:""},null,8,["modelValue","label"])]),a("div",me,[o(_,{type:"number",name:"phone",modelValue:e.phone,"onUpdate:modelValue":i[2]||(i[2]=n=>e.phone=n),label:r.value.phone,required:""},null,8,["modelValue","label"])]),a("div",pe,[o(S,{name:"business_type",label:r.value.business_type,placeholder:r.value.business_type,text:"value",value:"key",options:k.value,modelValue:e.business_type,"onUpdate:modelValue":i[3]||(i[3]=n=>e.business_type=n),mode:"single",required:"",selected:e.business_type},null,8,["label","placeholder","options","modelValue","selected"])]),a("div",be,[o(S,{name:"country",label:r.value.country,placeholder:r.value.country,text:"name",value:"slack",options:V.value,modelValue:e.country,"onUpdate:modelValue":i[4]||(i[4]=n=>e.country=n),mode:"single",required:"",selected:e.country},null,8,["label","placeholder","options","modelValue","selected"])]),a("div",ve,[o(_,{type:"text",name:"address",modelValue:e.address,"onUpdate:modelValue":i[5]||(i[5]=n=>e.address=n),label:r.value.address},null,8,["modelValue","label"])]),a("div",ye,[a("div",he,[a("div",ge,[J(a("input",{class:"form-check-input me-2",type:"checkbox",role:"switch",id:"status",checked:"","onUpdate:modelValue":i[6]||(i[6]=n=>e.status=n)},null,512),[[L,e.status]]),a("label",fe,d(s.$t("Active")),1)])])])])])]),a("div",ke,[b.value.user_subscription?(l(),u("div",Ve,[a("h5",we,[U(d(s.$t("Subscription"))+" ",1),b.value.user_subscription.status==0?(l(),u("span",$e,d(s.$t("Inactive")),1)):p("",!0),b.value.user_subscription.status==1?(l(),u("span",Se,d(s.$t("Active")),1)):p("",!0),b.value.user_subscription.status==2?(l(),u("span",qe,d(s.$t("On Hold")),1)):p("",!0),b.value.user_subscription.status==3?(l(),u("span",Ue,d(s.$t("Upgraded")),1)):p("",!0),b.value.user_subscription.status==4?(l(),u("span",Me,d(s.$t("Expired")),1)):p("",!0)]),a("div",Ne,[a("div",Oe,[o(_,{type:"text",name:"user_subscription.name",modelValue:e.user_subscription.name,"onUpdate:modelValue":i[7]||(i[7]=n=>e.user_subscription.name=n),label:r.value.user_subscription_name,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),a("div",xe,[o(_,{type:"text",name:"user_subscription.start_date_label",modelValue:e.user_subscription.start_date_label,"onUpdate:modelValue":i[8]||(i[8]=n=>e.user_subscription.start_date_label=n),label:r.value.user_subscription_start_date,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),a("div",Ce,[o(_,{type:"text",name:"user_subscription.end_date_label",modelValue:e.user_subscription.end_date_label,"onUpdate:modelValue":i[9]||(i[9]=n=>e.user_subscription.end_date_label=n),label:r.value.user_subscription_end_date,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),a("div",De,[o(_,{type:"text",name:"user_subscription.active_subscriptions_at",modelValue:e.user_subscription.active_subscriptions_at,"onUpdate:modelValue":i[10]||(i[10]=n=>e.user_subscription.active_subscriptions_at=n),label:r.value.user_subscription_active_subscriptions_at,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),a("div",Fe,[o(_,{type:"text",name:"user_subscription.payable_amount",modelValue:e.user_subscription.payable_amount,"onUpdate:modelValue":i[11]||(i[11]=n=>e.user_subscription.payable_amount=n),label:r.value.user_subscription_payable_amount,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])]),a("div",Ee,[o(_,{type:"text",name:"user_subscription.status_text",modelValue:e.user_subscription.status_text,"onUpdate:modelValue":i[12]||(i[12]=n=>e.user_subscription.status_text=n),label:r.value.user_subscription_status,readonly:!0,disabled:!0,title:s.$t("Read Only Field")},null,8,["modelValue","label","title"])])])])):p("",!0)])])])]),a("div",Ae,[a("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(l(),f(K,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):p("",!0),e.is_submitting?(l(),u("span",Re,d(s.$t("Saving...")),1)):(l(),u("span",Ie,d(s.$t("Save")),1))],8,Be)])]),_:1},8,["validation-schema","initial-values"])])):(l(),f(E,{key:1}))]),_:1})}}};export{es as default};
