import{_ as Y}from"./ActionButtonGroup.qGH_Fqs8.js";import{_ as x}from"./ListingSkeleton.upY030ro.js";import{_ as H}from"./VSelect.c4Loo_XL.js";import{u as Q,b as X,r as l,e as V,o as Z,v as D,g as r,p as ee,w as N,I as te,f as P,k as d,i as e,t as a,h as u,n as se,l as g,j as A,K as j,L as oe,N as ae,F as ne,x as ie,O as le}from"./index.GdMxdeuf.js";import{_ as ce}from"./DefaultLayout.qd3nRBiq.js";import{_ as re}from"./PaginateLimit.H-orl6zP.js";import{j as de}from"./vue-datepicker.iEAbZR0K.js";import{_ as _e}from"./ManageMenu.t-1m2T_G.js";import"./vee-validate.esm.9aElOHQY.js";/* empty css                                                                */import"./ClipLoader.UcGuNCxH.js";/* empty css                                                   */const ue={class:"content"},me={class:"page-heading"},he={class:"row align-items-center justify-content-between mb-3"},pe={class:"col-auto"},fe={class:"mb-0"},ve={key:0,class:"col-auto"},ge={class:"row align-items-end justify-content-between mb-3"},ye={class:"col-md-auto"},ke={class:"row align-items-end justify-content-between g-3"},be={class:"col-12 col-md-auto"},we={class:"form-field"},Ce={class:"col col-md-auto"},$e={class:"form-field"},Se={value:""},Ve={value:"1"},Ne={value:"0"},Ae={class:"col col-md-auto"},Ee={class:"col-auto col-md-auto"},Be={class:"col-auto"},De={class:"form-field page-heading-search-field mb-0"},Pe={class:"field-icon"},je=["placeholder"],Ie={class:"icon"},Te={key:0},Le={key:1,class:"table-responsive"},qe={class:"table table-list-data table-hover"},Fe={class:"bg-light"},Oe={scope:"col",width:"20%"},Ue={scope:"col",width:"15%"},Me={scope:"col",width:"10%"},Je={scope:"col",width:"10%"},Ge={scope:"col",width:"10%"},Re={scope:"col",width:"10%"},ze={scope:"col",width:"10%"},Ke={key:0,scope:"col",class:"text-end",width:"5%"},We=["onClick"],Ye={class:"fw-bold highlighted-list-item"},xe=e("br",null,null,-1),He={class:"text-muted"},Qe=["onClick"],Xe=["onClick"],Ze=["onClick"],et=["onClick"],tt=["onClick"],st={class:"form-feild"},ot={class:"form-check form-switch form-switch-2"},at=["onChange","checked"],nt={key:0,class:"text-end"},it={key:1},lt={class:"text-center py-3",colspan:"11"},ct={class:"data-footer"},rt={class:"row align-items-center justify-content-between"},dt={class:"col-auto"},_t={class:"col-auto"},St={__name:"suppliers",setup(ut){const{t:v}=Q(),{isAuthorized:E}=te();X(),l(!1);const I={server_messages:{type:"",messages:""},is_listing:!1,search_query:l("")},T=v("Search by name, email, phone.."),n=V({...I});Z(()=>{G(),m(),q()}),D(()=>n.search_query,_.debounce(()=>{m()},500));const y=l([]),k=l([]);async function m(t=1){n.is_listing=!0,await axios.get("/api/v2/suppliers",{params:{page:t,paginate_limit:B.value,search_query:n.search_query,filter:c}}).then(s=>{y.value=s.data.data,k.value=s.data.pagination,n.is_listing=!1}).catch(s=>{n.server_messages.type="error",n.server_messages.messages=s,n.is_listing=!1,console.log(s)})}const B=l();async function L(t){B.value=t,await m()}const b=l([]);async function q(){b.value=[];let t=await axios.get("api/v2/countries/all");t=t.data.data,_.forEach(t,s=>{let i={key:s.slack,value:s.name};b.value.push(i)})}async function F(t){var s=new FormData;s.append("slack",t),await axios.post("/api/supplier/update_status",s).then(i=>{if(i.data.status_code==200)toast.success(i.data.msg);else try{n.server_messages.type="error",n.server_messages.messages=JSON.parse(i.data.msg)}catch{n.server_messages.type="error",n.server_messages.messages=i.data.msg}}).catch(i=>{n.server_messages.type="error",n.server_messages.messages=i,console.log(i)})}const O=l(!1),w=V({created_date:l(),status:l(""),country:l("")}),c=V({...w});D(()=>c.country,t=>{$()});const C=l(!1);async function $(){JSON.stringify(c)!=JSON.stringify(w)&&(C.value=!0),O.value=!1,await m()}function U(){Object.assign(c,w),C.value=!1,m()}function p(t){router.push("/supplier/"+t)}function M(t){router.push("/supplier/edit/"+t)}async function J(t){var s=!1;await Swal.fire({title:v("Do you want to delete this Supplier?"),showCancelButton:!0,confirmButtonText:v("Yes, Delete"),confirmButtonColor:"#d33",cancelButtonText:v("Cancel")}).then(i=>{i.isConfirmed&&(s=!0)}),s&&await axios.post("/api/supplier/delete",{slack:t}).then(i=>{if(i.data.status_code==200)Swal.fire(i.data.msg),m();else try{n.server_messages.type="error",n.server_messages.messages=JSON.parse(i.data.msg)}catch{n.server_messages.type="error",n.server_messages.messages=i.data.msg}}).catch(i=>{n.server_messages.type="error",n.server_messages.messages=i,console.log(i)})}const h=l({write:!1,delete:!1});function G(){h.value={write:E("A_WRITE_SUPPLIER"),delete:E("A_DELETE_SUPPLIER")}}return(t,s)=>{const i=P("router-link"),S=H,R=P("Icon"),z=x,K=Y;return r(),ee(ce,null,{subheader:N(()=>[d(_e)]),default:N(()=>[e("div",ue,[e("div",me,[e("div",he,[e("div",pe,[e("h2",fe,a(t.$t("Suppliers")),1)]),h.value.write?(r(),u("div",ve,[d(i,{class:"btn btn-sm btn-light-primary2",to:"/supplier/add"},{default:N(()=>[se("+ "+a(t.$t("New Supplier")),1)]),_:1})])):g("",!0)]),e("div",ge,[e("div",ye,[e("div",ke,[e("div",be,[e("div",we,[e("label",null,a(t.$t("Created Date")),1),d(A(de),{range:"",modelValue:c.created_date,"onUpdate:modelValue":[s[0]||(s[0]=o=>c.created_date=o),s[1]||(s[1]=o=>$())],format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid form-control-sm"},null,8,["modelValue"])])]),e("div",Ce,[e("div",$e,[e("label",null,a(t.$t("Status")),1),j(e("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":s[2]||(s[2]=o=>c.status=o),onChange:$},[e("option",Se,a(t.$t("All")),1),e("option",Ve,a(t.$t("Active")),1),e("option",Ne,a(t.$t("Inactive")),1)],544),[[oe,c.status]])])]),e("div",Ae,[d(S,{name:"country",label:"Country",modelValue:c.country,"onUpdate:modelValue":s[3]||(s[3]=o=>c.country=o),placeholder:"All",options:b.value,height_sm:!0},null,8,["modelValue","options"])]),e("div",Ee,[C.value?(r(),u("button",{key:0,class:"btn btn-sm btn-light-danger",onClick:U},a(t.$t("Clear")),1)):g("",!0)])])]),e("div",Be,[e("div",De,[e("div",Pe,[j(e("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:A(T),"onUpdate:modelValue":s[4]||(s[4]=o=>n.search_query=o)},null,8,je),[[ae,n.search_query]]),e("div",Ie,[d(R,{icon:"fa6-solid:magnifying-glass"})])])])])])]),n.is_listing?(r(),u("div",Te,[d(z)])):(r(),u("div",Le,[e("table",qe,[e("thead",Fe,[e("tr",null,[e("th",Oe,a(t.$t("Supplier Name")),1),e("th",Ue,a(t.$t("Email")),1),e("th",Me,a(t.$t("Phone")),1),e("th",Je,a(t.$t("VAT")),1),e("th",Ge,a(t.$t("GST Number")),1),e("th",Re,a(t.$t("Created At")),1),e("th",ze,a(t.$t("Active")),1),h.value.write||h.value.delete?(r(),u("th",Ke,a(t.$t("Action")),1)):g("",!0)])]),e("tbody",null,[y.value!=""?(r(!0),u(ne,{key:0},ie(y.value,(o,W)=>(r(),u("tr",{key:W},[e("td",{onClick:f=>p(o.slack),role:"button"},[e("div",null,[e("span",Ye,a(o.name),1),xe,e("small",He,"Code: "+a(o.code),1)])],8,We),e("td",{onClick:f=>p(o.slack),role:"button"},a(o.email),9,Qe),e("td",{onClick:f=>p(o.slack),role:"button"},a(o.phone),9,Xe),e("td",{onClick:f=>p(o.slack),role:"button"},a(o.vat_number),9,Ze),e("td",{onClick:f=>p(o.slack),role:"button"},a(o.gst_number),9,et),e("td",{onClick:f=>p(o.slack),role:"button"},a(o.created_at_label),9,tt),e("td",null,[e("div",st,[e("div",ot,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"Status_id",onChange:f=>F(o.slack),checked:o.status==1},null,40,at)])])]),h.value.write||h.value.delete?(r(),u("td",nt,[d(K,{permissions:h.value,onEdit:M,onDelete:J,slack:o.slack},null,8,["permissions","slack"])])):g("",!0)]))),128)):(r(),u("tr",it,[e("td",lt,a(t.$t("No Data Found")),1)]))])])])),e("div",ct,[e("div",rt,[e("div",dt,[d(re,{onPaginate_limit_update:L,pagination:k.value},null,8,["pagination"])]),e("div",_t,[d(A(le),{data:k.value,limit:5,onPaginationChangePage:m},null,8,["data"])])])])])]),_:1})}}};export{St as default};
