import{u as z,b as F,d as y,e as x,r as n,o as H,g as k,p as w,w as m,f as D,i as o,l as c,k as V,t as i,j as s,m as Q,A as M,B as C,bW as S,q as X,_ as Z}from"./index.li3fCRRM.js";import{D as ee}from"./DefaultLayout.saUWsTkY.js";import{_ as te}from"./VSelect.xfZK6hek.js";import{_ as se}from"./VMultiSelect.2M-H_LD-.js";import{u as ae}from"./global.NAtoPKoY.js";import{s as Y,a as oe,e as le,j as ne}from"./vue-datepicker.a6BsTEHj.js";import{s as T,e as $}from"./index.dFkrF4C6.js";import"./ClipLoader.gDBpDd3b.js";/* empty css                                                   */import"./vee-validate.esm.reM-LHjC.js";/* empty css                                                                */const re={class:"header-nav-wrap"},ce={class:"row align-items-center"},de={class:"col-auto"},ie={class:"header-back-link"},_e={class:"col-auto"},me={class:"fw-bold"},pe={class:"content"},ue={class:"card"},ge={class:"row field-m-0 align-items-end g-3"},he={class:"col-md-4 col-lg-3"},fe={class:"form-field"},ve={class:"form-label"},be=o("span",{class:"text-danger"},"*",-1),ye=["onClick","onKeyup"],xe={class:"col-md-4 col-lg-3"},ke={class:"col-md-4 col-lg-3"},we={class:"col-md-4 col-lg-3"},De={class:"row mt-3"},Ve={class:"col-12 text-end"},Me=["disabled"],Re={__name:"tax_returned_report",setup(Ce){const{t:r}=z();ae();const g=F();y(()=>g.user.currency.symbol);const A=x({server_messages:{type:"",messages:""},is_submitting:!1,is_listing:!1,dates:n([new Date,new Date]),selected_branch:n(),selected_category:n([]),selected_tax:n([]),is_exporting:!1}),e=x({...A}),E=r("Select Branch"),B=r("All Branches"),O=r("Select Category"),N=r("All Categories"),I=r("Select Tax"),L=r("All Taxes"),R=n([{label:"Today",value:[new Date,new Date]},{label:"This month",value:[T(new Date),$(new Date)]},{label:"Last month",value:[T(Y(new Date,1)),$(Y(new Date,1))]},{label:"This year",value:[oe(new Date),le(new Date)]}]);H(()=>{j(),K()});const U=y(()=>g.user.branches),h=n([]);async function j(){let a=await axios.get("api/v2/categories/all");a=a.data.data,_.forEach(a,t=>{let d={key:t.slack,value:t.name,id:t.slack};h.value.push(d)})}const f=n([]);async function K(){let a=await axios.get("api/v2/taxes/all");a=a.data.data,_.forEach(a,t=>{let d={key:t.slack,value:t.name,id:t.slack};f.value.push(d)})}async function P(){e.is_exporting=!0,e.dates[0]=S(e.dates[0]).format("YYYY-MM-DD"),e.dates[1]=S(e.dates[1]).format("YYYY-MM-DD"),await axios.get("/api/tax_returned_report/export_excel",{params:{filter:e}}).then(a=>{if(a.data.status_code==200){e.is_exporting=!1;const t=document.createElement("a");t.target="_blank",t.href=a.data.data.file,document.body.appendChild(t),t.click()}else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(a.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=a.data.msg}e.is_exporting=!1}}).catch(a=>{e.server_messages.type="error",e.server_messages.messages=a,e.is_exporting=!1,console.log(a)})}const q=X(()=>Z(()=>import("./ServerMessage.Re9KOdbP.js"),__vite__mapDeps([0,1,2])));return(a,t)=>{const d=D("Icon"),G=D("router-link"),J=se,v=te,W=ee;return k(),w(W,null,{subheader:m(()=>[o("div",re,[o("div",ce,[o("div",de,[o("div",ie,[c(G,{class:"text-primary",to:"/reports"},{default:m(()=>[c(d,{icon:"fa6-solid:chevron-left"}),V(" "+i(a.$t("Reports")),1)]),_:1})])]),o("div",_e,[o("h5",me,i(a.$t("Tax Returned Report")),1)])])])]),default:m(()=>[o("div",pe,[s(e).server_messages.messages!=""?(k(),w(s(q),{key:0,class:"py-3",server_messages:s(e).server_messages},null,8,["server_messages"])):Q("",!0),o("div",ue,[o("div",ge,[o("div",he,[o("div",fe,[o("label",ve,[V(i(a.$t("Select Dates"))+" ",1),be]),c(s(ne),{range:"","preset-dates":s(R),modelValue:s(e).dates,"onUpdate:modelValue":t[0]||(t[0]=l=>s(e).dates=l),format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid"},{"preset-date-range-button":m(({label:l,value:p,presetDate:u})=>[o("span",{role:"button",tabindex:0,onClick:b=>u(p),onKeyup:[M(C(b=>u(p),["prevent"]),["enter"]),M(C(b=>u(p),["prevent"]),["space"])]},i(l),41,ye)]),_:1},8,["preset-dates","modelValue"])])]),o("div",xe,[c(J,{name:"branches",label:s(E),placeholder:s(B),text:"name",value:"id",options:s(U),modelValue:s(e).selected_branch,"onUpdate:modelValue":t[1]||(t[1]=l=>s(e).selected_branch=l),mode:"single"},null,8,["label","placeholder","options","modelValue"])]),o("div",ke,[c(v,{name:"categories",label:s(O),placeholder:s(N),text:"name",value:"id",options:s(h),modelValue:s(e).selected_category,"onUpdate:modelValue":t[2]||(t[2]=l=>s(e).selected_category=l)},null,8,["label","placeholder","options","modelValue"])]),o("div",we,[c(v,{name:"taxes",label:s(I),placeholder:s(L),text:"name",value:"id",options:s(f),modelValue:s(e).selected_tax,"onUpdate:modelValue":t[3]||(t[3]=l=>s(e).selected_tax=l)},null,8,["label","placeholder","options","modelValue"])])]),o("div",De,[o("div",Ve,[o("button",{class:"btn btn-success",onClick:t[4]||(t[4]=l=>P()),disabled:s(e).dates==null},i(a.$t("Export Excel")),9,Me)])])])])]),_:1})}}};export{Re as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ServerMessage.Re9KOdbP.js","assets/index.li3fCRRM.js","assets/index.KTHCd6a8.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
