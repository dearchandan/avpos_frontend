import{_ as $}from"./SimpleLayout.AZDc_bTg.js";import N from"./ServerMessage.Wf7puwQc.js";import{_ as S}from"./logo.kgUW91FM.js";import{_ as C}from"./payment-img.Qnf7kJcq.js";import"./index.esm.0vhAmrVd.js";import{C as P}from"./ClipLoader.UcGuNCxH.js";/* empty css                      */import{e as j,a as B,r as u,o as D,g as o,h as r,i as a,t as s,j as g,k as h,l as d,p as f,G as O,z as V,w as x}from"./index.GdMxdeuf.js";/* empty css                                                   */const z={class:"sing-in-wrap front-display"},A={class:"row g-0"},J=O('<div class="col-md-6 signinbanner paymentsidebanner mobile-bg-remove" style=""><div class="logo" data-aos="zoom-in"><img src="'+S+'"></div><div class="paymentimg"><img src="'+C+'"></div></div>',1),L={class:"col-md-6 d-flex align-items-center justify-content-center"},M={class:"inner"},R={"data-aos":"fade-up"},E={class:"singin-box"},F={key:0},G={key:1,class:"pd-table"},Q=["disabled"],T={key:1,class:"pt-0"},q={key:2,class:"pt-0"},H={__name:"OnlinePayment",setup(b){const t=j({type:"",messages:""}),c=B(),_=c.params.id,v=c.params.slack,l=u(!1);D(()=>{k()});const m=u([]),i=u([]),p=u(!0);async function k(){await axios.get("/api/online_payment",{params:{slack:v}}).then(e=>{e.data.status_code==200?(m.value=e.data.data.online_payment_data,i.value=jQuery.parseJSON(e.data.data.online_payment_data.data_json)):(p.value=!1,t.type="error",t.messages=e.data.msg)}).catch(e=>{t.type="error",t.messages=e,console.log(e)})}async function w(){try{l.value=!0;var e=new FormData;e.append("merchant_id",_),e.append("slack",v),await axios.post("/api/online_payment/save",e).then(n=>{if(l.value=!1,n.data.status_code==200)location.href=n.data.data.redirect_url;else try{t.type="error",t.messages=JSON.parse(n.msg)}catch{t.type="error",t.messages=n.msg}})}catch(n){t.type="error",t.messages=n,l.value=!1,console.log(n)}}return(e,n)=>{const y=N;return o(),r("div",z,[a("div",A,[J,a("div",L,[a("div",M,[a("h2",R,s(e.$t("Payment Detail")),1),a("div",E,[g(t).messages!=""?(o(),r("div",F,[h(y,{server_messages:g(t),class:"mt-3"},null,8,["server_messages"])])):d("",!0),m.value!=null&&i.value!=null&&p.value?(o(),r("div",G,[a("table",null,[a("tr",null,[a("th",null,s(e.$t("Type")),1),a("td",null,s(m.value.bill_to),1)]),a("tr",null,[a("th",null,s(e.$t("Number")),1),a("td",null,s(i.value.invoice!=null?i.value.invoice.invoice_number:""),1)]),a("tr",null,[a("th",null,s(e.$t("Customer")),1),a("td",null,s(i.value.invoice!=null?i.value.invoice.customer_name:""),1)]),a("tr",null,[a("th",null,s(e.$t("Amount")),1),a("td",null,s(m.value.amount)+" SAR",1)])])])):d("",!0),a("div",null,[p.value?(o(),r("button",{key:0,onClick:n[0]||(n[0]=U=>w()),class:"btn btn-primary btn-md w-100",disabled:l.value},[l.value?(o(),f(P,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):d("",!0),l.value?(o(),r("span",T,s(e.$t("paying...")),1)):(o(),r("span",q,s(e.$t("Pay")),1))],8,Q)):d("",!0)])])])])])])}}},I={};function K(b,t){const c=H,_=$;return o(),f(_,null,{default:x(()=>[h(c)]),_:1})}const oe=V(I,[["render",K]]);export{oe as default};
