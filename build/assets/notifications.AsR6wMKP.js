import{u as I,r as n,e as P,o as R,v as A,a7 as B,d as F,g as i,p as m,w,f as M,i as t,t as c,h as r,m as b,K as j,N as O,j as v,l as u,F as T,x as U,y as z,k as K,O as G,q as H,_ as J}from"./index.sP6fhsqN.js";import{D as Q}from"./DefaultLayout.K5Bh9Jz_.js";import{_ as W}from"./ListingSkeleton.0g9v9IYA.js";import{_ as X}from"./PaginateLimit.T5jDCI_N.js";import"./ClipLoader._89zL49D.js";/* empty css                                                   */const Y={class:"header-nav-wrap"},Z={class:"row align-items-center"},tt={class:"col-auto"},et={class:"fw-bold"},st={class:"content"},at={class:"page-heading"},ot={class:"row align-items-center justify-content-between"},it={class:"col-auto"},nt={class:"row align-items-center"},ct={key:0,class:"text-danger"},lt={class:"col-auto"},rt={class:"row align-items-center"},_t={class:"col-auto"},dt={class:"form-field page-heading-search-field mb-0"},ut={class:"field-icon"},ht=["placeholder"],ft={class:"icon"},mt={key:1},vt={class:"table-responsive"},pt={class:"table table-list-data table-hover"},gt={class:"bg-light"},yt={scope:"col",width:"60%"},wt=["onClick"],bt=t("br",null,null,-1),kt={key:1},Nt={class:"text-center py-3",colspan:"7"},Dt={class:"data-footer"},xt={class:"row align-items-center justify-content-between"},Ct={class:"col-auto"},St={class:"col-auto"},At={__name:"notifications",setup(qt){const{t:k}=I(),N={server_messages:{type:"",messages:""},is_listing:!1,search_query:n("")},D=k("Search notifications.."),a=P({...N});R(()=>{d()}),A(()=>a.search_query,_.debounce(()=>{d()},500));const h=n([]),f=n([]);async function d(e=1){a.is_listing=!0,await axios.get("/api/v2/notifications",{params:{page:e,paginate_limit:p.value,search_query:a.search_query}}).then(s=>{h.value=s.data.data.notifications.data,f.value=s.data.data.notifications.pagination,a.is_listing=!1}).catch(s=>{a.server_messages.type="error",a.server_messages.messages=s,a.is_listing=!1,console.log(s)})}const p=n();async function x(e){p.value=e,await d()}const C=B(),g=F(()=>C.unread_notification_count);n(!1),n([]);const S=H(()=>J(()=>import("./ListReleaseDetailModal.hvRsDNxO.js"),__vite__mapDeps([0,1,2]))),y=n("");async function q(e){let s=new FormData;s.append("notification_id",e.id),axios.post("/api/v2/notification/read",s).then(l=>{l.data.status_code==200&&(e.url!=null&&e.url!=""?location.href=e.url:e.name=="VERSION_RELEASED"&&(y.value=l.data.data.release_version,$("#listReleaseDetailModal").modal("show")))})}return(e,s)=>{const l=M("Icon"),E=W,L=Q;return i(),m(L,null,{subheader:w(()=>[t("div",Y,[t("div",Z,[t("div",tt,[t("h5",et,c(e.$t("Notifications")),1)])])])]),default:w(()=>[t("div",st,[t("div",at,[t("div",ot,[t("div",it,[t("div",nt,[g.value>0?(i(),r("p",ct,c(g.value)+" "+c(e.$t("Unread notifications")),1)):b("",!0)])]),t("div",lt,[t("div",rt,[t("div",_t,[t("div",dt,[t("div",ut,[j(t("input",{type:"search",class:"form-control form-control-sm form-control-shadow",placeholder:v(D),"onUpdate:modelValue":s[0]||(s[0]=o=>a.search_query=o)},null,8,ht),[[O,a.search_query]]),t("div",ft,[u(l,{icon:"fa6-solid:magnifying-glass"})])])])])])])])]),a.is_listing?(i(),m(E,{key:0})):(i(),r("div",mt,[t("div",vt,[t("table",pt,[t("thead",gt,[t("tr",null,[t("th",yt,c(e.$t("Notification")),1)])]),t("tbody",null,[h.value!=""?(i(!0),r(T,{key:0},U(h.value,(o,V)=>(i(),r("tr",{key:V},[t("td",{role:"button",onClick:Et=>q(o),class:z([o.is_read?"":"bg-light",o.is_time_sensitive?"text-danger":"text-primary"])},[K(c(o.notification)+" ",1),o.is_time_sensitive?(i(),m(l,{key:0,icon:"material-symbols:alarm-outline"})):b("",!0),bt,t("small",null,c(o.time_ago),1)],10,wt)]))),128)):(i(),r("tr",kt,[t("td",Nt,c(e.$t("No Data Found")),1)]))])])]),t("div",Dt,[t("div",xt,[t("div",Ct,[u(X,{onPaginate_limit_update:x,pagination:f.value},null,8,["pagination"])]),t("div",St,[u(v(G),{data:f.value,limit:5,onPaginationChangePage:d},null,8,["data"])])])])]))]),u(v(S),{release_version:y.value},null,8,["release_version"])]),_:1})}}};export{At as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ListReleaseDetailModal.hvRsDNxO.js","assets/index.sP6fhsqN.js","assets/index.KTHCd6a8.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
