import{u as Jt,b as vt,r as v,a as Gt,d as et,e as P,o as Kt,v as Wt,g as d,h as c,j as g,p as J,w as Xt,l as x,t as n,i as t,k as b,n as C,F as at,N as ot,K as I,y as bt,x as gt,Q as ft,I as Yt,q as yt,_ as qt}from"./index.7OFNPsHl.js";import{_ as Zt}from"./AddCustomer.bT8AqWSn.js";import{_ as te}from"./EditFormSkeleton.hbjdnq7m.js";import{_ as ee}from"./VSelectInput.LiAW_8HB.js";import{_ as ae}from"./VSelect.UFegTIpk.js";import{_ as oe}from"./VTextInput.VtSvZjuc.js";import{_ as se}from"./VMultiSelect.XXz7TsgF.js";import{a as kt,E as xt,F as ne}from"./vee-validate.esm.N3uz7Rsk.js";import{c as st,a as M,d as R,h as Vt}from"./index.esm.cd1bITNA.js";/* empty css                                                   */import{C as le}from"./ClipLoader.1qNfpKDH.js";import"./jquery.3tydODag.js";import"./ServerMessage.I5ol-gtz.js";import"./VTooltip.n3SV8A0p.js";/* empty css                                                                *//* empty css                                                   */const ue={class:"row"},de={class:"col-md-12"},ie={class:"row"},re={class:"col-md-12"},ce={class:"card"},_e={class:"row"},pe={class:"section-title text-muted"},me={class:"col-6 col-md-4 col-lg-3"},he={class:"col-6 col-md-4 col-lg-3"},ve={class:"col-6 col-md-4 col-lg-3"},be={class:"col-6 col-md-4 col-lg-3"},ge={class:"col-6 col-md-4 col-lg-3"},fe={class:"col-md-12"},ye={class:"card"},qe={class:"row"},ke={class:"section-title text-muted"},xe={class:"col-md-4"},Ve={class:"table-responsive"},we={class:"table table-hover table-bordered mb-3 table-responsive-data"},$e={class:"bg-light"},Ce={class:"text-center"},Se=t("br",null,null,-1),Ae={key:0},Ue={key:1},Fe={class:"text-center"},Te={class:"text-center"},De={class:"text-center"},Qe={class:"text-center"},Ee=t("br",null,null,-1),Ne={class:"text-center"},Pe={class:"text-center"},Ie={class:"text-center"},Me={class:"text-center"},Re=["onUpdate:modelValue"],Oe=["onUpdate:modelValue"],Be={key:0,"data-title":"Search Product",width:"20%"},ze={key:1,"data-title":"Search Product",width:"18%"},Le={key:2,"data-title":"Unit Price",width:"13%"},je={key:3,"data-title":"Unit Price",width:"13%"},He={key:4,"data-title":"Quantity",width:"13%"},Je={key:5,class:"text-end"},Ge=t("span",null,"1.00",-1),Ke={"data-title":"Amount",width:"7%",class:"text-end"},We={key:6,"data-title":"Discount",width:"12%"},Xe=t("br",null,null,-1),Ye={key:7,class:"text-end"},Ze={key:8,"data-title":"Additional Fees",width:"8%",class:"text-end"},ta={key:0},ea={key:1},aa={key:2},oa={key:9,"data-title":"Other Taxes and fee",width:"14%",class:"text-end"},sa={class:"col-auto col-md-auto col-lg-auto text-start"},na={key:0,class:"col-auto col-md-auto col-lg-auto text-start"},la={key:1},ua={key:2},da={key:3},ia={"data-title":"SubTotal",width:"10%",class:"text-end"},ra={key:10,"data-title":"Select Tax",width:"10%",class:"text-end"},ca={key:11,"data-title":"Tax",width:"7%"},_a={"data-title":"Amount",width:"10%",class:"text-end"},pa={"data-title":"Action",width:"3%",class:"text-center"},ma=["onClick"],ha=t("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"0.88em",height:"1em",viewBox:"0 0 448 512",class:"iconify iconify--fa6-regular"},[t("path",{fill:"currentColor",d:"m170.5 51.6l-19 28.4h145l-19-28.4c-1.5-2.2-4-3.6-6.7-3.6h-93.7c-2.7 0-5.2 1.3-6.7 3.6zm147-26.6l36.7 55H424c13.3 0 24 10.7 24 24s-10.7 24-24 24h-8v304c0 44.2-35.8 80-80 80H112c-44.2 0-80-35.8-80-80V128h-8c-13.3 0-24-10.7-24-24s10.7-24 24-24h69.8l36.7-55.1C140.9 9.4 158.4 0 177.1 0h93.7c18.7 0 36.2 9.4 46.6 24.9zM80 128v304c0 17.7 14.3 32 32 32h224c17.7 0 32-14.3 32-32V128zm80 64v208c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16m80 0v208c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16m80 0v208c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16"})],-1),va=[ha],ba={class:"row justify-content-between mt-1"},ga={class:"col-auto"},fa={class:"col-auto text-decoration-underline mb-3"},ya={class:"form-check"},qa={class:"form-check-label mb-0",for:"Shipping_charge"},ka={class:"table"},xa={class:"text-end border-0 field-m-0 field-label-hide"},Va={class:"form-field mb-0"},wa={class:"border-0 field-m-0 field-label-hide"},$a={class:"form-field mb-0"},Ca={class:"border-0 px-0"},Sa={class:"form-field mb-0"},Aa={class:"d-flex align-items-center pt-0 pb-0"},Ua=["onClick","disabled"],Fa={class:"col-md-4"},Ta={class:"table"},Da={class:"text-end border-0"},Qa={class:"border-0 text-end"},Ea=t("th",{class:"border-0 px-0"},null,-1),Na={class:"border-0"},Pa={class:"border-0"},Ia=t("th",{class:"border-0 px-0"},null,-1),Ma={key:0},Ra={class:"text-end border-0"},Oa={class:"p-0 text-success"},Ba={class:"border-0 text-end"},za={class:"p-0 text-success"},La=t("th",{class:"border-0 px-0"},null,-1),ja={key:1},Ha={class:"text-end border-0"},Ja={class:"p-0"},Ga={class:"border-0 text-end"},Ka={class:"p-0"},Wa=t("th",{class:"border-0 px-0"},null,-1),Xa={key:2},Ya={class:"text-end border-0"},Za={class:"p-0 text-success"},to={class:"border-0 text-end"},eo={class:"p-0 text-success"},ao=t("th",{class:"border-0 px-0"},null,-1),oo={key:3},so={class:"text-end border-0"},no={class:"p-0"},lo={class:"border-0 text-end"},uo={class:"p-0"},io=t("th",{class:"border-0 px-0"},null,-1),ro={key:4},co={class:"text-end border-0"},_o={class:"p-0"},po={class:"border-0 text-end"},mo={class:"p-0"},ho=t("th",{class:"border-0 px-0"},null,-1),vo={key:5},bo={class:"text-end border-0"},go={class:"p-0"},fo={class:"border-0 text-end"},yo={class:"p-0"},qo=t("th",{class:"border-0 px-0"},null,-1),ko={class:"text-end border-0"},xo={class:"p-0"},Vo={class:"border-0 text-end"},wo={class:"p-0"},$o=t("th",{class:"border-0 px-0"},null,-1),Co={key:6},So={class:"text-end border-0"},Ao={class:"p-0"},Uo={class:"border-0 text-end"},Fo={class:"p-0"},To=t("th",{class:"border-0 px-0"},null,-1),Do={class:"tr-total"},Qo={class:"text-end border-0"},Eo={class:"p-0"},No={class:"border-0 text-end text-dark"},Po={class:"p-0"},Io=t("th",{class:"border-0 px-0"},null,-1),Mo={class:"col-md-12"},Ro={class:"card"},Oo={class:"row"},Bo={class:"section-title text-muted"},zo={for:"",class:"text-warning h6"},Lo={class:"col-12"},jo={class:"text-end"},Ho=["disabled"],Jo={key:1,class:"pt-0"},Go={key:2,class:"pt-0"},Ko={class:"modal hide",id:"addCustomerModal",tabindex:"-1","aria-labelledby":"Add Customer","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},Wo={class:"modal-dialog modal-dialog-centered modal-xl"},Xo={class:"modal-content"},Yo={class:"modal-header"},Zo={class:"modal-title fs-5"},ts={class:"modal-body"},fs={__name:"AddQuotation",setup(es){const{t:l}=Jt(),{calculateQuotation:F}=Yt(),nt=vt().user.login_branch.tax_inclusive_pricing,q=v({search_placeholder:l("Search and Add Product"),add_service:l("Add Service"),charge:l("Charge"),charge_name:l("Charge Name"),discount_type:l("Discount Type"),value:l("Value"),units:l("Units"),select_tax:l("Select Tax"),select_discount:l("Select Discount"),customer:l("Customer"),select_customer:l("Select Customer"),quotation_number:l("Quotation Number"),quotation_reference_number:l("Quotation Reference Number"),quotation_date:l("Quotation Date"),quotation_due_date:l("Quotation Due Date")}),wt=yt(()=>qt(()=>import("./ServerMessage.I5ol-gtz.js"),__vite__mapDeps([0,1,2]))),$t=yt(()=>qt(()=>import("./InvoiceProductSearch.yYcaM4Nw.js"),__vite__mapDeps([3,1,2,4,5,6,7,8]))),T=Gt().params.slack,i=v([]),O=vt(),S=et(()=>O.user.currency.symbol);et(()=>O.user.tax);const Ct={server_messages:{type:"",messages:""},is_submitting:!1,slack:"",customer:"",quotation_number:"",quotation_reference_number:"",quotation_date:new Date().toISOString().split("T")[0],quotation_due_date:"",terms:"",other_charges:!1,quotation_products:[],quotation_discount_type:"",quotation_discount_amount:0,additional_charges:[]},a=P({...Ct}),St=st().shape({customer:M().required(l("name is required",{name:l("Customer")})),quotation_reference_number:R().typeError(l("must be a number",{name:l("Quotation Reference")})).nullable().moreThan(0,"Quotation Reference cannot be negative").transform((e,o)=>o!==""?Number(o):null),quotation_date:M().required(l("name is required",{name:l("Quotation Date")})),quotation_products:Vt(st({product_name:M().required(l("name is required",{name:l("Service Name")})),sale_price:R().typeError(l("must be a number",{name:l("Unit Price")})).required(l("name is required",{name:l("Unit Price")})).positive(l("must be a positive number",{name:l("Unit Price")})),quantity:R().typeError(l("must be a number",{name:l("Quantity")})).required(l("name is required",{name:l("Quantity")})).positive(l("must be a positive number",{name:l("Quantity")}))})).required(),additional_charges:Vt(st().shape({charge_name:M().nullable().when("charge_amount",{is:e=>e!=""&&e>0,then:e=>e.required(l("name is required",{name:l("Charge Name")})),otherwise:e=>e.nullable()}),charge_amount:R().typeError(l("must be a number",{name:l("Amount")})).nullable().when("charge_name",{is:e=>e!="",then:e=>e.required(l("name is required",{name:l("Amount")})),otherwise:e=>e.nullable()})},["charge_name","charge_amount"])).required(),quotation_discount_type:M().nullable().when("quotation_discount_amount",{is:e=>e!=""&&e>0,then:e=>e.required(l("name is required",{name:l("Discount Type")})),otherwise:e=>e.nullable()}),quotation_discount_amount:R().typeError(l("must be a number",{name:l("Discount Amount")})).nullable().when("quotation_discount_type",{is:e=>e!="",then:e=>e.required(l("name is required",{name:l("Discount Amount")})),otherwise:e=>e.nullable()})},["quotation_discount_type","quotation_discount_amount"]),At=[{key:"1",value:"Percentage"},{key:"2",value:"Amount"}],lt=[{charge_name:"Shipping Charges",charge_amount:0},{charge_name:"Packing Charges",charge_amount:0}];Kt(()=>{ut(),a.additional_charges=lt,T!=null&&Tt()});function Ut(){setTimeout(()=>y(),200)}const G=v([]),K=v([]),D=v([]),W=v([]),Ft=v([{id:"",name:l("None")},{id:1,name:l("Tobacco Tax")},{id:2,name:l("Additional Fee")}]);async function ut(){let e=await axios.get("api/quotation/add");a.quotation_number=e.data.data.quotation_number,a.quotation_reference_number=e.data.data.quotation_reference_number;let o=e.data.data.item_additional_fees;G.value=[];let p=e.data.data.customers;_.forEach(p,u=>{let f={slack:u.slack,name:u.name!=""?u.phone!=""&&u.phone!="null"?u.name+" - "+u.phone:u.name:u.phone};G.value.push(f)}),K.value=[],_.forEach(O.user.country.taxes,u=>{let f={key:u.slack,value:u.name,percentage:u.total_percentage};K.value.push(f)}),D.value=[];let m=e.data.data.discounts;_.forEach(m,u=>{let f={key:u.slack,value:u.name,disc:u.value,type:u.type};D.value.push(f)}),_.forEach(o,u=>{let f={key:u.slack,value:u.name,fee_val:u.value,type:u.type};W.value.push(f)})}const dt=v(!1);async function Tt(){await axios.get("/api/quotation",{params:{slack:T}}).then(e=>{if(dt.value=!0,i.value=e.data.data,a.slack=i.value.slack,a.quotation_number=i.value.quotation_number,a.quotation_reference_number=i.value.reference_no,a.terms=i.value.terms,a.quotation_date=i.value.quotation_date,a.quotation_due_date=i.value.due_date==null?"":i.value.due_date,a.quotation_discount_type=i.value.discount_type,a.quotation_discount_amount=i.value.discount_type==1?i.value.quotation_discount_percentage:i.value.quotation_discount,a.customer=i.value.customer.slack,i.value.quotation_products.length>0){a.quotation_products=[];for(var o=0;o<i.value.quotation_products.length;o++){let k=i.value.quotation_products[o].type;var u=i.value.quotation_products[o].product_price_without_tax,p=[0];i.value.quotation_products[o].discount_slack!=""&&i.value.quotation_products[o].discount_slack!=null&&(p=ct(D.value,i.value.quotation_products[o].discount_slack));var m=!0,u=0;if(k==1){var f=F(i.value.quotation_products[o].product,i.value.quotation_products[o].product_quantity,p[0]);m=i.value.quotation_products[o].product.price_type==1}else{m=!1,u=i.value.quotation_products[o].product_price,i.value.quotation_products[o].sale_price=u;var f=F(i.value.quotation_products[o],i.value.quotation_products[o].product_quantity,p[0])}let s=P({type:k,product_slack:k==1?i.value.quotation_products[o].product.slack:i.value.quotation_products[o].slack,product_name:i.value.quotation_products[o].product_name,quantity:i.value.quotation_products[o].product_quantity,is_fixed_price:m,sale_price:u,discount:[],discount_slack:i.value.quotation_products[o].discount_slack,discount_amount:0,tax_additional_fee_type:i.value.quotation_products[o].tax_additional_fee_type,additional_fee_slack:i.value.quotation_products[o].additional_fee_slack,tax:k==2&&i.value.quotation_products[o].tax!=null?i.value.quotation_products[o].tax.slack:"",product:k==1?i.value.quotation_products[o].product:[],prices:f});a.quotation_products.push(s)}}if(e.data.data.quotation_charges.length>0){a.additional_charges=[];for(var o=0;o<e.data.data.quotation_charges.length;o++){var V={charge_name:e.data.data.quotation_charges[o].title,charge_amount:e.data.data.quotation_charges[o].charges};a.additional_charges.push(V)}a.other_charges=!0}y()}).catch(e=>{a.server_messages.type="error",a.server_messages.messages=e,console.log(e)})}const B=v([]);function Dt(e){var o=F(e);B.value.push(e.slack);let p=P({type:1,product_slack:e.slack,product_name:e.name,quantity:1,is_fixed_price:e.price_type==1,edit_sale_price:0,discount:[],discount_slack:"",discount_amount:0,product:e,prices:o});a.quotation_products.push(p),y()}function Qt(e){a.quotation_products.splice(a.quotation_products.indexOf(e),1),B.value.splice(B.value.indexOf(e.product_slack),1),y()}function Et(){let e=P({type:2,product_slack:"",product_name:"",quantity:1,is_fixed_price:!1,sale_price:"",edit_sale_price:"",price_excluding_tax:"",amount:"",discount:[],discount_slack:"",discount_amount:0,tax:"",tax_amount:0,tobacco_tax_amount:0,tax_additional_fee_type:"",additional_fee_slack:"",prices:[]});a.quotation_products.push(e),y()}function it(){a.other_charges=a.other_charges!=!0,y()}v(lt);function Nt(){let e=P({charge_name:"",charge_amount:0});a.additional_charges.push(e)}function Pt(e){a.additional_charges.splice(e,1),y()}const X=v(0),z=v(0),A=v(0),L=v(0),w=v(0),rt=v(0),j=v(0),H=v(0),Y=v(0),Z=v(0),Q=v(0),tt=v(0);Wt(()=>w.value,_.debounce(e=>{y()},100));function It(e){var o=O.user.country.taxes.filter(function(p){if(p.slack==e)return p});return o[0].total_percentage}function Mt(e,o){let p=0;if(o>0)if(e==2){let m=0;a.quotation_products.map(u=>{(u.type==1||u.prices.product_amount_after_product_discount!=null)&&(m+=parseFloat(u.prices.product_amount_after_product_discount))}),m>0&&(p=o/m*100)}else p=o;return p}function y(){if(a.quotation_discount_amount!=""&&a.quotation_discount_type!=""){var e=Mt(a.quotation_discount_type,parseFloat(a.quotation_discount_amount));tt.value=e}for(var o in a.quotation_products){var p=a.quotation_products[o].quantity,m=a.quotation_products[o].discount_slack,u=a.quotation_products[o].additional_fee_slack;a.quotation_products[o].discounts;var f=[0],V=[0],k=!1,s=0,h=a.quotation_products[o].tax,r=0;if(h!=""&&a.quotation_products[o].type==2&&(r=h!=null&&h!=""?It(h):0),m!=null&&m!=""&&(f=ct(D.value,m)),u!=null&&u!=""?(V=Ot(W.value,u),a.quotation_products[o].additional_fee=V[0]):a.quotation_products[o].additional_fee="",a.quotation_products[o].is_fixed_price==!1&&(a.quotation_products[o].type==1?s=a.quotation_products[o].prices.product_rate:s=a.quotation_products[o].sale_price,k=!0),a.quotation_products[o].type==1)var E=F(a.quotation_products[o].product,p,f[0],e,k,s);else{a.quotation_products[o].tax_percentage=r;var E=F(a.quotation_products[o],p,f[0],e,k,s)}a.quotation_products[o].prices=E}Rt();var $=0,N=0;if(a.other_charges)for(var o in a.additional_charges){var U=a.additional_charges[o].charge_amount;!isNaN(U)&&U!=null&&U>0&&($=parseFloat($)+parseFloat(a.additional_charges[o].charge_amount))}Z.value=$.toFixed(2),N=parseFloat(Q.value)+parseFloat($),Q.value=N.toFixed(2)}function Rt(){var e=0,o=0,p=0,m=0,u=0,f=0,V=0,k=0,s=0,h=0;a.quotation_products.map(r=>{let E=r.prices.product_amount,$=r.prices.product_discount_amount,N=E-$,U=r.prices.order_discount_amount,_t=N-U,pt=r.prices.additional_fee_amount,mt=r.prices.tobacco_tax_amount,ht=r.prices.tax_amount,Ht=_t+pt+mt+ht;e+=parseFloat(r.prices.product_quantity),o+=E,p+=$,m+=N,u+=U,f+=_t,V+=pt,k+=mt,s+=ht,h+=Ht}),X.value=e,z.value=_.round(o,2),A.value=_.round(p,2),L.value=_.round(m,2),w.value=_.round(u,2),rt.value=_.round(f,2),H.value=_.round(V,2),j.value=_.round(k,2),Y.value=_.round(s,2),Q.value=_.round(h,2)}function Ot(e,o){return e.filter(function(p){if(p.key==o)return p})}function ct(e,o){return e.filter(function(p){if(p.key==o)return p})}async function Bt(){a.is_submitting=!0;var e=new FormData;e.append("customer",a.customer),e.append("quotation_number",a.quotation_number),e.append("quotation_reference_number",a.quotation_reference_number),e.append("quotation_date",a.quotation_date),e.append("quotation_due_date",a.quotation_due_date),e.append("products",JSON.stringify(a.quotation_products)),e.append("grand_total_product_quantity",X.value!=null?X.value:0),e.append("grand_subtotal_after_product_quantity",z.value!=null?z.value:0),e.append("grand_product_discount",A.value!=null?A.value:0),e.append("grand_subtotal_after_product_discount",L.value!=null?L.value:0),e.append("quotation_discount_amount",w.value!=null?w.value:0),e.append("quotation_discount_type",a.quotation_discount_type!=null?a.quotation_discount_type:0),e.append("quotation_discount_percentage",tt.value!=null?tt.value:0),e.append("is_additional_charges",a.other_charges),e.append("additional_charges",JSON.stringify(a.additional_charges)),e.append("grand_product_additional_fee",H.value),e.append("grand_product_tobacco_tax",j.value),e.append("grand_product_tax",Y.value),e.append("quotation_additional_charges",Z.value),e.append("grand_product_amount",Q.value),e.append("terms",a.terms),e.append("quotation_slack",a.slack);var o=a.slack!=""&&a.slack!=null?"/api/quotation/update":"/api/quotation/save";await axios.post(o,e).then(p=>{if(p.data.status_code==200)toast.success(p.data.msg),a.is_submitting=!1,router.push("/quotations");else{try{a.server_messages.type="error",a.server_messages.messages=JSON.parse(p.data.msg)}catch{a.server_messages.type="error",a.server_messages.messages=p.data.msg}a.is_submitting=!1}}).catch(p=>{a.server_messages.type="error",a.server_messages.messages=p,a.is_submitting=!1})}const zt=v(!1);async function Lt(){zt.value=!1,document.getElementById("add_customer_form").reset(),ut(),document.getElementById("close_btn").click()}const jt=et(()=>a.terms==""||a.terms==null?"0 / 500 Characters":a.terms.length+" / 500 Characters");return(e,o)=>{const p=se,m=oe,u=ae,f=ee,V=te,k=Zt;return d(),c(at,null,[g(T)==""||g(T)==null||g(T)!=""&&dt.value?(d(),J(g(ne),{key:0,"validation-schema":g(St),onSubmit:Bt,enctype:"multipart/form-data","initial-values":a},{default:Xt(()=>[t("div",ue,[a.server_messages.messages!=""?(d(),J(g(wt),{key:0,class:"py-3",server_messages:a.server_messages},null,8,["server_messages"])):x("",!0),t("div",de,[t("div",ie,[t("div",re,[t("div",ce,[t("div",_e,[t("h5",pe,n(e.$t("Basic Details"))+":",1),t("div",me,[b(p,{name:"customer",label:q.value.customer,placeholder:q.value.select_customer,text:"name",value:"slack",options:G.value,modelValue:a.customer,"onUpdate:modelValue":o[0]||(o[0]=s=>a.customer=s),mode:"single",required:"",addModalShow:!0,addModalId:"#addCustomerModal"},null,8,["label","placeholder","options","modelValue"])]),t("div",he,[b(m,{type:"text",name:"quotation_number",modelValue:a.quotation_number,"onUpdate:modelValue":o[1]||(o[1]=s=>a.quotation_number=s),label:q.value.quotation_number,required:!0,disabled:!0},null,8,["modelValue","label"])]),t("div",ve,[b(m,{type:"text",name:"quotation_reference_number",modelValue:a.quotation_reference_number,"onUpdate:modelValue":o[2]||(o[2]=s=>a.quotation_reference_number=s),label:q.value.quotation_reference_number},null,8,["modelValue","label"])]),t("div",be,[b(m,{type:"date",name:"quotation_date",modelValue:a.quotation_date,"onUpdate:modelValue":o[3]||(o[3]=s=>a.quotation_date=s),label:q.value.quotation_date,required:!0},null,8,["modelValue","label"])]),t("div",ge,[b(m,{type:"date",name:"quotation_due_date",modelValue:a.quotation_due_date,"onUpdate:modelValue":o[4]||(o[4]=s=>a.quotation_due_date=s),label:q.value.quotation_due_date},null,8,["modelValue","label"])])])])]),t("div",fe,[t("div",ye,[t("div",qe,[t("h5",ke,n(e.$t("Products"))+":",1),t("div",xe,[b(g($t),{onSelectProduct:Dt,placeholder:q.value.search_placeholder,selected_products:B.value,button_placeholder:q.value.add_service,only_available:2},null,8,["placeholder","selected_products","button_placeholder"])]),t("div",Ve,[t("table",we,[t("thead",$e,[t("tr",null,[t("th",null,n(e.$t("Product/Service Name")),1),t("th",Ce,[C(n(e.$t("Unit Rate"))+" ",1),Se,g(nt)==!0?(d(),c("span",Ae,n(e.$t("(Tax Inclusive)")),1)):x("",!0),g(nt)==!1?(d(),c("span",Ue,n(e.$t("(Tax Exclusive)")),1)):x("",!0)]),t("th",Fe,n(e.$t("Quantity")),1),t("th",Te,n(e.$t("Amount")),1),t("th",De,n(e.$t("Discount")),1),t("th",Qe,[C(n(e.$t("Other Taxes"))+" ",1),Ee,C(" "+n(e.$t("and fee")),1)]),t("th",Ne,n(e.$t("Subtotal")),1),t("th",Pe,n(e.$t("Tax")),1),t("th",Ie,n(e.$t("Total")),1),t("th",Me,n(e.$t("Remove")),1)])]),t("tbody",null,[a.quotation_products.length>0?(d(!0),c(at,{key:0},gt(a.quotation_products,(s,h)=>(d(),c("tr",{key:h},[I(t("input",{type:"hidden",name:"product_name","onUpdate:modelValue":r=>s.product_name=r},null,8,Re),[[ot,s.product_name]]),I(t("input",{type:"hidden",name:"product.sku","onUpdate:modelValue":r=>s.product_slack=r},null,8,Oe),[[ot,s.product_slack]]),s.type==1?(d(),c("td",Be,[C(n(s.product_name)+" ",1),b(g(kt),{type:"hidden",name:"quotation_products["+h+"].product_name",value:s.product_name},null,8,["name","value"]),b(g(xt),{name:"quotation_products["+h+"].product_name",as:"div",class:"error"},null,8,["name"])])):(d(),c("td",ze,[b(m,{type:"text",name:"quotation_products["+h+"].product_name",modelValue:s.product_name,"onUpdate:modelValue":r=>s.product_name=r,islabel:!1},null,8,["name","modelValue","onUpdate:modelValue"])])),s.type==1?(d(),c("td",Le,[b(m,{type:"number",name:"quotation_products["+h+"].sale_price",input_group_text:"SAR",modelValue:s.prices.product_rate,"onUpdate:modelValue":r=>s.prices.product_rate=r,min:"0.01",step:"0.01",onInput:y,label:"",disabled:s.is_fixed_price},null,8,["name","modelValue","onUpdate:modelValue","disabled"])])):(d(),c("td",je,[b(m,{type:"number",name:"quotation_products["+h+"].sale_price",input_group_text:g(S),islabel:!1,modelValue:s.sale_price,"onUpdate:modelValue":r=>s.sale_price=r,min:"0.01",step:"0.01",onInput:y,class:bt("pt-0")},null,8,["name","input_group_text","modelValue","onUpdate:modelValue"])])),s.type==1?(d(),c("td",He,[b(m,{type:"number",name:"quotation_products["+h+"].quantity",input_group_text:q.value.units,islabel:!1,modelValue:s.quantity,"onUpdate:modelValue":r=>s.quantity=r,min:"0.01",step:"0.01",onInput:y},null,8,["name","input_group_text","modelValue","onUpdate:modelValue"])])):(d(),c("td",Je,[Ge,b(g(kt),{type:"hidden",name:"quotation_products["+h+"].quantity",value:s.quantity},null,8,["name","value"]),b(g(xt),{name:"quotation_products["+h+"].quantity",as:"div",class:"error"},null,8,["name"])])),t("td",Ke,n(s.prices.product_amount.toFixed(2)),1),s.type==1?(d(),c("td",We,[b(u,{name:"quotation_products["+h+"].discount_slack",placeholder:q.value.select_discount,options:D.value,class:"mb-0",modelValue:s.discount_slack,"onUpdate:modelValue":r=>s.discount_slack=r,onChange:y,id:h,label:"",islabel:!1},null,8,["name","placeholder","options","modelValue","onUpdate:modelValue","id"]),C(" "+n(e.$t("Item Disc Amount:"))+" "+n(s.prices.product_discount_amount.toFixed(2)),1),Xe,C(" "+n(e.$t("Quotation Disc Amount:"))+" "+n(s.prices.order_discount_amount.toFixed(2)),1)])):(d(),c("td",Ye,[t("span",null,n(e.$t("Quotation Disc Amount:"))+" "+n(s.prices.order_discount_amount.toFixed(2)),1)])),s.type==1?(d(),c("td",Ze,[s.prices.additional_fee_amount>0?(d(),c("span",ta,n(s.prices.additional_fee_amount.toFixed(2)),1)):s.prices.tobacco_tax_amount>0?(d(),c("span",ea,n(s.prices.tobacco_tax_amount.toFixed(2)),1)):(d(),c("span",aa,"0"))])):(d(),c("td",oa,[t("div",sa,[b(f,{name:`tax_additional_fee_types_${h}`,label:"Additional Fee Type",options:Ft.value,modelValue:s.tax_additional_fee_type,"onUpdate:modelValue":r=>s.tax_additional_fee_type=r,size:"normal",onChange:y},null,8,["name","options","modelValue","onUpdate:modelValue"])]),s.tax_additional_fee_type==2?(d(),c("div",na,[b(u,{name:`additional_fee_${h}`,label:"Additional Fee",placeholder:"None",options:W.value,class:"mb-0",modelValue:s.additional_fee_slack,"onUpdate:modelValue":r=>s.additional_fee_slack=r,onChange:y},null,8,["name","options","modelValue","onUpdate:modelValue"])])):x("",!0),t("span",null,n(e.$t("Amount: ")),1),s.prices.additional_fee_amount>0?(d(),c("span",la,n(s.prices.additional_fee_amount.toFixed(2)),1)):s.prices.tobacco_tax_amount>0?(d(),c("span",ua,n(s.prices.tobacco_tax_amount.toFixed(2)),1)):(d(),c("span",da,"0"))])),t("td",ia,n(s.prices.product_amount_after_fee_and_taxes.toFixed(2)),1),s.type==1?(d(),c("td",ra,n(s.prices.tax_amount.toFixed(2)),1)):(d(),c("td",ca,[b(u,{name:`tax_${h}`,placeholder:q.value.select_tax,options:K.value,class:"mb-0",modelValue:s.tax,"onUpdate:modelValue":r=>s.tax=r,onChange:y,id:h,label:"",islabel:!1},null,8,["name","placeholder","options","modelValue","onUpdate:modelValue","id"])])),t("td",_a,n(s.prices.final_product_amount.toFixed(2)),1),t("td",pa,[t("a",{role:"button",class:"btn btn-icon btn-xs btn-light-danger",onClick:r=>Qt(s)},va,8,ma)])]))),128)):x("",!0)])])]),t("div",null,[t("div",ba,[t("div",ga,[t("div",fa,[t("a",{href:"javascript:;",onClick:Et},"+ "+n(e.$t("Add Service")),1)]),t("div",ya,[I(t("input",{class:"form-check-input",type:"checkbox",value:"",id:"Shipping_charge","data-bs-toggle":"collapse","data-bs-target":"#shipping_table_wrap","onUpdate:modelValue":o[5]||(o[5]=s=>a.other_charges=s),onClick:it},null,512),[[ft,a.other_charges]]),I(t("input",{class:"form-check-input",type:"checkbox",value:"",id:"Shipping_charge","data-bs-toggle":"collapse","data-bs-target":"#shipping_table_wrap","onUpdate:modelValue":o[6]||(o[6]=s=>a.other_charges=s),onClick:it},null,512),[[ft,a.other_charges]]),t("label",qa,n(e.$t("Other Charges")),1)]),t("div",{class:bt(a.other_charges?"collapse show":"collapse"),id:"shipping_table_wrap"},[t("table",ka,[(d(!0),c(at,null,gt(a.additional_charges,(s,h)=>(d(),c("tr",{key:h},[t("th",xa,[t("div",Va,[b(m,{type:"text",name:"additional_charges["+h+"].charge_name",modelValue:s.charge_name,"onUpdate:modelValue":r=>s.charge_name=r,placeholder:q.value.charge_name},null,8,["name","modelValue","onUpdate:modelValue","placeholder"])])]),t("th",wa,[t("div",$a,[b(m,{type:"number",name:"additional_charges["+h+"].charge_amount",modelValue:s.charge_amount,"onUpdate:modelValue":r=>s.charge_amount=r,placeholder:q.value.charge,onInput:Ut},null,8,["name","modelValue","onUpdate:modelValue","placeholder"])])]),t("th",Ca,[t("div",Sa,[t("div",Aa,[t("button",{role:"button",type:"button",class:"btn btn-sm btn-icon btn-light-danger",onClick:r=>Pt(h),disabled:!(a.additional_charges.length>1)},"x",8,Ua),h==a.additional_charges.length-1?(d(),c("button",{key:0,role:"button",type:"button",class:"btn btn-sm btn-icon btn-light-primary ms-2",onClick:o[7]||(o[7]=r=>Nt())},"+")):x("",!0)])])])]))),128))])],2)]),t("div",Fa,[t("table",Ta,[t("tr",null,[t("th",Da,[t("h6",null,n(e.$t("Item Sub Total")),1)]),t("th",Qa,[t("h6",null,n(z.value)+" SAR",1)]),Ea]),t("tr",null,[t("th",Na,[b(u,{name:"quotation_discount_type",modelValue:a.quotation_discount_type,"onUpdate:modelValue":o[8]||(o[8]=s=>a.quotation_discount_type=s),placeholder:q.value.discount_type,options:At,class:"mt-0",label:"",onChange:y,islabel:!1},null,8,["modelValue","placeholder"])]),t("th",Pa,[b(m,{modelValue:a.quotation_discount_amount,"onUpdate:modelValue":o[9]||(o[9]=s=>a.quotation_discount_amount=s),type:"number",name:"quotation_discount_amount",class:"mt-0 p-0",placeholder:q.value.value,label:"",onInput:y,islabel:!1},null,8,["modelValue","placeholder"])]),Ia]),A.value>0?(d(),c("tr",Ma,[t("th",Ra,[t("h6",Oa,n(e.$t("-Product Discount")),1)]),t("th",Ba,[t("h6",za,n(A.value)+" "+n(g(S)),1)]),La])):x("",!0),A.value>0?(d(),c("tr",ja,[t("th",Ha,[t("h6",Ja,n(e.$t("Subtotal after Product Discount")),1)]),t("th",Ga,[t("h6",Ka,n(L.value)+" "+n(g(S)),1)]),Wa])):x("",!0),w.value>0?(d(),c("tr",Xa,[t("th",Ya,[t("h6",Za,n(e.$t("-Quotation Discount")),1)]),t("th",to,[t("h6",eo,n(w.value)+" SAR",1)]),ao])):x("",!0),w.value>0?(d(),c("tr",oo,[t("th",so,[t("h6",no,n(e.$t("Sub Total After Discount")),1)]),t("th",lo,[t("h6",uo,n(rt.value)+" "+n(g(S)),1)]),io])):x("",!0),j.value>0?(d(),c("tr",ro,[t("th",co,[t("h6",_o,n(e.$t("Tobacco Tax")),1)]),t("th",po,[t("h6",mo,n(j.value)+" "+n(g(S)),1)]),ho])):x("",!0),H.value>0?(d(),c("tr",vo,[t("th",bo,[t("h6",go,n(e.$t("Additional Fees")),1)]),t("th",fo,[t("h6",yo,n(H.value)+" "+n(g(S)),1)]),qo])):x("",!0),t("tr",null,[t("th",ko,[t("h6",xo,n(e.$t("Taxes")),1)]),t("th",Vo,[t("h6",wo,n(Y.value)+" SAR",1)]),$o]),a.other_charges==!0?(d(),c("tr",Co,[t("th",So,[t("h6",Ao,n(e.$t("Other Charges")),1)]),t("th",Uo,[t("h6",Fo,n(Z.value)+" SAR",1)]),To])):x("",!0),t("tr",Do,[t("th",Qo,[t("h5",Eo,n(e.$t("Total")),1)]),t("th",No,[t("h5",Po,n(Q.value)+" SAR",1)]),Io])])])])])])])]),t("div",Mo,[t("div",Ro,[t("div",Oo,[t("h5",Bo,[C(n(e.$t("Note/Terms and Conditions"))+": ",1),t("label",zo,n(g(jt)),1)]),t("div",Lo,[I(t("textarea",{maxlength:"500",class:"form-control form-control-solid text-area",name:"terms","onUpdate:modelValue":o[10]||(o[10]=s=>a.terms=s),rows:"1"},null,512),[[ot,a.terms]])])])])])])])]),t("div",jo,[t("button",{type:"submit",class:"btn btn-primary",disabled:a.is_submitting},[a.is_submitting?(d(),J(le,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):x("",!0),a.is_submitting?(d(),c("span",Jo,n(e.$t("Saving...")),1)):(d(),c("span",Go,n(e.$t("Save")),1))],8,Ho)])]),_:1},8,["validation-schema","initial-values"])):(d(),J(V,{key:1})),t("div",Ko,[t("div",Wo,[t("div",Xo,[t("div",Yo,[t("h5",Zo,n(e.$t("Add Customer")),1),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o[11]||(o[11]=(...s)=>e.closeModal&&e.closeModal(...s)),id:"close_btn"})]),t("div",ts,[b(k,{onCloseAddCustomerModal:Lt})])])])])],64)}}};export{fs as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ServerMessage.I5ol-gtz.js","assets/index.7OFNPsHl.js","assets/index.1t-AB2n6.css","assets/InvoiceProductSearch.yYcaM4Nw.js","assets/vee-validate.esm.N3uz7Rsk.js","assets/index.esm.cd1bITNA.js","assets/BeatLoader.cb9i48GG.js","assets/BeatLoader.5j6ku4bW.css","assets/ClipLoader.7xz7y6gZ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
