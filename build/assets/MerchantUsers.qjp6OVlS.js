import{_ as A}from"./PaginateLimit.SmYeFgfo.js";import{_ as E}from"./ListingSkeleton.6NzqF9S5.js";import{_ as J}from"./VSelect.xfZK6hek.js";import{u as H,P as K,r as n,e as w,o as T,v as j,f as z,g as l,h as i,i as t,t as e,l as h,j as $,K as N,L as G,m as u,N as Q,p as W,F as X,x as Y,O as Z}from"./index.li3fCRRM.js";import{j as x}from"./vue-datepicker.a6BsTEHj.js";import"./vee-validate.esm.reM-LHjC.js";/* empty css                                                                */const tt={class:"content"},et={class:"page-heading position-relative"},st={class:"row align-items-center justify-content-between mb-3"},ot={class:"col-auto"},at={class:"mb-0"},lt={class:"row align-items-end justify-content-between mb-3"},nt={class:"col-md-auto"},it={class:"row align-items-end justify-content-between g-3"},ct={class:"col-12 col-md-auto"},dt={class:"form-field"},rt={class:"col-auto"},_t={class:"form-field"},ut={value:""},ht={value:"0"},mt={value:"1"},pt={value:"2"},ft={value:"3"},gt={class:"col-auto"},vt={class:"col-auto col-md-auto"},yt={class:"col-auto"},bt={class:"form-field page-heading-search-field mb-0"},wt={class:"field-icon"},$t=["placeholder"],kt={class:"icon"},Vt={key:1,class:"table-responsive"},St={class:"table table-list-data table-hover"},Ct={class:"bg-light"},jt={scope:"col",width:"20%"},Nt={scope:"col",width:"15%"},Ut={scope:"col",width:"15%"},Lt={scope:"col",width:"10%"},qt={scope:"col",width:"10%"},Mt={scope:"col",width:"10%"},Pt={scope:"col",width:"10%"},Dt={scope:"col",width:"10%"},Rt={class:"fw-bold highlighted-list-item"},Bt=t("br",null,null,-1),Ft={class:"text-muted"},It={key:0},Ot={class:"text-center"},At={key:0,class:"text-danger"},Et={key:1,class:"text-success"},Jt={key:2,class:"text-warning"},Ht={key:3,class:"text-danger"},Kt={key:1},Tt={class:"text-center py-3",colspan:"11"},zt={class:"data-footer"},Gt={class:"row align-items-center justify-content-between"},Qt={class:"col-auto"},Wt={class:"col-auto"},ae={__name:"MerchantUsers",props:["merchant"],setup(U){const{t:m}=H(),k=K(U,"merchant"),L={server_messages:{type:"",messages:""},is_listing:!1,search_query:n("")},q=m("Search by name, email, phone.."),c=w({...L});T(()=>{r(),P()}),j(()=>c.search_query,_.debounce(()=>{r()},500));const V=n({role:m("Role"),select_role:m("Select Role")}),p=n([]),f=n([]);async function r(s=1){c.is_listing=!0,await axios.post("/api/merchant/users",{page:s,paginate_limit:S.value,search_query:c.search_query,merchant_id:k.value.id,filter:d}).then(a=>{p.value=a.data.data,f.value=a.data.pagination,c.is_listing=!1}).catch(a=>{c.server_messages.type="error",c.server_messages.messages=a,c.is_listing=!1,console.log(a)})}const S=n();async function M(s){S.value=s,await r()}const C=n([]);async function P(){let s=await axios.post("api/merchant/roles",{merchant_id:k.value.id});s=s.data.data,_.forEach(s,a=>{let b={key:a.slack,value:a.name};C.value.push(b)})}const D=n(!1),g=w({created_date:n(""),status:n(""),role:n("")}),d=w({...g}),v=n(!1);j(()=>d.role,s=>{y()});async function y(){JSON.stringify(d)!=JSON.stringify(g)&&(v.value=!0),D.value=!1,await r()}function R(){Object.assign(d,g),v.value=!1,r()}return(s,a)=>{const b=J,B=z("Icon"),F=E,I=A;return l(),i("div",tt,[t("div",et,[t("div",st,[t("div",ot,[t("h2",at,e(s.$t("Users")),1)])]),t("div",lt,[t("div",nt,[t("div",it,[t("div",ct,[t("div",dt,[t("label",null,e(s.$t("Created Date")),1),h($(x),{range:"",modelValue:d.created_date,"onUpdate:modelValue":[a[0]||(a[0]=o=>d.created_date=o),a[1]||(a[1]=o=>y())],format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid form-control-sm"},null,8,["modelValue"])])]),t("div",rt,[t("div",_t,[t("label",null,e(s.$t("Status")),1),N(t("select",{class:"form-control form-control-sm form-control-solid","onUpdate:modelValue":a[2]||(a[2]=o=>d.status=o),onChange:y},[t("option",ut,e(s.$t("All")),1),t("option",ht,e(s.$t("Inactive")),1),t("option",mt,e(s.$t("Active")),1),t("option",pt,e(s.$t("Hold")),1),t("option",ft,e(s.$t("Left")),1)],544),[[G,d.status]])])]),t("div",gt,[h(b,{name:"role",label:V.value.role,modelValue:d.role,"onUpdate:modelValue":a[3]||(a[3]=o=>d.role=o),placeholder:V.value.select_role,options:C.value,height_sm:!0},null,8,["label","modelValue","placeholder","options"])]),t("div",vt,[v.value?(l(),i("button",{key:0,class:"btn btn-sm btn-light-danger",onClick:R},e(s.$t("Clear")),1)):u("",!0)])])]),t("div",yt,[t("div",bt,[t("div",wt,[N(t("input",{type:"search",class:"form-control form-control-sm form-control-solid",placeholder:$(q),"onUpdate:modelValue":a[4]||(a[4]=o=>c.search_query=o)},null,8,$t),[[Q,c.search_query]]),t("div",kt,[h(B,{icon:"fa6-solid:magnifying-glass"})])])])])])]),c.is_listing?(l(),W(F,{key:0})):(l(),i("div",Vt,[t("table",St,[t("thead",Ct,[t("tr",null,[t("th",jt,e(s.$t("User Name")),1),t("th",Nt,e(s.$t("Email")),1),t("th",Ut,e(s.$t("Role")),1),t("th",Lt,e(s.$t("Phone")),1),t("th",qt,e(s.$t("Login Code")),1),t("th",Mt,e(s.$t("Joining Date")),1),t("th",Pt,e(s.$t("Created At")),1),t("th",Dt,e(s.$t("Status")),1)])]),t("tbody",null,[p.value!=""?(l(!0),i(X,{key:0},Y(p.value,(o,O)=>(l(),i("tr",{key:O},[t("td",null,[t("div",null,[t("span",Rt,e(o.name),1),Bt,t("small",Ft,e(s.$t("Code"))+": "+e(o.code),1)])]),t("td",null,e(o.email),1),t("td",null,[o.role?(l(),i("span",It,e(o.role.name)+" ("+e(o.role.role_type_text)+") ",1)):u("",!0)]),t("td",null,e(o.phone),1),t("td",null,e(o.login_code),1),t("td",null,e(o.joining_date),1),t("td",null,e(o.created_at_label),1),t("td",Ot,[o.status==0?(l(),i("span",At,e(o.status_text),1)):u("",!0),o.status==1?(l(),i("span",Et,e(o.status_text),1)):u("",!0),o.status==2?(l(),i("span",Jt,e(o.status_text),1)):u("",!0),o.status==3?(l(),i("span",Ht,e(o.status_text),1)):u("",!0)])]))),128)):(l(),i("tr",Kt,[t("td",Tt,e(s.$t("No Data Found")),1)]))])])])),t("div",zt,[t("div",Gt,[t("div",Qt,[h(I,{onPaginate_limit_update:M,pagination:f.value},null,8,["pagination"])]),t("div",Wt,[h($(Z),{data:f.value,limit:5,onPaginationChangePage:r},null,8,["data"])])])])])}}};export{ae as default};
