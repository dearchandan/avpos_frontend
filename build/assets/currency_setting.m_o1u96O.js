import{D as x}from"./DefaultLayout.saUWsTkY.js";import{_ as C}from"./MerchantSettingSkeleton.0PbFjj2D.js";import{_ as $}from"./VSelectInput.v0GOolGM.js";import D from"./ServerMessage.Re9KOdbP.js";/* empty css                                                   */import{b as B,o as N,e as I,r as M,g as a,p as _,w as l,f as d,i as s,l as i,k as U,t as n,j as o,h as r,m}from"./index.li3fCRRM.js";import"./ClipLoader.gDBpDd3b.js";/* empty css                                                   */import"./VTooltip.pHzwBjkF.js";import"./vee-validate.esm.reM-LHjC.js";const L={class:"header-nav-wrap"},j={class:"row align-items-center"},z={class:"col-auto"},A={class:"header-back-link"},E={class:"col-auto"},F={class:"fw-bold"},P={class:"content py-5"},T={key:0,class:"py-3"},q={class:"row"},G={class:"col-md-12"},H={key:0},J={class:"row gx-3"},K={class:"col-md-6 col-lg-4"},O={class:"cs-setting-card"},Q={class:"txt"},R={class:"col-auto p-1"},W={class:"form-feild"},X={class:"form-check"},Y=s("br",null,null,-1),Z=s("small",{class:"text-muted"},"Please re login after update",-1),ss={class:"col-auto p-1"},es={class:"form-feild"},ts={class:"form-check"},os=["disabled"],cs={key:1,class:"pt-0"},as={key:2,class:"pt-0"},vs={__name:"currency_setting",setup(ns){const p=B();N(()=>{h()});const e=I({...{server_messages:{type:"",messages:""},currencies:[],currency_id:1,is_submitting:!1}}),u=M(!1);async function h(){await axios.get("/api/currency_settings").then(t=>{t.data!=""&&(e.currencies=t.data.data.currencies,e.currency_id=t.data.data.selected_currency,console.log("form.currencies =",e.currencies)),u.value=!0}).catch(t=>{e.server_messages.type="error",e.server_messages.messages=t,console.log(t),t.response.status===401&&router.push("/")})}async function g(){e.is_submitting=!0;var t=new FormData;t.append("currency_id",e.currency_id),await axios.post("/api/currency_settings/update_currency",t).then(c=>{p.refresh(),toast.success(c.data.msg),e.is_submitting=!1}).catch(c=>{e.server_messages.type="error",e.server_messages.messages=c,e.is_submitting=!1,console.log(c),c.response.status===401&&router.push("/")})}return(t,c)=>{const f=d("Icon"),v=d("router-link"),y=D,b=$,k=d("clip-loader"),S=C,w=x;return a(),_(w,null,{subheader:l(()=>[s("div",L,[s("div",j,[s("div",z,[s("div",A,[i(v,{class:"text-primary",to:"/settings"},{default:l(()=>[i(f,{icon:"fa6-solid:chevron-left"}),U(" "+n(t.$t("Settings")),1)]),_:1})])]),s("div",E,[s("h5",F,n(t.$t("Currency Setting")),1)])])])]),default:l(()=>[s("div",P,[o(e).server_messages.messages!=""?(a(),r("div",T,[i(y,{server_messages:o(e).server_messages},null,8,["server_messages"])])):m("",!0),s("div",q,[s("div",G,[o(u)?(a(),r("div",H,[s("div",J,[s("div",K,[s("div",O,[s("div",Q,[s("h5",null,n(t.$t("Select Currency")),1),s("div",R,[s("div",W,[s("div",X,[i(b,{name:"currency_id",mode:"single",selected:o(e).currency_id,modelValue:o(e).currency_id,"onUpdate:modelValue":c[0]||(c[0]=V=>o(e).currency_id=V),options:o(e).currencies,text:"name",value:"id",height_sm:!0},null,8,["selected","modelValue","options"]),Y,Z])])]),s("div",ss,[s("div",es,[s("div",ts,[s("button",{type:"submit",class:"btn btn-primary",disabled:o(e).is_submitting,onClick:g},[o(e).is_submitting?(a(),_(k,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):m("",!0),o(e).is_submitting?(a(),r("span",cs,n(t.$t("Updating...")),1)):(a(),r("span",as,n(t.$t("Update")),1))],8,os)])])])])])])])])):(a(),_(S,{key:1}))])])])]),_:1})}}};export{vs as default};
