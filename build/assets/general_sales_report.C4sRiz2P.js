import{u as K,b as q,d as k,e as M,r as g,g as l,p as V,w as m,f as $,i as t,l as h,k as u,t as a,j as e,m as S,A as Y,B,h as d,F as w,x as y,I as U,bX as C,q as W,_ as z}from"./index.sP6fhsqN.js";import{D as X}from"./DefaultLayout.K5Bh9Jz_.js";import{_ as J}from"./ListingSkeleton.0g9v9IYA.js";import{_ as Q}from"./VMultiSelect.pXBL2AV1.js";import{s as T,a as Z,e as tt,j as et}from"./vue-datepicker.S8gODTVm.js";import{s as A,e as L}from"./index.KqBHsonE.js";import"./ClipLoader._89zL49D.js";/* empty css                                                   */import"./vee-validate.esm.2kXgdFia.js";const st={class:"header-nav-wrap"},ot={class:"row align-items-center"},at={class:"col-auto"},nt={class:"header-back-link"},lt={class:"col-auto"},dt={class:"fw-bold"},it={class:"content"},ct={class:"row"},rt={class:"col-md-12"},_t={class:"card"},ht={class:"row field-m-0 align-items-end g-3"},ut={class:"col-md-4 col-lg-3"},mt={class:"form-field"},pt={for:"",class:"form-label"},bt=t("span",{class:"text-danger"},"*",-1),vt=["onClick","onKeyup"],ft={class:"col-md-4 col-lg-3"},gt={class:"col-auto text-end"},wt={class:"row align-items-center"},yt={class:"col-auto"},xt=["disabled"],Dt={class:"col-auto"},kt=["disabled"],Mt={key:0,class:"col-md-12"},Vt={class:"row justify-content-center"},$t={class:"col-md-8 col-lg-8"},St={class:"card",id:"print_div"},Yt={class:"row"},Bt={key:0},Ct={key:1},Tt={class:"card-head mb-4"},At={class:"text-center"},Lt=t("div",{class:"head-title"},[t("h4",null,"General Sales Report")],-1),Ot={class:"head-data"},Pt=t("b",null,"Printed On:",-1),Rt={class:"head-data"},It=t("b",null,"Date:",-1),Et={class:"head-data"},jt=t("b",null,"Branch:",-1),Gt={class:"card-data"},Ht={class:"text-center"},Nt={class:"head-title"},Ft={class:"table-responsive mb-3"},Kt={class:"table table-list-data table-hover"},qt=t("thead",null,[t("tr",null,[t("th",{colspan:"3"},"General")])],-1),Ut={width:"60%",class:"text-start"},Wt={width:"20%",class:"text-center"},zt={width:"20%",class:"text-end"},Xt={class:"table-responsive mb-3"},Jt={class:"table table-list-data table-hover"},Qt=t("thead",null,[t("tr",null,[t("th",{colspan:"3"},"Order Types")])],-1),Zt={width:"60%",class:"text-start"},te={width:"20%",class:"text-center"},ee={width:"20%",class:"text-end"},se={class:"table-responsive"},oe={class:"table table-list-data table-hover"},ae=t("thead",null,[t("tr",null,[t("th",{colspan:"3"},"Payments")])],-1),ne={width:"60%",class:"text-start"},le={width:"20%",class:"text-center"},de={width:"20%",class:"text-end"},ge={__name:"general_sales_report",setup(ie){const{t:x}=K(),{isAuthorized:ce,getRoundedValue:p}=U(),b=q();k(()=>b.user.currency.symbol);const O=M({server_messages:{type:"",messages:""},is_submitting:!1,is_listing:!1,dates:g([new Date,new Date]),selected_branch:b.user.branch_id,is_exporting:!1}),s=M({...O}),P=x("Select Branch");x("All Branches");const R=g([{label:"Today",value:[new Date,new Date]},{label:"This month",value:[A(new Date),L(new Date)]},{label:"Last month",value:[A(T(new Date,1)),L(T(new Date,1))]},{label:"This year",value:[Z(new Date),tt(new Date)]}]),I=k(()=>b.user.branches),i=g([]);async function E(c=1){s.is_listing=!0,s.dates[0]=C(s.dates[0]).format("YYYY-MM-DD"),s.dates[1]=C(s.dates[1]).format("YYYY-MM-DD"),await axios.get("/api/general_sales_report",{params:{filter:s}}).then(n=>{i.value=n.data.data,s.is_listing=!1}).catch(n=>{s.server_messages.type="error",s.server_messages.messages=n,s.is_listing=!1,console.log(n)})}async function j(){const c=document.getElementById("print_div").innerHTML;let n="";for(const v of[...document.querySelectorAll('link[rel="stylesheet"], style')])n+=v.outerHTML;const r=window.open("Wosul","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");r.document.write(`<!DOCTYPE html>
<html>
  <head>
    ${n}
  </head>
  <body>
    ${c}
  </body>
</html>`),r.document.close(),r.focus(),r.print()}const G=W(()=>z(()=>import("./ServerMessage.EFQMOwoZ.js"),__vite__mapDeps([0,1,2])));return(c,n)=>{const r=$("Icon"),v=$("router-link"),H=Q,N=J,F=X;return l(),V(F,null,{subheader:m(()=>[t("div",st,[t("div",ot,[t("div",at,[t("div",nt,[h(v,{class:"text-primary",to:"/reports"},{default:m(()=>[h(r,{icon:"fa6-solid:chevron-left"}),u(" "+a(c.$t("Reports")),1)]),_:1})])]),t("div",lt,[t("h5",dt,a(c.$t("General Sales Report")),1)])])])]),default:m(()=>[t("div",it,[e(s).server_messages.messages!=""?(l(),V(e(G),{key:0,class:"py-3",server_messages:e(s).server_messages},null,8,["server_messages"])):S("",!0),t("div",ct,[t("div",rt,[t("div",_t,[t("div",ht,[t("div",ut,[t("div",mt,[t("label",pt,[u(a(c.$t("Select Dates"))+" ",1),bt]),h(e(et),{range:"","preset-dates":e(R),modelValue:e(s).dates,"onUpdate:modelValue":n[0]||(n[0]=o=>e(s).dates=o),format:"dd-MM-yyyy","enable-time-picker":!1,"input-class-name":"form-control form-control-solid"},{"preset-date-range-button":m(({label:o,value:_,presetDate:f})=>[t("span",{role:"button",tabindex:0,onClick:D=>f(_),onKeyup:[Y(B(D=>f(_),["prevent"]),["enter"]),Y(B(D=>f(_),["prevent"]),["space"])]},a(o),41,vt)]),_:1},8,["preset-dates","modelValue"])])]),t("div",ft,[h(H,{name:"branches",label:e(P),text:"name",value:"id",options:e(I),modelValue:e(s).selected_branch,"onUpdate:modelValue":n[1]||(n[1]=o=>e(s).selected_branch=o),selected:e(s).selected_branch,mode:"single"},null,8,["label","options","modelValue","selected"])]),t("div",gt,[t("div",wt,[t("div",yt,[t("button",{class:"btn btn-primary",onClick:E,disabled:e(s).dates==null},a(c.$t("View")),9,xt)]),t("div",Dt,[t("button",{class:"btn btn-success",onClick:n[2]||(n[2]=o=>j()),disabled:e(s).dates==null},a(c.$t("Print")),9,kt)])])])])])]),e(i).general_data!=null?(l(),d("div",Mt,[t("div",Vt,[t("div",$t,[t("div",St,[t("div",Yt,[e(s).is_listing?(l(),d("div",Bt,[h(N)])):(l(),d("div",Ct,[t("div",Tt,[t("div",At,[Lt,t("div",Ot,[t("span",null,[t("label",null,[Pt,u(" "+a(e(i).printed_on),1)])])]),t("div",Rt,[t("span",null,[t("label",null,[It,u(" "+a(e(i).date),1)])])]),t("div",Et,[t("span",null,[t("label",null,[jt,u(" "+a(e(i).branch),1)])])])])]),t("div",Gt,[t("div",Ht,[t("div",Nt,[t("div",Ft,[t("table",Kt,[qt,t("tbody",null,[(l(!0),d(w,null,y(e(i).general_data,(o,_)=>(l(),d("tr",null,[t("td",Ut,a(o.title),1),t("td",Wt,a(o.count),1),t("td",zt,a(e(p)(o.amount)),1)]))),256))])])]),t("div",Xt,[t("table",Jt,[Qt,t("tbody",null,[(l(!0),d(w,null,y(e(i).order_types,(o,_)=>(l(),d("tr",null,[t("td",Zt,a(o.title),1),t("td",te,a(o.count),1),t("td",ee,a(e(p)(o.amount)),1)]))),256))])])]),t("div",se,[t("table",oe,[ae,t("tbody",null,[(l(!0),d(w,null,y(e(i).payment_wise_count,(o,_)=>(l(),d("tr",null,[t("td",ne,a(o.title),1),t("td",le,a(o.count),1),t("td",de,a(e(p)(o.amount)),1)]))),256))])])])])])])]))])])])])])):S("",!0)])])]),_:1})}}};export{ge as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ServerMessage.EFQMOwoZ.js","assets/index.sP6fhsqN.js","assets/index.KTHCd6a8.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
