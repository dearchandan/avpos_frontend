import A from"./ServerMessage.Wf7puwQc.js";import{_ as q}from"./VSelectInput.BEJPoRrx.js";import{F as N}from"./vee-validate.esm.9aElOHQY.js";import{c as C,a as v,d as B}from"./index.esm.0vhAmrVd.js";import{_ as p}from"./VTextInput.ZgtOiOMJ.js";/* empty css                                                   */import{u as x,r as F,e as P,b as U,v as I,g as n,h as r,i as t,t as _,k as l,w as D,l as c,p as E,j as b}from"./index.GdMxdeuf.js";import{C as j}from"./ClipLoader.UcGuNCxH.js";import"./VTooltip.Ewb958d6.js";/* empty css                                                   */const z={class:"modal hide",id:"addModifierOptionModal",tabindex:"-1","aria-labelledby":"Add Option","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},J={class:"modal-dialog modal-dialog-centered"},L={class:"modal-content"},T={class:"modal-header"},G={key:0,class:"modal-title"},H={key:1,class:"modal-title"},K=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Q={class:"modal-body"},R={class:"row"},W={class:"col-md-12"},X={class:"col-md-12"},Y={class:"col-12 mb-4"},Z={key:0,class:"col-md-12"},ee={key:0,class:"py-3"},ae={class:"mt-2 text-end"},oe=["disabled"],se={key:1,class:"pt-0"},te={key:2,class:"pt-0"},ge={__name:"AddModifierOption",props:["show_add_option_modal","edit_data","modifier_slack"],emits:["closeAddModifierOptionModal"],setup(y,{emit:k}){const{t:o}=x(),m=F({option_name:o("Option Name"),option_name_ar:o("Option Name (Arabic)"),pricing_method:o("Pricing Method"),sale_price:o("Sale Price")}),u={server_messages:{type:"",messages:""},is_saving:!1,option_slack:"",option_name:"",option_name_ar:"",pricing_method:1,sale_price:""},e=P({...u});U();const O=C({option_name:v().required(o("name is required",{name:o("Option Name")})).min(3,o("name must be at least n characters",{name:o("Option Name"),number:3})),pricing_method:v().required(o("name is required",{name:o("Pricing Method")})),sale_price:B().typeError(o("must be a number",{name:o("Amount")})).min(0,o("Amount must be more than 0")).nullable().when("pricing_method",{is:a=>a==1,then:a=>a.required(o("name is required",{name:o("Sale Price")})),otherwise:a=>a.nullable()})}),V=[{id:"1",name:o("Custom Pricing")},{id:"2",name:o("Based On Total Cost of Items Added")}],M=k,g=y;function h(a=""){w(),$("#addModifierOptionModal").modal("hide"),M("closeAddModifierOptionModal",a)}I(()=>g.edit_data,a=>{a&&(e.option_slack=a.slack,e.option_name=a.option_name,e.option_name_ar=a.option_name_ar,e.pricing_method=a.pricing_method,e.sale_price=a.sale_price)});async function S(){var a=new FormData;a.append("modifier_slack",g.modifier_slack),a.append("option_name",e.option_name),a.append("option_name_ar",e.option_name_ar==null?"":e.option_name_ar),a.append("pricing_method",e.pricing_method),a.append("sale_price",e.sale_price),a.append("option_slack",e.option_slack);var i=e.option_slack!=""&&e.option_slack!=null?"/api/modifier/option/update":"/api/modifier/option/save";await axios.post(i,a).then(s=>{if(e.is_saving=!0,s.data.status_code==200)toast.success(s.data.msg),e.is_saving=!1,document.getElementById("addOptionForm").reset(),s.data.data.modifier_option.pricing_method==2?h(s.data.data.modifier_option.slack):h();else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(s.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=s.data.msg}e.is_saving=!1}}).catch(s=>{e.server_messages.type="error",e.server_messages.messages=s,e.is_saving=!1,console.log(s)})}function w(){Object.assign(e,u)}return(a,i)=>{const s=q,f=A;return n(),r("div",z,[t("div",J,[t("div",L,[t("div",T,[e.option_slack!=""&&e.option_slack!=null?(n(),r("h5",G,_(a.$t("Update Option")),1)):(n(),r("h5",H,_(a.$t("Add Option")),1)),K]),t("div",Q,[l(b(N),{"validation-schema":b(O),onSubmit:S,enctype:"multipart/form-data","initial-values":e,id:"addOptionForm"},{default:D(()=>[t("div",R,[t("div",W,[l(p,{type:"text",name:"option_name",modelValue:e.option_name,"onUpdate:modelValue":i[0]||(i[0]=d=>e.option_name=d),label:m.value.option_name,required:!0},null,8,["modelValue","label"])]),t("div",X,[l(p,{type:"text",name:"option_name_ar",modelValue:e.option_name_ar,"onUpdate:modelValue":i[1]||(i[1]=d=>e.option_name_ar=d),label:m.value.option_name_ar},null,8,["modelValue","label"])]),t("div",Y,[l(s,{name:"pricing_method",label:m.value.pricing_method,required:"",options:V,modelValue:e.pricing_method,"onUpdate:modelValue":i[2]||(i[2]=d=>e.pricing_method=d),size:"normal"},null,8,["label","modelValue"])]),e.pricing_method==1?(n(),r("div",Z,[l(p,{type:"number",name:"sale_price",modelValue:e.sale_price,"onUpdate:modelValue":i[3]||(i[3]=d=>e.sale_price=d),label:m.value.sale_price,required:!0},null,8,["modelValue","label"])])):c("",!0)]),e.server_messages.messages!=""?(n(),r("div",ee,[l(f,{server_messages:e.server_messages},null,8,["server_messages"])])):c("",!0),t("div",ae,[t("button",{type:"submit",class:"btn btn-primary",disabled:e.is_saving},[e.is_saving?(n(),E(j,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):c("",!0),e.is_saving?(n(),r("span",se,_(a.$t("Saving...")),1)):(n(),r("span",te,_(a.$t("Save")),1))],8,oe)])]),_:1},8,["validation-schema","initial-values"])])])])])}}};export{ge as default};
