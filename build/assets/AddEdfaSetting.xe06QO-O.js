import V from"./ServerMessage.Re9KOdbP.js";import{_ as A}from"./VTextArea.S7BcQM-W.js";import{_ as q}from"./VTextInput.pcaNaUkX.js";import{c as P,a as c}from"./index.esm.e6McCFlz.js";import{C as x}from"./ClipLoader.gDBpDd3b.js";/* empty css                                                   */import{u as N,F}from"./vee-validate.esm.reM-LHjC.js";import{u as $,b as E,d as M,r as D,e as U,P as Y,g as i,h as d,i as s,l,w as C,j as m,t as r,k as h,m as y,p as T}from"./index.li3fCRRM.js";import"./VTooltip.pHzwBjkF.js";/* empty css                                                   */const B={class:"row"},I={class:"col-12 py-3"},R={class:"card"},L={class:"row mb-3"},z={class:"col-12"},K={class:"pb-2 mb-2 border-bottom"},O={class:"text-danger"},j={class:"text-danger"},G={class:"col-12"},J={class:"row mb-3"},H={class:"col-4"},Q={class:"label"},W=s("span",{class:"text-danger"},"*",-1),X={class:"col-8"},Z={class:"row mb-3"},ee={class:"col-4"},se={class:"label"},te=s("span",{class:"text-danger"},"*",-1),ae={class:"col-8"},oe={class:"row mb-3"},re={class:"col-4"},ne={class:"label"},ie=s("span",{class:"text-danger"},"*",-1),le={class:"col-8"},me={class:"my-3"},_e={key:0,class:"row py-3"},ce={class:"col-12 mt-2 text-end"},de=["disabled"],pe={key:1,class:"pt-0"},ue={key:2,class:"pt-0"},qe={__name:"AddEdfaSetting",props:{active_payment_gateway:{type:[Object,Array]}},setup(v){N();const{t}=$(),g=v,b=E();M(()=>b.user.currency.symbol);const p=D({merchant_key:t("Merchant Key"),password:t("Password"),sms_template:t("SMS Template"),sms_note:t("Note: Square bracket([ ]) words will replace with the data like 'Your invoice number:[INVOICE_NUMBER]' to 'Your invoice number:001' in SMS"),edfa_note1:t('1. If you are using the EDFAPAY then set "https://wosul.sa/edfapay/capture_invoice_payment" URL as Notify URL to EDFAPAY Portal.'),edfa_note2:t("2. Contact the EDFAPAY support team for add the Notify URL.")}),e=U({...{server_messages:{type:"",messages:""},is_submitting:!1,merchant_key:"",password:"",sms_template:"",constant_name:"EDFAPAY"}}),_=Y(g,"active_payment_gateway");_.value.name=="EDFAPAY"&&(e.merchant_key=_.value.key,e.password=_.value.password,e.sms_template=_.value.sms_template);let f=P().shape({constant_name:c().required(t("name is required",{name:t("Payment Gateway Name")})),merchant_key:c().required(t("name is required",{name:t("Merchant Key")})),sms_template:c().required(t("name is required",{name:t("SMS Template")})),password:c().required(t("name is required",{name:t("Password")}))});new FormData;async function w(){e.is_submitting=!0;var o=new FormData;o.append("merchant_key",e.merchant_key),o.append("sms_template",e.sms_template),o.append("password",e.password),o.append("payment_gateway",e.constant_name),await axios.post("/api/payment_gateway_setting/save",o,{}).then(a=>{if(a.data.status_code==200)toast.success(a.data.msg),e.is_submitting=!1,router.push("/payment_gateway");else{try{e.server_messages.type="error",e.server_messages.messages=JSON.parse(a.data.msg)}catch{e.server_messages.type="error",e.server_messages.messages=a.data.msg}e.is_submitting=!1}}).catch(a=>{e.server_messages.type="error",e.server_messages.messages=a,e.is_submitting=!1})}return(o,a)=>{const u=q,k=A,S=V;return i(),d("div",null,[s("div",B,[l(m(F),{onSubmit:w,"validation-schema":m(f),"initial-values":e},{default:C(()=>[s("div",I,[s("div",R,[s("div",L,[s("div",z,[s("ul",K,[s("li",O,[s("b",null,r(m(p).edfa_note1),1)]),s("li",j,[s("b",null,r(m(p).edfa_note2),1)])])]),s("div",G,[s("div",J,[s("div",H,[s("label",Q,[h(r(o.$t("Merchant Key")),1),W])]),s("div",X,[l(u,{type:"text",name:"merchant_key",modelValue:e.merchant_key,"onUpdate:modelValue":a[0]||(a[0]=n=>e.merchant_key=n),label:"",required:!0,islabel:!1,size:"small"},null,8,["modelValue"])])]),s("div",Z,[s("div",ee,[s("label",se,[h(r(o.$t("Password")),1),te])]),s("div",ae,[l(u,{type:"text",name:"password",modelValue:e.password,"onUpdate:modelValue":a[1]||(a[1]=n=>e.password=n),label:"",required:!0,islabel:!1,size:"small"},null,8,["modelValue"])])]),s("div",oe,[s("div",re,[s("label",ne,[h(r(o.$t("SMS Template")),1),ie])]),s("div",le,[l(k,{name:"sms_template",modelValue:e.sms_template,"onUpdate:modelValue":a[2]||(a[2]=n=>e.sms_template=n),label:"",required:!0,islabel:!1},null,8,["modelValue"]),s("span",me,r(m(p).sms_note),1)])])])])]),e.server_messages.messages!=""?(i(),d("div",_e,[l(S,{server_messages:e.server_messages},null,8,["server_messages"])])):y("",!0)]),s("div",ce,[s("button",{type:"submit",class:"btn btn-primary",disabled:e.is_submitting},[e.is_submitting?(i(),T(x,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):y("",!0),e.is_submitting?(i(),d("span",pe,r(o.$t("Saving...")),1)):(i(),d("span",ue,r(o.$t("Save")),1))],8,de)])]),_:1},8,["validation-schema","initial-values"])])])}}};export{qe as default};
