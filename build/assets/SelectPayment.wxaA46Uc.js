import{b as G,bT as X,e as J,d as r,r as y,v as H,g as d,p as M,i as t,t as a,h as i,x as O,y as S,j as s,k as W,F as N,K as h,N as C,n as p,Q as Y,L as P,m as c,l as tt,af as st,I as F,q as ot,_ as et}from"./index.sP6fhsqN.js";import{C as at}from"./ClipLoader._89zL49D.js";/* empty css                                                   */const lt="/assets/cash.xvfenXaQ.svg",nt="data:image/svg+xml,%3csvg%20width='37'%20height='31'%20viewBox='0%200%2037%2031'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.43848%200.945702C6.67969%201.14804%206.04375%201.67558%205.6752%202.40547C5.45117%202.85351%205.45117%202.85351%205.1332%205.8164L4.87305%208.2373L3.53613%208.28066C2.06191%208.32402%201.81621%208.38183%201.1875%208.81543C0.74668%209.11894%200.479297%209.44414%200.226367%209.99336L0.03125%2010.4053V19.2289V28.0453L0.305859%2028.5945C0.623828%2029.2377%200.970703%2029.5773%201.65723%2029.9098L2.12695%2030.1338H15.7852C26.6105%2030.1338%2029.5084%2030.1121%2029.7469%2030.0398C30.4695%2029.823%2031.2211%2029.1148%2031.5174%2028.3633C31.6619%2028.0092%2031.6764%2027.7996%2031.7053%2026.3687L31.7342%2024.7717L32.6086%2024.7789C33.3746%2024.7861%2033.5408%2024.7645%2033.9021%2024.6199C34.6682%2024.3092%2035.3547%2023.5215%2035.5426%2022.7266C35.6727%2022.1918%2037.0096%205.90312%2036.959%205.45508C36.8723%204.60957%2036.2508%203.71347%2035.492%203.33047C35.2969%203.2293%2034.9283%203.11367%2034.6754%203.07031C34.2201%202.99082%208.39238%200.822849%208.02383%200.837303C7.92266%200.837303%207.65527%200.887888%207.43848%200.945702ZM21.1689%203.35937C28.3811%203.95918%2034.4152%204.47949%2034.5742%204.52285C34.95%204.63125%2035.4486%205.12265%2035.5137%205.45508C35.5354%205.59961%2035.2463%209.46582%2034.8633%2014.0475C34.1262%2022.8783%2034.1479%2022.6832%2033.7648%2023.0301C33.4541%2023.3119%2033.1%2023.3914%2032.3918%2023.3408L31.727%2023.2902L31.7053%2016.8875L31.6836%2010.4775L31.5102%2010.0439C31.2717%209.44414%2030.549%208.72148%2029.9492%208.48301L29.5156%208.30957L17.9387%208.28789L6.35449%208.27344V8.10723C6.35449%207.79648%206.85312%203.31601%206.90371%203.17871C7.04824%202.77402%207.63359%202.28984%207.98047%202.27539C8.02383%202.27539%2013.9568%202.75957%2021.1689%203.35937ZM29.2988%209.79824C29.6674%209.89941%2030.0937%2010.3258%2030.1949%2010.6943C30.2383%2010.8533%2030.2744%2011.3303%2030.2744%2011.7566V12.5371H15.8574H1.44043V11.7205C1.44043%2010.7449%201.50547%2010.4703%201.83066%2010.1596C2.30762%209.69707%201.36816%209.72598%2015.8213%209.71875C25.2303%209.71875%2029.0893%209.74043%2029.2988%209.79824ZM30.26%2015.5145L30.2744%2017.0176H15.8574H1.44043V15.5V13.9824L15.843%2013.9969L30.2383%2014.0186L30.26%2015.5145ZM30.2744%2022.9578C30.2744%2025.8773%2030.2455%2027.5539%2030.1949%2027.7346C30.1588%2027.8863%2030.0215%2028.1176%2029.9059%2028.2549C29.4578%2028.768%2030.5562%2028.7318%2015.7057%2028.7102L2.33652%2028.6885L2.07637%2028.515C1.93906%2028.4211%201.74395%2028.226%201.65%2028.0887L1.47656%2027.8285L1.45488%2023.1457L1.44043%2018.4629H15.8574H30.2744V22.9578Z'%20fill='%231E3EA3'/%3e%3cpath%20d='M19.7732%2020.8332L19.5781%2021.0355V23.5865V26.1375L19.7877%2026.3471L19.9973%2026.5566H23.7334C26.1543%2026.5566%2027.5129%2026.5277%2027.6068%2026.4844C27.9393%2026.3037%2027.9609%2026.1375%2027.9609%2023.5938C27.9609%2021.05%2027.9393%2020.8838%2027.6068%2020.7031C27.5129%2020.6598%2026.1471%2020.6309%2023.7189%2020.6309H19.9684L19.7732%2020.8332ZM26.5156%2023.5938V25.1113H23.7695H21.0234V23.5938V22.0762H23.7695H26.5156V23.5938Z'%20fill='%231E3EA3'/%3e%3c/svg%3e",dt={class:"modal hide cashier-layout-modal",id:"paymentModal",tabindex:"5","aria-hidden":"true","aria-modal":"true",role:"dialog","data-bs-backdrop":"static","data-bs-keyboard":"false"},it={class:"modal-dialog modal-lg modal-dialog-centered"},ct={class:"modal-content"},rt={class:"modal-header modal-title"},ut={class:"mb-0"},_t=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),mt={class:"modal-body bg-light"},ht={class:"row"},pt={class:"col-md-4 paymentmathed-tab-wrap"},vt={class:"nav nav-tabs paymentmathed-tabs",id:"myTab3",role:"tablist"},gt=["onClick"],bt={class:"icon"},ft={key:0,src:lt,alt:""},yt={key:1,src:nt,alt:""},Ct={class:"col-md-8"},kt={class:"tab-content paymentmathed-tab-content"},Tt={class:"tab-pane fade show active",role:"tabpanel"},Lt={key:0,class:"row mb-4"},wt={class:"col-12"},$t={class:"form-field mb-md-0"},Vt={class:"label"},At={key:1,class:"row mb-4"},Dt={class:"col-8"},xt={class:"form-field mb-md-0"},Et={class:"label"},Ht={class:"col-4"},Mt={class:"form-field mb-md-0"},Ot={class:"label"},St={class:"row mb-4"},Nt={class:"col-12"},Pt={class:"form-field mb-md-0"},Ft={class:"label"},Ut={class:"apply-discount mt-0 mb-2"},It={class:"checkbox-wrap"},Zt={"data-bs-toggle":"collapse","data-bs-target":"#discountfeilds"},Rt=["checked"],qt={key:0,class:"expand",id:"discountfeilds"},Bt={class:"discount-feilds"},zt={class:"row gx-3"},Kt={class:"col-5 col-md-5 m-0"},Qt={class:"form-field mb-0"},jt={class:"label"},Gt={value:""},Xt=["value"],Jt={class:"col-7 col-md-7 m-0"},Wt={class:"form-field position-relative mb-0 input-select"},Yt={class:"label"},ts={class:"position-relative"},ss=["disabled"],os={class:"input-select-wrap p-0 m-0"},es=["disabled"],as=t("option",{value:"1"},"%",-1),ls={value:"2"},ns={class:"checkout-data-table"},ds={class:"w-100"},is={align:"right"},cs={key:0},rs={class:"text-success"},us={align:"right",class:"text-success"},_s={key:1},ms={align:"right"},hs={key:2},ps={class:"text-success"},vs={align:"right",class:"text-success"},gs={key:3},bs={align:"right"},fs={key:4},ys={align:"right"},Cs={key:5},ks={align:"right"},Ts={key:6},Ls={align:"right"},ws={class:"total-tr"},$s={align:"right"},Vs={class:"mt-4"},As={key:0,class:"alert alert-warning fw-bold text-center mb-0"},Ds=["disabled"],xs={key:1,class:"pt-0"},Es={key:2},Hs={key:0},Ms={key:1},Is={__name:"SelectPayment",setup(Os){const{isAuthorized:U}=F(),I=G(),e=X();J({type:"",messages:""});const A=r(()=>I.user.currency.symbol),v=r({get:()=>e.cash_amount,set:o=>e.setCashAmount(o)}),k=r({get:()=>e.card_amount,set:o=>e.setCardAmount(o)}),Z=r(()=>parseFloat(v.value)+parseFloat(k.value)),T=r(()=>_.round(e.change_amount,2)),w=r({get:()=>e.order_note,set:o=>e.setOrderNote(o)}),D=r(()=>e.action_type);function R(o){e.setPaymentMethod(o),o==3&&(b.value=!1)}const V=r(()=>e.payment_method);function q(o){return isNaN(o)}const u=y(""),g=y(""),m=y(1),b=r({get:()=>e.is_discount_applied,set:o=>e.setIsDiscountApplied(o)});H(()=>b.value,o=>{o&&B(),L()}),H(()=>u.value,o=>{o?(g.value=u.value.value,m.value=u.value.type,m.slack=u.value.slack):(g.value="",m.value=1,m.slack="")});function L(){g.value!=""?e.setDiscount(g.value,parseInt(m.value),m.slack):e.clearDiscount()}const x=y([]);async function B(){let o=new FormData;o.append("order_amount",e.grandTotal.grand_product_amount);var n=await axios.post("api/cashier/discounts",o);x.value=n.data.data.order_discounts}const f=y(!1),{placeOrder:z}=F(),E=y(0);async function K(){f.value=!0;let o=await z();o.data.status_code==200?(toast.success(o.data.msg),$("#paymentModal").modal("hide"),T.value>0&&(E.value=T.value,$("#ChangeAmountModal").modal("show")),e.clearCart(),f.value=!1,window.open(o.data.data.receipt_link,"_blank")):(toast.error(o.data.msg),f.value=!1)}r(()=>parseFloat(e.grandTotal.grand_product_amount)>=0);const Q=ot(()=>et(()=>import("./ChangeAmountModal.uMJcXcDM.js"),__vite__mapDeps([0,1,2]))),j=r(()=>e.payment_methods);return(o,n)=>(d(),M(st,{to:"body"},[t("div",dt,[t("div",it,[t("div",ct,[t("div",rt,[t("h2",ut,a(o.$t("Payment Options")),1),_t]),t("div",mt,[t("div",ht,[t("div",pt,[t("ul",vt,[(d(!0),i(N,null,O(s(j),(l,Ss)=>(d(),i("li",{class:"nav-item",role:"",onClick:Ns=>R(l.id)},[t("button",{class:S(["nav-link",{active:l.id==s(V)}]),type:"button",role:"tab","aria-selected":"true",tabindex:"-1"},[t("span",bt,[l.constant=="CASH"?(d(),i("img",ft)):(d(),i("img",yt))]),W(" "+a(l.name),1)],2)],8,gt))),256))])]),t("div",Ct,[t("div",kt,[t("div",Tt,[s(V)==1?(d(),i("div",Lt,[t("div",wt,[t("div",$t,[t("label",Vt,a(o.$t("Cash Amount")),1),h(t("input",{type:"text",placeholder:"",class:"form-control form-control-lg",required:"","onUpdate:modelValue":n[0]||(n[0]=l=>p(v)?v.value=l:null)},null,512),[[C,s(v)]])])])])):(d(),i("div",At,[t("div",Dt,[t("div",xt,[t("label",Et,a(o.$t("Card Amount")),1),h(t("input",{type:"text",placeholder:"",class:"form-control form-control-lg",required:"","onUpdate:modelValue":n[1]||(n[1]=l=>p(k)?k.value=l:null)},null,512),[[C,s(k)]])])]),t("div",Ht,[t("div",Mt,[t("label",Ot,a(o.$t("Cash Amount")),1),h(t("input",{type:"text",placeholder:"",class:"form-control form-control-lg",required:"","onUpdate:modelValue":n[2]||(n[2]=l=>p(v)?v.value=l:null)},null,512),[[C,s(v)]])])])])),t("div",St,[t("div",Nt,[t("div",Pt,[t("label",Ft,a(o.$t("Order Note")),1),h(t("textarea",{type:"text",placeholder:"",class:"form-control form-control-lg",required:"","onUpdate:modelValue":n[3]||(n[3]=l=>p(w)?w.value=l:null)},null,512),[[C,s(w)]])])])]),t("div",Ut,[t("div",It,[t("label",Zt,[h(t("input",{type:"checkbox",name:"Apply_Discount","onUpdate:modelValue":n[4]||(n[4]=l=>p(b)?b.value=l:null),checked:s(b),class:"me-1"},null,8,Rt),[[Y,s(b)]])]),t("span",null,a(o.$t("Apply Discount")),1)]),s(b)?(d(),i("div",qt,[t("div",Bt,[t("div",zt,[t("div",Kt,[t("div",Qt,[t("label",jt,a(o.$t("Discount")),1),h(t("select",{class:"form-control",tabindex:"-1","onUpdate:modelValue":n[5]||(n[5]=l=>p(u)?u.value=l:null),onChange:n[6]||(n[6]=l=>L())},[t("option",Gt,a(o.$t("Custom Discount")),1),(d(!0),i(N,null,O(s(x),l=>(d(),i("option",{value:l},a(l.name),9,Xt))),256))],544),[[P,s(u)]])])]),t("div",Jt,[t("div",Wt,[t("label",Yt,a(o.$t("Amount/Percentage")),1),t("div",ts,[h(t("input",{type:"text",placeholder:"00",class:"form-control",disabled:s(u)!="","onUpdate:modelValue":n[7]||(n[7]=l=>p(g)?g.value=l:null),onInput:n[8]||(n[8]=l=>L())},null,40,ss),[[C,s(g)]]),t("div",os,[h(t("select",{class:"form-control w-100",tabindex:"-1",disabled:s(u)!="","onUpdate:modelValue":n[9]||(n[9]=l=>p(m)?m.value=l:null),onChange:n[10]||(n[10]=l=>L())},[as,t("option",ls,a(s(A)),1)],40,es),[[P,s(m)]])])])])])])])])):c("",!0)]),t("div",ns,[t("table",ds,[t("tbody",null,[t("tr",null,[t("td",null,a(o.$t("Subtotal")),1),t("td",is,a(s(e).grandTotal.subtotal),1)]),s(e).grandTotal.product_discount>0?(d(),i("tr",cs,[t("td",rs,a(o.$t("Product Discount")),1),t("td",us,a(s(e).grandTotal.product_discount),1)])):c("",!0),s(e).grandTotal.product_discount>0?(d(),i("tr",_s,[t("td",null,a(o.$t("Subtotal After Product Discount")),1),t("td",ms,a(s(e).grandTotal.subtotal_after_product_discount),1)])):c("",!0),s(e).grandTotal.order_discount>0?(d(),i("tr",hs,[t("td",ps,a(o.$t("Order Discount")),1),t("td",vs,a(s(e).grandTotal.order_discount),1)])):c("",!0),s(e).grandTotal.order_discount>0?(d(),i("tr",gs,[t("td",null,a(o.$t("Subtotal After Order Discount")),1),t("td",bs,a(s(e).grandTotal.subtotal_after_order_discount),1)])):c("",!0),s(e).grandTotal.additional_fee>0?(d(),i("tr",fs,[t("td",null,a(o.$t("Additional Fee")),1),t("td",ys,a(s(e).grandTotal.additional_fee),1)])):c("",!0),s(e).grandTotal.tobacco_tax>0?(d(),i("tr",Cs,[t("td",null,a(o.$t("Tobacco Tax")),1),t("td",ks,a(s(e).grandTotal.tobacco_tax),1)])):c("",!0),s(e).grandTotal.tax>0?(d(),i("tr",Ts,[t("td",null,a(o.$t("Tax")),1),t("td",Ls,a(s(e).grandTotal.tax),1)])):c("",!0)]),t("tfoot",null,[t("tr",ws,[t("td",null,[t("h5",null,a(o.$t("Total")),1)]),t("td",$s,[t("h5",null,a(s(e).grandTotal.total)+" "+a(s(A)),1)])])])])]),t("div",Vs,[s(e).grandTotal.total<0||s(e).cash_amount<0||s(e).card_amount<0?(d(),i("div",As,a(o.$t("Order must not contain negative values")),1)):c("",!0),s(e).grandTotal.total>0&&s(e).cash_amount>=0||s(e).card_amount>=0&&s(U)("A_CLOSE_ORDER")?(d(),i("button",{key:1,type:"button",class:S(["btn btn-primary btn-rounded btn-lg w-100",{disabled:s(T)<0||q(s(T))||s(e).grandTotal.total<0||s(V)==2&&s(Z)<s(e).grandTotal.total}]),disabled:s(f),onClick:n[11]||(n[11]=l=>K())},[s(f)?(d(),M(at,{key:0,color:"white",size:"20px",class:"pt-2 pe-2"})):c("",!0),s(f)?(d(),i("span",xs,a(o.$t("Placing Order...")),1)):(d(),i("span",Es,[s(D)=="CLOSE"?(d(),i("span",Hs,[t("span",null,a(o.$t("CLOSE ORDER")),1)])):c("",!0),s(D)=="SEND_TO_KITCHEN"?(d(),i("span",Ms,a(o.$t("SEND TO KITCHEN")),1)):c("",!0)]))],10,Ds)):c("",!0)])])])])])])])])]),tt(s(Q),{change:s(E)},null,8,["change"])]))}};export{Is as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ChangeAmountModal.uMJcXcDM.js","assets/index.sP6fhsqN.js","assets/index.KTHCd6a8.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
